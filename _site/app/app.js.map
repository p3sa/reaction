{"version":3,"sources":["meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variantForm/childVariant.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variantForm/variantForm.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variantList/variantList.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variant.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productDetail/attributes.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productDetail/edit.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productDetail/productImageGallery.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productDetail/social.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productGrid/publishControls.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productList/productList.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/productSettings/productSettings.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/templates/products/products.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/client/index.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/gridItemControls.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/gridItemNotice.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/productGrid.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/productGridItems.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/products.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/components/variantForm.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/gridItemControlsContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/gridItemNoticeContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/gridPublishContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/productGridContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/productGridItemsContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/productsContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-variant/containers/variantFormContainer.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/express/checkoutButton.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/express/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/payflow/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/payflow/payflowForm.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/return/cancel.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/return/done.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/checkout/return/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/settings/express.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/templates/settings/payflow.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/lib/paypalRestApi.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/collections/schemas/paypal.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/api/express.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/api/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-paypal/lib/api/payflow.js","meteor://ğŸ’»app/imports/plugins/included/inventory/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/client/settings/templates/example.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/client/settings/components/exampleSettingsForm.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/client/settings/components/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/client/settings/containers/exampleSettingsFormContainer.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/client/settings/containers/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/client/checkout/example.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/lib/collections/schemas/example.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/lib/api/example.js","meteor://ğŸ’»app/imports/plugins/included/payments-example/lib/api/index.js","meteor://ğŸ’»app/imports/plugins/included/shipping-rates/client/templates/settings/rates.js","meteor://ğŸ’»app/imports/plugins/included/shipping-rates/client/templates/index.js","meteor://ğŸ’»app/imports/plugins/included/shipping-rates/client/index.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/apps/facebook.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/apps/googleplus.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/apps/pinterest.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/apps/twitter.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/dashboard/social.js","meteor://ğŸ’»app/imports/plugins/included/social/client/templates/social.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/facebook.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/googleplus.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/pinterest.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/settings.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/socialButtons.js","meteor://ğŸ’»app/imports/plugins/included/social/client/components/twitter.js","meteor://ğŸ’»app/imports/plugins/included/social/client/containers/socialSettingsContainer.js","meteor://ğŸ’»app/imports/plugins/included/social/client/index.js","meteor://ğŸ’»app/imports/plugins/included/social/lib/helpers.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/client/templates/searchModal/searchModal.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/client/index.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/components/searchModal.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/containers/searchModalContainer.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/helpers/accountsTable.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/helpers/index.js","meteor://ğŸ’»app/imports/plugins/included/ui-search/lib/helpers/ordersTable.js","meteor://ğŸ’»app/imports/plugins/included/analytics/client/templates/reactionAnalytics.js","meteor://ğŸ’»app/imports/plugins/included/analytics/client/index.js","meteor://ğŸ’»app/imports/plugins/included/analytics/client/startup.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/templates/codes.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/templates/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/templates/settings.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/collections/codes.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/client/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/lib/collections/schemas/codes.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/lib/collections/schemas/config.js","meteor://ğŸ’»app/imports/plugins/included/discount-codes/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/client/settings/rates.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/client/collections/rates.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/client/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/lib/collections/schemas/config.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/discount-rates/lib/collections/schemas/rates.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/templates/notifications.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/components/notificationComponent.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/components/notificationDropdown.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/components/notificationRoute.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/containers/notificationContainer.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/containers/notificationRouteContainer.js","meteor://ğŸ’»app/imports/plugins/included/notifications/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/checkout/authnet.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/settings/authnet.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/api/authnet.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/api/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/lib/collections/schemas/authnet.js","meteor://ğŸ’»app/imports/plugins/included/payments-authnet/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/client/checkout/braintree.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/client/settings/braintree.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/client/api/braintree.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/lib/collections/schemas/braintree.js","meteor://ğŸ’»app/imports/plugins/included/payments-braintree/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/client/checkout/stripe.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/client/settings/stripe.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/client/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/lib/collections/schemas/stripe.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/lib/api/index.js","meteor://ğŸ’»app/imports/plugins/included/payments-stripe/lib/api/stripe.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/templates/productAdmin.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/components/productAdmin.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/containers/productAdminContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-admin/client/index.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/templates/productDetailSimple.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/addToCartButton.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/childVariant.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/index.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/metadata.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/priceRange.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/productDetail.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/productField.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/productNotFound.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/tags.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/variant.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/components/variantList.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/productDetailContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/publishContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/socialContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/containers/variantListContainer.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/selectors/variants.js","meteor://ğŸ’»app/imports/plugins/included/product-detail-simple/client/index.js","meteor://ğŸ’»app/imports/plugins/included/search-mongo/client/settings/search.js","meteor://ğŸ’»app/imports/plugins/included/search-mongo/client/index.js","meteor://ğŸ’»app/imports/plugins/included/search-mongo/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/search-mongo/lib/collections/schemas/search.js","meteor://ğŸ’»app/imports/plugins/included/shippo/client/settings/carriers.js","meteor://ğŸ’»app/imports/plugins/included/shippo/client/settings/shippo.js","meteor://ğŸ’»app/imports/plugins/included/shippo/client/settings/shippoTableColumn.js","meteor://ğŸ’»app/imports/plugins/included/shippo/client/index.js","meteor://ğŸ’»app/imports/plugins/included/shippo/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/shippo/lib/collections/schemas/shippo.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/templates/smsSettings.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/actions/index.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/actions/settings.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/components/smsSettings.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/containers/smsSettingsContainer.js","meteor://ğŸ’»app/imports/plugins/included/sms/client/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/client/accounts/exemption.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/client/settings/avalara.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/client/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-avalara/lib/collections/schemas/schema.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/client/settings/taxcloud.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/client/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxcloud/lib/collections/schemas/schema.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxjar/client/settings/taxjar.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxjar/client/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxjar/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/included/taxes-taxjar/lib/collections/schemas/schema.js","meteor://ğŸ’»app/imports/plugins/included/default-theme/client/favicons.js","meteor://ğŸ’»app/imports/plugins/included/default-theme/client/index.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/completed/completed.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/login/login.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/progressBar/progressBar.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/review/review.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/checkout/checkout.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/cartDrawer/cartDrawer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/cartIcon/cartIcon.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/cartPanel/component/cartPanel.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/templates/cartPanel/container/cartPanelContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/cartDrawer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/cartIcon.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/cartItems.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/cartSubTotal.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/components/emptyCartDrawer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/container/cartDrawerContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/container/cartIconContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/container/cartSubTotalContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/container/emptyCartContainer.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/helpers/cart.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/methods/cart.js","meteor://ğŸ’»app/imports/plugins/core/checkout/client/index.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/packages/grid/grid.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/packages/grid/package.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/packages/packages.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/shop/settings/settings.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/import/import.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/settings/settings.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/templates/dashboard.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/actionView.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/index.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/packageList.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/shortcutBar.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/components/toolbar.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/containers/actionViewContainer.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/containers/packageListContainer.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/containers/toolbarContainer.js","meteor://ğŸ’»app/imports/plugins/core/dashboard/client/index.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/admin/admin.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/alerts/alerts.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/alerts/inlineAlerts.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/alerts/reactionAlerts.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/createContentMenu/createContentMenu.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/header/header.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/notFound/notFound.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/layout/notice/unauthorized.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/templates/theme/theme.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/components/coreLayout.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/components/printLayout.js","meteor://ğŸ’»app/imports/plugins/core/layout/client/index.js","meteor://ğŸ’»app/imports/plugins/core/layout/lib/blazeLayout.js","meteor://ğŸ’»app/imports/plugins/core/layout/lib/components.js","meteor://ğŸ’»app/imports/plugins/core/layout/lib/index.js","meteor://ğŸ’»app/imports/plugins/core/layout/lib/reactionLayout.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/list/items.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/list/ordersList.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/list/pdf.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/list/summary.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/orderPage/details.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/orderPage/orderPage.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/workflow/shippingInvoice.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/workflow/shippingSummary.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/workflow/shippingTracking.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/workflow/workflow.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/templates/orders.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/invoice.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/invoiceActions.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/lineItems.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/orderActions.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/orderSummary.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/ordersList.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/productImage.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/components/totalActions.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/invoiceActionsContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/invoiceContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/lineItemsContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/orderSummaryContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/ordersActionContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/ordersListContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/containers/totalActionsContainer.js","meteor://ğŸ’»app/imports/plugins/core/orders/client/index.js","meteor://ğŸ’»app/imports/plugins/core/orders/lib/constants.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/checkout/payment/index.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/checkout/payment/methods.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/checkout/index.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/settings/index.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/settings/settings.js","meteor://ğŸ’»app/imports/plugins/core/payments/client/index.js","meteor://ğŸ’»app/imports/plugins/core/shipping/client/templates/checkout/shipping.js","meteor://ğŸ’»app/imports/plugins/core/shipping/client/templates/settings/shipping.js","meteor://ğŸ’»app/imports/plugins/core/shipping/client/templates/index.js","meteor://ğŸ’»app/imports/plugins/core/shipping/client/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/button.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/button.jsx","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/buttonSelect.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/editButton.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/flatButton.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/handle.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/iconButton.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/button/visibilityButton.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/card.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardBody.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardGroup.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardHeader.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardTitle.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cardToolbar.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/cards.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/cards/settingsCard.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/numericInput/numericInput.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/select/select.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/select/select.react.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tags/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tags/tag.jsx","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tags/tagItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tags/tagList.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tags/tags.jsx","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/textfield/textfield.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/upload/upload.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableComponents/filter.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableComponents/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableComponents/pagination.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableComponents/paginationButtons.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTable.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/table/sortableTableLegacy.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/alerts/alert.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/alerts/alerts.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/alerts/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/badge/badge.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/badge/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/buttonGroup/buttonGroup.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/buttonGroup/buttonToolbar.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/buttonGroup/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/checkbox/checkbox.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/checkbox/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/clickToCopy/clickToCopy.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/divider/divider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/divider/verticalDivider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/forms/form.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/forms/formActions.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/forms/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/icon/icon.jsx","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/icon/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/items/item.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/items/items.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/list/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/list/list.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/list/listItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/loading/loading.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/media/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/media/media.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/media/mediaGallery.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/menu/dropDownMenu.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/menu/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/menu/menu.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/menu/menuItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/metadata/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/metadata/metadata.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/metadata/metafield.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/modal/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/modal/overlay.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/multiselect/multiselect.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/popover/popover.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/popover/popoverContent.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/progress/circularProgress.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/slider/slider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/switch/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/switch/switch.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tabs/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tabs/tabItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tabs/tabList.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/toolbar/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/toolbar/toolbar.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/toolbar/toolbarGroup.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/toolbar/toolbarText.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/tooltip/tooltip.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/translation/currency.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/translation/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/translation/translation.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/components/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/templates/dashboard/dashboard.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/templates/themeDetails/themeDetails.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/templates/themeEditor/themeEditor.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/alertContainer.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/editContainer.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/mediaGalleryContainer.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/sortableItem.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/containers/tagListContainer.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/helpers/helpers.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/helpers/react-template-helper.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/admin.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/adminContextProvider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/dragDropProvider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/index.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/translatable.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/providers/translationProvider.js","meteor://ğŸ’»app/imports/plugins/core/ui/client/index.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/components/brand/brand.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/components/i18n/i18n.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/components/navbar/components/brand.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/components/navbar/components/navbar.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/components/navbar/containers/navbarContainer.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/components/navbar/navbar.js","meteor://ğŸ’»app/imports/plugins/core/ui-navbar/client/index.js","meteor://ğŸ’»app/imports/plugins/core/catalog/client/templates/settings.js","meteor://ğŸ’»app/imports/plugins/core/catalog/client/index.js","meteor://ğŸ’»app/imports/plugins/core/email/client/templates/email.js","meteor://ğŸ’»app/imports/plugins/core/email/client/actions/index.js","meteor://ğŸ’»app/imports/plugins/core/email/client/actions/logs.js","meteor://ğŸ’»app/imports/plugins/core/email/client/actions/settings.js","meteor://ğŸ’»app/imports/plugins/core/email/client/components/emailConfig.js","meteor://ğŸ’»app/imports/plugins/core/email/client/components/emailLogs.js","meteor://ğŸ’»app/imports/plugins/core/email/client/components/emailSettings.js","meteor://ğŸ’»app/imports/plugins/core/email/client/components/emailTableColumn.js","meteor://ğŸ’»app/imports/plugins/core/email/client/containers/emailConfig.js","meteor://ğŸ’»app/imports/plugins/core/email/client/containers/emailLogs.js","meteor://ğŸ’»app/imports/plugins/core/email/client/containers/emailSettings.js","meteor://ğŸ’»app/imports/plugins/core/email/client/index.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/templates/settings.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/components/publishControls.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/components/settings.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/components/simpleDiff.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/containers/publishContainer.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/containers/settingsContainer.js","meteor://ğŸ’»app/imports/plugins/core/revisions/client/index.js","meteor://ğŸ’»app/imports/plugins/core/revisions/lib/api/index.js","meteor://ğŸ’»app/imports/plugins/core/revisions/lib/api/revisions.js","meteor://ğŸ’»app/imports/plugins/core/taxes/client/settings/custom.js","meteor://ğŸ’»app/imports/plugins/core/taxes/client/settings/settings.js","meteor://ğŸ’»app/imports/plugins/core/taxes/client/index.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/config.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/taxcodes.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/taxes.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/schemas/taxrates.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/collections.js","meteor://ğŸ’»app/imports/plugins/core/taxes/lib/collections/index.js","meteor://ğŸ’»app/imports/plugins/core/templates/client/templates/settings.js","meteor://ğŸ’»app/imports/plugins/core/templates/client/index.js","meteor://ğŸ’»app/imports/plugins/core/templates/lib/collections/schemas/emailtemplates.js","meteor://ğŸ’»app/imports/plugins/core/templates/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/core/discounts/lib/collections/schemas/config.js","meteor://ğŸ’»app/imports/plugins/core/discounts/lib/collections/schemas/discounts.js","meteor://ğŸ’»app/imports/plugins/core/discounts/lib/collections/schemas/index.js","meteor://ğŸ’»app/imports/plugins/core/discounts/client/components/form.js","meteor://ğŸ’»app/imports/plugins/core/discounts/client/components/list.js","meteor://ğŸ’»app/imports/plugins/core/collections/lib/validation.js","meteor://ğŸ’»app/imports/plugins/core/collections/index.js","meteor://ğŸ’»app/imports/plugins/core/router/lib/hooks.js","meteor://ğŸ’»app/imports/plugins/core/router/lib/index.js","meteor://ğŸ’»app/imports/plugins/core/router/lib/router.js","meteor://ğŸ’»app/imports/plugins/core/router/client/app.js","meteor://ğŸ’»app/imports/plugins/core/router/client/browserRouter.js","meteor://ğŸ’»app/imports/plugins/core/router/client/index.js","meteor://ğŸ’»app/imports/plugins/core/router/client/startup.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/components/localizationSettings.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/containers/localizationSettingsContainer.js","meteor://ğŸ’»app/imports/plugins/core/i18n/client/index.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/components/tagGroup.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/components/tagGroupBody.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/components/tagGroupHeader.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/components/tagNav.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/containers/tagNavContainer.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/helpers/index.js","meteor://ğŸ’»app/imports/plugins/core/ui-tagnav/client/helpers/tags.js","meteor://ğŸ’»app/client/modules/accounts/templates/addressBook/add/add.js","meteor://ğŸ’»app/client/modules/accounts/templates/addressBook/edit/edit.js","meteor://ğŸ’»app/client/modules/accounts/templates/addressBook/form/form.js","meteor://ğŸ’»app/client/modules/accounts/templates/addressBook/grid/grid.js","meteor://ğŸ’»app/client/modules/accounts/templates/addressBook/review/review.js","meteor://ğŸ’»app/client/modules/accounts/templates/addressBook/addressBook.js","meteor://ğŸ’»app/client/modules/accounts/templates/dashboard/dashboard.js","meteor://ğŸ’»app/client/modules/accounts/templates/dropdown/helpers/helpers.js","meteor://ğŸ’»app/client/modules/accounts/templates/dropdown/helpers/index.js","meteor://ğŸ’»app/client/modules/accounts/templates/dropdown/helpers/templates.js","meteor://ğŸ’»app/client/modules/accounts/templates/dropdown/helpers/util.js","meteor://ğŸ’»app/client/modules/accounts/templates/dropdown/dropdown.js","meteor://ğŸ’»app/client/modules/accounts/templates/inline/inline.js","meteor://ğŸ’»app/client/modules/accounts/templates/login/loginForm.js","meteor://ğŸ’»app/client/modules/accounts/templates/members/member.js","meteor://ğŸ’»app/client/modules/accounts/templates/members/memberForm.js","meteor://ğŸ’»app/client/modules/accounts/templates/profile/profile.js","meteor://ğŸ’»app/client/modules/accounts/templates/updatePassword/updatePassword.js","meteor://ğŸ’»app/client/modules/accounts/templates/verify/verifyAccount.js","meteor://ğŸ’»app/client/modules/accounts/components/auth/index.js","meteor://ğŸ’»app/client/modules/accounts/components/auth/loginButtons.js","meteor://ğŸ’»app/client/modules/accounts/components/auth/signIn.js","meteor://ğŸ’»app/client/modules/accounts/components/auth/signUp.js","meteor://ğŸ’»app/client/modules/accounts/components/dropdown/mainDropdown.js","meteor://ğŸ’»app/client/modules/accounts/components/helpers/index.js","meteor://ğŸ’»app/client/modules/accounts/components/helpers/loginFormMessages.js","meteor://ğŸ’»app/client/modules/accounts/components/passwordReset/forgot.js","meteor://ğŸ’»app/client/modules/accounts/components/passwordReset/index.js","meteor://ğŸ’»app/client/modules/accounts/components/passwordReset/updatePasswordOverlay.js","meteor://ğŸ’»app/client/modules/accounts/components/index.js","meteor://ğŸ’»app/client/modules/accounts/containers/auth/authContainer.js","meteor://ğŸ’»app/client/modules/accounts/containers/auth/index.js","meteor://ğŸ’»app/client/modules/accounts/containers/auth/loginContainer.js","meteor://ğŸ’»app/client/modules/accounts/containers/dropdown/mainDropdownContainer.js","meteor://ğŸ’»app/client/modules/accounts/containers/helpers/index.js","meteor://ğŸ’»app/client/modules/accounts/containers/helpers/messagesContainer.js","meteor://ğŸ’»app/client/modules/accounts/containers/passwordReset/forgotContainer.js","meteor://ğŸ’»app/client/modules/accounts/containers/passwordReset/index.js","meteor://ğŸ’»app/client/modules/accounts/containers/passwordReset/passwordOverlayContainer.js","meteor://ğŸ’»app/client/modules/accounts/containers/index.js","meteor://ğŸ’»app/client/modules/accounts/helpers/helpers.js","meteor://ğŸ’»app/client/modules/accounts/helpers/index.js","meteor://ğŸ’»app/client/modules/accounts/helpers/templates.js","meteor://ğŸ’»app/client/modules/accounts/helpers/util.js","meteor://ğŸ’»app/client/modules/i18n/templates/currency/components/currency.js","meteor://ğŸ’»app/client/modules/i18n/templates/currency/containers/currencyContainer.js","meteor://ğŸ’»app/client/modules/i18n/templates/header/components/i18n.js","meteor://ğŸ’»app/client/modules/i18n/templates/header/containers/i18nContainer.js","meteor://ğŸ’»app/client/modules/i18n/currency.js","meteor://ğŸ’»app/client/modules/i18n/helpers.js","meteor://ğŸ’»app/client/modules/i18n/index.js","meteor://ğŸ’»app/client/modules/i18n/startup.js","meteor://ğŸ’»app/client/modules/i18n/main.js","meteor://ğŸ’»app/client/modules/core/helpers/apps.js","meteor://ğŸ’»app/client/modules/core/helpers/globals.js","meteor://ğŸ’»app/client/modules/core/helpers/layout.js","meteor://ğŸ’»app/client/modules/core/helpers/permissions.js","meteor://ğŸ’»app/client/modules/core/helpers/templates.js","meteor://ğŸ’»app/client/modules/core/helpers/utils.js","meteor://ğŸ’»app/client/modules/core/accounts.js","meteor://ğŸ’»app/client/modules/core/index.js","meteor://ğŸ’»app/client/modules/core/startup.js","meteor://ğŸ’»app/client/modules/core/subscriptions.js","meteor://ğŸ’»app/client/modules/core/main.js","meteor://ğŸ’»app/client/modules/logger/index.js","meteor://ğŸ’»app/client/modules/router/helpers.js","meteor://ğŸ’»app/client/modules/router/hooks.js","meteor://ğŸ’»app/client/modules/router/index.js","meteor://ğŸ’»app/client/modules/router/main.js","meteor://ğŸ’»app/client/templates/layout.js","meteor://ğŸ’»app/client/lib/buffer.js","meteor://ğŸ’»app/client/api/index.js","meteor://ğŸ’»app/client/collections/countries.js","meteor://ğŸ’»app/client/collections/index.js","meteor://ğŸ’»app/client/collections/taxEntitycodes.js","meteor://ğŸ’»app/client/config/defaults.js","meteor://ğŸ’»app/client/plugins.js","meteor://ğŸ’»app/lib/api/router/metadata.js","meteor://ğŸ’»app/lib/api/account-validation.js","meteor://ğŸ’»app/lib/api/catalog.js","meteor://ğŸ’»app/lib/api/compose.js","meteor://ğŸ’»app/lib/api/files.js","meteor://ğŸ’»app/lib/api/helpers.js","meteor://ğŸ’»app/lib/api/index.js","meteor://ğŸ’»app/lib/api/match.js","meteor://ğŸ’»app/lib/api/products.js","meteor://ğŸ’»app/lib/api/prop-types.js","meteor://ğŸ’»app/lib/collections/schemas/accounts.js","meteor://ğŸ’»app/lib/collections/schemas/address.js","meteor://ğŸ’»app/lib/collections/schemas/analytics.js","meteor://ğŸ’»app/lib/collections/schemas/assets.js","meteor://ğŸ’»app/lib/collections/schemas/cart.js","meteor://ğŸ’»app/lib/collections/schemas/emails.js","meteor://ğŸ’»app/lib/collections/schemas/helpers.js","meteor://ğŸ’»app/lib/collections/schemas/index.js","meteor://ğŸ’»app/lib/collections/schemas/inventory.js","meteor://ğŸ’»app/lib/collections/schemas/layouts.js","meteor://ğŸ’»app/lib/collections/schemas/logs.js","meteor://ğŸ’»app/lib/collections/schemas/metafield.js","meteor://ğŸ’»app/lib/collections/schemas/notifications.js","meteor://ğŸ’»app/lib/collections/schemas/orders.js","meteor://ğŸ’»app/lib/collections/schemas/payments.js","meteor://ğŸ’»app/lib/collections/schemas/products.js","meteor://ğŸ’»app/lib/collections/schemas/registry.js","meteor://ğŸ’»app/lib/collections/schemas/revisions.js","meteor://ğŸ’»app/lib/collections/schemas/shipping.js","meteor://ğŸ’»app/lib/collections/schemas/shops.js","meteor://ğŸ’»app/lib/collections/schemas/sms.js","meteor://ğŸ’»app/lib/collections/schemas/social.js","meteor://ğŸ’»app/lib/collections/schemas/tags.js","meteor://ğŸ’»app/lib/collections/schemas/templates.js","meteor://ğŸ’»app/lib/collections/schemas/themes.js","meteor://ğŸ’»app/lib/collections/schemas/translations.js","meteor://ğŸ’»app/lib/collections/schemas/workflow.js","meteor://ğŸ’»app/lib/collections/transform/cart.js","meteor://ğŸ’»app/lib/collections/transform/order.js","meteor://ğŸ’»app/lib/collections/collectionFS.js","meteor://ğŸ’»app/lib/collections/collections.js","meteor://ğŸ’»app/lib/collections/index.js","meteor://ğŸ’»app/lib/collections/jobs.js","meteor://ğŸ’»app/lib/collections/search.js","meteor://ğŸ’»app/lib/core/templates.js","meteor://ğŸ’»app/lib/selectors/tags.js","meteor://ğŸ’»app/lib/selectors/variants.js"],"names":["$","module","watch","require","v","Template","Meteor","ReactiveDict","Reaction","i18next","ReactionProduct","Media","Icon","Validation","ProductVariant","productHandle","selectedProduct","__published","handle","childVariantForm","onCreated","validation","state","setDefault","validationStatus","onRendered","validate","data","set","autorun","selectedVariantId","Router","getParam","collapse","focus","helpers","childVariantFormId","_id","media","find","sort","featuredMedia","findOne","handleFileUpload","ownerId","userId","productId","selectedProductId","shopId","getShopId","currentData","variantId","files","file","metadata","insert","active","hasValidationMessage","fieldName","instance","get","messages","hasErrorClassName","events","event","template","go","setCurrentVariant","variant","value","currentTarget","val","field","attr","variantToValidate","updated","isValid","call","error","Alerts","toast","message","stopPropagation","preventDefault","title","optionTitle","t","alert","showCancelButton","confirmButtonText","isConfirm","id","result","text","defaultValue","Session","applyProductRevision","Products","VariantFormContainer","variantForm","clearActionView","getVariant","product","variantFormComponent","childVariants","variants","getVariants","map","ancestors","indexOf","type","push","variantFormId","newVariantId","Sortable","Tracker","EditButton","VisibilityButton","variantIsSelected","current","selectedVariant","variantIsInActionView","actionViewVariant","getActionView","isActionViewOpen","variantList","hasPermission","variantSort","sortable","create","group","onUpdate","positions","toArray","element","getAttribute","defer","flush","FS","File","inventoryTotal","getTopVariants","length","inventoryManagement","qty","getVariantQuantity","inventoryPercentage","parseInt","inventoryWidth","a","b","index","ChildVariantEditButton","parentVariant","component","toggleOn","onClick","showActionView","label","i18nKeyLabel","ChildVariantRevisionButton","isVisible","toggleVisibility","templateInstance","removeClass","target","addClass","removeSeen","progressBar","displayQuantity","displayPrice","getVariantPriceRange","isSoldOut","showVariant","VariantRevisionButton","metaComponent","buttonProps","icon","createNew","updateMeta","key","parent","children","closest","animate","backgroundColor","autosize","Logger","productDetailEdit","i18nPlaceholder","i18nKey","warn","self","inline","reason","placement","err","res","removeType","productDetailField","fieldClass","uploadHandler","add","autoHide","count","toGrid","Utility","eachFile","fileObj","priority","updateImagePriorities","mediaId","update","$set","productImageGallery","mediaArray","$gallery","hasAdminAccess","stopImmediatePropagation","relatedTarget","undefined","first","fadeOut","replaceWith","css","display","appendTo","fadeIn","imageUrl","imageHeight","remove","imageUploader","click","productSocial","customSocialSettings","settings","faClass","faSize","url","window","location","href","description","substring","apps","facebook","facebookMsg","twitter","twitterMsg","googleplus","itemtype","googleplusMsg","pinterest","pinterestMsg","GridPublishContainer","gridPublishControls","PublishComponent","productList","products","getProductsByTag","tag","defaultImage","_isArray","isRevisionControlEnabled","updateVariantProductField","productSettings","productIds","$in","Array","isArray","hasSelectedProducts","itemWeightActive","weight","getTag","currentWeight","productSettingsListItem","getProductPriceRange","range","uploadedAt","listItemActiveClassName","params","equals","publishProduct","cloneProduct","archiveProduct","updatedAt","Date","Error","ProductsContainer","hide","show","React","Component","PropTypes","IconButton","Translation","GridItemControls","props","isDeleted","hasChanges","hasCreateProductPermission","checked","renderArchived","renderVisibilityButton","propTypes","func","object","exportDefault","GridItemNotice","isBackorder","isLowQuantity","renderNotice","ProductGridItemsContainer","DragDropProvider","ProductGrid","renderProductGridItems","array","formatPriceString","GridItemNoticeContainer","GridItemControlsContainer","ProductGridItems","handleDoubleClick","onDoubleClick","handleClick","pinned","backgroundImage","store","additionalMedia","isMediumWeight","renderVisible","renderOverlay","pdpPath","isSearch","productItem","renderPinned","weightClass","isSelected","renderHoverClassName","renderMedia","renderAdditionalMedia","renderNotices","renderGridContent","canEdit","connectDropTarget","connectDragSource","bool","getIds","getTagIds","ProductGridContainer","ProductsComponent","loadProducts","productsByKey","tags","productsSubscription","ready","loadMoreProducts","renderProductGrid","renderLoadMoreProductsButton","renderSpinner","_isEqual","Velocity","Button","Card","CardHeader","CardBody","CardGroup","Divider","Select","SettingsCard","Switch","TextField","fieldNames","fieldGroups","originCountry","compareAtPrice","price","width","height","taxCode","taxDescription","inventoryQuantity","inventoryPolicy","lowInventoryWarningThreshold","VariantForm","handleFieldChange","setState","handleFieldBlur","onVariantFieldSave","handleSelectChange","handleCheckboxChange","handleCardExpand","card","cardName","isExpanded","onCardExpand","groupName","expandedCard","taxable","nextProps","nextVariant","currentVariant","animateFieldFlash","fieldData","fieldRef","refs","input","isFieldValid","flashColor","RunSequence","e","p","o","duration","isProviderEnabled","fetchTaxCodes","restoreVariant","removeVariant","hasChildVariants","onUpdateQuantityField","cursor","renderArchivedLabel","cloneVariant","renderArchiveButton","countries","greyDisabledFields","renderTaxCodeField","renderQuantityField","arrayOf","editFocus","oneOfType","string","onFieldChange","composeWithTracker","__draft","bind","composer","onData","selectedProducts","GridItemNoticeController","topVariants","topVariant","inventoryThreshold","PublishContainer","GridProductPublishContainer","handleVisibilityChange","isProductVisible","documentIds","handlePublishActions","action","documents","fetch","_without","_includes","_filter","_uniq","_isEmpty","componentWillReceiveProps","handleSelectProductItem","isChecked","setUserPreferences","filteredProducts","handleProductDrag","dragIndex","hoverIndex","newState","changeProductOrderOnState","callUpdateMethod","initialLoad","slug","canLoadMoreProducts","getUserPreferences","hideActionView","isPreview","$splice","position","unmountMe","_max","_min","SortableItem","onPageClick","setActionView","productPath","pathFor","hash","productMedia","additionalProductMedia","$gt","limit","handleCheckboxSelect","list","checkbox","querySelector","items","document","querySelectorAll","activeItems","selected","shiftKey","indexes","prototype","i","itemSelectHandler","getElementById","metaKey","ctrlKey","addEventListener","removeEventListener","container","ITEMS_INCREMENT","Tags","threshold","scrollContainer","scrollHeight","scrollTop","clientHeight","setAttribute","isInitialLoad","isReady","prerenderReady","scrollLimit","currentTag","queryParams","Object","assign","subscribe","productCursor","sortedProducts","sortProducts","stateProducts","Packages","Countries","TaxCodes","provider","providerName","name","split","enabled","registry","provides","taxCodesArray","codes","taxCodeProvider","forEach","code","checkChildVariants","handleVariantFieldSave","runVariantValidation","forceUpdate","updateQuantityIfChildVariants","variantQuantity","selectedTopVariant","Cart","PaypalClientAPI","checkout","paypal","initXO","cart","token","msg","closeFlow","urlPrefix","startFlow","expressCheckoutSettingsValid","merchantId","mode","paypalCheckoutButton","expressCheckoutSettings","load","isConfigured","isLoading","loaded","setup","environment","button","expressCheckoutEnabled","AutoForm","Shops","PaypalPayment","PayPal","submitting","uiEnd","buttonText","removeAttr","paymentAlert","errorMessage","hidePaymentAlert","getError","detailSubpart","response","handlePaypalSubmitError","results","singleError","serverError","errors","len","thisError","formattedError","issue","pop","replace","fatal","paypalPayflowForm","addHooks","onSubmit","doc","payerNamePieces","payerName","form","first_name","last_name","number","cardNumber","expire_month","expireMonth","expire_year","expireYear","cvv2","cvv","getCardType","storedCard","charAt","toUpperCase","slice","authorize","total","cartTotal","currency","transaction","saved","normalizedStatus","normalizedMode","intent","transactionId","authId","transactions","related_resources","authorization","packageData","paymentMethod","processor","paymentPackageId","paymentSettingsKey","settingsKey","method","authorizationId","amount","Number","status","createdAt","create_time","update_time","beginSubmit","endSubmit","paypalCancel","isDuplicate","duplicateErrorCode","showError","buildPaymentMethod","TRANSACTIONID","parseFloat","AMT","ORDERTIME","paypalDone","checkoutUrl","payerId","getQueryParam","prefix","getShopPrefix","c","Subscriptions","stop","PAYMENTSTATUS","payError","payResult","PaypalPackageConfig","paypalExpressSettings","hooks","onSuccess","onError","operation","paypalPayFlowSettings","export","_once","ReactiveVar","script","createElement","async","src","head","appendChild","_checkReady","checkReady","setInterval","_loaded","clearInterval","makeNsSetter","SimpleSchema","PackageConfig","Boolean","String","allowedValues","optional","min","max","Express","getSettings","ref","valueName","expressCheckoutAccountOptions","express_mode","options","express","username","password","signature","return_url","getAbsoluteUrl","cancel_url","config","accountOptions","PayFlow","payflowAccountOptions","payflow_mode","client_id","client_secret","cardInfo","paymentInfo","callback","capture","captureDetails","is_final_capture","paymentObj","payer","payment_method","funding_instruments","parseCardData","credit_card","parsePaymentData","ExampleSettingsFormContainer","exampleSettings","ExampleSettings","Checkbox","ExampleSettingsForm","handleStateChange","handleCheckBox","isInputChecked","support","splice","handleSubmit","apiKey","setting","Authorize","Capture","Refund","onChange","isRequired","exports","Loading","TranslationProvider","handleChange","saveUpdate","packageId","fields","property","subscription","Example","ExamplePayment","handleExampleSubmitError","examplePaymentForm","ExamplePackageConfig","Shipping","SortableTable","shippingRatesSettings","isEditing","editingId","editButton","onIcon","toggle","style","top","right","shippingGrid","filteredFields","noDataMessage","editRow","currentId","customRowMetaData","bodyCssClassName","customColumnMetadata","columnMeta","accessor","Header","transform","methods","publication","collection","matchingResultsCount","showFilter","rowMetadata","columns","onRowClick","columnMetadata","externalLoadingComponent","shippingRate","providerRates","rate","confirmTitle","profilePage","ref1","origin","pathname","content","hostname","test","appId","FB","ui","encodeURIComponent","base","summary","isEnabled","fbAsyncInit","init","xfbml","version","d","s","js","fjs","getElementsByTagName","parentNode","insertBefore","ref2","itemprop","open","preferredUrl","SocialSettingsContainer","socialSettings","SocialSettingsComponent","_merge","reactionSocial","public","socialTemplates","templates","appsOrder","app","getOpenGraphMeta","Helmet","classnames","meta","FacebookSocialButton","showText","iconClassNames","altIcon","size","renderText","getGooglePlusMeta","GooglePlusSocialButton","SocialButtons","Facebook","Twitter","GooglePlus","Pinterest","SocialSettings","PinterestSocialButton","baseUrl","Form","SocialPackageConfig","socialProviders","handleSettingChange","onSettingChange","parts","formName","onSettingsSave","_schema","onSettingExpand","preferences","onSettingEnableChange","renderCards","providers","getProviderComponentByName","buttonComponent","buttonSettngs","renderButtons","renderEditButton","node","shape","getTwitterMeta","TwitterSocialButton","createSocialSettings","handleSettingEnable","handleSettingExpand","updateUserPreferences","handleSettingsSave","settingName","values","socialPackage","decoratedComponent","merge","socialButtons","SearchModalContainer","searchModal","not","SortableTableLegacy","accountsTable","ordersTable","SearchModal","siteName","marginBottom","fontWeight","handleToggle","handleTagClick","renderSearchInput","renderSearchTypeToggle","renderProductSearchTags","accounts","handleAccountClick","orders","handleOrderClick","_pull","Roles","Collections","handleKeyDown","keyCode","renderChild","dep","changed","localStorage","setItem","userPermissions","handleChildUnmount","orderId","tagId","newFacet","classList","facets","tagToggle","tagResults","productResults","orderResults","accountResults","getItem","Dependency","depend","searchCollection","searchQuery","ProductSearch","productHashtags","getProductHashtags","tagSearchResults","AccountSearch","OrderSearch","getSiteName","shop","hashtags","hashtag","user","users","member","emails","email","address","isAdmin","userIsInRole","roles","services","role","arr","DataType","header","rowData","profile","firstName","lastName","phone","tdClassName","renderer","cellData","_lowerCase","shippingName","userEmails","shippingAddress","city","region","country","shippingPhone","shippingStatus","rowClassName","orderDate","orderTotal","reactionAnalyticsSettings","googleAnalyticsEnabled","ga","segmentioEnabled","analytics","mixpanelEnabled","mixpanel","_defer","AnalyticsEvents","initialize","invoked","factory","args","arguments","unshift","protocol","SNIPPET_VERSION","notifySegment","context","page","properties","path","notifyGoogleAnalytics","notifyMixpanel","track","triggers","enter","startup","coreAnalytics","googleAnalytics","segmentio","api_key","html","sticky","body","$targets","parents","each","$element","analyticsEvent","eventType","category","Category","Label","Value","DiscountList","discountCodesCheckout","cartId","DiscountCodes","DiscountSchema","customDiscountCodes","discountGrid","discountSchema","discountCode","discount","Mongo","Collection","attachSchema","Discounts","DiscountCodesPackageConfig","DiscountsPackageConfig","DiscountRates","DiscountRateSchema","customDiscountRates","discountRateSchema","discountRate","DiscountRatesPackageConfig","discountMethod","NotificationRouteContainer","notificationRoute","NotificationDropdown","NotificationComponent","NotificationRoute","handleBtn","unread","notificationList","handleDelete","markOneAsRead","markAllAsRead","moment","handleNoNotifications","renderDropdownHead","handleClickViewAll","notifyArr","notify","actionViewData","Apps","timeNow","timeSent","fromNow","read","i18n","NotificationContainer","Notifications","AuthNetPayment","AuthNet","tpl","handleAuthNetSubmitError","authnetPaymentForm","expire_date","toString","expirationYear","expirationMonth","transId","_original","responseCode","AuthNetPackageConfig","authnetSettings","Braintree","BraintreePayment","braintreePaymentForm","handleBraintreeSubmitError","submitToBrainTree","cardData","currencyCode","normalizeState","normalizeMode","creditCard","cardType","last4","normalizedStates","authorization_expired","authorized","authorizing","settlement_pending","settlement_confirmed","settlement_declined","failed","gateway_rejected","processor_declined","settled","settling","submitted_for_settlement","voided","stateString","normalizedState","default","normalizedModes","modeString","BraintreePackageConfig","braintreeSettings","braintree","paymentData","Stripe","StripePayment","handleStripeSubmitError","details","stripePaymentForm","captured","failure_code","created","StripePackageConfig","stripeSettings","stripe","ProductAdminContainer","ProductAdmin","Metadata","TagListContainer","pageTitle","vendor","metafields","handleDeleteProduct","onDeleteProduct","handleRestoreProduct","onRestoreProduct","$merge","onProductFieldSave","handleToggleVisibility","handleMetaChange","metafield","onMetaChange","handleMetaSave","onMetaSave","handleMetaRemove","onMetaRemove","fieldGroupForFieldName","viewProps","nextProduct","currentProduct","cardGroupName","permalink","fullWidth","newMetafield","handleProductFieldChange","revisonDocumentIds","any","_map","Templates","handleProductFieldSave","updateValue","getSlug","handleMetafieldSave","handleProductRestore","parser","templateFor","ProductDetailContainer","productDetailSimple","PDC","productDetailSimpleToolbar","PublishContainerComponent","Alert","AddToCartButton","handleCartQuantityChange","onCartQuantityChange","hasVariants","cartQuantity","onAddToCart","editable","MediaItem","ChildVariant","hasMedia","primaryMediaItem","classes","renderDeletionStatus","renderInventoryStatus","visibilityButton","soldOut","ProductDetail","VariantList","ProductMetadata","ProductTags","ProductField","PriceRange","ProductNotFound","EditContainer","showEditControls","editContainerProps","headerClassName","Currency","AlertContainer","ReactionLayout","layout","hasAdminPermission","layoutName","mediaGalleryComponent","onProductFieldChange","onViewContextChange","priceRange","socialComponent","topVariantComponent","viewAs","handleBlur","_input","baseClassName","textFieldClassName","multiline","textFieldProps","renderTextField","className","itemProp","fieldTitle","Variant","variantTitleElement","variantElement","handleVariantEditClick","editButtonProps","onEditVariant","handleVariantVisibilityClick","onVariantVisibiltyToggle","isVariantVisible","handleChildleVariantClick","onVariantClick","handleChildVariantEditClick","addButton","onCreateVariant","onMoveVariant","childVariant","childVariantMedia","filter","mediaItem","renderVariants","renderChildVariants","SocialContainer","VariantListContainer","StyleRoot","MediaGalleryContainer","quantity","Math","handleAddToCart","maxQuantity","totalQuantity","storedQuantity","storedCart","item","addToCartText","addToCartTitle","alertWidth","direction","dir","oppositeDirection","handleSlideOut","animationTimeOut","setTimeout","handleSlideIn","clearTimeout","textTimeOut","handleViewContextChange","setQueryParams","as","complete","tagSub","revisionType","viewProductAs","productSub","setProduct","reverse","ancestor","productRevision","ProductPublishContainer","handlePublishSuccess","productDocument","previousDocuments","newProductPath","ProductSocialContainer","mediaUrl","buttonClassName","getChildVariants","getVariantIds","handleCreateVariant","handleVariantClick","handleEditVariant","editVariant","handleVariantVisibilityToggle","variantIsVisible","handleMoveVariant","newVariantOrder","registerComponent","SearchPackageConfig","searchSettings","ShippoTableColumn","shippoCarriers","carrierGrid","colWidth","colStyle","colClassName","textAlign","Cell","row","shippoProvider","carrier","shippoCarrier","ShippoPackageConfig","shippoSettings","formType","successMsg","renderColumn","column","SmsSettings","smsSettings","saveSettings","apiToken","smsProvider","smsPhone","save","timer","catch","isSaving","handleSelect","smsProviders","useDeps","Sms","actions","depsMapper","_get","Accounts","AccountsSchema","TaxEntityCodes","entityCodeList","currentAccount","taxSettingsPanel","account","subscriptionsReady","makeUniqueId","accountsSchema","entityCodes","customOption","entityCode","concat","formId","isCustomValue","currType","toggleClass","avalaraPackage","isAvalaraEnabled","currentCodes","before","oldType","$unset","formData","getFormValues","_inRange","Logs","LogSchema","AvalaraPackageConfig","getPackageData","avalaraSettings","logType","countryDefaults","packageConfigSchema","logSchema","logCollection","countryOptions","currentCountryList","getFieldValue","loggingEnabled","pkgData","avalara","enableLogging","logGrid","query","logEntry","log","JSON","stringify","validateForm","statusCode","connectionValid","TaxPackageConfig","TaxCloudPackageConfig","taxCloudSettings","TaxJarPackageConfig","taxJarSettings","basePath","linkTags","rel","sizes","color","metaTags","addTag","hasOwnProperty","insertAdjacentHTML","check","Orders","cartCompleted","orderCompleted","ccoSub","order","orderStatus","workflow","userOrders","sessionId","cartSub","checkoutLogin","checkoutLoginCompleted","currentStatus","guestUser","anonUser","checkoutProgressBar","progressbarStatusClass","cartWorkflow","thisStep","previouslyVisited","CartSubTotals","checkoutReview","cartCheckout","checkoutSteps","isCompleted","isPending","checkoutStepBadge","checkoutStepBadgeClass","workflowStep","Swiper","CartDrawerContainer","EmptyCartDrawer","cartDrawer","displayCartDrawer","emptyCartDrawer","openCartDrawer","swiper","setWrapperSize","loop","grabCursor","slidesPerView","wrapperClass","slideClass","slideActiveClass","pagination","paginationClickable","cartIcon","toggleSession","CartPanel","marginTop","fontSize","CartPanelContainer","handleCheckout","CartItems","productItems","handleRemoveItem","handleImage","handleLowInventory","handleShowProduct","CartIcon","opacity","cartCount","marginRight","CartSubTotal","cartDiscount","cartShipping","cartTaxes","cartSubTotal","validateDiscount","validateShipping","validateTaxes","keepShopping","CartDrawer","showItemLowInventoryWarning","currentCartItemId","lowInventory","CartIconContainer","CartSubTotalContainer","cartDiscounts","EmptyCartContainer","handleKeepShopping","registerHelper","cartHelpers","showCartIconWarning","showLowInventoryWarning","billing","fullName","_clone","Schemas","PaymentMethod","checkoutCart","invoice","shipping","subtotal","taxes","discounts","selector","$addToSet","debug","_groupBy","pkgPermissions","pkg","enableReactionPackage","reactionPackage","route","disableReactionPackage","packagesGrid","groups","appsByGroup","groupedApps","keys","appsInGroup","packagesGridGroup","packageProps","enablePackage","gridPackage","cardProps","package","packageName","controls","pushActionView","onContentClick","showPackageManagementEvent","PackageList","PackageListContainer","dashboardPackages","PackageListComponent","shopBrandImageOption","asset","option","shopSettings","brandImageSelectProps","selectedMediaId","brandAssets","optionTemplate","classNames","itemList","half","hidden","onSelect","addressBook","shopEditForm","shopEditAddressForm","shopEditExternalServicesForm","shopEditOptionsForm","$elemMatch","barcode","import","_find","settingsHeader","isActionViewAtRootView","thisApp","reactionApp","getRouteName","settingsData","popActionView","settingsSidebar","settingsSidebarItem","parentData","translateRegistry","dashboardHeader","getRegistryForCurrentRoute","Blaze","Admin","Radium","VelocityTransitionGroup","debounce","Overlay","getComponent","getStyles","viewSize","actionView","isBigView","isSmView","dashboardSize","isMdView","isLgView","actionViewIsOpen","alignItems","minHeight","padding","heading","flex","margin","overflow","WebkitOverflowScrolling","masterViewPanel","flexDirection","masterView","detailViewPanel","zIndex","detailView","backButton","backButtonContainers","ActionView","isMobile","enterAnimation","animation","translateX","easing","leaveAnimation","enterAnimationForDetailView","leaveAnimationForDetailView","handleResize","styles","handleActionViewBack","handleActionViewClose","isDetailViewAtRootView","handleActionViewDetailBack","handleActionViewDetailClose","renderBackButton","renderControlComponent","detailViewIsOpen","backButtonEnterAnimation","backButtonLeaveAnimaton","renderDetailViewBackButton","renderDetailComponent","renderMasterView","showDetailViewOverlay","renderDetailView","renderFooter","renderActionView","showOverlay","matchMedia","matches","actionViewIsLargeSize","left","opaticy","buttons","Toolbar","ShortcutBar","ListItem","groupedPackages","packages","elements","handleShowPackage","actionComponent","i18nKeyTitle","renderSections","FlatButton","handleShowDashboard","isActive","currentView","handleOpenShortcut","justifyContent","renderAdminButton","ToolbarGroup","VerticalDivider","Translatable","PublishControls","showViewAsControls","hasCreateProductAccess","onAddProduct","packageButtons","packageButton","dashboardHeaderTemplate","renderVisibilitySwitch","renderAddButton","renderPackageButons","renderCustomControls","onVisibilityChange","translation","lang","defaultProps","ActionViewContainer","AdminContextProvider","popActionViewDetail","hideActionViewDetail","shortcuts","shortcut","isActiveClassName","tooltip","i18nKeyTooltip","tooltipPosition","isAdminArea","getActionViewDetail","isActionViewDetailAtRootView","isActionViewDetailOpen","Comp","CompositeComponent","ToolbarContainer","audience","getRolesForUser","dashboard","handleAddProduct","isClient","currentTagId","saveActionViewState","routeName","showPackageShortcuts","registryItems","Drop","coreAdminLayout","onDestroyed","ActionViewComponent","shortcutButtons","dropInstance","constrainToWindow","renderWithData","createContentMenu","isSeperator","control","adminControlsClassname","inlineAlert","isFirstRender","$node","firstNode","collection_","seen","inlineAlerts","alerts","alertPlacement","alertId","_defaults","defaultOptions","dismissable","alertsLimit","alertMessage","alertOptions","skip","$ne","_isObject","swal","sAlert","effect","timeout","onRouteClose","stack","offset","beep","titleOrOptions","messageOrCallback","then","dismiss","success","layoutHeader","coreNavProps","onMenuButtonClick","toggleMenuCallback","notFound","unauthorized","getRouteLayout","registryRoute","x","currentLayout","addBodyClasses","theme","join","Hooks","onEnter","CoreLayout","structure","layoutFooter","pageClassName","PrintLayout","_omit","ReactDOM","BlazeComponent","BlazeLayout","prevProps","blazeTemplate","_blazeView","renderBlazeView","_blazeData","tArg","findDOMNode","_blazeRef","blazeLayout","getAllComponents","Immutable","registeredComponents","Map","componentInfo","toObject","block","permissions","defaultAudience","defaultPermissions","childElements","child","childIndex","renderLayout","checkElementPermissions","layoutProps","rui","align","justify","axis","sub","templateInfo","templateData","ordersListItems","cartImagesSub","variantImage","productImage","combinedItems","orderItem","foundItem","combinedItem","dashboardOrdersList","orderAge","shipmentTracking","shipmentMethod","tracking","shopName","completedPDFLayout","currentRoute","ordersListSummary","pageOrderDetail","userProfile","payment","orderPage","getNote","latestNote","notes","date","note","_extend","_sumBy","_each","accounting","formatNumber","NumericInput","ButtonSelect","InvoiceContainer","InvoiceActionsContainer","LineItemsContainer","TotalActionsContainer","orderCreditMethod","coreOrderShippingInvoice","refunds","refundAmount","isCapturing","isRefunding","isFetching","currencies","buttonSelectComponent","eventAction","bgColor","buttonType","invoiceTotal","currencySymbol","symbol","checkSupportedMethods","orderMode","alertText","showCloseButton","confirmButtonColor","cancelButtonColor","cancelButtonText","cancel","returnToStock","toFixed","refund","refundTotal","adjustedTotal","unformat","numericInputProps","isApprovedAmount","numericType","disabled","format","numberValue","refundInputProps","maxValue","totalItems","money","paymentPendingApproval","canMakeAdjustments","showAfterPaymentCaptured","paymentApproved","paymentCaptured","refundTransactions","abs","capturedDisabled","refundSubmitDisabled","shipment","fulfillment","enabledPaymentsArr","returnItems","taxDetail","lineNumber","OrderSummaryContainer","coreOrderShippingSummary","orderSummary","_every","coreOrderShippingTracking","orderDep","showTrackingEditForm","getOrder","shipmentId","sms","trackingNumber","printableLabels","shippingLabelUrl","customsLabelUrl","isShipped","shippedItems","shipmentItem","fullItem","isNotCanceled","canceledItems","completedItems","editTracking","getPackageSettings","flatRates","editing","view","shipmentReady","packed","coreOrderWorkflow","orderFulfillmentData","baseOrder","fulfillmentNumber","Counts","OrdersActionContainer","OrdersListContainer","PACKAGE_NAME","ORDER_LIST_FILTERS_PREFERENCE_NAME","ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME","DEFAULT_FILTER_NAME","orderFilters","OrderHelper","makeQuery","orderLimits","processing","completed","filterName","orderSubscription","FilterComponent","orderFilter","onActionClick","OrdersListComponent","itemProps","currencyFormat","hasMoreOrders","currentFilterLabel","foundFilter","activeClassname","Invoice","isOpen","dateFormat","renderTotal","renderRefundsInfo","renderDiscountForm","renderConditionalDisplay","InvoiceActions","isAdjusted","renderCapturedTotal","renderAdjustedTotal","LineItems","uniqueItem","displayMedia","marginLeft","tax","calculateTotal","uniqueItems","onClose","renderLineItem","float","renderLineItemInvoice","TabList","TabItem","stat","OrderActions","handleActionClick","filters","selectedIndex","renderAction","Badge","ClickToCopy","OrderSummary","shortId","profileShippingAddress","lineHeight","badgeStatus","orderLink","address1","address2","postal","shipmentStatus","Avatar","ProductImage","OrdersList","startWorkflow","emailAddress","shippingBadgeStatus","fulfillmentBadgeStatus","renderShipmentInfo","renderOrderInfo","renderOrderButton","renderOrderCard","badge","renderBadge","TotalActions","f","itemId","handleClose","handleDisplayMedia","isClosed","delivered","shipped","canceled","orderSub","Constants","selectedFilterName","setActionViewDetail","TotalActionsContaner","corePaymentMethods","enabledPayments","payments","paymentsEnabled","openActionView","dashboardRegistryEntry","paymentRegistryEntry","paymentSettings","shown","paymentMethodOptions","paymentMethods","shopEditPaymentMethodsForm","cartShippingQuotes","currentCart","shipmentQuotes","quote","cartShipmentMethods","shipmentMethods","enabledShipping","enabledShippingArr","coreCheckoutShipping","shippingOpts","shippingRegistryEntry","shippingSettings","_isFunction","Tooltip","i18nextDep","buttonElement","createTooltip","destroy","iconComponent","elementProps","attrs","buttonAttributes","itemKeyTitle","createFragment","tagName","onToggle","onValue","tooltipOpen","handleButtonMouseOver","handleButtonMouseOut","renderOnStateIcon","renderNormalStateIcon","isTooltipOpen","toggleOnLabel","i18nKeyToggleOnLabel","primary","bezelStyle","containerStyle","iconAfter","tabIndex","tooltipAttachment","extraProps","buttonChildren","renderLabel","renderIcon","renderTooltipContent","oneOf","currentButton","activeButton","nonActiveButtons","defaultBgClassNames","toggleIcon","toggleClassNames","handleDefaultState","defaultButton","defaultNonActiveButtons","filterButtons","handleButtonChange","otherProps","iconClassName","onIconClassName","Handle","kind","Children","handleExpanderClick","expanded","onExpand","newProps","actAsExpander","expandable","cloneElement","noPadding","padded","renderCard","CardTitle","handleSwitchChange","expandOnSwitchOn","onSwitchChange","imageView","expanderClassName","expander","borderColor","showSwitch","switchOn","switchName","renderImage","renderTitle","renderChildren","renderDisclsoureArrow","CardToobar","CardToolbar","handleExpand","saveOpenStateToPreferences","renderCardBody","setCaretPosition","ctrl","pos","setSelectionRange","createTextRange","moveEnd","moveStart","select","moneyFormat","decimal","unformatedValue","formatMoney","scale","caretPosition","selectionStart","textValueClassName","displayValue","fieldClassName","precision","displayName","templateClassName","selectAsRadioButtons","itemListClassName","quarter","itemClassName","labelClassName","inputClassName","selectAsCheckboxes","MultiSelect","TagList","TagItem","Autosuggest","Tag","handleTagFormSubmit","_saved","saveTag","handleTagRemove","onTagRemove","parentTag","handleTagUpdate","onTagUpdate","handleTagKeyDown","handleTagMouseOut","onTagMouseOut","handleTagSelect","onTagSelect","handleTagMouseOver","onTagMouseOver","handleTagInputBlur","onTagInputBlur","handleInputChange","newValue","updatedTag","handleSuggestionsUpdateRequested","suggestion","onGetSuggestions","handleSuggestionsClearRequested","onClearSuggestions","onTagClick","_updated","autoSuggestInput","onTagSave","draggable","renderAutosuggestInput","isTagNav","getSuggestionValue","placeholder","inputPlaceholder","onKeyDown","onBlur","renderSuggestion","suggestions","blank","renderBlankEditableTag","renderEditableTag","renderTag","i18nKeyInputPlaceholder","createAutosuggestInput","onSuggestionsFetchRequested","getSuggestions","onSuggestionsClearRequested","inputProps","i18nPlaceholderKey","i18nPlaceholderValue","onUpdateCallback","term","datums","RegExp","tagItem","tagBlankProps","onTagCreate","tagEditableProps","selectable","tagEditable","oldValue","inputValue","submitInput","trim","updateTag","AutosuggestInput","tagBlank","tagLink","tagList","moveItem","fromIndex","toIndex","_sortable","onSort","tagIds","newTagsOrder","oldIndex","newIndex","onTagSort","onAdd","toListId","to","dataset","movedTagId","onTagDragAdd","onRemove","foundTag","tagProps","selectedTag","tagToRemove","_compact","ReactionPropTypes","handleNewTagSave","onNewTagSave","handleNewTagUpdate","onNewTagUpdate","handleTagSave","hasDropdownClassName","navbarSelectedClassName","arrayProps","onMoveTag","enableNewTagForm","newTag","renderTags","edit","showBookmark","arrayOfTags","TextareaAutosize","onReturnKeyDown","i18nKeyPlaceholder","renderMultilineInput","renderSingleLineInput","validationMessage","helpText","i18nKeyHelpText","i18nKeyMessage","textFieldStyle","renderField","renderHelpText","onUpload","upload","uploadButtonProps","i18nLabel","SortableTableFilter","PaginationButtons","SortableTablePagination","getSafePage","changePage","applyPage","isNaN","pages","onPageChange","showPageSizeOptions","pageSizeOptions","pageSize","showPageJump","canPrevious","canNext","onPageSizeChange","PreviousComponent","NextComponent","paginationStyle","pageText","which","ofText","rowsText","previousText","nextText","renderIconPosition","_assignIn","matchSorter","ReactTable","customFilter","pivotId","toLowerCase","includes","handleFilterInput","currentPage","filterInput","maxPages","matchingResults","pubHandle","loading","rowInfo","original","displayColumns","minWidth","originalData","getMeteorData","filteredData","filterType","renderTableFilter","renderColumns","renderData","defaultPageSize","renderColumnFilter","minRows","loadingText","noDataText","isFilterable","isResizeable","isSortable","TacoTable","handleRowClick","onAlertSeen","onAlertRemove","alertClassName","renderAlerts","badgeSize","ButtonGroup","ButtonToolbar","CopyToClipboard","handleCtcMouseOver","handleCtcMouseOut","copyToClipboard","copied","displayText","separator","divider","labeled","_at","_set","_update","FormActions","newdoc","autoSave","Event","schema","validationSchema","docPath","objectKeys","pick","newContext","namedContext","picked","docToValidate","cleanedObject","_simpleSchema","clean","hideFields","sharedProps","fieldElement","valueForField","fieldHasError","_invalidKeys","validationError","keyErrorMessage","formGroupClassName","additionalFieldProps","isFieldHidden","fieldSchema","fieldProps","renderFormField","endsWith","fullFieldName","renderWithSchema","renderFormActions","_objectKeys","fa","Item","Items","List","listClassName","actionType","actionClassName","contentClassName","listItemClassName","renderContent","renderSubItems","CircularProgress","MediaGallery","handleMouseEnter","onMouseEnter","source","handleMouseLeave","onMouseLeave","handleRemoveMedia","onRemoveMedia","revision","changeType","renderRevision","image","mediaElement","renderControls","defaultSource","isFeatured","mediaHeight","mediaWidth","Dropzone","Measure","handleDropClick","dropzone","dimensions","onDrop","onMouseEnterMedia","onMoveMedia","containerWidth","mediaGalleryWidth","featured","renderAddItem","gallery","renderFeaturedMedia","renderMediaThumbnails","renderMediaGalleryUploader","renderMediaGallery","allowFeaturedMediaHover","mediaGalleryHeight","onMouseLeaveMedia","Menu","Popover","DropDownMenu","handleDropdownToggle","handleMenuItemChange","menuItem","closeOnClick","handleOpen","isControlled","onRequestOpen","attachment","targetAttachment","menuStyle","onPublishClick","revisions","MenuItem","newChild","renderMenuItems","iconStyle","i18nKeySelectedLabel","selectionLabel","Metafield","renderMetadataForm","renderMetadataCreateForm","renderMetadata","newMetadata","keyInput","valueInput","handleRemove","i18nKeyDetailName","detailNamePlaceholder","i18nKeyDetailInformation","detailInfoPlaceholder","renderActionButton","i18nKeyDetailInfo","selectProps","translatedPlaceholder","multi","simpleValue","TetherComponent","PopoverContent","handleDisplayButtonClick","onDisplayButtonClick","handleClickOutside","showDropdownButton","showArrow","renderPopoverChildren","tooltipContent","onclickOutside","onClickOutside","indeterminate","renderInderterminateProgress","Nouislider","Slider","start","tooltips","connect","step","orientation","onSlide","checkboxRef","_checkbox","labelElement","onLabel","i18nKeyOnLabel","switchControlClassName","tab","selectedTab","ToolbarText","firstChild","lastChild","visibleOnMobile","renderTooltip","_camelCase","Themes","uiDashboard","themes","themeCardProps","alertDescription","uiThemeDetails","selectedComponent","activeClassName","componentName","components","publishTheme","themeName","uiThemeEditor","selectors","annotations","findComponentByName","selectThemeComponent","annotation","rule","previewTheme","output","stylesObject","stylesArray","declarations","updateStyles","componentSelectProps","boxShadow","ReactionAlerts","handleAlertRemove","handleAlertSeen","editContainerItem","handleEditButtonClick","onEditButtonClick","returnValue","editView","handleVisibilityButtonClick","onVisibilityButtonClick","showsVisibilityButton","hasChange","draft","diff","hasChangedField","autoHideEditButton","only","_sortBy","Revisions","handleDrop","handleMouseEnterMedia","handleMouseLeaveMedia","handleMoveMedia","newMediaOrder","fetchMediaRevisions","mediaRevisions","$nin","sortMedia","sortedMedia","m","appendRevisionsToMedia","permission","newMedia","documentId","documentData","ComposeSortableItem","DragSource","DropTarget","cardSource","beginDrag","collectDropSource","monitor","dragSource","connectDragPreview","dragPreview","isDragging","collectDropTarget","dropTarget","cardTarget","hover","onMove","itemType","SortableItemComponent","contextTypes","dragDropManager","updateSuggestions","excludeTags","canSaveTag","tagsByKey","handleMoveTag","debounceUpdateTagOrder","handleGetSuggestions","suggestionUpdateRequest","handleClearSuggestions","originalTag","tagsAsArray","isEditable","isProductTags","_isString","defaults","classNameData","classNameOverrides","parentTemplate","parentTemplateName","getData","comp","render","unmountComponentAtNode","getView","parentView","match","AdminComponent","adminContext","childContextTypes","adminClassName","admin","DragDropManager","HTML5Backend","defaultManager","TranslatableComponent","translations","language","coreNavigationBrand","logo","brandAsset","CoreNavigationLanguage","languages","Brand","getShop","getLogo","MainDropdown","LanguageContainer","CurrencyContainer","TagNavContainer","NavBar","navBarVisible","toggleNavbarVisibility","handleCloseNavbar","searchEnabled","hasProperPermission","renderHamburgerButton","renderBrand","renderTagNav","renderSearchButton","renderNotificationIcon","renderLanguage","renderCurrency","renderMainDropdown","renderCartContainerAndPanel","NavBarContainer","searchPackage","searchTemplate","CoreNavigationBar","searchTemplateName","dropdown","navbar","isSearchEnabled","IconButtonComponent","notificationButtonComponent","cartPanel","catalogSettings","EmailLogs","EmailConfig","emailSettings","logs","resend","service","host","port","EmailSettings","showPassword","showSettings","togglePassword","toggleSettings","NotSet","renderSettingsDisplay","renderSettingsUpdate","EmailTableColumn","Jobs","renderEmailsTable","instanceOf","subject","emailProviders","handleAction","emailId","createdDate","getServiceConfig","EmailConfigContainer","getShopSettings","mail","SearchContainer","revisionControlSettings","SearchContainerComponent","SimpleDiff","isDocumentVisible","onAction","showDiffs","handleToggleShowChanges","handlePublishClick","diffs","handleRestore","i18nKeyTite","renderUndoButton","renderViewControls","renderPublishButton","hasRevisions","primaryRevision","primaryDocument","diffHasActualChanges","documentType","some","RevisionControlSettings","general","onUpdateSettings","change","rightHandSide","rhs","leftHandSide","lhs","whiteSpace","renderDiff","parentDocument","documentIdsSet","Set","from","onPublishSuccess","SettingsComponent","RevisionSettingsContainer","handleUpdateSettings","packageInfo","RevisionApi","Taxes","TaxSchema","customTaxRates","taxGrid","taxSchema","statesForCountry","selectedCountry","locales","states","locale","taxRate","taxCodes","taxSettings","unique","ssuta","blackbox","shopIdAutoValue","autoValue","TaxRates","county","EmailTemplates","templateSettings","templateGrid","typeEmail","emailTemplateSchema","insertDoc","templateId","docId","done","TemplateInstance","levels","numLevel","defaultData","Transactions","appliedAt","DiscountForm","validatedInput","attempts","discountApplied","debounceDiscounts","timerId","loader","renderApplied","renderDiscountLink","codeId","listItems","listItem","renderItem","TrashCan","renderList","renderNoneFound","propsToWatch","discountListComponent","validationContext","objectToValidate","cleanOptions","hasMessage","getAutoValues","_hooks","onExit","_addHook","cb","leave","callbacks","run","constant","history","_uniqBy","Route","createBrowserHistory","createMemoryHistory","pathToRegexp","queryParse","routerReadyDependency","routerChangeDependency","_initialized","toJS","routeData","newParams","routes","foundPath","pathObject","toPath","compile","compiledPath","queryString","actualPath","routerGo","startsWith","routerReadyWaitFor","reload","fullPath","hasRoutePermission","getRegistryRouteName","registryItem","selectLayout","setLayout","setWorkflow","currentWorkflow","workflowName","layoutStructure","dashboardControls","dashboardHeaderControls","adminControlsFooter","sortedLayout","prev","next","foundLayout","optionsHasTemplate","initPackageRoutes","reactionContext","pkgs","routeDefinitions","shopSub","shopSubWaitFor","shopCount","indexLayout","indexRoute","notFoundLayout","newRoutes","reactionLayout","newRouteConfig","triggersEnter","triggersExit","uniqRoutes","reactRouterRoutes","reactComponents","_routes","ConnectedToolbarComponent","ConnectedAdminViewComponent","ConnectedShortcutBarContainer","customerApp","adminApp","adminContentContainer","adminContainer","scrollableContainer","App","routeOptions","hasDashboardAccess","isAdminApp","renderAdminApp","getRootNode","initBrowserRouter","matchPath","ReactRouter","MetaData","BrowserRouter","handleLocationChange","foundPaths","exact","re","exec","search","substr","payload","previousRoute","routesAreSame","paramsAreSame","queryParamsAreSame","routesDiffer","setCurrentRoute","unsubscribeFromHistory","listen","rootNode","rootNodeHtml","nonreactive","onLogin","loggingIn","ShopSchema","Shop","LocalizationSettings","onUpdateLocalization","handleAllOn","onEnableAllLanguages","onEnableAllCurrencies","handleAllOff","onUpdateCurrencyConfiguration","onUpdateLanguageConfiguration","timezone","timezoneOptions","currencyOptions","baseUOM","uomOptions","enabledLanguages","renderListControls","renderLanguages","renderCurrencies","LocalizationSettingsContainer","handleUpdateLanguageConfiguration","l","handleUpdateCurrencyConfiguration","handleEnableAllLanguages","handleEnableAllCurrencies","currencyList","unitsOfMeasure","measure","uom","timezones","tz","names","TagGroupBody","TagGroupHeader","TagHelpers","TagGroup","tagGroupProps","tagGroupBodyProps","renderTree","subTagGroups","subTags","onUpdateTag","genTagsList","handleTagTreeMove","TagNav","navButtonStyles","navbarOrientation","navbarPosition","navbarAnchor","navbarVisibility","closeNavbar","NavbarStates","Orientation","Position","Anchor","Visible","NavbarOrientation","Vertical","Horizontal","NavbarPosition","Static","Fixed","NavbarAnchor","Top","Right","Bottom","Left","None","TagNavHelpers","createTag","removeTag","sortTags","ofList","moveTagToNewParent","parentTagId","tagById","excludeTagsObj","hasSubTags","relatedTagIds","onWindowResize","matchQuery","attachBodyListener","closeDropdown","attachedBodyListener","detachhBodyListener","closestNavItem","closeDropdownTimeout","currentSelectedTag","previousEdit","hasEditRights","isTopLevel","oldArray","newArray","tagObject","getTags","$pullAll","HTTP","addressBookAdd","currentCountry","country_code","thisAddress","isShippingDefault","isBillingDefault","defaultAddress","defaultCountryCode","zipcode","countryCode","hasAddressBookEntries","addressBookAddForm","that","validated","trigger","addressState","requiresReview","validatedAddress","formErrors","fieldErrors","setWorkingAddress","isCommercial","addressBookEdit","addressBookEditForm","addressBookForm","addressBookGrid","selectedBilling","selectedShipping","addressBookReview","hasAddress2","addressKey","addressLine","originalAddress","currentViewTemplate","selectedAddress","ServiceConfiguration","ServiceConfigHelper","accountsDashboard","isShopMember","isShopGuest","members","shopUsers","userSub","accountsSettings","serviceHelper","configurations","matchingConfigurations","configFieldsForService","LoginFormSharedHelpers","formMessages","hasError","capitalize","str","finalString","Gravatar","currentUser","secure","picture","displayUser","google","given_name","instagram","Google","Package","oauth","serviceNames","capitalizedName","capitalizedServiceName","extendEach","availableServices","loginDropdown","logout","accountsDropdownApps","reactionAppsOptions","loginInline","LoginContainer","MessagesContainer","loginForm","loginFormMessages","getPermissionMap","permissionMap","existing","memberSettings","isOwnerDisabled","hasPermissionChecked","GLOBAL_GROUP","groupsForUser","groupUserId","getGroupsForUser","shopLabel","thisShopId","permissionGroups","hasManyPermissions","showAvalaraTaxSettings","is","$icon","confirm","memberForm","newMemberEmail","newMemberName","accountProfile","userHasPassword","addressBookView","Random","UpdatePasswordOverlayContainer","LoginFormValidation","onResetPasswordLink","loginFormUpdatePasswordOverlay","onEnrollmentLink","onEmailVerificationLink","verifyEmail","loginFormChangePassword","uniqueId","oldPasswordInput","passwordInput","oldPassword","validatedOldPassword","validationLevel","validatedPassword","isEmptyObject","changePassword","info","verifyAccount","verified","verificationStatus","LoginButtons","SignIn","SignUp","enabledServices","loginServices","onSocialClick","capitalizeName","onSeparator","renderLoginButtons","renderSeparator","onFormSubmit","credentials","i18nKeyReason","emailClasses","passwordClasses","renderFormMessages","renderEmailErrors","renderPasswordErrors","renderSpinnerOnWait","onForgotPasswordClick","onSignUpClick","hasPasswordService","onSignInClick","renderForm","letterSpacing","userImage","userName","adminShortcuts","userShortcuts","paddingRight","renderUserIcons","renderAdminIcons","renderSignOutButton","renderSignInComponent","LoginFormMessages","Forgot","isDisabled","UpdatePasswordOverlay","handleCancel","onCancel","showSpinner","renderSpinnerOnLoad","AuthContainer","handleFormSubmit","pword","validatedEmail","loginWithPassword","newUserData","createUser","shouldShowSeperator","handleSocialLogin","serviceName","loginWithService","renderAuthView","ForgotContainer","loginFormCurrentView","showForgotPasswordView","showSignUpView","showSignInView","startView","MainDropdownContainer","getCurrentUser","isGuest","isAnonymous","getUserGravatar","getAdminShortcutIcons","reasons","newEmail","passwordValue","resetPassword","handleFormCancel","Instagram","currentCurrency","maxHeight","currencyDisplay","Match","currencyName","localStorageCurrency","Locale","class","LanguageDropDown","currentLanguage","Language","LanguageDropdownContainer","currencyDep","findCurrency","defaultCurrency","useDefaultShopCurrency","localStorageCurrencyName","exchangeRate","formatPrice","defaultShopCurrency","userCurrency","currentPrice","prices","originalPrice","_formatPrice","shopCurrency","shopFormat","actualPrice","adjustedPrice","formattedPrice","where","modifiedCurrency","localeDep","i18nMessage","getBrowserLanguage","i18nextBrowserLanguageDetector","i18nextLocalStorageCache","i18nextSprintfPostProcessor","i18nextJquery","Translations","packageNamespaces","getLabelsFor","getMessagesFor","mergeDeep","lookupQuerystring","lookupCookie","lookupLocalStorage","caches","htmlTag","documentElement","resources","resource","use","detection","ns","defaultNS","fallbackNS","lng","fallbackLng","ss","labels","localize","tName","i18nName","handleName","selectorAttr","targetAttr","parseDefaultValueFromContent","navigator","browserLanguage","_schemaKeys","_globalMessages","currencyEnabled","primaryCurrency","_isMatch","_cloneDeep","optionHash","registryFilter","reactionApps","hasOwnerAccess","matchingRegistry","itemFilter","hasAccess","hasPermissionToRegistryItem","hasRoleAccessForShop","sortedApps","getGuestLoginState","_pluck","sessionVariable","positiveState","session","positive","allowGuestCheckout","isGuestFlow","reactionTemplates","layoutConfigCollection","workflowTargetCollection","currentCollection","currentCollectionWorkflow","layoutWorkflows","defaultRoles","Spacebars","toCamelCase","showDefaultOption","localLocale","monthOptions","months","month","mnum","yearOptions","year","getFullYear","downCamel","v1","operator","v2","nl2br","SafeString","nCount","pString","slugify","slugString","loginWithAnonymous","anonymous","newSession","callLoginMethod","methodArguments","userCallback","Core","Globals","Utils","Log","cookieName","isLocalStorageAvailable","readCookie","onbeforeunload","createSessionCookie","loginWithToken","testKey","nameEq","ca","cookie","SubsManager","Manager","Account","Sessions","UserProfile","reactionState","domain","absoluteUrl","domains","createCountryCollection","localeCurrency","checkPermissions","checkUserId","checkGroup","roleCheck","sellerShopPermissions","validateUserId","ownerPermissions","adminPermissions","dashboardPermissions","preference","currentPreference","getShopName","getShopCurrency","allowGuest","getSellerShopId","viewData","viewStack","actionViewStack","pushActionViewDetail","detailViewStack","actionViewDetailStack","clearActionViewDetail","getCurrentTag","watchPathChange","currentRouteName","module1","bunyan","level","REACTION_LOG_LEVEL","createLogger","global","Buffer","ReactionCore","ReactionRouter","DEFAULT_LAYOUT","DEFAULT_WORKFLOW","INDEX_OPTIONS","setDefaultTemplate","DocHead","keywords","titleCase","param","addMeta","removeDocHeadAddedTags","setTitle","validationMethods","OptionalOrNull","processedEmail","passwordOptions","currentProductId","currentVariantId","visibileVariant","variantPrices","firstPrice","lastPrice","lastIndexOf","priceMin","priceMax","priceObject","visibleChildren","POSITIVE_INFINITY","NEGATIVE_INFINITY","reduce","sum","getPublishedOrRevision","compose","getTrackerLoader","reactiveMapper","env","trackerCleanup","handler","LoadingComponent","loadingHandler","copyFile","_copyStoreData","storeName","sourceKey","isMounted","storage","storesLookup","destinationKey","adapter","fileKey","readStream","createReadStreamForFileKey","writeStream","createWriteStreamForFileKey","once","pipe","copyStoreData","wrapAsync","newMetaData","fileRecord","oldMetaData","newId","direct","newFile","mod","oldKey","copies","sourceFileStorage","isObject","parse","leading","absUrl","needscamels","registryLabel","i18nKeyDescription","Catalog","pattern","OneOf","OrderHookOptions","orderBy","__revisions","cleanProduct","revisedProduct","sorted","$or","parentVariantId","checkInventoryVariants","inventoryVariants","newRelatedTags","relatedTag","relatedTags","productOrArray","alertSettings","isAncestorDeleted","includeSelf","archivedCount","TagSchema","propName","valid","Profile","Email","Address","TaxSettings","exemptionNo","customerUsageType","invited","regEx","RegEx","Id","sessions","acceptsMarketing","isInsert","isUpsert","$setOnInsert","isUpdate","company","failedValidation","ReactionAnalyticsPackageConfig","Assets","CartItem","Payment","Shipment","ShippingParcel","Workflow","parcel","cartItemId","isFromTrustedCode","unset","denyUpdate","Emails","jobId","denyInsert","schemaIdAutoValue","isSet","isServer","Inventory","Document","Notes","orderItemId","sku","LayoutStructure","Layout","handled","namespace","scope","valueType","Notification","hasDetails","History","OrderItem","OrderTransaction","Order","docType","additionalField","paymentId","inventoryId","raw","VariantMedia","ProductPosition","Product","custom","siblingField","fulfillmentService","minOrderQuantity","requiresShipping","metaDescription","publishedAt","publishedScope","Permissions","Registry","CorePackageConfig","publishAt","ShippoShippingMethod","ShippingMethod","ShipmentQuote","ShipmentItem","ShippoShipment","ShippoShippingProvider","ShippingProvider","ShippingPackageConfig","serviceLevelToken","rateId","containers","trackingStatusStatus","trackingStatusDate","shippo","carrierAccountId","serviceAuth","serviceSecret","serviceUrl","CustomEmailSettings","Languages","ShopTheme","BrandAsset","thousand","continents","themeId","SocialProvider","Url","ReactLayout","sharedFields","author","cartTransform","getSummary","prop","prop2","handling","subTotal","taxTotal","discountTotal","orderTransform","orderCount","orderShipping","orderSubTotal","orderTaxes","orderDiscounts","itemCount","setBaseUrl","setHeadersForGet","stores","Store","GridFS","chunkSize","transformWrite","gm","isAvailable","resize","stream","gravity","extent","allow","contentTypes","newInstance","JobCollection","noCollectionSuffix","strings"],"mappings":"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","file":"/app.js","sourcesContent":["import { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Media } from \"/lib/collections\";\nimport { Icon } from \"/imports/plugins/core/ui/client/components\";\nimport { Validation } from \"@reactioncommerce/reaction-collections\";\nimport { ProductVariant } from \"/lib/collections/schemas/products\";\n\nfunction productHandle() {\n  const selectedProduct = ReactionProduct.selectedProduct();\n  return selectedProduct.__published && selectedProduct.__published.handle || selectedProduct.handle;\n}\n\nTemplate.childVariantForm.onCreated(function () {\n  this.validation = new Validation(ProductVariant);\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    validationStatus: {}\n  });\n});\n\n\n/**\n * childVariantForm onRendered\n */\nTemplate.childVariantForm.onRendered(function () {\n  const validationStatus = this.validation.validate(this.data);\n\n  this.state.set(\"validationStatus\", validationStatus);\n  this.state.set(\"variant\", this.data);\n\n  this.autorun(() => {\n    const selectedVariantId = Reaction.Router.getParam(\"variantId\");\n\n    $(`div.child-variant-collapse:not(#child-variant-form-${selectedVariantId})`).collapse(\"hide\");\n    $(`#child-variant-form-${selectedVariantId}`).collapse(\"show\");\n    $(`#option-child-variant-form-${selectedVariantId}`).focus();\n  });\n});\n\n/**\n * childVariantForm helpers\n */\n\nTemplate.childVariantForm.helpers({\n  Icon() {\n    return Icon;\n  },\n  childVariantFormId: function () {\n    return \"child-variant-form-\" + this._id;\n  },\n  media: function () {\n    const media = Media.find({\n      \"metadata.variantId\": this._id\n    }, {\n      sort: {\n        \"metadata.priority\": 1\n      }\n    });\n\n    return media;\n  },\n  featuredMedia: function () {\n    const media = Media.findOne({\n      \"metadata.variantId\": this._id\n    }, {\n      sort: {\n        \"metadata.priority\": 1\n      }\n    });\n\n    if (media) {\n      return [media];\n    }\n\n    return false;\n  },\n  handleFileUpload() {\n    const ownerId = Meteor.userId();\n    const productId = ReactionProduct.selectedProductId();\n    const shopId = Reaction.getShopId();\n    const currentData = Template.currentData();\n    const variantId = currentData._id;\n\n    return (files) => {\n      for (const file of files) {\n        file.metadata = {\n          variantId,\n          productId,\n          shopId,\n          ownerId\n        };\n\n        Media.insert(file);\n      }\n    };\n  },\n  active() {\n    const variantId = ReactionProduct.selectedVariantId();\n\n    if (variantId === this._id) {\n      return \"panel-active\";\n    }\n\n    return \"panel-default\";\n  },\n  hasValidationMessage(fieldName)  {\n    const instance = Template.instance();\n    const validationStatus = instance.state.get(\"validationStatus\");\n\n    if (validationStatus && validationStatus.messages && validationStatus.messages[fieldName]) {\n      return validationStatus.messages[fieldName];\n    }\n\n    return false;\n  },\n  hasErrorClassName(fieldName)  {\n    const instance = Template.instance();\n    const validationStatus = instance.state.get(\"validationStatus\");\n\n    if (validationStatus && validationStatus.messages && validationStatus.messages[fieldName]) {\n      return \"has-error\";\n    }\n\n    return false;\n  }\n});\n\n/**\n * childVariantForm events\n */\n\nTemplate.childVariantForm.events({\n  \"click .child-variant-form :input, click li\": function (event, template) {\n    const variantId = template.data._id;\n\n    Reaction.Router.go(\"product\", {\n      handle: productHandle(),\n      variantId: variantId\n    });\n\n    return ReactionProduct.setCurrentVariant(template.data._id);\n  },\n  \"change .child-variant-input\": function (event, template) {\n    const variant = template.data;\n    const value = Template.instance().$(event.currentTarget).val();\n    const field = Template.instance().$(event.currentTarget).attr(\"name\");\n\n    const variantToValidate = template.state.get(\"variant\") || variant;\n    const updated = {\n      ...variantToValidate,\n      [field]: value\n    };\n    const validationStatus = template.validation.validate(updated);\n\n    template.state.set(\"validationStatus\", validationStatus);\n    template.state.set(\"variant\", updated);\n\n    if (validationStatus.isValid === true) {\n      Meteor.call(\"products/updateProductField\", variant._id, field, value,\n        error => {\n          if (error) {\n            Alerts.toast(error.message, \"error\");\n          }\n        });\n    }\n\n    return ReactionProduct.setCurrentVariant(variant._id);\n  },\n  \"click .js-child-variant-heading\": function (event, instance) {\n    const variantId = instance.data._id;\n\n    Reaction.Router.go(\"product\", {\n      handle: productHandle(),\n      variantId: variantId\n    });\n  },\n\n  \"click .js-remove-child-variant\": function (event, instance) {\n    event.stopPropagation();\n    event.preventDefault();\n    const title = instance.data.optionTitle || i18next.t(\"productDetailEdit.thisOption\");\n\n    Alerts.alert({\n      title: i18next.t(\"productDetailEdit.archiveVariantConfirm\", { title }),\n      showCancelButton: true,\n      confirmButtonText: \"Archive\"\n    }, (isConfirm) => {\n      if (isConfirm) {\n        const id = instance.data._id;\n        Meteor.call(\"products/deleteVariant\", id, function (error, result) {\n          // TODO why we have this on option remove?\n          if (result && ReactionProduct.selectedVariantId() === id) {\n            ReactionProduct.setCurrentVariant(null);\n          }\n        });\n      }\n    });\n  },\n\n  \"click .js-restore-child-variant\": function (event, instance) {\n    event.stopPropagation();\n    event.preventDefault();\n    const title = instance.data.optionTitle || i18next.t(\"productDetailEdit.thisOption\");\n\n    Alerts.alert({\n      title: i18next.t(\"productDetailEdit.restoreVariantConfirm\", { title }),\n      showCancelButton: true,\n      confirmButtonText: \"Restore\"\n    }, (isConfirm) => {\n      if (isConfirm) {\n        const id = instance.data._id;\n        Meteor.call(\"products/updateProductField\", id, \"isDeleted\", false, (error) => {\n          if (error) {\n            Alerts.alert({\n              text: i18next.t(\"productDetailEdit.restoreVariantFail\", { title }),\n              confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n            });\n          }\n        });\n      }\n    });\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { applyProductRevision } from \"/lib/api/products\";\nimport { Products } from \"/lib/collections\";\nimport VariantFormContainer from \"/imports/plugins/included/product-variant/containers/variantFormContainer\";\n\nTemplate.variantForm.onCreated(function () {\n  this.state = new ReactiveDict();\n\n  this.autorun(() => {\n    const productHandle = Reaction.Router.getParam(\"handle\");\n\n    if (!productHandle) {\n      Reaction.clearActionView();\n    }\n  });\n\n  this.getVariant = (variant) => {\n    const product = Products.findOne(variant._id);\n    return applyProductRevision(product);\n  };\n});\n\n/**\n * variantForm helpers\n */\n\nTemplate.variantForm.helpers({\n  variantFormComponent() {\n    return VariantFormContainer;\n  },\n  variant() {\n    const instance = Template.instance();\n    return instance.getVariant(instance.data);\n  },\n  childVariants: function () {\n    const _id = this._id;\n    const variants = ReactionProduct.getVariants();\n    const childVariants = [];\n    variants.map(variant => {\n      if (~variant.ancestors.indexOf(_id) && variant.type !== \"inventory\") {\n        childVariants.push(variant);\n      }\n    });\n    return childVariants;\n  },\n  variantFormId: function () {\n    return \"variant-form-\" + this._id;\n  }\n});\n\n/**\n * variantForm events\n */\n\nTemplate.variantForm.events({\n  \"click .btn-child-variant-form\": function (event, template) {\n    event.stopPropagation();\n    event.preventDefault();\n    const productId = ReactionProduct.selectedProductId();\n\n    if (!productId) {\n      return;\n    }\n\n    Meteor.call(\"products/createVariant\", template.data._id, function (error, result) {\n      if (error) {\n        Alerts.alert({\n          text: i18next.t(\"productDetailEdit.addVariantFail\", { title: template.data.title }),\n          confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n        });\n      } else if (result) {\n        const newVariantId = result;\n        const selectedProduct = ReactionProduct.selectedProduct();\n        const handle = selectedProduct.__published && selectedProduct.__published.handle || selectedProduct.handle;\n        ReactionProduct.setCurrentVariant(newVariantId);\n        Session.set(\"variant-form-\" + newVariantId, true);\n\n        Reaction.Router.go(\"product\", {\n          handle: handle,\n          variantId: newVariantId\n        });\n      }\n    });\n  }\n});\n","import Sortable from \"sortablejs\";\nimport { $ } from \"meteor/jquery\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Products, Media } from \"/lib/collections\";\nimport { EditButton, VisibilityButton } from \"/imports/plugins/core/ui/client/components\";\n\nfunction variantIsSelected(variantId) {\n  const current = ReactionProduct.selectedVariant();\n  if (typeof current === \"object\" && (variantId === current._id || ~current.ancestors.indexOf(variantId))) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction variantIsInActionView(variantId) {\n  const actionViewVariant = Reaction.getActionView().data;\n\n  if (actionViewVariant) {\n    // Check if the variant is selected, and also visible & selected in the action view\n    return variantIsSelected(variantId) && variantIsSelected(actionViewVariant._id) && Reaction.isActionViewOpen();\n  }\n\n  return false;\n}\n\n/**\n * variant onRendered\n */\n\nTemplate.variantList.onRendered(function () {\n  const instance = this;\n\n  return this.autorun(function () {\n    if (Reaction.hasPermission(\"createProduct\")) {\n      const variantSort = $(\".variant-list\")[0];\n\n      this.sortable = Sortable.create(variantSort, {\n        group: \"variant-list\",\n        handle: \".variant-list-item\",\n        onUpdate() {\n          const positions = instance.$(\".variant-list-item\")\n            .toArray()\n            .map((element) => {\n              return element.getAttribute(\"data-id\");\n            });\n\n          Meteor.defer(function () {\n            Meteor.call(\"products/updateVariantsPosition\", positions);\n          });\n\n          Tracker.flush();\n        }\n      });\n    }\n  });\n});\n\n\n/**\n * variantList helpers\n */\nTemplate.variantList.helpers({\n  media: function () {\n    const media = Media.findOne({\n      \"metadata.variantId\": this._id\n    }, {\n      sort: {\n        \"metadata.priority\": 1\n      }\n    });\n\n    return media instanceof FS.File ? media : false;\n  },\n  variants: function () {\n    let inventoryTotal = 0;\n    const variants = ReactionProduct.getTopVariants();\n    if (variants.length) {\n      // calculate inventory total for all variants\n      for (const variant of variants) {\n        if (variant.inventoryManagement) {\n          const qty = ReactionProduct.getVariantQuantity(variant);\n          if (typeof qty === \"number\") {\n            inventoryTotal += qty;\n          }\n        }\n      }\n      // calculate percentage of total inventory of this product\n      for (const variant of variants) {\n        const qty = ReactionProduct.getVariantQuantity(variant);\n        variant.inventoryTotal = inventoryTotal;\n        if (variant.inventoryManagement && inventoryTotal) {\n          variant.inventoryPercentage = parseInt(qty / inventoryTotal * 100, 10);\n        } else {\n          // for cases when sellers doesn't use inventory we should always show\n          // \"green\" progress bar\n          variant.inventoryPercentage = 100;\n        }\n        if (variant.title) {\n          variant.inventoryWidth = parseInt(variant.inventoryPercentage -\n            variant.title.length, 10);\n        } else {\n          variant.inventoryWidth = 0;\n        }\n      }\n      // sort variants in correct order\n      variants.sort((a, b) => a.index - b.index);\n\n      return variants;\n    }\n    return [];\n  },\n  childVariants: function () {\n    const childVariants = [];\n    const variants = ReactionProduct.getVariants();\n    if (variants.length > 0) {\n      const current = ReactionProduct.selectedVariant();\n\n      if (!current) {\n        return [];\n      }\n\n      if (current.ancestors.length === 1) {\n        variants.map(variant => {\n          if (typeof variant.ancestors[1] === \"string\" &&\n            variant.ancestors[1] === current._id &&\n            variant.optionTitle &&\n            variant.type !== \"inventory\") {\n            childVariants.push(variant);\n          }\n        });\n      } else {\n        // TODO not sure we need this part...\n        variants.map(variant => {\n          if (typeof variant.ancestors[1] === \"string\" &&\n            variant.ancestors.length === current.ancestors.length &&\n            variant.ancestors[1] === current.ancestors[1] &&\n            variant.optionTitle\n          ) {\n            childVariants.push(variant);\n          }\n        });\n      }\n\n      return childVariants;\n    }\n\n    return null;\n  },\n  selectedVariant() {\n    if (variantIsSelected(this._id)) {\n      return \"variant-detail-selected\";\n    }\n\n    return null;\n  },\n  ChildVariantEditButton() {\n    const variant = Template.currentData();\n    const parentVariant = Products.findOne(variant.ancestors[1]);\n\n    return {\n      component: EditButton,\n      toggleOn: variantIsInActionView(variant._id),\n      onClick() {\n        ReactionProduct.setCurrentVariant(variant._id);\n        Session.set(\"variant-form-\" + parentVariant._id, true);\n\n        if (Reaction.hasPermission(\"createProduct\")) {\n          Reaction.showActionView({\n            label: \"Edit Variant\",\n            i18nKeyLabel: \"productDetailEdit.editVariant\",\n            template: \"variantForm\",\n            data: parentVariant\n          });\n        }\n      }\n    };\n  },\n  ChildVariantRevisionButton() {\n    const variant = Template.currentData();\n    // const parentVariant = Products.findOne(variant.ancestors[1]);\n\n    return {\n      component: VisibilityButton,\n      toggleOn: variant.isVisible,\n      onClick() {\n        ReactionProduct.toggleVisibility(variant);\n      }\n    };\n  }\n});\n\n/**\n * variantList events\n */\n\nTemplate.variantList.events({\n  \"click #create-variant\": function () {\n    return Meteor.call(\"products/createVariant\", this._id);\n  },\n  \"click .variant-select-option\": function (event, templateInstance) {\n    templateInstance.$(\".variant-select-option\").removeClass(\"active\");\n    $(event.target).addClass(\"active\");\n    Alerts.removeSeen();\n\n    const selectedProduct = ReactionProduct.selectedProduct();\n    Reaction.Router.go(\"product\", { handle: selectedProduct.handle, variantId: this._id });\n\n    return ReactionProduct.setCurrentVariant(this._id);\n  }\n});\n","import { Reaction } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { EditButton, VisibilityButton } from \"/imports/plugins/core/ui/client/components\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n// Duplicated in variantList/variantList.js\nfunction variantIsSelected(variantId) {\n  const current = ReactionProduct.selectedVariant();\n  if (typeof current === \"object\" && (variantId === current._id || ~current.ancestors.indexOf(variantId))) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction variantIsInActionView(variantId) {\n  const actionViewVariant = Reaction.getActionView().data;\n\n  if (actionViewVariant) {\n    // Check if the variant is selected, and also visible & selected in the action view\n    return variantIsSelected(variantId) && variantIsSelected(actionViewVariant._id) && Reaction.isActionViewOpen();\n  }\n\n  return false;\n}\n\n\n/**\n * variant helpers\n */\n\nTemplate.variant.helpers({\n  progressBar: function () {\n    if (this.inventoryPercentage <= 10) {\n      return \"progress-bar-danger\";\n    } else if (this.inventoryPercentage <= 30) {\n      return \"progress-bar-warning\";\n    }\n    return \"progress-bar-success\";\n  },\n  selectedVariant: function () {\n    if (variantIsSelected(this._id)) {\n      return \"variant-detail-selected\";\n    }\n\n    return null;\n  },\n  displayQuantity: function () {\n    return ReactionProduct.getVariantQuantity(this);\n  },\n  displayPrice: function () {\n    return ReactionProduct.getVariantPriceRange(this._id);\n  },\n  isSoldOut: function () {\n    return ReactionProduct.getVariantQuantity(this) < 1;\n  },\n  EditButton() {\n    const data = Template.currentData();\n\n    return {\n      component: EditButton,\n      toggleOn: variantIsInActionView(data._id),\n      onClick() {\n        showVariant(data);\n      }\n    };\n  },\n  VariantRevisionButton() {\n    const variant = Template.currentData();\n\n    return {\n      component: VisibilityButton,\n      toggleOn: variant.isVisible,\n      onClick(event) {\n        event.stopPropagation();\n        ReactionProduct.toggleVisibility(variant);\n      }\n    };\n  }\n});\n\n/**\n * variant events\n */\n\nfunction showVariant(variant) {\n  const selectedProduct = ReactionProduct.selectedProduct();\n\n  ReactionProduct.setCurrentVariant(variant._id);\n  Session.set(\"variant-form-\" + variant._id, true);\n  Reaction.Router.go(\"product\", { handle: selectedProduct.handle, variantId: variant._id });\n\n  if (Reaction.hasPermission(\"createProduct\")) {\n    Reaction.showActionView({\n      label: \"Edit Variant\",\n      i18nKeyLabel: \"productDetailEdit.editVariant\",\n      template: \"variantForm\",\n      data: variant\n    });\n  }\n}\n\nTemplate.variant.events({\n  \"click .variant-edit\": function () {\n    showVariant(this);\n  },\n  \"dblclick .variant-detail\": function () {\n    showVariant(this);\n  },\n  \"click .variant-detail\": function () {\n    Alerts.removeSeen();\n\n    ReactionProduct.setCurrentVariant(this._id);\n  }\n});\n","import { ReactionProduct } from \"/lib/api\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * metaComponent helpers\n */\n\nTemplate.metaComponent.helpers({\n  buttonProps() {\n    const currentData = Template.currentData();\n\n    return {\n      icon() {\n        if (currentData.createNew) {\n          return \"plus\";\n        }\n\n        return \"times-circle\";\n      },\n      onClick() {\n        if (!currentData.createNew) {\n          const productId = ReactionProduct.selectedProductId();\n          Meteor.call(\"products/removeMetaFields\", productId, currentData);\n        }\n      }\n    };\n  }\n});\n\n\nTemplate.metaComponent.events({\n  \"change input\": function (event) {\n    const productId = ReactionProduct.selectedProductId();\n    const updateMeta = {\n      key: Template.instance().$(event.currentTarget).parent().children(\".metafield-key-input\").val(),\n      value: Template.instance().$(event.currentTarget).parent().children(\".metafield-value-input\").val()\n    };\n\n    if (this.key) {\n      const index = Template.instance().$(event.currentTarget).closest(\".metafield-list-item\").index();\n      Meteor.call(\"products/updateMetaFields\", productId, updateMeta, index);\n      Template.instance().$(event.currentTarget).animate({\n        backgroundColor: \"#e2f2e2\"\n      }).animate({\n        backgroundColor: \"#fff\"\n      });\n      return Tracker.flush();\n    }\n\n    if (updateMeta.value && !updateMeta.key) {\n      Template.instance().$(event.currentTarget).parent().children(\".metafield-key-input\").val(\"\").focus();\n    }\n    if (updateMeta.key && updateMeta.value) {\n      Meteor.call(\"products/updateMetaFields\", productId, updateMeta);\n      Tracker.flush();\n      Template.instance().$(event.currentTarget).parent().children(\".metafield-key-input\").val(\"\").focus();\n      return Template.instance().$(event.currentTarget).parent().children(\".metafield-value-input\").val(\"\");\n    }\n  }\n});\n","import autosize from \"autosize\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { Reaction, i18next, Logger } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\n\n\n/**\n * productDetailEdit helpers\n */\n\nTemplate.productDetailEdit.helpers({\n  i18nPlaceholder: function () {\n    const i18nKey = `productDetailEdit.${this.field}`;\n    if (i18next.t(i18nKey) === i18nKey) {\n      Logger.warn(`returning empty placeholder productDetailEdit: ${i18nKey} no i18n key found.`);\n    } else {\n      return i18next.t(i18nKey);\n    }\n  }\n});\n\n/**\n * productDetailEdit events\n */\n\nTemplate.productDetailEdit.events({\n  \"change input,textarea\": function (event) {\n    const self = this;\n    const productId = ReactionProduct.selectedProductId();\n    Meteor.call(\"products/updateProductField\", productId, self.field,\n      Template.instance().$(event.currentTarget).val(),\n      (error, result) => {\n        if (error) {\n          return Alerts.inline(error.reason, \"error\", {\n            placement: \"productManagement\",\n            i18nKey: \"productDetail.errorMsg\",\n            id: self._id\n          });\n        }\n        if (result) {\n          // redirect to new url on title change\n          if (self.field === \"title\") {\n            Meteor.call(\"products/setHandle\", productId,\n              (err, res) => {\n                Alerts.removeSeen();\n                if (err) {\n                  Alerts.removeType(\"error\");\n                  Alerts.inline(err.reason, \"error\", {\n                    placement: \"productManagement\",\n                    i18nKey: \"productDetail.errorMsg\",\n                    id: self._id\n                  });\n                }\n                if (res) {\n                  Reaction.Router.go(\"product\", {\n                    handle: res\n                  });\n                }\n              }\n            );\n          }\n          // animate updated field\n          // TODO this needs to be moved into a component\n          return Template.instance().$(event.currentTarget).animate({\n            backgroundColor: \"#e2f2e2\"\n          }).animate({\n            backgroundColor: \"#fff\"\n          });\n        }\n      });\n\n    if (this.type === \"textarea\") {\n      autosize(Template.instance().$(event.currentTarget));\n    }\n\n    return Session.set(\"editing-\" + this.field, false);\n  }\n});\n\n/**\n * productDetailField events\n */\n\nTemplate.productDetailField.events({\n  \"click .product-detail-field\": function () {\n    if (Reaction.hasPermission(\"createProduct\")) {\n      const fieldClass = \"editing-\" + this.field;\n      Session.set(fieldClass, true);\n      // Tracker.flush();\n      return $(`.${this.field}-edit-input`).focus();\n    }\n  }\n});\n\n/**\n * productDetailEdit onRendered\n */\n\nTemplate.productDetailEdit.onRendered(function () {\n  return autosize($(\"textarea\"));\n});\n","import { $ } from \"meteor/jquery\";\nimport { Reaction } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Media } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\nimport Sortable from \"sortablejs\";\n\n/**\n * productImageGallery helpers\n */\n\n/*\n * uploadHandler method\n */\nfunction uploadHandler(event) {\n  // TODO: It would be cool to move this logic to common ValidatedMethod, but\n  // I can't find a way to do this, because of browser's `FileList` collection\n  // and it `Blob`s which is our event.target.files.\n  // There is a way to do this: http://stackoverflow.com/a/24003932. but it's too\n  // tricky\n  const productId = ReactionProduct.selectedProductId();\n  const variant = ReactionProduct.selectedVariant();\n  if (typeof variant !== \"object\") {\n    return Alerts.add(\"Please, create new Variant first.\", \"danger\", {\n      autoHide: true\n    });\n  }\n  const variantId = variant._id;\n  const shopId = ReactionProduct.selectedProduct().shopId || Reaction.getShopId();\n  const userId = Meteor.userId();\n  let count = Media.find({\n    \"metadata.variantId\": variantId\n  }).count();\n  // TODO: we need to mark the first variant images somehow for productGrid.\n  // But how do we know that this is the first, not second or other variant?\n  // Question is open. For now if product has more than 1 top variant, everyone\n  // will have a chance to be displayed\n  const toGrid = variant.ancestors.length >= 1;\n\n  return FS.Utility.eachFile(event, function (file) {\n    const fileObj = new FS.File(file);\n    fileObj.metadata = {\n      ownerId: userId,\n      productId: productId,\n      variantId: variantId,\n      shopId: shopId,\n      priority: count,\n      toGrid: +toGrid // we need number\n    };\n    Media.insert(fileObj);\n    return count++;\n  });\n}\n\n/*\n * updateImagePriorities method\n */\nfunction updateImagePriorities() {\n  $(\".gallery > .gallery-image\")\n    .toArray()\n    .map((element, index) => {\n      const mediaId = element.getAttribute(\"data-index\");\n\n      Media.update(mediaId, {\n        $set: {\n          \"metadata.priority\": index\n        }\n      });\n    });\n}\n\n/**\n *  Product Image Gallery\n */\n\nTemplate.productImageGallery.helpers({\n  media: function () {\n    let mediaArray = [];\n    const variant = ReactionProduct.selectedVariant();\n\n    if (variant) {\n      mediaArray = Media.find({\n        \"metadata.variantId\": variant._id\n      }, {\n        sort: {\n          \"metadata.priority\": 1\n        }\n      });\n    }\n    return mediaArray;\n  },\n  variant: function () {\n    return ReactionProduct.selectedVariant();\n  }\n});\n\n/**\n * productImageGallery onRendered\n */\n\nTemplate.productImageGallery.onRendered(function () {\n  this.autorun(function () {\n    let $gallery;\n    if (Reaction.hasAdminAccess()) {\n      $gallery = $(\".gallery\")[0];\n\n      this.sortable = Sortable.create($gallery, {\n        group: \"gallery\",\n        handle: \".gallery-image\",\n        onUpdate() {\n          updateImagePriorities();\n        }\n      });\n    }\n  });\n});\n\n/*\n * productImageGallery events\n */\n\nTemplate.productImageGallery.events({\n  \"mouseenter .gallery > li\": function (event) {\n    event.stopImmediatePropagation();\n    // This is a workaround for an issue with FF refiring mouseover when the contents change\n    if (event.relatedTarget === null) {\n      return undefined;\n    }\n    if (!Reaction.hasPermission(\"createProduct\")) {\n      const first = $(\".gallery li:nth-child(1)\");\n      const target = Template.instance().$(event.currentTarget);\n      if ($(target).data(\"index\") !== first.data(\"index\")) {\n        return $(\".gallery li:nth-child(1)\").fadeOut(400, function () {\n          $(this).replaceWith(target);\n          first.css({\n            display: \"inline-block\"\n          }).appendTo($(\".gallery\"));\n          return $(\".gallery li:last-child\").fadeIn(100);\n        });\n      }\n    }\n    return undefined;\n  },\n  \"click .remove-image\": function () {\n    const imageUrl =\n      $(event.target)\n        .closest(\".gallery-image\")\n        .find(\"img\")\n        .attr(\"src\");\n\n    Alerts.alert({\n      title: \"Remove Media?\",\n      type: \"warning\",\n      showCancelButton: true,\n      imageUrl,\n      imageHeight: 150\n    }, (isConfirm) => {\n      if (isConfirm) {\n        const mediaId = this._id;\n\n        Media.remove({ _id: mediaId }, (error) => {\n          if (error) {\n            Alerts.toast(error.reason, \"warning\", {\n              autoHide: 10000\n            });\n          }\n\n          updateImagePriorities();\n        });\n      }\n    });\n  },\n  \"dropped #galleryDropPane\": uploadHandler\n});\n\n/*\n * imageUploader events\n */\n\nTemplate.imageUploader.events({\n  \"click #btn-upload\": function () {\n    return $(\"#files\").click();\n  },\n  \"change #files\": uploadHandler,\n  \"dropped #dropzone\": uploadHandler\n});\n\n/*\n * productImageGallery events\n */\n\nTemplate.productImageGallery.events({\n  \"click #img-upload\": function () {\n    return $(\"#files\").click();\n  },\n  \"load .img-responsive\": function (event, template) {\n    return Session.set(\"variantImgSrc\", template.$(\".img-responsive\").attr(\n      \"src\"));\n  }\n});\n","import { ReactionProduct } from \"/lib/api\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n/**\n* productSocial helpers\n*/\n\nTemplate.productSocial.helpers({\n  customSocialSettings: function () {\n    const product = ReactionProduct.selectedProduct();\n    let title = product.title;\n    if (ReactionProduct.selectedVariant()) {\n      title = ReactionProduct.selectedVariant().title;\n    }\n\n    const settings = {\n      placement: \"productDetail\",\n      faClass: \"\",\n      faSize: \"fa-lg\",\n      media: Session.get(\"variantImgSrc\"),\n      url: window.location.href,\n      title: title || \"\",\n      description: typeof product.description === \"string\" ? product.description.substring(0, 254) : void 0,\n      apps: {\n        facebook: {\n          description: product.facebookMsg\n        },\n        twitter: {\n          title: product.twitterMsg\n        },\n        googleplus: {\n          itemtype: \"Product\",\n          description: product.googleplusMsg\n        },\n        pinterest: {\n          description: product.pinterestMsg\n        }\n      }\n    };\n    return settings;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport GridPublishContainer from \"/imports/plugins/included/product-variant/containers/gridPublishContainer\";\n\nTemplate.gridPublishControls.helpers({\n  PublishComponent() {\n    return {\n      component: GridPublishContainer\n    };\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Media } from \"/lib/collections\";\n\n/**\n * productList helpers\n */\n\nTemplate.productList.helpers({\n  products: function () {\n    return ReactionProduct.getProductsByTag(this.tag);\n  },\n  media: function () {\n    let defaultImage;\n    const variants = ReactionProduct.getTopVariants();\n    if (variants.length > 0) {\n      const variantId = variants[0]._id;\n      defaultImage = Media.findOne({\n        \"metadata.variantId\": variantId\n      }, {\n        sort: { \"metadata.priority\": 1, \"uploadedAt\": 1 }\n      });\n    }\n    if (defaultImage) {\n      return defaultImage;\n    }\n    return false;\n  }\n});\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Reaction } from \"/client/api\";\nimport Logger from \"/client/modules/logger\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Media, Products } from \"/lib/collections\";\nimport { isRevisionControlEnabled } from \"/imports/plugins/core/revisions/lib/api\";\nimport { applyProductRevision } from \"/lib/api/products\";\n\nfunction updateVariantProductField(variants, field, value) {\n  return variants.map(variant => {\n    Meteor.call(\"products/updateProductField\", variant._id, field, value);\n  });\n}\n\nTemplate.productSettings.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    products: [],\n    productIds: []\n  });\n\n  this.autorun(() => {\n    const currentData = Template.currentData();\n\n    if (_.isArray(currentData.products)) {\n      const productIds = currentData.products.map((product) => {\n        return product._id;\n      });\n\n      const products = Products.find({\n        _id: {\n          $in: productIds\n        }\n      }).map((product) => {\n        return applyProductRevision(product);\n      });\n\n      this.state.set(\"productIds\", productIds);\n      this.state.set(\"products\", products);\n    }\n  });\n});\n\nTemplate.productSettings.helpers({\n  isVisible() {\n    const instance = Template.instance();\n    const products = instance.state.get(\"products\") || [];\n\n    // Use the first selected product to determin status of bulk, isVisible button\n    if (Array.isArray(products) && products.length) {\n      return products[0].isVisible;\n    }\n\n    return false;\n  },\n  hasSelectedProducts() {\n    return this.products && this.products.length > 0;\n  },\n  itemWeightActive: function (weight) {\n    const instance = Template.instance();\n    const products = instance.state.get(\"products\");\n    const tag = ReactionProduct.getTag();\n\n    for (const product of products) {\n      const positions = product.positions && product.positions[tag] || {};\n      const currentWeight = positions.weight || 0;\n      if (currentWeight === weight) {\n        return \"active\";\n      }\n    }\n    return \"\";\n  }\n});\n\nTemplate.productSettingsListItem.events({\n  \"click [data-event-action=product-click]\": function () {\n    Reaction.Router.go(\"product\", {\n      handle: this.handle\n    });\n  }\n});\n\nTemplate.productSettingsListItem.helpers({\n  displayPrice() {\n    if (this._id) {\n      return ReactionProduct.getProductPriceRange(this._id).range;\n    }\n    return null;\n  },\n\n  media() {\n    const media = Media.findOne({\n      \"metadata.productId\": this._id,\n      \"metadata.priority\": 0,\n      \"metadata.toGrid\": 1\n    }, { sort: { uploadedAt: 1 } });\n\n    return media instanceof FS.File ? media : false;\n  },\n\n  listItemActiveClassName(productId) {\n    const handle = Reaction.Router.current().params.handle;\n\n    if (ReactionProduct.equals(\"productId\", productId) && handle) {\n      return \"active\";\n    }\n\n    return \"\";\n  }\n});\n\n/**\n * productExtendedControls events\n */\n\nTemplate.productSettings.events({\n  \"click [data-event-action=publishProduct]\": function () {\n    const instance = Template.instance();\n    const products = instance.state.get(\"products\") || [];\n\n    if (isRevisionControlEnabled()) {\n      for (const product of products) {\n        // Update the visibility using the first selected product to determine the proper\n        // visibility toggle. This is to ensure that all selected products will become visible or not visible\n        // at the same time so it's not confusing.\n        Meteor.call(\"products/updateProductField\", product._id, \"isVisible\", !products[0].isVisible);\n        // update the variants visibility\n        const variants = Products.find({\n          ancestors: {\n            $in: [product._id]\n          }\n        });\n        updateVariantProductField(variants, \"isVisible\", !products[0].isVisible);\n      }\n    } else {\n      // The legacy behavior will bulk toggle visibilty of each product seperatly.\n      //\n      // Example:\n      // If you selected 10 products, and 5 were visible and 5 were not visible, and then\n      // clicked the visibility button, 5 products would switched from not visible to visible, and the other 5\n      // would be swiched from visible to not visible.\n      ReactionProduct.publishProduct(products);\n    }\n  },\n  \"click [data-event-action=cloneProduct]\": function () {\n    ReactionProduct.cloneProduct(this.products);\n  },\n  \"click [data-event-action=archiveProduct]\": function () {\n    ReactionProduct.archiveProduct(this.products);\n  },\n  \"click [data-event-action=changeProductWeight]\": function (event) {\n    event.preventDefault();\n    const tag = ReactionProduct.getTag();\n    for (const product of this.products) {\n      const weight = Template.instance().$(event.currentTarget).data(\"event-data\") || 0;\n      const positions = {\n        weight: weight,\n        updatedAt: new Date()\n      };\n      /* eslint no-loop-func: 1 */\n      //\n      //\n      Meteor.call(\"products/updateProductPosition\", product._id, positions, tag,\n        (error) => { // eslint-disable-line no-loop-func\n          if (error) {\n            Logger.warn(error);\n            throw new Meteor.Error(403, error);\n          }\n        }\n      );\n    }\n  }\n});\n","import { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport ProductsContainer from \"/imports/plugins/included/product-variant/containers/productsContainer\";\n\nTemplate.products.helpers({\n  component() {\n    return ProductsContainer;\n  }\n});\n\n/**\n * products events\n */\n\nTemplate.products.events({\n  \"click #productListView\": function () {\n    $(\".product-grid\").hide();\n    return $(\".product-list\").show();\n  },\n  \"click #productGridView\": function () {\n    $(\".product-list\").hide();\n    return $(\".product-grid\").show();\n  },\n  \"click .product-list-item\": function () {\n    // go to new product\n    Reaction.Router.go(\"product\", {\n      handle: this._id\n    });\n  }\n});\n","import \"./templates/products/productDetail/variants/variantForm/childVariant.html\";\nimport \"./templates/products/productDetail/variants/variantForm/childVariant.js\";\nimport \"./templates/products/productDetail/variants/variantForm/variantForm.html\";\nimport \"./templates/products/productDetail/variants/variantForm/variantForm.js\";\nimport \"./templates/products/productDetail/variants/variantList/variantList.html\";\nimport \"./templates/products/productDetail/variants/variantList/variantList.js\";\nimport \"./templates/products/productDetail/variants/variant.html\";\nimport \"./templates/products/productDetail/variants/variant.js\";\nimport \"./templates/products/productDetail/attributes.html\";\nimport \"./templates/products/productDetail/attributes.js\";\nimport \"./templates/products/productDetail/edit.html\";\nimport \"./templates/products/productDetail/edit.js\";\nimport \"./templates/products/productDetail/productImageGallery.html\";\nimport \"./templates/products/productDetail/productImageGallery.js\";\nimport \"./templates/products/productDetail/social.html\";\nimport \"./templates/products/productDetail/social.js\";\n\nimport \"./templates/products/productGrid/publishControls.html\";\nimport \"./templates/products/productGrid/publishControls.js\";\n\nimport \"./templates/products/productList/productList.html\";\nimport \"./templates/products/productList/productList.js\";\n\nimport \"./templates/products/productSettings/productSettings.html\";\nimport \"./templates/products/productSettings/productSettings.js\";\n\nimport \"./templates/products/products.html\";\nimport \"./templates/products/products.js\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IconButton, Translation } from \"@reactioncommerce/reaction-ui\";\n\nclass GridItemControls extends Component {\n  static propTypes = {\n    checked: PropTypes.func,\n    hasChanges: PropTypes.func,\n    hasCreateProductPermission: PropTypes.func,\n    product: PropTypes.object\n  }\n\n  renderArchived() {\n    if (this.props.product.isDeleted) {\n      return (\n        <span className=\"badge badge-danger\">\n          <Translation defaultValue=\"Archived\" i18nKey=\"app.archived\" />\n        </span>\n      );\n    }\n  }\n\n  renderVisibilityButton() {\n    if (this.props.hasChanges()) {\n      return (\n        <div>\n          <IconButton\n            icon=\"\"\n            onIcon=\"\"\n            status=\"info\"\n          />\n        </div>\n      );\n    }\n  }\n\n  render() {\n    if (this.props.hasCreateProductPermission()) {\n      return (\n        <div className=\"product-grid-controls\">\n          <label className=\"like-button hidden\" htmlFor={`select-product-${this.props.product._id}`}>\n            <input\n              type=\"checkbox\"\n              name=\"selectProduct\"\n              value={this.props.product._id}\n              id={`select-product-${this.props.product._id}`}\n              checked={this.props.checked()}\n              readOnly\n            />\n          </label>\n\n          {this.renderArchived()}\n          {this.renderVisibilityButton()}\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nexport default GridItemControls;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Translation } from \"@reactioncommerce/reaction-ui\";\n\nclass GridItemNotice extends Component {\n  static propTypes = {\n    isBackorder: PropTypes.func,\n    isLowQuantity: PropTypes.func,\n    isSoldOut: PropTypes.func\n  }\n\n  renderNotice() {\n    if (this.props.isSoldOut()) {\n      if (this.props.isBackorder()) {\n        return (\n          <span className=\"variant-qty-sold-out badge\">\n            <Translation defaultValue=\"Backorder\" i18nKey=\"productDetail.backOrder\" />\n          </span>\n        );\n      }\n      return (\n        <span className=\"variant-qty-sold-out badge badge-danger\">\n          <Translation defaultValue=\"Sold Out!\" i18nKey=\"productDetail.soldOut\" />\n        </span>\n      );\n    } else if (this.props.isLowQuantity()) {\n      return (\n        <div className=\"badge badge-low-inv-warning\" title=\"\">\n          <Translation defaultValue=\"Limited Supply\" i18nKey=\"productDetail.limitedSupply\" />\n        </div>\n      );\n    }\n  }\n  render() {\n    return (\n      <div className=\"product-grid-badges\">\n        {this.renderNotice()}\n      </div>\n    );\n  }\n}\n\nexport default GridItemNotice;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Translation } from \"@reactioncommerce/reaction-ui\";\nimport ProductGridItemsContainer from \"../containers/productGridItemsContainer\";\nimport { DragDropProvider } from \"/imports/plugins/core/ui/client/providers\";\n\nclass ProductGrid extends Component {\n  static propTypes = {\n    products: PropTypes.array\n  }\n\n  renderProductGridItems = (products) => {\n    if (Array.isArray(products)) {\n      return products.map((product, index) => {\n        return (\n          <ProductGridItemsContainer\n            {...this.props}\n            product={product} key={index} index={index}\n          />\n        );\n      });\n    }\n    return (\n      <div className=\"row\">\n        <div className=\"text-center\">\n          <h3>\n            <Translation defaultValue=\"No Products Found\" i18nKey=\"app.noProductsFound\" />\n          </h3>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"container-main\">\n        <div className=\"product-grid\">\n          <DragDropProvider>\n            <ul className=\"product-grid-list list-unstyled\" id=\"product-grid-list\">\n              {this.renderProductGridItems(this.props.products)}\n            </ul>\n          </DragDropProvider>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProductGrid;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatPriceString } from \"/client/api\";\nimport GridItemNoticeContainer from \"../containers/gridItemNoticeContainer\";\nimport GridItemControlsContainer from \"../containers/gridItemControlsContainer\";\n\nclass ProductGridItems extends Component {\n  static propTypes = {\n    additionalMedia: PropTypes.func,\n    canEdit: PropTypes.bool,\n    connectDragSource: PropTypes.func,\n    connectDropTarget: PropTypes.func,\n    displayPrice: PropTypes.func,\n    isMediumWeight: PropTypes.func,\n    isSearch: PropTypes.bool,\n    isSelected: PropTypes.func,\n    media: PropTypes.func,\n    onClick: PropTypes.func,\n    onDoubleClick: PropTypes.func,\n    pdpPath: PropTypes.func,\n    positions: PropTypes.func,\n    product: PropTypes.object,\n    weightClass: PropTypes.func\n  }\n\n  handleDoubleClick = (event) => {\n    if (this.props.onDoubleClick) {\n      this.props.onDoubleClick(event);\n    }\n  }\n\n  handleClick = (event) => {\n    if (this.props.onClick) {\n      this.props.onClick(event);\n    }\n  }\n\n  renderPinned() {\n    return this.props.positions().pinned ? \"pinned\" : \"\";\n  }\n\n  renderVisible() {\n    return this.props.product.isVisible ? \"\" : \"not-visible\";\n  }\n\n  renderOverlay() {\n    if (this.props.product.isVisible === false) {\n      return (\n        <div className=\"product-grid-overlay\" />\n      );\n    }\n  }\n\n  renderMedia() {\n    if (this.props.media() === false) {\n      return (\n        <span className=\"product-image\" style={{ backgroundImage: \"url('/resources/placeholder.gif')\" }} />\n      );\n    }\n    return (\n      <span className=\"product-image\" style={{ backgroundImage: `url(${this.props.media().url({ store: \"large\" })})` }}/>\n    );\n  }\n\n  renderAdditionalMedia() {\n    if (this.props.additionalMedia() !== false) {\n      if (this.props.isMediumWeight()) {\n        return (\n          <div className={`product-additional-images ${this.renderVisible()}`}>\n            {this.props.additionalMedia().map((media) => {\n              <span className=\"product-image\" style={{ backgroundImage: `url(${media.url({ store: \"medium\" })})` }} />;\n            })}\n            {this.renderOverlay()}\n          </div>\n        );\n      }\n    }\n  }\n\n  renderNotices() {\n    return (\n      <div className=\"grid-alerts\">\n        <GridItemNoticeContainer product={this.props.product} />\n        <GridItemControlsContainer product={this.props.product} />\n      </div>\n\n    );\n  }\n\n  renderGridContent() {\n    return (\n      <div className=\"grid-content\">\n        <a\n          href={this.props.pdpPath()}\n          data-event-category=\"grid\"\n          data-event-action=\"product-click\"\n          data-event-label=\"grid product click\"\n          data-event-value={this.props.product._id}\n          onDoubleClick={this.handleDoubleClick}\n          onClick={this.handleClick}\n        >\n          <div className=\"overlay\">\n            <div className=\"overlay-title\">{this.props.product.title}</div>\n            <div className=\"currency-symbol\">{formatPriceString(this.props.displayPrice())}</div>\n            {this.props.isSearch &&\n                <div className=\"overlay-description\">{this.props.product.description}</div>\n            }\n          </div>\n        </a>\n      </div>\n    );\n  }\n\n  renderHoverClassName() {\n    return this.props.isSearch ? \"item-content\" : \"\";\n  }\n\n  render() {\n    const productItem = (\n      <li\n        className={`product-grid-item ${this.renderPinned()} ${this.props.weightClass()} ${this.props.isSelected()}`}\n        data-id={this.props.product._id}\n        id={this.props.product._id}\n      >\n        <div className={this.renderHoverClassName()}>\n          <span className=\"product-grid-item-alerts\" />\n\n          <a className=\"product-grid-item-images\"\n            href={this.props.pdpPath()}\n            data-event-category=\"grid\"\n            data-event-label=\"grid product click\"\n            data-event-value={this.props.product._id}\n            onDoubleClick={this.handleDoubleClick}\n            onClick={this.handleClick}\n          >\n            <div className={`product-primary-images ${this.renderVisible()}`}>\n              {this.renderMedia()}\n              {this.renderOverlay()}\n            </div>\n\n            {this.renderAdditionalMedia()}\n          </a>\n\n          {!this.props.isSearch && this.renderNotices()}\n          {this.renderGridContent()}\n        </div>\n      </li>\n    );\n\n    if (this.props.canEdit) {\n      return (\n        this.props.connectDropTarget(\n          this.props.connectDragSource(productItem)\n        )\n      );\n    }\n\n    return productItem;\n  }\n}\n\nexport default ProductGridItems;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Reaction } from \"/client/api\";\nimport { getTagIds as getIds } from \"/lib/selectors/tags\";\nimport { Translation } from \"@reactioncommerce/reaction-ui\";\nimport ProductGridContainer from \"../containers/productGridContainer\";\n\nclass ProductsComponent extends Component {\n  static propTypes = {\n    loadMoreProducts: PropTypes.func,\n    loadProducts: PropTypes.func,\n    products: PropTypes.array,\n    productsSubscription: PropTypes.object,\n    ready: PropTypes.func\n  };\n\n  handleClick = (event) => {\n    if (this.props.loadProducts) {\n      this.props.loadProducts(event);\n    }\n  }\n\n  renderProductGrid() {\n    const products = this.props.products;\n\n    const productsByKey = {};\n\n    if (Array.isArray(products)) {\n      for (const product of products) {\n        productsByKey[product._id] = product;\n      }\n    }\n\n    return (\n      <ProductGridContainer\n        productsByKey={productsByKey || {}}\n        productIds={getIds({ tags: products })}\n        canEdit={Reaction.hasPermission(\"createProduct\")}\n        products={products}\n      />\n    );\n  }\n\n  renderSpinner() {\n    if (this.props.productsSubscription.ready() === false) {\n      return (\n        <div className=\"spinner-container\">\n          <div className=\"spinner\" />\n        </div>\n      );\n    }\n  }\n\n  renderLoadMoreProductsButton() {\n    if (this.props.loadMoreProducts()) {\n      return (\n        <div className=\"product-load-more\" id=\"productScrollLimitLoader\">\n          <button\n            className=\"btn btn-inverse btn-block btn-lg\"\n            onClick={this.handleClick}\n          >\n            <Translation defaultValue=\"Load more products\" i18nKey=\"app.loadMoreProducts\" />\n          </button>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    if (this.props.ready()) {\n      return (\n        <div id=\"container-main\">\n          {this.renderProductGrid()}\n          {this.renderLoadMoreProductsButton()}\n          {this.renderSpinner()}\n        </div>\n      );\n    }\n    return (\n      <div className=\"spinner-container spinner-container-lg\">\n        <div className=\"spinner\" />\n      </div>\n    );\n  }\n}\n\nexport default ProductsComponent;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEqual } from \"lodash\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { formatPriceString } from \"/client/api\";\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardGroup,\n  Divider,\n  Select,\n  SettingsCard,\n  Switch,\n  TextField\n} from \"/imports/plugins/core/ui/client/components\";\n\nconst fieldNames = [\n  \"title\",\n  \"originCountry\",\n  \"compareAtPrice\",\n  \"price\",\n  \"width\",\n  \"length\",\n  \"height\",\n  \"weight\",\n  \"taxCode\",\n  \"taxDescription\",\n  \"inventoryQuantity\",\n  \"inventoryPolicy\",\n  \"lowInventoryWarningThreshold\"\n];\n\nconst fieldGroups = {\n  title: { group: \"variantDetails\" },\n  originCountry: { group: \"variantDetails\" },\n  compareAtPrice: { group: \"variantDetails\" },\n  price: { group: \"variantDetails\" },\n  width: { group: \"variantDetails\" },\n  length: { group: \"variantDetails\" },\n  height: { group: \"variantDetails\" },\n  weight: { group: \"variantDetails\" },\n  taxCode: { group: \"taxable\" },\n  taxDescription: { group: \"taxable\" },\n  inventoryQuantity: { group: \"inventoryManagement\" },\n  inventoryPolicy: { group: \"inventoryManagement\" },\n  lowInventoryWarningThreshold: { group: \"inventoryManagement\" }\n};\n\nclass VariantForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expandedCard: \"variantDetails\",\n      variant: props.variant,\n      inventoryPolicy: props.variant.inventoryPolicy,\n      taxable: props.variant.taxable,\n      inventoryManagement: props.variant.inventoryManagement\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextVariant = nextProps.variant || {};\n    const currentVariant = this.props.variant || {};\n\n    if (!isEqual(nextVariant, currentVariant)) {\n      for (const fieldName of fieldNames) {\n        if (nextVariant[fieldName] !== currentVariant[fieldName]) {\n          this.animateFieldFlash(fieldName);\n        }\n      }\n    }\n\n    this.setState({\n      inventoryManagement: nextProps.variant.inventoryManagement,\n      inventoryPolicy: nextProps.variant.inventoryPolicy,\n      taxable: nextProps.variant.taxable,\n      variant: nextProps.variant\n    });\n  }\n\n  fieldGroupForFieldName(field) {\n    // Other wise, if a field was passed\n    // const fieldName = this.state.viewProps.field;\n\n    let fieldName;\n\n    // If the field is an array of field name\n    if (Array.isArray(field) && field.length) {\n      // Use the first field name\n      fieldName = field[0];\n    } else {\n      fieldName = field;\n    }\n\n    const fieldData = fieldGroups[fieldName];\n\n    if (fieldData && fieldData.group) {\n      return fieldData.group;\n    }\n\n    return fieldName;\n  }\n\n  animateFieldFlash(fieldName) {\n    const fieldRef = this.refs[`${fieldName}Input`];\n\n    if (fieldRef) {\n      const input = fieldRef.refs.input;\n      const isFieldValid = this.props.validation.isFieldValid(fieldName);\n      const flashColor = isFieldValid ? \"#f0fff4\" : \"#ffeeef\";\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: flashColor }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n  }\n\n  get variant() {\n    return this.state.variant || this.props.variant || {};\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: value\n      }\n    }));\n  }\n\n  handleFieldBlur = (event, value, field) => {\n    if (this.props.onVariantFieldSave) {\n      this.props.onVariantFieldSave(this.variant._id, field, value, this.state.variant);\n    }\n  }\n\n  handleSelectChange = (value, field) => {\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: value\n      }\n    }), () => {\n      if (this.props.onVariantFieldSave) {\n        this.props.onVariantFieldSave(this.variant._id, field, value, this.state.variant);\n      }\n    });\n  }\n\n  handleCheckboxChange = (event, value, field) => {\n    this.setState(({ variant }) => ({\n      variant: {\n        ...variant,\n        [field]: value\n      }\n    }));\n\n    this.handleFieldBlur(event, value, field);\n  }\n\n  handleCardExpand = (event, card, cardName, isExpanded) => {\n    if (typeof this.props.onCardExpand === \"function\") {\n      this.props.onCardExpand(isExpanded ? cardName : undefined);\n    }\n  }\n\n  isExpanded = (groupName) => {\n    return this.state.expandedCard === groupName;\n  }\n\n  renderTaxCodeField() {\n    if (this.props.isProviderEnabled()) {\n      return (\n        <Select\n          clearable={false}\n          i18nKeyLabel=\"productVariant.taxCode\"\n          i18nKeyPlaceholder=\"productVariant.selectTaxCode\"\n          label=\"Tax Code\"\n          name=\"taxCode\"\n          ref=\"taxCodeInput\"\n          options={this.props.fetchTaxCodes()}\n          onChange={this.handleSelectChange}\n          value={this.variant.taxCode}\n        />\n      );\n    }\n    return (\n      <TextField\n        i18nKeyLabel=\"productVariant.taxCode\"\n        i18nKeyPlaceholder=\"productVariant.selectTaxCode\"\n        placeholder=\"Select Tax Code\"\n        label=\"Tax Code\"\n        name=\"taxCode\"\n        ref=\"taxCodeInput\"\n        value={this.variant.taxCode}\n        onBlur={this.handleFieldBlur}\n        onChange={this.handleFieldChange}\n        onReturnKeyDown={this.handleFieldBlur}\n        validation={this.props.validation}\n      />\n    );\n  }\n\n  renderArchiveButton() {\n    if (this.props.isDeleted) {\n      return (\n        <Button\n          icon=\"refresh\"\n          className=\"rui btn btn-default btn-restore-variant flat\"\n          tooltip=\"Restore\"\n          onClick={() => this.props.restoreVariant(this.variant)}\n        />\n      );\n    }\n    return (\n      <Button\n        icon=\"archive\"\n        className=\"rui btn btn-default btn-remove-variant flat\"\n        tooltip=\"Archive\"\n        onClick={() => this.props.removeVariant(this.variant)}\n      />\n    );\n  }\n\n  renderArchivedLabel() {\n    if (this.props.isDeleted) {\n      return (\n        <div className=\"panel-subheading\">\n          <span className=\"badge badge-danger\" data-i18n=\"app.archived\">\n            <span>Archived</span>\n          </span>\n        </div>\n      );\n    }\n  }\n\n  renderQuantityField() {\n    if (this.props.hasChildVariants(this.variant)) {\n      return (\n        <div className=\"col-sm-6\">\n          <TextField\n            i18nKeyLabel=\"productVariant.inventoryQuantity\"\n            i18nKeyPlaceholder=\"0\"\n            placeholder=\"0\"\n            label=\"Quantity\"\n            name=\"inventoryQuantity\"\n            ref=\"inventoryQuantityInput\"\n            value={this.props.onUpdateQuantityField(this.variant)}\n            style={{ backgroundColor: \"lightgrey\", cursor: \"not-allowed\" }}\n            disabled={true}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"col-sm-6\">\n        <TextField\n          i18nKeyLabel=\"productVariant.inventoryQuantity\"\n          i18nKeyPlaceholder=\"0\"\n          placeholder=\"0\"\n          label=\"Quantity\"\n          name=\"inventoryQuantity\"\n          ref=\"inventoryQuantityInput\"\n          value={this.variant.inventoryQuantity}\n          onChange={this.handleFieldChange}\n          onBlur={this.handleFieldBlur}\n          onReturnKeyDown={this.handleFieldBlur}\n          validation={this.props.validation}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        <Card\n          expandable={true}\n          expanded={this.isExpanded(\"variantDetails\")}\n          name=\"variantDetails\"\n          onExpand={this.handleCardExpand}\n        >\n          <CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetailEdit.variantDetails\"\n            title=\"Variant Details\"\n          >\n            {this.renderArchivedLabel()}\n            <Button\n              icon=\"files-o\"\n              className=\"rui btn btn-default btn-clone-variant flat\"\n              tooltip=\"Duplicate\"\n              onClick={() => this.props.cloneVariant(this.variant)}\n            />\n            {this.renderArchiveButton()}\n          </CardHeader>\n          <CardBody expandable={true}>\n            <TextField\n              i18nKeyLabel=\"productVariant.title\"\n              i18nKeyPlaceholder=\"productVariant.title\"\n              placeholder=\"Label\"\n              label=\"Label\"\n              name=\"title\"\n              ref=\"titleInput\"\n              value={this.variant.title}\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              validation={this.props.validation}\n            />\n            <Select\n              clearable={false}\n              i18nKeyLabel=\"productVariant.originCountry\"\n              i18nKeyPlaceholder=\"productVariant.originCountry\"\n              label=\"Origin Country\"\n              name=\"originCountry\"\n              ref=\"countryOfOriginInput\"\n              options={this.props.countries}\n              onChange={this.handleSelectChange}\n              value={this.variant.originCountry}\n            />\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <TextField\n                  i18nKeyLabel=\"productVariant.compareAtPrice\"\n                  i18nKeyPlaceholder={formatPriceString(\"0.00\")}\n                  placeholder={formatPriceString(\"0.00\")}\n                  label=\"MSRP\"\n                  name=\"compareAtPrice\"\n                  ref=\"compareAtPriceInput\"\n                  value={this.variant.compareAtPrice}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <TextField\n                  i18nKeyLabel=\"productVariant.price\"\n                  i18nKeyPlaceholder={formatPriceString(\"0.00\")}\n                  placeholder={formatPriceString(\"0.00\")}\n                  label=\"Price\"\n                  name=\"price\"\n                  ref=\"priceInput\"\n                  value={this.variant.price}\n                  style={this.props.greyDisabledFields(this.variant)}\n                  disabled={this.props.hasChildVariants(this.variant)}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n            <Divider />\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <TextField\n                  i18nKeyLabel=\"productVariant.width\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Width\"\n                  name=\"width\"\n                  ref=\"widthInput\"\n                  value={this.variant.width}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <TextField\n                  i18nKeyLabel=\"productVariant.length\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Length\"\n                  name=\"length\"\n                  ref=\"lengthInput\"\n                  value={this.variant.length}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"col-sm-6\">\n                <TextField\n                  i18nKeyLabel=\"productVariant.height\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Height\"\n                  name=\"height\"\n                  ref=\"heightInput\"\n                  value={this.variant.height}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n              <div className=\"col-sm-6\">\n                <TextField\n                  i18nKeyLabel=\"productVariant.weight\"\n                  i18nKeyPlaceholder=\"0\"\n                  placeholder=\"0\"\n                  label=\"Weight\"\n                  name=\"weight\"\n                  ref=\"weightInput\"\n                  value={this.variant.weight}\n                  onBlur={this.handleFieldBlur}\n                  onChange={this.handleFieldChange}\n                  onReturnKeyDown={this.handleFieldBlur}\n                  validation={this.props.validation}\n                />\n              </div>\n            </div>\n          </CardBody>\n        </Card>\n\n        <SettingsCard\n          enabled={this.state.taxable}\n          expandable={true}\n          i18nKeyTitle=\"productVariant.taxable\"\n          name=\"taxable\"\n          packageName={\"reaction-product-variant\"}\n          saveOpenStateToPreferences={true}\n          showSwitch={true}\n          title=\"Taxable\"\n          onSwitchChange={this.handleCheckboxChange}\n        >\n          {this.renderTaxCodeField()}\n          <TextField\n            i18nKeyLabel=\"productVariant.taxDescription\"\n            i18nKeyPlaceholder=\"productVariant.taxDescription\"\n            placeholder=\"Tax Description\"\n            label=\"Tax Description\"\n            name=\"taxDescription\"\n            ref=\"taxDescriptionInput\"\n            value={this.variant.taxDescription}\n            onBlur={this.handleFieldBlur}\n            onChange={this.handleFieldChange}\n            onReturnKeyDown={this.handleFieldBlur}\n            validation={this.props.validation}\n          />\n        </SettingsCard>\n\n        <SettingsCard\n          enabled={this.state.inventoryManagement}\n          expandable={true}\n          i18nKeyTitle=\"productVariant.inventoryManagement\"\n          name=\"inventoryManagement\"\n          packageName={\"reaction-product-variant\"}\n          saveOpenStateToPreferences={true}\n          showSwitch={true}\n          title=\"Inventory Tracking\"\n          onSwitchChange={this.handleCheckboxChange}\n        >\n          <div className=\"row\">\n            {this.renderQuantityField()}\n            <div className=\"col-sm-6\">\n              <TextField\n                i18nKeyLabel=\"productVariant.lowInventoryWarningThreshold\"\n                i18nKeyPlaceholder=\"0\"\n                placeholder=\"0\"\n                label=\"Warn At\"\n                name=\"lowInventoryWarningThreshold\"\n                ref=\"lowInventoryWarningThresholdInput\"\n                value={this.variant.lowInventoryWarningThreshold}\n                onBlur={this.handleFieldBlur}\n                onChange={this.handleFieldChange}\n                onReturnKeyDown={this.handleFieldBlur}\n                validation={this.props.validation}\n              />\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-6\">\n              <Switch\n                i18nKeyLabel=\"productVariant.inventoryPolicy\"\n                i18nKeyOnLabel=\"productVariant.inventoryPolicy\"\n                name=\"inventoryPolicy\"\n                label={\"Allow Backorder\"}\n                onLabel={\"Allow Backorder\"}\n                checked={this.state.inventoryPolicy}\n                onChange={this.handleCheckboxChange}\n                validation={this.props.validation}\n              />\n            </div>\n          </div>\n        </SettingsCard>\n      </CardGroup>\n    );\n  }\n}\n\nVariantForm.propTypes = {\n  cloneVariant: PropTypes.func,\n  countries: PropTypes.arrayOf(PropTypes.object),\n  editFocus: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  fetchTaxCodes: PropTypes.func,\n  greyDisabledFields: PropTypes.func,\n  hasChildVariants: PropTypes.func,\n  isDeleted: PropTypes.bool,\n  isProviderEnabled: PropTypes.func,\n  onCardExpand: PropTypes.func,\n  onFieldChange: PropTypes.func,\n  onUpdateQuantityField: PropTypes.func,\n  onVariantFieldSave: PropTypes.func,\n  removeVariant: PropTypes.func,\n  restoreVariant: PropTypes.func,\n  validation: PropTypes.object,\n  variant: PropTypes.object\n};\n\nexport default VariantForm;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Session } from \"meteor/session\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction } from \"/client/api\";\nimport GridItemControls from \"../components/gridItemControls\";\n\nclass GridItemControlsContainer extends Component {\n  static propTypes = {\n    isSelected: PropTypes.bool,\n    product: PropTypes.object\n  }\n\n  constructor() {\n    super();\n\n    this.hasCreateProductPermission = this.hasCreateProductPermission.bind(this);\n    this.hasChanges = this.hasChanges.bind(this);\n    this.checked = this.checked.bind(this);\n  }\n\n  hasCreateProductPermission = () => {\n    return Reaction.hasPermission(\"createProduct\");\n  }\n\n  hasChanges =() => {\n    return this.props.product.__draft ? true : false;\n  }\n\n  checked = () => {\n    return this.props.isSelected === true;\n  }\n\n  render() {\n    return (\n      <GridItemControls\n        product={this.props.product}\n        hasCreateProductPermission={this.hasCreateProductPermission}\n        hasChanges={this.hasChanges}\n        checked={this.checked}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const product = props.product;\n  let isSelected;\n\n  if (product) {\n    const selectedProducts = Session.get(\"productGrid/selectedProducts\");\n    isSelected = Array.isArray(selectedProducts) ? selectedProducts.indexOf(product._id) >= 0 : false;\n  }\n\n  onData(null, {\n    product,\n    isSelected\n  });\n}\n\nexport default composeWithTracker(composer)(GridItemControlsContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport GridItemNotice from \"../components/gridItemNotice\";\n\nclass GridItemNoticeController extends Component {\n  static propTypes = {\n    product: PropTypes.object\n  }\n  constructor() {\n    super();\n\n    this.isLowQuantity = this.isLowQuantity.bind(this);\n    this.isSoldOut = this.isSoldOut.bind(this);\n    this.isBackorder = this.isBackorder.bind(this);\n  }\n\n  isLowQuantity = () => {\n    const topVariants = ReactionProduct.getTopVariants(this.props.product._id);\n\n    for (const topVariant of topVariants) {\n      const inventoryThreshold = topVariant.lowInventoryWarningThreshold;\n      const inventoryQuantity = ReactionProduct.getVariantQuantity(topVariant);\n\n      if (inventoryQuantity !== 0 && inventoryThreshold >= inventoryQuantity) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  isSoldOut = () => {\n    const topVariants = ReactionProduct.getTopVariants(this.props.product._id);\n\n    for (const topVariant of topVariants) {\n      const inventoryQuantity = ReactionProduct.getVariantQuantity(topVariant);\n\n      if (inventoryQuantity > 0) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  isBackorder = () => {\n    return this.props.product.isBackorder;\n  }\n\n  render() {\n    return (\n      <GridItemNotice\n        isLowQuantity={this.isLowQuantity}\n        isSoldOut={this.isSoldOut}\n        isBackorder={this.isBackorder}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const product = props.product;\n\n  onData(null, {\n    product\n  });\n}\n\nexport default composeWithTracker(composer)(GridItemNoticeController);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Products } from \"/lib/collections\";\nimport PublishContainer from \"/imports/plugins/core/revisions/client/containers/publishContainer\";\n\nclass GridProductPublishContainer extends Component {\n  static propTypes = {\n    documentIds: PropTypes.arrayOf(PropTypes.string),\n    documents: PropTypes.arrayOf(PropTypes.object)\n  };\n\n  handleVisibilityChange = (event, isProductVisible) => {\n    if (Array.isArray(this.props.documentIds)) {\n      for (const productId of this.props.documentIds) {\n        Meteor.call(\"products/updateProductField\", productId, \"isVisible\", isProductVisible);\n      }\n    }\n  }\n\n  handlePublishActions = (event, action) => {\n    if (action === \"archive\") {\n      ReactionProduct.archiveProduct(this.props.documents);\n    }\n  }\n\n  render() {\n    return (\n      <PublishContainer\n        onAction={this.handlePublishActions}\n        onVisibilityChange={this.handleVisibilityChange}\n        {...this.props}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const selectedProducts = Session.get(\"productGrid/selectedProducts\");\n  const products = Session.get(\"productGrid/products\");\n\n  let productIds;\n\n  if (Array.isArray(selectedProducts) && selectedProducts.length) {\n    productIds = selectedProducts;\n  } else if (Array.isArray(products) && products.length) {\n    productIds = products.map(p => p._id);\n  }\n\n  if (productIds) {\n    const documents = Products.find({\n      _id: { $in: productIds }\n    }).fetch();\n\n    onData(null, {\n      documentIds: productIds,\n      documents\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\n// Decorate component and export\nexport default composeWithTracker(composer)(GridProductPublishContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport update from \"react/lib/update\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Reaction } from \"/client/api\";\nimport Logger from \"/client/modules/logger\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { DragDropProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport ProductGrid from \"../components/productGrid\";\n\nclass ProductGridContainer extends Component {\n  static propTypes = {\n    canEdit: PropTypes.bool,\n    isSearch: PropTypes.bool,\n    productIds: PropTypes.array,\n    products: PropTypes.array,\n    productsByKey: PropTypes.object,\n    unmountMe: PropTypes.func\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      products: props.products,\n      productsByKey: props.productsByKey,\n      productIds: props.productIds,\n      initialLoad: true,\n      slug: \"\",\n      canLoadMoreProducts: false\n    };\n  }\n\n  componentWillMount() {\n    const selectedProducts = Reaction.getUserPreferences(\"reaction-product-variant\", \"selectedGridItems\");\n    const products = this.products;\n\n    if (_.isEmpty(selectedProducts)) {\n      return Reaction.hideActionView();\n    }\n\n    // Save the selected items to the Session\n    Session.set(\"productGrid/selectedProducts\", _.uniq(selectedProducts));\n\n    if (products) {\n      const filteredProducts = _.filter(products, (product) => {\n        return _.includes(selectedProducts, product._id);\n      });\n\n      if (Reaction.isPreview() === false) {\n        Reaction.showActionView({\n          label: \"Grid Settings\",\n          i18nKeyLabel: \"gridSettingsPanel.title\",\n          template: \"productSettings\",\n          type: \"product\",\n          data: { products: filteredProducts }\n        });\n      }\n    }\n  }\n\n  componentWillReceiveProps = (nextProps) => {\n    this.setState({\n      products: nextProps.products,\n      productIds: nextProps.productIds,\n      productsByKey: nextProps.productsByKey\n    });\n  }\n\n  handleSelectProductItem = (isChecked, productId) => {\n    let selectedProducts = Session.get(\"productGrid/selectedProducts\");\n\n    if (isChecked) {\n      selectedProducts.push(productId);\n    } else {\n      selectedProducts = _.without(selectedProducts, productId);\n    }\n\n    Reaction.setUserPreferences(\"reaction-product-variant\", \"selectedGridItems\", selectedProducts);\n\n    // Save the selected items to the Session\n    Session.set(\"productGrid/selectedProducts\", _.uniq(selectedProducts));\n\n    const products = this.products;\n\n    if (products) {\n      const filteredProducts = _.filter(products, (product) => {\n        return _.includes(selectedProducts, product._id);\n      });\n\n      Reaction.showActionView({\n        label: \"Grid Settings\",\n        i18nKeyLabel: \"gridSettingsPanel.title\",\n        template: \"productSettings\",\n        type: \"product\",\n        data: { products: filteredProducts }\n      });\n    }\n  }\n\n  handleProductDrag = (dragIndex, hoverIndex) => {\n    const newState = this.changeProductOrderOnState(dragIndex, hoverIndex);\n    this.setState(newState, this.callUpdateMethod);\n  }\n\n  changeProductOrderOnState(dragIndex, hoverIndex) {\n    const product = this.state.productIds[dragIndex];\n\n    return update(this.state, {\n      productIds: {\n        $splice: [\n          [dragIndex, 1],\n          [hoverIndex, 0, product]\n        ]\n      }\n    });\n  }\n\n  callUpdateMethod() {\n    const tag = ReactionProduct.getTag();\n\n    this.state.productIds.map((productId, index) => {\n      const position = { position: index, updatedAt: new Date() };\n\n      Meteor.call(\"products/updateProductPosition\", productId, position, tag, error => {\n        if (error) {\n          Logger.error(error);\n          throw new Meteor.Error(error);\n        }\n      });\n    });\n  }\n\n  get products() {\n    if (this.props.isSearch) {\n      return this.state.products;\n    }\n    return this.state.productIds.map((id) => this.state.productsByKey[id]);\n  }\n\n  render() {\n    return (\n      <DragDropProvider>\n        <ProductGrid\n          products={this.products}\n          onMove={this.handleProductDrag}\n          itemSelectHandler={this.handleSelectProductItem}\n          canEdit={this.props.canEdit}\n          isSearch={this.props.isSearch}\n          unmountMe={this.props.unmountMe}\n        />\n      </DragDropProvider>\n    );\n  }\n}\n\n\nfunction composer(props, onData) {\n  onData(null, {});\n}\n\nexport default composeWithTracker(composer)(ProductGridContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { Session } from \"meteor/session\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Media } from \"/lib/collections\";\nimport { SortableItem } from \"/imports/plugins/core/ui/client/containers\";\nimport ProductGridItems from \"../components/productGridItems\";\n\nclass ProductGridItemsContainer extends Component {\n  static propTypes = {\n    connectDragSource: PropTypes.func,\n    connectDropTarget: PropTypes.func,\n    isSearch: PropTypes.bool,\n    itemSelectHandler: PropTypes.func,\n    product: PropTypes.object,\n    unmountMe: PropTypes.func\n  }\n\n  constructor() {\n    super();\n\n    this.productPath = this.productPath.bind(this);\n    this.positions = this.positions.bind(this);\n    this.weightClass = this.weightClass.bind(this);\n    this.isSelected = this.isSelected.bind(this);\n    this.productMedia = this.productMedia.bind(this);\n    this.additionalProductMedia = this.additionalProductMedia.bind(this);\n    this.isMediumWeight = this.isMediumWeight.bind(this);\n    this.displayPrice = this.displayPrice.bind(this);\n    this.onDoubleClick = this.onDoubleClick.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.onPageClick = this.onPageClick.bind(this);\n  }\n\n  componentDidMount() {\n    document.querySelector(\".page > main\").addEventListener(\"click\", this.onPageClick);\n  }\n\n  componentWillUnmount() {\n    document.querySelector(\".page > main\").removeEventListener(\"click\", this.onPageClick);\n  }\n\n  onPageClick = () => {\n    // Do nothing if we are in preview mode\n    if (Reaction.isPreview() === false) {\n      // Don't trigger the clear selection if we're clicking on a grid item.\n      if (event.target.closest(\".product-grid-item\") === null) {\n        const selectedProducts = Session.get(\"productGrid/selectedProducts\");\n\n        // Do we have any selected products?\n        // If we do then lets reset the Grid Settings ActionView\n        if (Array.isArray(selectedProducts) && selectedProducts.length) {\n          // Reset sessions ver of selected products\n          Session.set(\"productGrid/selectedProducts\", []);\n\n          // Reset the action view of selected products\n          Reaction.setActionView({\n            label: \"Grid Settings\",\n            i18nKeyLabel: \"gridSettingsPanel.title\",\n            template: \"productSettings\",\n            type: \"product\",\n            data: {}\n          });\n        }\n      }\n    }\n  }\n\n  productPath = () => {\n    if (this.props.product) {\n      let handle = this.props.product.handle;\n\n      if (this.props.product.__published) {\n        handle = this.props.product.__published.handle;\n      }\n\n      return Reaction.Router.pathFor(\"product\", {\n        hash: {\n          handle\n        }\n      });\n    }\n\n    return \"/\";\n  }\n\n  positions = () => {\n    const tag = ReactionProduct.getTag();\n    return this.props.product.positions && this.props.product.positions[tag] || {};\n  }\n\n  weightClass = () => {\n    const positions = this.positions();\n    const weight = positions.weight || 0;\n    switch (weight) {\n      case 1:\n        return \"product-medium\";\n      case 2:\n        return \"product-large\";\n      default:\n        return \"product-small\";\n    }\n  }\n\n  isSelected = () => {\n    if (Reaction.isPreview() === false) {\n      return _.includes(Session.get(\"productGrid/selectedProducts\"), this.props.product._id) ? \"active\" : \"\";\n    }\n    return false;\n  }\n\n  productMedia = () => {\n    const media = Media.findOne({\n      \"metadata.productId\": this.props.product._id,\n      \"metadata.toGrid\": 1\n    }, {\n      sort: { \"metadata.priority\": 1, \"uploadedAt\": 1 }\n    });\n\n    return media instanceof FS.File ? media : false;\n  }\n\n  additionalProductMedia = () => {\n    const mediaArray = Media.find({\n      \"metadata.productId\": this.props.product._id,\n      \"metadata.priority\": {\n        $gt: 0\n      },\n      \"metadata.toGrid\": 1\n    }, { limit: 3 });\n\n    return mediaArray.count() > 1 ? mediaArray : false;\n  }\n\n  isMediumWeight = () => {\n    const positions = this.positions();\n    const weight = positions.weight || 0;\n\n    return weight === 1;\n  }\n\n  displayPrice = () => {\n    if (this.props.product.price && this.props.product.price.range) {\n      return this.props.product.price.range;\n    }\n  }\n\n  handleCheckboxSelect = (list, product) => {\n    let checkbox = list.querySelector(`input[type=checkbox][value=\"${product._id}\"]`);\n    const items = document.querySelectorAll(\"li.product-grid-item\");\n    const activeItems = document.querySelectorAll(\"li.product-grid-item.active\");\n    const selected = activeItems.length;\n\n    if (event.shiftKey && selected > 0) {\n      const indexes = [\n        Array.prototype.indexOf.call(items, document.querySelector(`li.product-grid-item[id=\"${product._id}\"]`)),\n        Array.prototype.indexOf.call(items, activeItems[0]),\n        Array.prototype.indexOf.call(items, activeItems[selected - 1])\n      ];\n      for (let i = _.min(indexes); i <= _.max(indexes); i++) {\n        checkbox = items[i].querySelector(\"input[type=checkbox]\");\n        if (checkbox.checked === false) {\n          checkbox.checked = true;\n          this.props.itemSelectHandler(checkbox.checked, product._id);\n        }\n      }\n    } else {\n      checkbox.checked = !checkbox.checked;\n      this.props.itemSelectHandler(checkbox.checked, product._id);\n    }\n  }\n\n  onDoubleClick = () => {\n    const product = this.props.product;\n    const handle = product.__published && product.__published.handle || product.handle;\n\n    Reaction.Router.go(\"product\", {\n      handle: handle\n    });\n\n    Reaction.setActionView({\n      i18nKeyLabel: \"productDetailEdit.productSettings\",\n      label: \"Product Settings\",\n      template: \"ProductAdmin\"\n    });\n\n    if (this.props.isSearch) {\n      this.props.unmountMe();\n    }\n  }\n\n  onClick = (event) => {\n    event.preventDefault();\n    const product = this.props.product;\n\n    if (Reaction.hasPermission(\"createProduct\") && Reaction.isPreview() === false) {\n      if (this.props.isSearch) {\n        let handle = product.handle;\n        if (product.__published) {\n          handle = product.__published.handle;\n        }\n\n        Reaction.Router.go(\"product\", {\n          handle: handle\n        });\n\n        this.props.unmountMe();\n      }\n\n      const isSelected = event.target.closest(\"li.product-grid-item.active\");\n      const list = document.getElementById(\"product-grid-list\");\n\n      if (isSelected) {\n        // If a product is already selected, and you are single clicking on another product(s)\n        // WITH command key, the product(s) are added to the selected products Session array\n        this.handleCheckboxSelect(list, product);\n        if (event.metaKey || event.ctrlKey || event.shiftKey) {\n          this.handleCheckboxSelect(list, product);\n        }\n      } else {\n        if (event.metaKey || event.ctrlKey || event.shiftKey) {\n          this.handleCheckboxSelect(list, product);\n        } else {\n          const checkbox = list.querySelector(`input[type=checkbox][value=\"${product._id}\"]`);\n          Session.set(\"productGrid/selectedProducts\", []);\n          checkbox.checked = true;\n          this.props.itemSelectHandler(checkbox.checked, product._id);\n        }\n      }\n    } else {\n      const handle = product.__published && product.__published.handle || product.handle;\n\n      Reaction.Router.go(\"product\", {\n        handle: handle\n      });\n\n      if (this.props.isSearch) {\n        this.props.unmountMe();\n      }\n    }\n  }\n\n  render() {\n    return (\n      <ProductGridItems\n        product={this.props.product}\n        pdpPath={this.productPath}\n        positions={this.positions}\n        weightClass={this.weightClass}\n        isSelected={this.isSelected}\n        media={this.productMedia}\n        additionalMedia={this.additionalProductMedia}\n        isMediumWeight={this.isMediumWeight}\n        displayPrice={this.displayPrice}\n        onDoubleClick={this.onDoubleClick}\n        onClick={this.onClick}\n        {...this.props}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  onData(null, {});\n}\n\nconst container = composeWithTracker(composer)(ProductGridItemsContainer);\nexport default SortableItem(\"productGridItem\", container);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Reaction } from \"/client/api\";\nimport { ITEMS_INCREMENT } from \"/client/config/defaults\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { applyProductRevision } from \"/lib/api/products\";\nimport { Products, Tags } from \"/lib/collections\";\nimport ProductsComponent from \"../components/products\";\n\n/**\n * loadMoreProducts\n * @summary whenever #productScrollLimitLoader becomes visible, retrieve more results\n * this basically runs this:\n * Session.set('productScrollLimit', Session.get('productScrollLimit') + ITEMS_INCREMENT);\n * @return {undefined}\n */\nfunction loadMoreProducts() {\n  let threshold;\n  const target = document.querySelectorAll(\"#productScrollLimitLoader\");\n  let scrollContainer = document.querySelectorAll(\"#container-main\");\n  if (scrollContainer.length === 0) {\n    scrollContainer = window;\n  }\n\n  if (target.length) {\n    threshold = scrollContainer[0].scrollHeight - scrollContainer[0].scrollTop === scrollContainer[0].clientHeight;\n\n    if (threshold) {\n      if (!target[0].getAttribute(\"visible\")) {\n        target[0].setAttribute(\"productScrollLimit\", true);\n        Session.set(\"productScrollLimit\", Session.get(\"productScrollLimit\") + ITEMS_INCREMENT || 24);\n      }\n    } else {\n      if (target[0].getAttribute(\"visible\")) {\n        target[0].setAttribute(\"visible\", false);\n      }\n    }\n  }\n}\n\nclass ProductsContainer extends Component {\n  static propTypes = {\n    canLoadMoreProducts: PropTypes.bool,\n    products: PropTypes.array,\n    productsSubscription: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      initialLoad: true\n    };\n\n    this.ready = this.ready.bind(this);\n    this.loadMoreProducts = this.loadMoreProducts.bind(this);\n  }\n\n  ready = () => {\n    const isInitialLoad = this.state.initialLoad === true;\n    const isReady = this.props.productsSubscription.ready();\n\n    if (isInitialLoad === false) {\n      return true;\n    }\n\n    if (isReady) {\n      return true;\n    }\n    return false;\n  }\n\n  loadMoreProducts = () => {\n    return this.props.canLoadMoreProducts === true;\n  }\n\n  loadProducts = (event) => {\n    event.preventDefault();\n    this.setState({\n      initialLoad: false\n    });\n    loadMoreProducts();\n  }\n\n  render() {\n    return (\n      <ProductsComponent\n        ready={this.ready}\n        products={this.props.products}\n        productsSubscription={this.props.productsSubscription}\n        loadMoreProducts={this.loadMoreProducts}\n        loadProducts={this.loadProducts}\n      />\n    );\n  }\n}\nfunction composer(props, onData) {\n  window.prerenderReady = false;\n\n  let canLoadMoreProducts = false;\n\n  const slug = Reaction.Router.getParam(\"slug\");\n  const tag = Tags.findOne({ slug: slug }) || Tags.findOne(slug);\n  const scrollLimit = Session.get(\"productScrollLimit\");\n  let tags = {}; // this could be shop default implementation needed\n\n  if (tag) {\n    tags = { tags: [tag._id] };\n  }\n\n  // if we get an invalid slug, don't return all products\n  if (!tag && slug) {\n    return;\n  }\n  const currentTag = ReactionProduct.getTag();\n\n  const sort = {\n    [`positions.${currentTag}.position`]: 1,\n    [`positions.${currentTag}.createdAt`]: 1,\n    createdAt: 1\n  };\n\n  const queryParams = Object.assign({}, tags, Reaction.Router.current().queryParams);\n  const productsSubscription = Meteor.subscribe(\"Products\", scrollLimit, queryParams, sort);\n\n  if (productsSubscription.ready()) {\n    window.prerenderReady = true;\n  }\n\n  const productCursor = Products.find({\n    ancestors: [],\n    type: { $in: [\"simple\"] }\n  });\n\n  const products = productCursor.map((product) => {\n    return applyProductRevision(product);\n  });\n\n  const sortedProducts = ReactionProduct.sortProducts(products, currentTag);\n\n\n  canLoadMoreProducts = productCursor.count() >= Session.get(\"productScrollLimit\");\n  const stateProducts = sortedProducts;\n\n  Session.set(\"productGrid/products\", sortedProducts);\n\n  const isActionViewOpen = Reaction.isActionViewOpen();\n  if (isActionViewOpen === false) {\n    Session.set(\"productGrid/selectedProducts\", []);\n  }\n\n  onData(null, {\n    productsSubscription,\n    products: stateProducts,\n    canLoadMoreProducts\n  });\n}\nexport default composeWithTracker(composer)(ProductsContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Packages } from \"/lib/collections\";\nimport { Countries } from \"/client/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { TaxCodes } from \"/imports/plugins/core/taxes/lib/collections\";\nimport VariantForm from \"../components/variantForm\";\nimport { ProductVariant } from \"/lib/collections/schemas/products\";\nimport { Validation } from \"@reactioncommerce/reaction-collections\";\n\nclass VariantFormContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validation = new Validation(ProductVariant);\n\n    this.state = {\n      variant: props.variant,\n      validationStatus: this.validation.validationStatus,\n      isDeleted: props.variant && props.variant.isDeleted\n    };\n  }\n\n  componentDidMount() {\n    this.runVariantValidation(this.state.variant);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState(() => ({\n      variant: nextProps.variant\n    }), () => {\n      this.runVariantValidation(this.state.variant);\n    });\n  }\n\n  runVariantValidation(variant) {\n    if (variant) {\n      const validationStatus = this.validation.validate(variant);\n\n      this.setState(() => ({\n        validationStatus,\n        variant\n      }));\n\n      return validationStatus;\n    }\n  }\n\n  isProviderEnabled = () => {\n    const shopId = Reaction.getShopId();\n\n    const provider = Packages.findOne({\n      \"shopId\": shopId,\n      \"registry.provides\": \"taxCodes\",\n      \"$where\": function () {\n        const providerName = this.name.split(\"-\")[1];\n        return this.settings[providerName].enabled;\n      }\n    });\n\n    if (provider) {\n      return true;\n    }\n    return false;\n  }\n\n  fetchTaxCodes = () => {\n    const shopId = Reaction.getShopId();\n    const provider = Packages.findOne({\n      \"shopId\": shopId,\n      \"registry.provides\": \"taxCodes\",\n      \"$where\": function () {\n        const providerName = _.filter(this.registry, (o) => o.provides === \"taxCodes\")[0].name.split(\"/\")[2];\n        return this.settings[providerName].enabled;\n      }\n    });\n    const taxCodesArray = [];\n\n    const codes = TaxCodes.find({\n      shopId: shopId,\n      taxCodeProvider: provider.name\n    });\n\n    codes.forEach(function (code) {\n      taxCodesArray.push({\n        value: code.taxCode,\n        label: `${code.taxCode} | ${code.label}`\n      });\n    });\n    return taxCodesArray;\n  }\n\n  hasChildVariants = (variant) => {\n    if (ReactionProduct.checkChildVariants(variant._id) > 0) {\n      return true;\n    }\n    return false;\n  }\n\n  greyDisabledFields = (variant) => {\n    if (this.hasChildVariants(variant)) {\n      return { backgroundColor: \"lightgrey\", cursor: \"not-allowed\" };\n    }\n  }\n\n  restoreVariant = (variant) => {\n    const title = variant.title || i18next.t(\"productDetailEdit.thisVariant\");\n\n    Alerts.alert({\n      title: i18next.t(\"productDetailEdit.restoreVariantConfirm\", { title }),\n      showCancelButton: true,\n      confirmButtonText: \"Restore\"\n    }, (isConfirm) => {\n      if (isConfirm) {\n        const id = variant._id;\n        Meteor.call(\"products/updateProductField\", id, \"isDeleted\", false, (error) => {\n          if (error) {\n            Alerts.alert({\n              text: i18next.t(\"productDetailEdit.restoreVariantFail\", { title }),\n              confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n            });\n          }\n          this.setState({\n            isDeleted: !this.state.isDeleted\n          });\n        });\n      }\n    });\n  }\n\n  removeVariant = (variant) => {\n    const title = variant.title || i18next.t(\"productDetailEdit.thisVariant\");\n\n    Alerts.alert({\n      title: i18next.t(\"productDetailEdit.archiveVariantConfirm\", { title }),\n      showCancelButton: true,\n      confirmButtonText: \"Archive\"\n    }, (isConfirm) => {\n      if (isConfirm) {\n        this.setState({\n          isDeleted: !this.state.isDeleted\n        });\n        const id = variant._id;\n        Meteor.call(\"products/deleteVariant\", id, function (error, result) {\n          if (result && ReactionProduct.selectedVariantId() === id) {\n            return ReactionProduct.setCurrentVariant(null);\n          }\n        });\n      }\n    });\n  }\n\n  cloneVariant =  (variant) => {\n    const title = variant.title || i18next.t(\"productDetailEdit.thisVariant\");\n    const productId = ReactionProduct.selectedProductId();\n    if (!productId) {\n      return;\n    }\n    Meteor.call(\"products/cloneVariant\", productId, variant._id,\n      function (error, result) {\n        if (error) {\n          Alerts.alert({\n            text: i18next.t(\"productDetailEdit.cloneVariantFail\", { title }),\n            confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n          });\n        } else if (result) {\n          const variantId = result[0];\n\n          ReactionProduct.setCurrentVariant(variantId);\n          Session.set(\"variant-form-\" + variantId, true);\n        }\n      });\n  }\n\n  handleVariantFieldSave = (variantId, fieldName, value, variant) => {\n    const validationStatus = this.runVariantValidation(variant);\n\n    if (validationStatus.isFieldValid(fieldName)) {\n      Meteor.call(\"products/updateProductField\", variantId, fieldName, value, (error) => {\n        if (error) {\n          Alerts.toast(error.message, \"error\");\n          this.forceUpdate();\n        }\n      });\n    }\n  }\n\n  handleCardExpand = (cardName) => {\n    Reaction.state.set(\"edit/focus\", cardName);\n  }\n\n  updateQuantityIfChildVariants =  (variant) => {\n    if (this.hasChildVariants(variant)) {\n      const variantQuantity = ReactionProduct.getVariantQuantity(variant);\n      return variantQuantity;\n    }\n  }\n\n  render() {\n    if (this.state.variant) {\n      return (\n        <VariantForm\n          isProviderEnabled={this.isProviderEnabled}\n          fetchTaxCodes={this.fetchTaxCodes}\n          hasChildVariants={this.hasChildVariants}\n          greyDisabledFields={this.greyDisabledFields}\n          restoreVariant={this.restoreVariant}\n          removeVariant={this.removeVariant}\n          cloneVariant={this.cloneVariant}\n          onVariantFieldSave={this.handleVariantFieldSave}\n          onCardExpand={this.handleCardExpand}\n          onUpdateQuantityField={this.updateQuantityIfChildVariants}\n          validation={this.state.validationStatus}\n          isDeleted={this.state.isDeleted}\n          {...this.props}\n          variant={this.state.variant}\n        />\n      );\n    }\n\n    return null;\n  }\n}\n\nfunction composer(props, onData) {\n  Meteor.subscribe(\"TaxCodes\");\n\n  const productHandle = Reaction.Router.getParam(\"handle\");\n  if (!productHandle) {\n    Reaction.clearActionView();\n  }\n\n  const countries = Countries.find({}).fetch();\n  const variant = ReactionProduct.selectedTopVariant();\n\n  if (variant) {\n    onData(null, {\n      countries,\n      variant: ReactionProduct.selectedTopVariant(),\n      editFocus: Reaction.state.get(\"edit/focus\")\n    });\n  } else {\n    onData(null, { countries });\n  }\n}\n\nVariantFormContainer.propTypes = {\n  variant: PropTypes.object\n};\n\nexport default composeWithTracker(composer)(VariantFormContainer);\n","/* global paypal */\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Template } from \"meteor/templating\";\nimport { i18next } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\nimport { PaypalClientAPI } from \"../../../lib/paypalRestApi\";\nimport \"./checkoutButton.html\";\n\n/**\n * PayPal Checkout Button\n *\n * This is the PayPal Express Checkout button that displays opens a popup,\n * provided by paypal.\n */\n\n/**\n * Checkout - Open PayPal Express popup\n * @return {undefined} no return value\n */\nfunction checkout() {\n  paypal.checkout.initXO();\n  const cart = Cart.findOne();\n  if (!cart) {\n    return undefined;\n  }\n\n  return Meteor.call(\"getExpressCheckoutToken\", cart._id, function (error, token) {\n    if (error) {\n      const msg = (error !== null ? error.error : void 0) || i18next.t(\"checkoutPayment.processingError\", \"There was a problem with your payment.\");\n      Alerts.add(msg, \"danger\", {\n        placement: \"paymentMethod\"\n      });\n      return paypal.checkout.closeFlow();\n    }\n    const url = paypal.checkout.urlPrefix + token;\n    return paypal.checkout.startFlow(url);\n  });\n}\n\n/**\n * Validate express checkout settings object\n * @param  {Object} settings Object containing \"merchantId\" and \"mode\":\n * @return {Boolean} true if valid, false otherwise\n */\nfunction expressCheckoutSettingsValid(settings) {\n  return _.isEmpty(settings.merchantId) === false && _.isEmpty(settings.mode) === false;\n}\n\n/**\n * PayPal checkout onCreate\n * @param  {Function} function to execute when template is created\n * @return {undefined} no return value\n */\nTemplate.paypalCheckoutButton.onCreated(function () {\n  Meteor.call(\"getExpressCheckoutSettings\", function (error, expressCheckoutSettings) {\n    if (!error) {\n      return Session.set(\"expressCheckoutSettings\", expressCheckoutSettings);\n    }\n  });\n  PaypalClientAPI.load();\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isConfigured: true,\n    isLoading: true\n  });\n});\n\n/**\n * PayPal checkout onRendered\n * @param  {Function} function to execute when template is rendered\n * @return {undefined} no return value\n */\nTemplate.paypalCheckoutButton.onRendered(function () {\n  const element = this.$(\".js-paypal-express-checkout\")[0];\n\n  this.autorun(() => {\n    if (PaypalClientAPI.loaded()) {\n      const expressCheckoutSettings = Session.get(\"expressCheckoutSettings\");\n      if (expressCheckoutSettingsValid(expressCheckoutSettings)) {\n        // setup paypal button for this checkout\n        // gives nada back to us?\n        paypal.checkout.setup(expressCheckoutSettings.merchantId, {\n          environment: expressCheckoutSettings.mode,\n          button: element,\n          // Blank function to disable default paypal onClick functionality\n          click: function () {}\n        });\n        this.state.set(\"isLoading\", false);\n      } else {\n        this.state.set(\"isConfigured\", false);\n        this.state.set(\"isLoading\", false);\n      }\n    } else {\n      this.state.set(\"isLoading\", true);\n    }\n  });\n});\n\n/**\n * PayPal checkout button helpers\n */\nTemplate.paypalCheckoutButton.helpers({\n  expressCheckoutEnabled: function () {\n    const expressCheckoutSettings = Session.get(\"expressCheckoutSettings\");\n    return expressCheckoutSettings !== undefined ? expressCheckoutSettings.enabled : void 0;\n  },\n  /**\n   * Check for proper configuration of PayPal Express Checkout settings.\n   * This function only validates that the required settings exist and are not empty.\n   * @return {Boolean} true if properly configured, false otherwise\n   */\n  isConfigured() {\n    return Template.instance().state.equals(\"isConfigured\", true);\n  }\n});\n\n/**\n * PayPal checkout button events\n */\nTemplate.paypalCheckoutButton.events({\n\n  /**\n   * Click Event: Express Checkout Button\n   * @return {undefined} no return value\n   */\n  \"click .js-paypal-express-checkout\"() {\n    return checkout();\n  }\n});\n","import \"./checkoutButton.js\";\n","import \"./payflowForm.js\";\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport Logger from \"/client/modules/logger\";\nimport { Cart, Shops, Packages } from \"/lib/collections\";\nimport { PaypalPayment } from \"/imports/plugins/included/payments-paypal/lib/collections/schemas\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { PayPal } from \"/imports/plugins/included/payments-paypal/lib/api\";\nimport \"./payflowForm.html\";\n\nlet submitting = false;\n\nfunction uiEnd(template, buttonText) {\n  template.$(\".cart-checkout-step *\").removeAttr(\"disabled\");\n  template.$(\"#btn-complete-order\").text(buttonText);\n  return template.$(\"#btn-processing\").addClass(\"hidden\");\n}\n\nfunction paymentAlert(errorMessage) {\n  return $(\".alert\").removeClass(\"hidden\").text(errorMessage);\n}\n\nfunction hidePaymentAlert() {\n  return $(\".alert\").addClass(\"hidden\").text(\"\");\n}\n\nfunction getError(error, detailSubpart) {\n  if (error) {\n    if (error.response) {\n      return error.response[detailSubpart];\n    }\n  }\n  return undefined;\n}\n\nfunction handlePaypalSubmitError(error) {\n  const results = [];\n  const singleError = getError(error, \"error_description\");\n  const serverError = getError(error, \"message\");\n  const errors = getError(error, \"response\") || [];\n  if (singleError) {\n    return paymentAlert(\"Oops! \" + singleError);\n  } else if (errors.length) {\n    for (let i = 0, len = errors.length; i < len; i++) {\n      const thisError = errors[i];\n      const formattedError = \"Oops! \" + thisError.issue + \": \" + thisError.field.split(/[. ]+/).pop().replace(/_/g, \" \");\n      results.push(paymentAlert(formattedError));\n    }\n    return results;\n  } else if (serverError) {\n    // Alerts.toast(i18next.t(\"checkout.unknownError\", { err: serverError }), \"error\");\n    return paymentAlert(i18next.t(\"checkout.paymentMethod.unknownError\"));\n  }\n  Logger.fatal(\"An unknown error has occurred while processing a Paypal payment\");\n  return paymentAlert(i18next.t(\"checkout.paymentMethod.unknownError\"));\n}\n\n//\n// paypal payflow form helpers\n//\nTemplate.paypalPayflowForm.helpers({\n  PaypalPayment: function () {\n    return PaypalPayment;\n  }\n});\n\n//\n// autoform handling\n//\nAutoForm.addHooks(\"paypal-payment-form\", {\n  onSubmit: function (doc) {\n    hidePaymentAlert();\n    const template = this.template;\n    const payerNamePieces = doc.payerName.split(\" \");\n    const form = {\n      first_name: payerNamePieces[0],\n      last_name: payerNamePieces[1],\n      number: doc.cardNumber,\n      expire_month: doc.expireMonth,\n      expire_year: doc.expireYear,\n      cvv2: doc.cvv,\n      type: Reaction.getCardType(doc.cardNumber)\n    };\n    const storedCard = form.type.charAt(0).toUpperCase() + form.type.slice(1) + \" \" + doc.cardNumber.slice(-4);\n    PayPal.authorize(form, {\n      total: Cart.findOne().cartTotal(),\n      currency: Shops.findOne().currency\n    }, function (error, transaction) {\n      submitting = false; // todo: check scope\n      if (error) {\n        handlePaypalSubmitError(error);\n        uiEnd(template, i18next.t(\"checkout.paymentMethod.resubmit\"));\n      } else {\n        if (transaction.saved === true) {\n          const normalizedStatus = (function () {\n            switch (transaction.response.state) {\n              case \"created\":\n                return \"created\";\n              case \"approved\":\n                return \"created\";\n              case \"failed\":\n                return \"failed\";\n              case \"canceled\":\n                return \"canceled\";\n              case \"expired\":\n                return \"expired\";\n              case \"pending\":\n                return \"pending\";\n              default:\n                return \"failed\";\n            }\n          })();\n\n          const normalizedMode = (function () {\n            switch (transaction.response.intent) {\n              case \"sale\":\n                return \"capture\";\n              case \"authorize\":\n                return \"authorize\";\n              case \"order\":\n                return \"capture\";\n              default:\n                return \"capture\";\n            }\n          })();\n\n          // just auth, not transaction\n          const transactionId = transaction.response.id;\n          // when auth and transaction\n          let authId;\n          if (typeof transaction.response.transactions[0].related_resources[0] === \"object\") {\n            authId = transaction.response.transactions[0].related_resources[0].authorization.id;\n          }\n          Meteor.subscribe(\"Packages\");\n          const packageData = Packages.findOne({\n            name: \"reaction-paypal\",\n            shopId: Reaction.getShopId()\n          });\n\n          const paymentMethod = {\n            processor: \"PayflowPro\",\n            paymentPackageId: packageData._id,\n            paymentSettingsKey: packageData.registry[0].settingsKey,\n            storedCard: storedCard,\n            method: \"credit\",\n            authorization: authId,\n            transactionId: transactionId,\n            metadata: {\n              transactionId: transactionId,\n              authorizationId: authId\n            },\n            amount: Number(transaction.response.transactions[0].amount.total),\n            status: normalizedStatus,\n            mode: normalizedMode,\n            createdAt: new Date(transaction.response.create_time),\n            updatedAt: new Date(transaction.response.update_time),\n            transactions: []\n          };\n          paymentMethod.transactions.push(transaction.response);\n          Meteor.call(\"cart/submitPayment\", paymentMethod);\n        } else {\n          handlePaypalSubmitError(transaction.error);\n          uiEnd(template, i18next.t(\"checkout.paymentMethod.resubmit\"));\n        }\n      }\n    });\n    return false;\n  },\n  beginSubmit: function () {\n    this.template.$(\".cart-checkout-step *\").attr(\"disabled\", true);\n    this.template.$(\"#btn-complete-order\").text(i18next.t(\"checkout.paymentMethod.submitting\"));\n    return this.template.$(\"#btn-processing\").removeClass(\"hidden\");\n  },\n  endSubmit: function () {\n    if (!submitting) {\n      return uiEnd(this.template, i18next.t(\"checkout.completeYourOrder\"));\n    }\n    return undefined;\n  }\n});\n","import { Reaction } from \"/client/api\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.paypalCancel.onCreated(() => {\n  Session.set(\"guestCheckoutFlow\", true);\n  Reaction.Router.go(\"cart/checkout\");\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\nimport { Tracker } from \"meteor/tracker\";\nimport { $ } from \"meteor/jquery\";\nimport { Reaction } from \"/client/api\";\nimport { Cart, Packages } from \"/lib/collections\";\nimport Logger from \"/client/modules/logger\";\n\n// This template handles receiving the token from Paypal, recording it and moving on the checkout\n\nfunction isDuplicate(error) {\n  const errorMessage = error.message;\n  const duplicateErrorCode = \"10415\";\n  return errorMessage.indexOf(duplicateErrorCode) > -1;\n}\n\nfunction showError(error) {\n  $(\".spinner-container\").hide();\n  $(\"#paypal-error-message\").text(error);\n  $(\".paypal-done-error\").show();\n}\n\nfunction buildPaymentMethod(result, status, mode) {\n  Meteor.subscribe(\"Packages\");\n  const packageData = Packages.findOne({\n    name: \"reaction-paypal\",\n    shopId: Reaction.getShopId()\n  });\n\n  const paymentMethod = {\n    processor: \"PaypalExpress\",\n    paymentPackageId: packageData._id,\n    paymentSettingsKey: packageData.registry[0].settingsKey,\n    method: \"credit\",\n    transactionId: result.TRANSACTIONID,\n    amount: parseFloat(result.AMT, 10),\n    status: status,\n    mode: mode,\n    createdAt: new Date(result.ORDERTIME),\n    updatedAt: new Date(result.ORDERTIME),\n    transactions: [result]\n  };\n  return paymentMethod;\n}\n\nTemplate.paypalDone.onRendered(function () {\n  $(\".paypal-done-error\").hide();\n});\n\nTemplate.paypalDone.helpers({\n  checkoutUrl: function () {\n    const template = Template.instance();\n    return template.checkoutUrl;\n  }\n});\n\nTemplate.paypalDone.onCreated(function () {\n  const payerId = Reaction.Router.getQueryParam(\"PayerID\");\n  const token = Reaction.Router.getQueryParam(\"token\");\n  const prefix = Reaction.getShopPrefix();\n  this.checkoutUrl = `${prefix}/cart/checkout`;\n  // wait for cart to be ready\n  Tracker.autorun(function (c) {\n    if (Reaction.Subscriptions.Cart.ready()) {\n      const cart = Cart.findOne();\n      if (!cart) {\n        Logger.warn(\"Could not find valid cart\");\n        return;\n      }\n      c.stop();\n      if (Session.get(\"expressToken\") !== token) {\n        Session.set(\"expressToken\", token);\n        Meteor.call(\"confirmPaymentAuthorization\", cart._id, token, payerId, function (error, result) {\n          if (error) {\n            if (isDuplicate(error)) {\n              Reaction.Router.go(\"cart/completed\", {}, {\n                _id: cart._id\n              });\n            }\n            const msg = (error !== null ? error.error : void 0);\n            showError(msg);\n          }\n\n          if (result) {\n            let status;\n            let mode = \"authorize\";\n            // Normalize status depending on results\n            if (result.PAYMENTSTATUS === \"Pending\") {\n              status = \"created\";\n            } else if (result.PAYMENTSTATUS === \"Completed\") { // If we set capture at auth this will be completed\n              status = \"completed\";\n              mode = \"capture\";\n            } else {\n              status = result.PAYMENTSTATUS;\n            }\n            const paymentMethod = buildPaymentMethod(result, status, mode);\n\n            Meteor.call(\"cart/submitPayment\", paymentMethod, function (payError, payResult) {\n              if (!payResult && payError) {\n                Logger.warn(payError, \"Error received during submitting Payment via Paypal\");\n                showError(payError);\n                Session.set(\"guestCheckoutFlow\", true);\n              }\n            });\n          }\n        });\n      }\n    }\n  });\n});\n","import \"./cancel.html\";\nimport \"./cancel.js\";\nimport \"./done.html\";\nimport \"./done.js\";\n","/* eslint camelcase: 0 */\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Packages } from \"/lib/collections\";\nimport { PaypalPackageConfig } from \"../../../lib/collections/schemas\";\nimport \"./express.html\";\n\nTemplate.paypalExpressSettings.helpers({\n  PaypalPackageConfig: function () {\n    return PaypalPackageConfig;\n  },\n  packageData: function () {\n    return Packages.findOne({\n      name: \"reaction-paypal\"\n    });\n  }\n});\n\nAutoForm.hooks({\n  \"paypal-update-form\": {\n    onSuccess: function () {\n      Alerts.removeSeen();\n      return Alerts.add(\"Paypal settings saved.\", \"success\", {\n        autoHide: true\n      });\n    },\n    onError: function (operation, error) {\n      Alerts.removeSeen();\n      return Alerts.add(\"Paypal settings update failed. \" + error, \"danger\");\n    }\n  }\n});\n","/* eslint camelcase: 0 */\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { Packages } from \"/lib/collections\";\nimport { PaypalPackageConfig } from \"../../../lib/collections/schemas\";\nimport \"./payflow.html\";\n\nTemplate.paypalPayFlowSettings.helpers({\n  PaypalPackageConfig: function () {\n    return PaypalPackageConfig;\n  },\n  packageData: function () {\n    return Packages.findOne({\n      name: \"reaction-paypal\"\n    });\n  }\n});\n\nAutoForm.hooks({\n  \"paypal-update-form\": {\n    onSuccess: function () {\n      Alerts.removeSeen();\n      return Alerts.add(\"Paypal settings saved.\", \"success\", {\n        autoHide: true\n      });\n    },\n    onError: function (operation, error) {\n      Alerts.removeSeen();\n      return Alerts.add(\"Paypal settings update failed. \" + error, \"danger\");\n    }\n  }\n});\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Logger } from \"/client/api\";\n\nexport const PaypalClientAPI = {\n\n  load: _.once(function () {\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.async = true;\n    script.src = \"//www.paypalobjects.com/api/checkout.js\";\n    document.head.appendChild(script);\n\n    this._checkReady();\n  }),\n\n  _checkReady() {\n    let i = 0;\n    const checkReady = Meteor.setInterval(() => {\n      if (typeof paypal !== \"undefined\") {\n        this._loaded.set(true);\n        Meteor.clearInterval(checkReady);\n      } else {\n        i += 100;\n        if (i > 10000) {\n          // stop checking and warn if the lib isn't loaded within 10 secs\n          Meteor.clearInterval(checkReady);\n          Logger.warn(\"Error loading Paypal lib from CDN\");\n        }\n      }\n    }, 100);\n  },\n\n  _loaded: new ReactiveVar(false),\n\n  loaded() {\n    return this._loaded.get();\n  }\n};\n","import \"./templates/checkout/return\";\nimport \"./templates/checkout/express\";\nimport \"./templates/checkout/payflow\";\n\nimport \"./templates/settings/express\";\nimport \"./templates/settings/payflow\";\n\nimport \"./paypal.less\";\n","export * from \"./paypal\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\n\nexport const PaypalPackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.express_auth_and_capture\": {\n      type: Boolean,\n      label: \"Capture at time of Auth\",\n      defaultValue: false\n    },\n    \"settings.express.support\": {\n      type: Array,\n      label: \"Payment provider supported methods\"\n    },\n    \"settings.express.support.$\": {\n      type: String,\n      allowedValues: [\"authorize\", \"de-authorize\", \"capture\", \"refund\"]\n    },\n    \"settings.payflow.support\": {\n      type: Array,\n      label: \"Payment provider supported methods\"\n    },\n    \"settings.payflow.support.$\": {\n      type: String,\n      allowedValues: [\"Authorize\", \"De-authorize\", \"Capture\", \"Refund\"]\n    },\n    \"settings.merchantId\": {\n      type: String,\n      label: \"Merchant ID\",\n      optional: true\n    },\n    \"settings.username\": {\n      type: String,\n      label: \"Username\",\n      optional: true\n    },\n    \"settings.password\": {\n      type: String,\n      label: \"Password\",\n      optional: true\n    },\n    \"settings.signature\": {\n      type: String,\n      label: \"Signature\",\n      optional: true\n    },\n    \"settings.express_mode\": {\n      type: Boolean,\n      defaultValue: false\n    },\n    \"settings.payflow_enabled\": {\n      type: Boolean,\n      defaultValue: true\n    },\n    \"settings.client_id\": {\n      type: String,\n      label: \"API Client ID\",\n      min: 60,\n      optional: true\n    },\n    \"settings.client_secret\": {\n      type: String,\n      label: \"API Secret\",\n      min: 60,\n      optional: true\n    },\n    \"settings.payflow_mode\": {\n      type: Boolean,\n      defaultValue: false\n    }\n  }\n]);\n\nexport const PaypalPayment = new SimpleSchema({\n  payerName: {\n    type: String,\n    label: \"Cardholder name\"\n  },\n  cardNumber: {\n    type: String,\n    min: 12,\n    max: 19,\n    label: \"Card number\"\n  },\n  expireMonth: {\n    type: String,\n    max: 2,\n    label: \"Expiration month\"\n  },\n  expireYear: {\n    type: String,\n    max: 4,\n    label: \"Expiration year\"\n  },\n  cvv: {\n    type: String,\n    max: 4,\n    label: \"CVV\"\n  }\n});\n\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Packages } from \"/lib/collections\";\nimport Reaction from \"/lib/api\";\n\nfunction getSettings(settings, ref, valueName) {\n  if (settings !== null) {\n    return settings[valueName];\n  } else if (ref !== null) {\n    return ref[valueName];\n  }\n  return {};\n}\n\n// using global instance of Reaction\n// Paypal is a shared client/server stub\n// to provide normalized PayPal tooling\n\nexport const Express = {\n  expressCheckoutAccountOptions: function () {\n    const shopId = Reaction.getShopId();\n    const settings = Packages.findOne({\n      name: \"reaction-paypal\",\n      shopId: shopId,\n      enabled: true\n    }).settings;\n    let mode;\n\n    if ((settings !== null ? settings.express_mode : void 0) === true) {\n      mode = \"production\";\n    } else {\n      mode = \"sandbox\";\n    }\n    const ref = Meteor.settings.paypal;\n\n    const options = {\n      enabled: settings !== null ? settings.express.enabled : void 0,\n      mode: mode,\n      username: getSettings(settings, ref, \"username\"),\n      password: getSettings(settings, ref, \"password\"),\n      signature: getSettings(settings, ref, \"signature\"),\n      merchantId: getSettings(settings, ref, \"merchantId\"),\n      return_url: Reaction.getAbsoluteUrl(\"paypal/done\"),\n      cancel_url: Reaction.getAbsoluteUrl(\"paypal/cancel\")\n    };\n    if (options.mode === \"sandbox\") {\n      options.url = \"https://api-3t.sandbox.paypal.com/nvp\";\n    } else {\n      options.url = \"https://api-3t.paypal.com/nvp\";\n    }\n    return options;\n  },\n  config: function (options) {\n    this.accountOptions = options;\n  }\n};\n","import * as PayFlow from \"./payflow\";\nimport * as Express from \"./express\";\n\nexport const PayPal = Object.assign({},\n  Express.Express,\n  PayFlow.PayFlow\n);\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Packages } from \"/lib/collections\";\nimport Reaction from \"/lib/api\";\n\n// using global instance of Reaction\n// Paypal is a shared client/server stub\n// to provide normalized PayPal tooling\n\nexport const PayFlow = {\n  payflowAccountOptions: function () {\n    const settings = Packages.findOne({\n      name: \"reaction-paypal\",\n      shopId: Reaction.getShopId(),\n      enabled: true\n    }).settings;\n    let mode;\n    if ((settings !== null ? settings.payflow_mode : void 0) === true) {\n      mode = \"live\";\n    } else {\n      mode = \"sandbox\";\n    }\n    const ref = Meteor.settings.paypal;\n    const options = {\n      mode: mode,\n      enabled: getSettings(settings, ref, \"payflow_enabled\"),\n      client_id: getSettings(settings, ref, \"client_id\"),\n      client_secret: getSettings(settings, ref, \"client_secret\")\n    };\n    if (!options.client_id) {\n      throw new Meteor.Error(403, \"Invalid PayPal Credentials\");\n    }\n    return options;\n  },\n  authorize: function (cardInfo, paymentInfo, callback) {\n    Meteor.call(\"payflowpro/payment/submit\", \"authorize\", cardInfo, paymentInfo, callback);\n  },\n  capture: function (transactionId, amount, callback) {\n    const captureDetails = {\n      amount: {\n        currency: \"USD\", // todo should this be locale.currency\n        total: parseFloat(amount, 10)\n      },\n      is_final_capture: true\n    };\n    Meteor.call(\"payflowpro/payment/capture\", transactionId, captureDetails, callback);\n  },\n  config: function (options) {\n    this.accountOptions = options;\n  },\n  paymentObj: function () {\n    return {\n      intent: \"sale\",\n      payer: {\n        payment_method: \"credit_card\",\n        funding_instruments: []\n      },\n      transactions: []\n    };\n  },\n  parseCardData: function (data) {\n    return {\n      credit_card: {\n        type: data.type,\n        number: data.number,\n        first_name: data.first_name,\n        last_name: data.last_name,\n        cvv2: data.cvv2,\n        expire_month: data.expire_month,\n        expire_year: data.expire_year\n      }\n    };\n  },\n  parsePaymentData: function (data) {\n    return {\n      amount: {\n        total: parseFloat(data.total, 10),\n        currency: data.currency\n      }\n    };\n  }\n};\n\nfunction getSettings(settings, ref, valueName) {\n  if (settings !== null) {\n    return settings[valueName];\n  } else if (ref !== null) {\n    return ref[valueName];\n  }\n  return {};\n}\n","import \"./templates/dashboard/inventory.html\";\nimport \"./templates/settings/settings.html\";\n","import { ExampleSettingsFormContainer } from \"../containers\";\nimport { Template } from \"meteor/templating\";\nimport \"./example.html\";\n\nTemplate.exampleSettings.helpers({\n  ExampleSettings() {\n    return {\n      component: ExampleSettingsFormContainer\n    };\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { TextField, Translation, Checkbox } from \"/imports/plugins/core/ui/client/components\";\n\nclass ExampleSettingsForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      settings: {\n        apiKey: props.settings.apiKey,\n        support: props.settings.support\n      },\n      checkbox: {\n        \"Authorize\": _.includes(props.settings.support, \"Authorize\"),\n        \"De-authorize\": _.includes(props.settings.support, \"De-authorize\"),\n        \"Capture\": _.includes(props.settings.support, \"Capture\"),\n        \"Refund\": _.includes(props.settings.support, \"Refund\")\n      }\n    };\n  }\n\n  handleStateChange = (e) => {\n    const { settings } = this.state;\n    settings[e.target.name] = e.target.value;\n    this.setState({ settings });\n  }\n\n  handleCheckBox = (event, isInputChecked, name) => {\n    const { checkbox, settings } = this.state;\n    checkbox[name] = isInputChecked;\n    this.setState({ checkbox });\n    if (!_.includes(settings.support, name) && isInputChecked) {\n      settings.support.push(name);\n      return this.setState({ settings });\n    }\n    const index = settings.support.indexOf(name);\n    settings.support.splice(index, 1);\n    return this.setState({ settings });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    return this.props.onSubmit(this.state.settings);\n  }\n\n\n  render() {\n    const { settings } = this.props;\n    const setting = this.state.settings;\n\n    return (\n      <div>\n        { !settings.apiKey &&\n          <div className=\"alert alert-info\">\n            <Translation defaultValue=\"Example Credentials\" i18nKey=\"admin.paymentSettings.exampleCredentials\"/>\n          </div>\n        }\n\n        <form onSubmit={this.handleSubmit}>\n          <TextField\n            label=\"API Key\"\n            name=\"apiKey\"\n            type=\"text\"\n            onChange={this.handleStateChange}\n            value={setting.apiKey}\n          />\n\n          <label className=\"control-label\">\n            <Translation defaultValue=\"Payment provider supported methods\" i18nKey=\"reaction-payments.paymentSettings.supportedMethodsLabel\"/>\n          </label>\n          <br/>\n\n          <div>\n            <Checkbox\n              label=\"Authorize\"\n              onChange={this.handleCheckBox}\n              name=\"Authorize\"\n              checked={this.state.checkbox.Authorize}\n            />\n          </div>\n\n          <div>\n            <Checkbox\n              label=\"De-authorize\"\n              onChange={this.handleCheckBox}\n              name=\"De-authorize\"\n              checked={this.state.checkbox[\"De-authorize\"]}\n            />\n          </div>\n\n          <div>\n            <Checkbox\n              label=\"Capture\"\n              onChange={this.handleCheckBox}\n              name=\"Capture\"\n              checked={this.state.checkbox.Capture}\n            />\n          </div>\n\n          <div>\n            <Checkbox\n              label=\"Refund\"\n              onChange={this.handleCheckBox}\n              name=\"Refund\"\n              checked={this.state.checkbox.Refund}\n            />\n          </div>\n\n\n          <button className=\"btn btn-primary pull-right\" type=\"submit\">\n            <Translation defaultValue=\"Save Changes\" i18nKey=\"app.saveChanges\"/>\n          </button>\n        </form>\n\n      </div>\n    );\n  }\n}\n\nExampleSettingsForm.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  settings: PropTypes.object\n};\n\nexport default ExampleSettingsForm;\n","export { default as ExampleSettingsForm } from \"./exampleSettingsForm.js\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Packages } from \"/lib/collections\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { ExampleSettingsForm } from \"../components\";\n\nclass ExampleSettingsFormContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      apiKey: \"278302390293\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.saveUpdate = this.saveUpdate.bind(this);\n  }\n\n  handleChange(e) {\n    e.preventDefault();\n    this.setState({ apiKey: e.target.value });\n  }\n\n  handleSubmit(settings) {\n    // e.preventDefault();\n\n    const packageId = this.props.packageData._id;\n    const settingsKey = this.props.packageData.registry[0].settingsKey;\n\n    const fields = [{\n      property: \"apiKey\",\n      value: settings.apiKey\n    }, {\n      property: \"support\",\n      value: settings.support\n    }];\n\n    this.saveUpdate(fields, packageId, settingsKey);\n  }\n\n  saveUpdate(fields, id, settingsKey) {\n    Meteor.call(\"registry/update\", id, settingsKey, fields, (err) => {\n      if (err) {\n        return Alerts.toast(i18next.t(\"admin.settings.saveFailed\"), \"error\");\n      }\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    });\n  }\n\n  render() {\n    const settingsKey = this.props.packageData.registry[0].settingsKey;\n    return (\n      <TranslationProvider>\n        <ExampleSettingsForm\n          onChange={this.handleChange}\n          onSubmit={this.handleSubmit}\n          settings={this.props.packageData.settings[settingsKey]}\n        />\n      </TranslationProvider>\n    );\n  }\n}\n\nExampleSettingsFormContainer.propTypes = {\n  packageData: PropTypes.object\n};\n\nconst composer = ({}, onData) => {\n  const subscription = Meteor.subscribe(\"Packages\");\n  if (subscription.ready()) {\n    const packageData = Packages.findOne({\n      name: \"example-paymentmethod\",\n      shopId: Reaction.getShopId()\n    });\n    onData(null, { packageData });\n  }\n};\n\nexport default composeWithTracker(composer, Loading)(ExampleSettingsFormContainer);\n","export { default as ExampleSettingsFormContainer } from \"./exampleSettingsFormContainer\";\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { $ } from \"meteor/jquery\";\nimport { Reaction } from \"/client/api\";\nimport { Cart, Shops, Packages } from \"/lib/collections\";\nimport { Example } from \"../../lib/api\";\nimport { ExamplePayment } from \"../../lib/collections/schemas\";\n\nimport \"./example.html\";\n\nlet submitting = false;\n\nfunction uiEnd(template, buttonText) {\n  template.$(\":input\").removeAttr(\"disabled\");\n  template.$(\"#btn-complete-order\").text(buttonText);\n  return template.$(\"#btn-processing\").addClass(\"hidden\");\n}\n\nfunction paymentAlert(errorMessage) {\n  return $(\".alert\").removeClass(\"hidden\").text(errorMessage);\n}\n\nfunction hidePaymentAlert() {\n  return $(\".alert\").addClass(\"hidden\").text(\"\");\n}\n\nfunction handleExampleSubmitError(error) {\n  const serverError = error !== null ? error.message : void 0;\n  if (serverError) {\n    return paymentAlert(\"Oops! \" + serverError);\n  } else if (error) {\n    return paymentAlert(\"Oops! \" + error, null, 4);\n  }\n}\n\n\nTemplate.examplePaymentForm.helpers({\n  ExamplePayment() {\n    return ExamplePayment;\n  }\n});\n\nAutoForm.addHooks(\"example-payment-form\", {\n  onSubmit: function (doc) {\n    submitting = true;\n    const template = this.template;\n    hidePaymentAlert();\n    const form = {\n      name: doc.payerName,\n      number: doc.cardNumber,\n      expireMonth: doc.expireMonth,\n      expireYear: doc.expireYear,\n      cvv2: doc.cvv,\n      type: Reaction.getCardType(doc.cardNumber)\n    };\n    const storedCard = form.type.charAt(0).toUpperCase() + form.type.slice(1) + \" \" + doc.cardNumber.slice(-4);\n    Meteor.subscribe(\"Packages\");\n    const packageData = Packages.findOne({\n      name: \"example-paymentmethod\",\n      shopId: Reaction.getShopId()\n    });\n    Example.authorize(form, {\n      total: Cart.findOne().cartTotal(),\n      currency: Shops.findOne().currency\n    }, function (error, transaction) {\n      submitting = false;\n      let paymentMethod;\n      if (error) {\n        handleExampleSubmitError(error);\n        uiEnd(template, \"Resubmit payment\");\n      } else {\n        if (transaction.saved === true) {\n          submitting = false;\n          paymentMethod = {\n            processor: \"Example\",\n            paymentPackageId: packageData._id,\n            paymentSettingsKey: packageData.registry[0].settingsKey,\n            storedCard: storedCard,\n            method: \"credit\",\n            transactionId: transaction.transactionId,\n            currency: transaction.currency,\n            amount: transaction.amount,\n            status: transaction.status,\n            mode: \"authorize\",\n            createdAt: new Date(),\n            transactions: []\n          };\n          paymentMethod.transactions.push(transaction.response);\n          Meteor.call(\"cart/submitPayment\", paymentMethod);\n        } else {\n          handleExampleSubmitError(transaction.error);\n          uiEnd(template, \"Resubmit payment\");\n        }\n      }\n    });\n    return false;\n  },\n  beginSubmit: function () {\n    this.template.$(\":input\").attr(\"disabled\", true);\n    this.template.$(\"#btn-complete-order\").text(\"Submitting \");\n    return this.template.$(\"#btn-processing\").removeClass(\"hidden\");\n  },\n  endSubmit: function () {\n    if (!submitting) {\n      return uiEnd(this.template, \"Complete your order\");\n    }\n  }\n});\n","import \"./checkout/example\";\nimport \"./settings/templates/example\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\n\nexport const ExamplePackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.mode\": {\n      type: Boolean,\n      defaultValue: true\n    },\n    \"settings.apiKey\": {\n      type: String,\n      label: \"API Key\",\n      optional: true\n    }\n  }\n]);\n\nexport const ExamplePayment = new SimpleSchema({\n  payerName: {\n    type: String,\n    label: \"Cardholder name\"\n  },\n  cardNumber: {\n    type: String,\n    min: 13,\n    max: 16,\n    label: \"Card number\"\n  },\n  expireMonth: {\n    type: String,\n    max: 2,\n    label: \"Expiration month\"\n  },\n  expireYear: {\n    type: String,\n    max: 4,\n    label: \"Expiration year\"\n  },\n  cvv: {\n    type: String,\n    max: 4,\n    label: \"CVV\"\n  }\n});\n","export * from \"./example\";\n","import { Meteor } from \"meteor/meteor\";\nimport { Packages } from \"/lib/collections\";\n\nexport const Example = {\n  accountOptions: function () {\n    const settings = Packages.findOne({\n      name: \"reaction-paymentmethod\"\n    }).settings;\n    if (!settings.apiKey) {\n      throw new Meteor.Error(\"403\", \"Invalid Credentials\");\n    }\n    return settings.apiKey;\n  },\n\n  authorize: function (cardInfo, paymentInfo, callback) {\n    Meteor.call(\"exampleSubmit\", \"authorize\", cardInfo, paymentInfo, callback);\n  }\n};\n","export { Example } from \"./example\";\n","import { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Shipping } from \"/lib/collections\";\nimport { i18next } from \"/client/api\";\nimport { IconButton, Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\n\nTemplate.shippingRatesSettings.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Shipping\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.shippingRatesSettings.helpers({\n  editButton() {\n    const instance = Template.instance();\n    const state = instance.state;\n    const isEditing = state.equals(\"isEditing\", true);\n    let editingId = state.get(\"editingId\");\n    // toggle edit state\n    if (!isEditing) {\n      editingId = null;\n    }\n    // return icon\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick() {\n        // remove active rows from grid\n        $(\".shipping-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId: editingId\n        });\n      }\n    };\n  },\n  shippingGrid() {\n    const filteredFields = [\"name\", \"group\", \"label\", \"rate\"];\n    const noDataMessage = i18next.t(\"admin.shippingSettings.noRatesFound\");\n    const instance = Template.instance();\n\n    // griddle helper to select row\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is shipping rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    // add shipping-grid-row class\n    const customRowMetaData = {\n      bodyCssClassName: () =>  {\n        return \"shipping-grid-row\";\n      }\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach(function (field) {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.shippingGrid.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // filter and extract shipping methods\n    // from flat rate shipping provider\n    function transform(results) {\n      const result = [];\n      for (const method of results) {\n        if (method.provider && method.provider.name === \"flatRates\") {\n          result.push(method.methods);\n        }\n      }\n      return result[0];\n    }\n\n    // return shipping Grid\n    return {\n      component: SortableTable,\n      publication: \"Shipping\",\n      transform: transform,\n      collection: Shipping,\n      matchingResultsCount: \"shipping-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields: filteredFields,\n      columns: filteredFields,\n      noDataMessage: noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n\n  shippingRate() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const providerRates = Shipping.findOne({ \"provider.name\": \"flatRates\" }) || {};\n    let rate = {};\n    if (providerRates && providerRates.methods) {\n      if (id) {\n        for (const method of providerRates.methods) {\n          if (method._id === id) {\n            rate = method;\n          }\n        }\n      } else {\n        // a little trick to provide _id for insert\n        rate._id = providerRates._id;\n      }\n    }\n    return rate;\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.shippingRatesSettings.events({\n  \"submit #shipping-rates-update-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #shipping-rates-insert-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .shipping-grid-row .active\": function () {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    // ugly hack\n    $(\".shipping-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\": function () {\n    const confirmTitle = i18next.t(\"admin.shippingSettings.confirmRateDelete\");\n    const confirmButtonText = i18next.t(\"app.delete\");\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    // confirm delete\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: confirmButtonText\n    }, (isConfirm) => {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"shipping/rates/delete\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .shipping-grid-row\": function (event) {\n    // toggle all rows off, then add our active row\n    $(\".shipping-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n//\n// Hooks for update and insert forms\n//\nAutoForm.hooks({\n  \"shipping-rates-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.shippingSettings.rateSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.shippingSettings.rateFailed\")} ${error}`, \"error\"\n      );\n    }\n  },\n  \"shipping-rates-insert-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.shippingSettings.rateSaved\"), \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.shippingSettings.rateFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import \"./settings/rates.html\";\nimport \"./settings/rates.js\";\n","import \"./templates\";\n","/* eslint-disable */\n//\n// TODO facebook social templates need review to ensure proper use of reaction layouts\n//\nTemplate.facebook.onRendered(function () {\n  let ref;\n  if (this.data.placement === \"footer\" && (((ref = this.data.apps.facebook) !== null ? ref.profilePage : void 0) !== null)) { // eslint-disable-line no-cond-assign\n    return this.$(\".facebook-share\").attr(\"href\", this.data.apps.facebook.profilePage);\n  }\n  //\n  // autorun and insert fb\n  //\n  this.autorun(function () {\n    let media;\n    let ref1;\n    const template = Template.instance();\n    const data = Template.currentData();\n    $('meta[property^=\"og:\"]').remove();\n    const description = ((ref1 = data.apps.facebook) !== null ? ref1.description : void 0) || $(\".product-detail-field.description\").text();\n    let url = data.url || location.origin + location.pathname;\n    let title = data.title || document.title;\n    $(\"<meta>\", {\n      property: \"og:type\",\n      content: \"article\"\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"og:site_name\",\n      content: location.hostname\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"og:url\",\n      content: url\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"og:title\",\n      content: title\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"og:description\",\n      content: description\n    }).appendTo(\"head\");\n    if (data.media) {\n      if (!/^http(s?):\\/\\/+/.test(data.media)) {\n        media = location.origin + data.media;\n      }\n      $(\"<meta>\", {\n        property: \"og:image\",\n        content: media\n      }).appendTo(\"head\");\n    }\n    /* eslint no-unused-vars: 1 */\n    //\n    // TODO review Template.facebook.onRendered for FB response\n    // believe this object is declared by FB so the\n    // lint error should be ignored\n    //\n    if (data.apps.facebook.appId !== null) {\n      return template.$(\".facebook-share\").click(function (e) {\n        e.preventDefault();\n        return FB.ui({\n          method: \"share\",\n          display: \"popup\",\n          href: url\n        }, function () {});\n      });\n    }\n    // else return\n    url = encodeURIComponent(url);\n    title = encodeURIComponent(title);\n    const base = \"https://www.facebook.com/sharer/sharer.php\";\n    const summary = encodeURIComponent(description);\n    let href = base + \"?s=100&p[url]=\" + url + \"&p[title]=\" + title + \"&p[summary]=\" + summary;\n    if (data.media) {\n      href += \"&p[images][0]=\" + encodeURIComponent(media);\n    }\n    return template.$(\".facebook-share\").attr(\"href\", href);\n  });\n});\n\nTemplate.facebook.onCreated(function () {\n  const apps = Template.currentData().apps;\n  const isEnabled = \"facebook\" in apps && apps.facebook.enabled;\n  if (isEnabled) {\n    $('<div id=\"fb-root\"></div>').appendTo(\"body\");\n    window.fbAsyncInit = function () {\n      return FB.init({\n        appId: apps.facebook.appId,\n        xfbml: true,\n        version: \"v2.1\"\n      });\n    };\n    (function (d, s, id) {\n      let js = void 0;\n      const fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) {\n        return;\n      }\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"//connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, \"script\", \"facebook-jssdk\");\n  }\n  return isEnabled;\n});\n","/* eslint-disable */\n//\n// TODO google social templates need review to ensure proper use of reaction layouts\n//\nTemplate.googleplus.onRendered(function () {\n  let ref;\n  if (this.data.placement === \"footer\" && (((ref = this.data.apps.googleplus) !== null ? ref.profilePage : void 0) !== null)) {  // eslint-disable-line\n    return this.$(\".googleplus-share\").attr(\"href\", this.data.apps.googleplus.profilePage);\n  }\n  return this.autorun(function () {\n    let media;\n    let ref1;\n    let ref2;\n    const template = Template.instance();\n    const data = Template.currentData();\n    $(\"meta[itemscope]\").remove();\n    const description = ((ref1 = data.apps.googleplus) !== null ? ref1.description : void 0) || $(\".product-detail-field.description\").text(); // eslint-disable-line\n    const url = data.url || location.origin + location.pathname;\n    // const title = data.title;\n    const itemtype = ((ref2 = data.apps.googleplus) !== null ? ref2.itemtype : void 0) || \"Article\";\n    $(\"html\").attr(\"itemscope\", \"\").attr(\"itemtype\", \"http://schema.org/\" + itemtype);\n    $(\"<meta>\", {\n      itemprop: \"name\",\n      content: location.hostname\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      itemprop: \"url\",\n      content: url\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      itemprop: \"description\",\n      content: description\n    }).appendTo(\"head\");\n    if (data.media) {\n      if (!/^http(s?):\\/\\/+/.test(data.media)) {\n        media = location.origin + data.media;\n      }\n      $(\"<meta>\", {\n        itemprop: \"image\",\n        content: media\n      }).appendTo(\"head\");\n    }\n    const href = \"https://plus.google.com/share?url=\" + url;\n    return template.$(\".googleplus-share\").attr(\"href\", href);\n  });\n});\n\nTemplate.googleplus.events({\n  \"click a\": function (event) {\n    event.preventDefault();\n    return window.open(Template.instance().$(\".googleplus-share\").attr(\"href\"), \"googleplus_window\", \"width=750, height=650\");\n  }\n});\n","/* eslint-disable */\n//\n// TODO pinterest social templates need review to ensure proper use of reaction layouts\n//\nTemplate.pinterest.onRendered(function () {\n  let ref;\n  if (this.data.placement === \"footer\" && (((ref = this.data.apps.pinterest) !== null ? ref.profilePage : void 0) !== null)) {\n    return this.$(\".pinterest-share\").attr(\"href\", this.data.apps.pinterest.profilePage);\n  }\n  /*\n    Pinterest requires three parameters:\n      url: desired url\n      media: image being shared\n      description: image description\n   */\n  return this.autorun(function () {\n    let media;\n    let ref1;\n    const template = Template.instance();\n    const data = Template.currentData();\n    const preferredUrl = data.url || location.origin + location.pathname;\n    const url = encodeURIComponent(preferredUrl);\n    if (data.media) {\n      if (!/^http(s?):\\/\\/+/.test(data.media)) {\n        media = location.origin + data.media;\n      }\n    }\n    const description = encodeURIComponent(((ref1 = data.apps.pinterest) !== null ? ref1.description : void 0) || $(\".product-detail-field.description\").text());\n    const href = \"http://www.pinterest.com/pin/create/button/?url=\" + url + \"&media=\" + media + \"&description=\" + description;\n    return template.$(\".pinterest-share\").attr(\"href\", href);\n  });\n});\n\nTemplate.pinterest.events({\n  \"click a\": function (event) {\n    event.preventDefault();\n    return window.open(Template.instance().$(\".pinterest-share\").attr(\"href\"), \"pinterest_window\", \"width=750, height=650\");\n  }\n});\n","/* eslint-disable */\n//\n// TODO twitter social templates need review to ensure proper use of reaction layouts\n//\nTemplate.twitter.onRendered(function () {\n  let ref;\n  if (this.data.placement === \"footer\" && (((ref = this.data.apps.twitter) !== null ? ref.profilePage : void 0) !== null)) {\n    return this.$(\".twitter-share\").attr(\"href\", this.data.apps.twitter.profilePage);\n  }\n  //\n  // return twitter\n  //\n  return this.autorun(function () {\n    const template = Template.instance();\n    const data = Template.currentData();\n    $('meta[property^=\"twitter:\"]').remove();\n    $(\"<meta>\", {\n      property: \"twitter:card\",\n      content: \"summary\"\n    }).appendTo(\"head\");\n    if (data.apps.twitter.username) {\n      $(\"<meta>\", {\n        property: \"twitter:creator\",\n        content: data.apps.twitter.username\n      }).appendTo(\"head\");\n    }\n    let ref1;\n    const description = ((ref1 = data.apps.twitter) !== null ? ref1.description : void 0) || $(\".product-detail-field.description\").text();\n    $(\"<meta>\", {\n      property: \"twitter:url\",\n      content: location.origin + location.pathname\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"twitter:title\",\n      content: \"\" + data.title\n    }).appendTo(\"head\");\n    $(\"<meta>\", {\n      property: \"twitter:description\",\n      content: description\n    }).appendTo(\"head\");\n    if (data.media) {\n      if (!/^http(s?):\\/\\/+/.test(data.media)) {\n        // let media = location.origin + data.media;\n        $(\"<meta>\", {\n          property: \"twitter:image\",\n          content: data.media\n        }).appendTo(\"head\");\n      }\n    }\n    const preferredUrl = data.url || location.origin + location.pathname;\n    const url = encodeURIComponent(preferredUrl);\n    const base = \"https://twitter.com/intent/tweet\";\n    let ref2;\n    const text = encodeURIComponent(((ref2 = data.apps.twitter) !== null ? ref2.title : void 0) || data.title);\n    let href = base + \"?url=\" + url + \"&text=\" + text;\n    if (data.apps.twitter.username) {\n      href += \"&via=\" + data.apps.twitter.username;\n    }\n    return template.$(\".twitter-share\").attr(\"href\", href);\n  });\n});\n\nTemplate.twitter.events({\n  \"click a\": function (event) {\n    event.preventDefault();\n    return window.open(Template.instance().$(\".twitter-share\").attr(\"href\"), \"twitter_window\", \"width=750, height=650\");\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport SocialSettingsContainer from \"../../containers/socialSettingsContainer\";\n\nTemplate.socialSettings.helpers({\n  SocialSettingsComponent() {\n    return {\n      component: SocialSettingsContainer\n    };\n  }\n});\n","import { merge } from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\n\nTemplate.reactionSocial.onCreated(function () {\n  const self = this;\n  return this.autorun(function () {\n    const subscription = Reaction.Subscriptions.Packages;\n    if (subscription.ready()) {\n      const socialSettings = Packages.findOne({\n        name: \"reaction-social\"\n      });\n      if (socialSettings) {\n        self.socialSettings = socialSettings.settings.public;\n      }\n    }\n  });\n});\n\nTemplate.reactionSocial.helpers({\n  settings: function () {\n    const template = Template.instance();\n    return template && template.socialSettings;\n  },\n  socialTemplates: function () {\n    const templates = [];\n    const template = Template.instance();\n\n    if (template && template.socialSettings) {\n      let socialSettings = template.socialSettings;\n      socialSettings = merge({}, socialSettings, Template.currentData());\n\n      if (socialSettings.appsOrder) {\n        const appsOrder = socialSettings.appsOrder;\n\n        for (let i = 0; i < appsOrder.length; i++) {\n          const app = appsOrder[i];\n\n          if (typeof socialSettings.apps[app] === \"object\" &&\n            socialSettings.apps[app].enabled) {\n            templates.push(app);\n          }\n        }\n      }\n    }\n    return templates;\n  }\n});\n","/* global FB, data */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Helmet from \"react-helmet\";\nimport classnames from \"classnames\";\nimport { $ } from \"meteor/jquery\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nexport function getOpenGraphMeta(props) {\n  const url = props.url || location.origin + location.pathname;\n  const title = props.title || document.title;\n  const description = props.settings.description;\n\n  const meta = [\n    { property: \"og:type\", content: \"article\" },\n    { property: \"og:site_name\", content: location.hostname },\n    { property: \"og:url\", content: url },\n    { property: \"og:title\", content: title },\n    { property: \"og:description\", content: description }\n  ];\n\n\n  if (props.media) {\n    let media;\n    if (!/^http(s?):\\/\\/+/.test(data.media)) {\n      media = location.origin + data.media;\n    }\n\n    meta.push({\n      property: \"og:image\",\n      content: media\n    });\n  }\n\n  return meta;\n}\n\nclass FacebookSocialButton extends Component {\n  componentDidMount() {\n    if (window && document) {\n      $('<div id=\"fb-root\"></div>').appendTo(\"body\");\n\n      window.fbAsyncInit = () => {\n        return FB.init({\n          appId: this.props.settings.appId,\n          xfbml: true,\n          version: this.props.settings.version || \"v2.7\"\n        });\n      };\n      (function (d, s, id) {\n        let js = void 0;\n        const fjs = d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) {\n          return;\n        }\n        js = d.createElement(s);\n        js.id = id;\n        js.src = \"//connect.facebook.net/en_US/sdk.js\";\n        fjs.parentNode.insertBefore(js, fjs);\n      })(document, \"script\", \"facebook-jssdk\");\n    }\n  }\n\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (window.FB) {\n      window.FB.ui({\n        method: \"share\",\n        display: \"popup\",\n        href: this.props.url\n      });\n    }\n  }\n\n  renderText() {\n    if (this.props.showText) {\n      return (\n        <Translation defaultValue=\"Share on Facebook\" i18nKey=\"social.shareOnFacebook\" />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const iconClassNames = classnames({\n      \"fa\": true,\n      \"fa-facebook\": this.props.altIcon !== true,\n      \"fa-facebook-alt\": this.props.altIcon,\n      [this.props.size]: this.props.size\n    });\n\n    return (\n      <a className=\"btn btn-flat facebook-share\" aria-label=\"Share to Facebook\" href=\"#\" onClick={this.handleClick}\n        target=\"_blank\"\n      >\n        <Helmet\n          meta={getOpenGraphMeta(this.props)}\n        />\n        <i className={iconClassNames} />\n        {this.renderText()}\n      </a>\n    );\n  }\n}\n\nFacebookSocialButton.propTypes = {\n  altIcon: PropTypes.string,\n  media: PropTypes.string,\n  settings: PropTypes.object,\n  showText: PropTypes.bool,\n  size: PropTypes.string,\n  url: PropTypes.string\n};\n\nexport default FacebookSocialButton;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Helmet from \"react-helmet\";\nimport classnames from \"classnames\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\n\nexport function getGooglePlusMeta(props) {\n  const preferredUrl = props.url || location.origin + location.pathname;\n  const url = encodeURIComponent(preferredUrl);\n  const description = props.settings.description;\n\n  const meta = [\n    { property: \"itemprop:name\", content: location.hostname },\n    { property: \"itemprop:url\", content: url },\n    { property: \"itemprop:description\", content: description }\n  ];\n\n  if (props.media) {\n    let media;\n\n    if (!/^http(s?):\\/\\/+/.test(props.media)) {\n      media = location.origin + props.media;\n    }\n\n    meta.push({\n      property: \"itemprop:image\",\n      content: media\n    });\n  }\n}\n\nclass GooglePlusSocialButton extends Component {\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (window) {\n      window.open(this.url, \"googleplus_window\", \"width=750, height=650\");\n    }\n  }\n\n  get url() {\n    const props = this.props;\n    const preferredUrl = props.url || location.origin + location.pathname;\n    const url = encodeURIComponent(preferredUrl);\n    const href = \"https://plus.google.com/share?url=\" + url;\n\n    return href;\n  }\n\n  renderText() {\n    if (this.props.showText) {\n      return (\n        <Translation defaultValue=\"Share on GooglePlus\" i18nKey=\"social.shareOnGooglePlus\" />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const iconClassNames = classnames({\n      \"fa\": true,\n      \"fa-google-plus\": this.props.altIcon !== true,\n      \"fa-google-plus-alt\": this.props.altIcon,\n      [this.props.size]: this.props.size\n    });\n\n    return (\n      <a className=\"btn btn-flat googleplus-share\" aria-label=\"Share to Google Plus\" href=\"#\" onClick={this.handleClick}\n        target=\"_blank\"\n      >\n        <Helmet\n          meta={getGooglePlusMeta(this.props)}\n        />\n        <i className={iconClassNames} />\n        {this.renderText()}\n      </a>\n    );\n  }\n}\n\nGooglePlusSocialButton.propTypes = {\n  altIcon: PropTypes.bool,\n  showText: PropTypes.bool,\n  size: PropTypes.string\n};\n\nexport default GooglePlusSocialButton;\n","export { default as SocialButtons } from \"./socialButtons\";\nexport { default as Facebook } from \"./facebook\";\nexport { default as Twitter } from \"./twitter\";\nexport { default as GooglePlus } from \"./googleplus\";\nexport { default as Pinterest } from \"./pinterest\";\nexport { default as SocialSettings } from \"./settings\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass PinterestSocialButton extends Component {\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (window) {\n      window.open(this.url, \"pinterest_window\", \"width=750, height=650\");\n    }\n  }\n\n  get url() {\n    const props = this.props;\n    const preferredUrl = props.url || location.origin + location.pathname;\n    const url = encodeURIComponent(preferredUrl);\n    const description = props.settings.description;\n    const baseUrl = \"http://www.pinterest.com/pin/create/button/\";\n    let media = props.settings.media;\n\n    if (props.settings.media) {\n      if (!/^http(s?):\\/\\/+/.test(props.settings.media)) {\n        media = location.origin + props.settings.media;\n      }\n    }\n\n    const href = `${baseUrl}?url=${url}&media=${media}&description=${description}`;\n\n    return href;\n  }\n\n  renderText() {\n    if (this.props.showText) {\n      return (\n        <Translation defaultValue=\"Share on Pinterest\" i18nKey=\"social.shareOnPinterest\" />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const iconClassNames = classnames({\n      \"fa\": true,\n      \"fa-pinterest\": this.props.altIcon !== true,\n      \"fa-pinterest-alt\": this.props.altIcon,\n      [this.props.size]: this.props.size\n    });\n\n    return (\n      <a className=\"btn btn-flat pinterest-share\" aria-label=\"Share to Pinterest\" href={this.url} onClick={this.handleClick}\n        target=\"_blank\"\n      >\n        <i className={iconClassNames} />\n        {this.renderText()}\n      </a>\n    );\n  }\n}\n\nPinterestSocialButton.propTypes = {\n  altIcon: PropTypes.bool,\n  showText: PropTypes.bool,\n  size: PropTypes.string\n};\n\nexport default PinterestSocialButton;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  CardGroup,\n  SettingsCard,\n  Form\n} from \"/imports/plugins/core/ui/client/components\";\nimport { SocialPackageConfig } from \"/lib/collections/schemas/social\";\n\nconst socialProviders = [\n  {\n    name: \"facebook\",\n    icon: \"fa fa-facebook\",\n    fields: [\"appId\", \"appSecret\", \"profilePage\"]\n  },\n  {\n    name: \"twitter\",\n    icon: \"fa fa-twitter\",\n    fields: [\"username\", \"profilePage\"]\n  },\n  {\n    name: \"pinterest\",\n    icon: \"fa fa-pinterest\",\n    fields: [\"profilePage\"]\n  },\n  {\n    name: \"googleplus\",\n    icon: \"fa fa-google-plus\",\n    fields: [\"profilePage\"]\n  }\n];\n\nclass SocialSettings extends Component {\n  static propTypes = {\n    onSettingChange: PropTypes.func,\n    onSettingEnableChange: PropTypes.func,\n    onSettingExpand: PropTypes.func,\n    onSettingsSave: PropTypes.func,\n    packageData: PropTypes.object,\n    preferences: PropTypes.object,\n    providers: PropTypes.arrayOf(PropTypes.string),\n    socialSettings: PropTypes.object\n  }\n\n  getSchemaForField(provider, field) {\n    return SocialPackageConfig._schema[`settings.public.apps.${provider}.${field}`];\n  }\n\n  handleSettingChange = (event, value, name) => {\n    if (typeof this.props.onSettingChange === \"function\") {\n      const parts = name.split(\".\");\n      this.props.onSettingChange(parts[0], parts[1], value);\n    }\n  }\n\n  handleSubmit = (event, data, formName) => {\n    if (typeof this.props.onSettingsSave === \"function\") {\n      this.props.onSettingsSave(formName, data.doc);\n    }\n  }\n\n  renderCards() {\n    if (Array.isArray(socialProviders)) {\n      return socialProviders.map((provider, index) => {\n        const doc = {\n          settings: {\n            ...this.props.packageData.settings\n          }\n        };\n\n        return (\n          <SettingsCard\n            key={index}\n            i18nKeyTitle={`admin.settings.public.apps.${provider.name}.title`}\n            expandable={true}\n            onExpand={this.props.onSettingExpand}\n            expanded={this.props.preferences[provider.name]}\n            title={provider.name}\n            name={provider.name}\n            enabled={this.props.socialSettings.settings.apps[provider.name].enabled}\n            icon={provider.icon}\n            onSwitchChange={this.props.onSettingEnableChange}\n          >\n            <Form\n              schema={SocialPackageConfig}\n              doc={doc}\n              docPath={`settings.public.apps.${provider.name}`}\n              hideFields={[\n                `settings.public.apps.${provider.name}.enabled`\n              ]}\n              name={`settings.public.apps.${provider.name}`}\n              onSubmit={this.handleSubmit}\n            />\n          </SettingsCard>\n        );\n      });\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        {this.renderCards()}\n      </CardGroup>\n    );\n  }\n}\n\nexport default SocialSettings;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Facebook, Twitter, GooglePlus, Pinterest } from \"./\";\n\nexport function getProviderComponentByName(providerName) {\n  switch (providerName) {\n    case \"facebook\":\n      return Facebook;\n    case \"twitter\":\n      return Twitter;\n    case \"googleplus\":\n      return GooglePlus;\n    case \"pinterest\":\n      return Pinterest;\n    default:\n      return null;\n  }\n}\n\n\nclass SocialButtons extends Component {\n  buttonSettngs(provider) {\n    return this.props.settings.apps[provider];\n  }\n\n  renderEditButton() {\n    if (this.props.editButton) {\n      return (\n        <span className=\"social-buttons-controls\">\n          {this.props.editButton}\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderButtons() {\n    if (this.props.providers) {\n      return this.props.providers.map((provider) => {\n        const buttonComponent = getProviderComponentByName(provider);\n\n        if (buttonComponent) {\n          const component = React.createElement(\n            getProviderComponentByName(provider),\n            {\n              key: provider,\n              title: this.props.title,\n              description: this.props.description,\n              url: this.props.url,\n              settings: this.buttonSettngs(provider)\n            }\n          );\n\n          return component;\n        }\n        return null;\n      });\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <div className=\"rui social-buttons\">\n        {this.renderButtons()}\n        {this.renderEditButton()}\n      </div>\n    );\n  }\n}\n\nSocialButtons.propTypes = {\n  description: PropTypes.string,\n  editButton: PropTypes.node,\n  providers: PropTypes.arrayOf(PropTypes.string),\n  settings: PropTypes.shape({\n    apps: PropTypes.object\n  }),\n  title: PropTypes.string,\n  url: PropTypes.string\n};\n\nexport default SocialButtons;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Helmet from \"react-helmet\";\nimport classnames from \"classnames\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\n\nexport function getTwitterMeta(props) {\n  const title = props.title || document.title;\n  const preferredUrl = props.url || location.origin + location.pathname;\n  const url = encodeURIComponent(preferredUrl);\n  const username = props.settings.username;\n  const description = props.settings.description;\n\n  const meta = [\n    { property: \"twitter:card\", content: \"summary\" },\n    { property: \"twitter:creator\", content: username },\n    { property: \"twitter:url\", content: url },\n    { property: \"twitter:title\", content: title },\n    { property: \"twitter:description\", content: description }\n  ];\n\n  if (props.media) {\n    let media;\n\n    if (!/^http(s?):\\/\\/+/.test(props.media)) {\n      media = location.origin + props.media;\n    }\n\n    meta.push({\n      property: \"twitter:image\",\n      content: media\n    });\n  }\n}\n\nclass TwitterSocialButton extends Component {\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (window) {\n      window.open(this.url, \"twitter_window\", \"width=750, height=650\");\n    }\n  }\n\n  get url() {\n    const props = this.props;\n    const preferredUrl = props.url || location.origin + location.pathname;\n    const url = encodeURIComponent(preferredUrl);\n    const base = \"https://twitter.com/intent/tweet\";\n    const text = props.settings.description;\n    const username = props.settings.username;\n\n    let href = base + \"?url=\" + url + \"&text=\" + text;\n\n    if (username) {\n      href += \"&via=\" + username;\n    }\n\n    return href;\n  }\n\n  renderText() {\n    if (this.props.showText) {\n      return (\n        <Translation defaultValue=\"Share on Twitter\" i18nKey=\"social.shareOnTwitter\" />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const iconClassNames = classnames({\n      \"fa\": true,\n      \"fa-twitter\": this.props.altIcon !== true,\n      \"fa-twitter-alt\": this.props.altIcon,\n      [this.props.size]: this.props.size\n    });\n\n    return (\n      <a className=\"btn btn-flat twitter-share\" aria-label=\"Share to Twitter\" href=\"#\" onClick={this.handleClick}\n        target=\"_blank\"\n      >\n        <Helmet\n          meta={getTwitterMeta(this.props)}\n        />\n        <i className={iconClassNames} />\n        {this.renderText()}\n      </a>\n    );\n  }\n}\n\nTwitterSocialButton.propTypes = {\n  altIcon: PropTypes.bool,\n  showText: PropTypes.bool,\n  size: PropTypes.string\n};\n\nexport default TwitterSocialButton;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEqual } from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { SocialSettings } from \"../components\";\nimport { createSocialSettings } from \"../../lib/helpers\";\n\nclass SocialSettingsContainer extends Component {\n  static propTypes = {\n    settings: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: props.settings\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (isEqual(nextProps.settings, this.props.settings) === false) {\n      this.setState({\n        settings: nextProps.settings\n      });\n    }\n  }\n\n  handleSettingEnable = (event, isChecked, name) => {\n    Meteor.call(\"reaction-social/updateSocialSetting\", name, \"enabled\", isChecked);\n  }\n\n  handleSettingExpand = (event, card, name, isExpanded) => {\n    Reaction.updateUserPreferences(\"reaction-social\", \"settingsCards\", {\n      [name]: isExpanded\n    });\n  }\n\n  handleSettingsSave = (settingName, values) => {\n    Meteor.call(\"reaction-social/updateSocialSettings\", values.settings, (error) => {\n      if (!error) {\n        Alerts.toast(\n          i18next.t(\"admin.settings.socialSettingsSaved\", { defaultValue: \"Social settings saved\" }),\n          \"success\"\n        );\n      }\n    });\n  }\n\n  render() {\n    return (\n      <SocialSettings\n        onSettingEnableChange={this.handleSettingEnable}\n        onSettingExpand={this.handleSettingExpand}\n        onSettingsSave={this.handleSettingsSave}\n        {...this.props}\n        settings={this.state.settings}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const subscription = Reaction.Subscriptions.Packages;\n  const preferences = Reaction.getUserPreferences(\"reaction-social\", \"settingsCards\", {});\n\n  const socialPackage = Packages.findOne({\n    name: \"reaction-social\"\n  });\n\n  if (subscription.ready()) {\n    onData(null, {\n      preferences: preferences,\n      packageData: socialPackage,\n      socialSettings: createSocialSettings(props)\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nconst decoratedComponent = composeWithTracker(composer)(SocialSettingsContainer);\n\nexport default decoratedComponent;\n","import \"./templates/apps/facebook.html\";\nimport \"./templates/apps/facebook.js\";\nimport \"./templates/apps/googleplus.html\";\nimport \"./templates/apps/googleplus.js\";\nimport \"./templates/apps/pinterest.html\";\nimport \"./templates/apps/pinterest.js\";\nimport \"./templates/apps/twitter.html\";\nimport \"./templates/apps/twitter.js\";\n\nimport \"./templates/dashboard/social.html\";\nimport \"./templates/dashboard/social.js\";\n\nimport \"./templates/social.html\";\nimport \"./templates/social.js\";\n","import { Packages } from \"/lib/collections\";\nimport merge from \"lodash/merge\";\n\nexport function createSocialSettings(options) {\n  let socialSettings;\n\n  const socialPackage = Packages.findOne({\n    name: \"reaction-social\"\n  });\n\n  if (socialPackage) {\n    socialSettings = socialPackage.settings.public;\n    socialSettings = merge({}, socialSettings, options);\n    const socialButtons = [];\n\n    if (socialSettings.appsOrder) {\n      const appsOrder = socialSettings.appsOrder;\n      for (let i = 0; i < appsOrder.length; i++) {\n        const app = appsOrder[i];\n\n        if (typeof socialSettings.apps[app] === \"object\" && socialSettings.apps[app].enabled) {\n          socialButtons.push(app);\n        }\n      }\n    }\n\n    return {\n      url: options.url || location.origin + location.pathname,\n      media: options.media,\n      settings: socialSettings,\n      providers: socialButtons\n    };\n  }\n\n  return null;\n}\n","import { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport SearchModalContainer from \"../../../lib/containers/searchModalContainer\";\n\n/*\n * searchModal helpers\n */\nTemplate.searchModal.helpers({\n  searchModal() {\n    return {\n      component: SearchModalContainer\n    };\n  }\n});\n\n/*\n * searchModal events\n */\nTemplate.searchModal.events({\n  \"click [data-event-action=searchCollection]\": function (event) {\n    event.preventDefault();\n\n    $(\".search-type-option\").not(event.target).removeClass(\"search-type-active\");\n    $(event.target).addClass(\"search-type-active\");\n\n    $(\"#search-input\").focus();\n  }\n});\n","// Search Modal\nimport \"./templates/searchModal/searchModal.html\";\nimport \"./templates/searchModal/searchModal.js\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Reaction } from \"/client/api\";\nimport { TextField, Button, IconButton, SortableTableLegacy } from \"@reactioncommerce/reaction-ui\";\nimport ProductGridContainer from \"/imports/plugins/included/product-variant/containers/productGridContainer\";\nimport { accountsTable, ordersTable } from \"../helpers\";\n\nclass SearchModal extends Component {\n  static propTypes = {\n    accounts: PropTypes.array,\n    handleAccountClick: PropTypes.func,\n    handleChange: PropTypes.func,\n    handleClick: PropTypes.func,\n    handleOrderClick: PropTypes.func,\n    handleTagClick: PropTypes.func,\n    handleToggle: PropTypes.func,\n    orders: PropTypes.array,\n    products: PropTypes.array,\n    siteName: PropTypes.string,\n    tags: PropTypes.array,\n    unmountMe: PropTypes.func,\n    value: PropTypes.string\n  }\n\n  renderSearchInput() {\n    return (\n      <div className=\"rui search-modal-input\">\n        <label data-i18n=\"search.searchInputLabel\">Search {this.props.siteName}</label>\n        <i className=\"fa fa-search search-icon\" />\n        <TextField\n          className=\"search-input\"\n          textFieldStyle={{ marginBottom: 0 }}\n          onChange={this.props.handleChange}\n          value={this.props.value}\n        />\n        <Button\n          className=\"search-clear\"\n          i18nKeyLabel=\"search.clearSearch\"\n          label=\"Clear\"\n          containerStyle={{ fontWeight: \"normal\" }}\n          onClick={this.props.handleClick}\n        />\n      </div>\n    );\n  }\n\n  renderSearchTypeToggle() {\n    if (Reaction.hasPermission(\"admin\")) {\n      return (\n        <div className=\"rui search-type-toggle\">\n          <div\n            className=\"search-type-option search-type-active\"\n            data-i18n=\"search.searchTypeProducts\"\n            data-event-action=\"searchCollection\"\n            data-event-value=\"products\"\n            onClick={() => this.props.handleToggle(\"products\")}\n          >\n            Products\n          </div>\n          {Reaction.hasPermission(\"accounts\") &&\n            <div\n              className=\"search-type-option\"\n              data-i18n=\"search.searchTypeAccounts\"\n              data-event-action=\"searchCollection\"\n              data-event-value=\"accounts\"\n              onClick={() => this.props.handleToggle(\"accounts\")}\n            >\n              Accounts\n            </div>\n          }\n          {Reaction.hasPermission(\"orders\") &&\n            <div\n              className=\"search-type-option\"\n              data-i18n=\"search.searchTypeOrders\"\n              data-event-action=\"searchCollection\"\n              data-event-value=\"orders\"\n              onClick={() => this.props.handleToggle(\"orders\")}\n            >\n              Orders\n            </div>\n          }\n        </div>\n      );\n    }\n  }\n\n  renderProductSearchTags() {\n    return (\n      <div className=\"rui search-modal-tags-container\">\n        <p className=\"rui suggested-tags\" data-i18n=\"search.suggestedTags\">Suggested tags</p>\n        <div className=\"rui search-tags\">\n          {this.props.tags.map((tag) => (\n            <span className=\"rui search-tag\" id={tag._id} key={tag._id} onClick={()=> this.props.handleTagClick(tag._id)}>{tag.name}</span>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"rui search-modal-close\"><IconButton icon=\"fa fa-times\" onClick={this.props.unmountMe} /></div>\n        <div className=\"rui search-modal-header\">\n          {this.renderSearchInput()}\n          {this.renderSearchTypeToggle()}\n          {this.props.tags.length > 0 && this.renderProductSearchTags()}\n        </div>\n        <div className=\"rui search-modal-results-container\">\n          {this.props.products.length > 0 && <ProductGridContainer products={this.props.products} unmountMe={this.props.unmountMe} isSearch={true} />}\n          {this.props.accounts.length > 0 &&\n            <div className=\"data-table\">\n              <div className=\"table-responsive\">\n                <SortableTableLegacy data={this.props.accounts} columns={accountsTable()} onRowClick={this.props.handleAccountClick} />\n              </div>\n            </div>\n          }\n          {this.props.orders.length > 0 &&\n            <div className=\"data-table\">\n              <div className=\"table-responsive\">\n                <SortableTableLegacy data={this.props.orders} columns={ordersTable()} onRowClick={this.props.handleOrderClick} />\n              </div>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchModal;\n","import React, { Component } from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport _ from \"lodash\";\nimport { Reaction } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport * as Collections from \"/lib/collections\";\nimport SearchModal from \"../components/searchModal\";\n\nclass SearchModalContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collection: \"products\",\n      value: localStorage.getItem(\"searchValue\") || \"\",\n      tagResults: [],\n      productResults: [],\n      orderResults: [],\n      renderChild: true,\n      accountResults: [],\n      facets: []\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChildUnmount = this.handleChildUnmount.bind(this);\n    this.handleAccountClick = this.handleAccountClick.bind(this);\n    this.handleOrderClick = this.handleOrderClick.bind(this);\n    this.handleTagClick = this.handleTagClick.bind(this);\n    this.handleToggle = this.handleToggle.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.dep = new Tracker.Dependency;\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n\n    Tracker.autorun(() => {\n      this.dep.depend();\n      const searchCollection = this.state.collection;\n      const searchQuery = this.state.value;\n      const facets = this.state.facets;\n      this.subscription = Meteor.subscribe(\"SearchResults\", searchCollection, searchQuery, facets);\n\n      if (this.subscription.ready()) {\n        /*\n        * Product Search\n        */\n        if (searchCollection === \"products\") {\n          const productResults = Collections.ProductSearch.find().fetch();\n          this.setState({ productResults });\n\n          const productHashtags = getProductHashtags(productResults);\n          const tagSearchResults = Collections.Tags.find({\n            _id: { $in: productHashtags }\n          }).fetch();\n\n          this.setState({\n            tagResults: tagSearchResults,\n            accountResults: [],\n            orderResults: []\n          });\n        }\n\n        /*\n          * Account Search\n          */\n        if (searchCollection === \"accounts\") {\n          const accountResults = Collections.AccountSearch.find().fetch();\n          this.setState({\n            accountResults,\n            tagResults: [],\n            orderResults: [],\n            productResults: []\n          });\n        }\n\n        /*\n          * Order Search\n          */\n        if (searchCollection === \"orders\") {\n          const orderResults = Collections.OrderSearch.find().fetch();\n          this.setState({\n            orderResults,\n            tagResults: [],\n            accountResults: [],\n            productResults: []\n          });\n        }\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n    this.subscription.stop();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 27) {\n      this.setState({\n        renderChild: false\n      });\n    }\n  }\n\n  handleChange = (event, value) => {\n    this.setState({ value }, () => {\n      this.dep.changed();\n    });\n    localStorage.setItem(\"searchValue\", value);\n  }\n\n  handleClick = () => {\n    this.setState({\n      value: \"\"\n    }, () => {\n      this.dep.changed();\n    });\n  }\n\n  handleAccountClick = (event) => {\n    const userId = event._id;\n\n    Reaction.showActionView({\n      label: \"Permissions\",\n      i18nKeyLabel: \"admin.settings.permissionsSettingsLabel\",\n      data: userPermissions(userId),\n      template: \"memberSettings\"\n    });\n    Reaction.Router.go(\"dashboard/accounts\", {}, {});\n    this.handleChildUnmount();\n  }\n\n  handleOrderClick = (event)  => {\n    const isActionViewOpen = Reaction.isActionViewOpen();\n    const orderId = event._id;\n\n    // toggle detail views\n    if (isActionViewOpen === false) {\n      Reaction.showActionView({\n        label: \"Order Details\",\n        i18nKeyLabel: \"orderWorkflow.orderDetails\",\n        data: event,\n        props: {\n          size: \"large\"\n        },\n        template: \"coreOrderWorkflow\"\n      });\n    }\n\n    Reaction.Router.go(\"dashboard/orders\", {}, {\n      _id: orderId\n    });\n    this.handleChildUnmount();\n  }\n\n  handleTagClick = (tagId) => {\n    const newFacet = tagId;\n    const element = document.getElementById(tagId);\n    element.classList.toggle(\"active-tag\");\n\n    this.setState({\n      facets: tagToggle(this.state.facets, newFacet)\n    });\n  }\n\n  handleToggle = (collection) => {\n    this.setState({\n      tagResults: [],\n      productResults: [],\n      orderResults: [],\n      accountResults: [],\n      collection\n    }, () => {\n      this.dep.changed();\n    });\n  }\n\n  handleChildUnmount = () =>  {\n    this.setState({ renderChild: false });\n  }\n\n  render() {\n    return (\n      <div>\n        {this.state.renderChild ?\n          <div className=\"rui search-modal js-search-modal\">\n            <SearchModal\n              {...this.props}\n              handleChange={this.handleChange}\n              handleClick={this.handleClick}\n              handleToggle={this.handleToggle}\n              handleAccountClick={this.handleAccountClick}\n              handleOrderClick={this.handleOrderClick}\n              handleTagClick={this.handleTagClick}\n              products={this.state.productResults}\n              tags={this.state.tagResults}\n              value={this.state.value}\n              accounts={this.state.accountResults}\n              orders={this.state.orderResults}\n              unmountMe={this.handleChildUnmount}\n            />\n          </div> : null\n        }\n      </div>\n    );\n  }\n}\n\nfunction getSiteName() {\n  const shop = Collections.Shops.findOne();\n  return typeof shop === \"object\" && shop.name ? shop.name : \"\";\n}\n\nfunction getProductHashtags(productResults) {\n  const hashtags = [];\n  for (const product of productResults) {\n    if (product.hashtags) {\n      for (const hashtag of product.hashtags) {\n        if (!_.includes(hashtags, hashtag)) {\n          hashtags.push(hashtag);\n        }\n      }\n    }\n  }\n  return hashtags;\n}\n\nfunction userPermissions(userId) {\n  if (Reaction.hasPermission(\"reaction-accounts\")) {\n    const shopId = Reaction.getShopId();\n    const user = Meteor.users.findOne(userId);\n    const member = {};\n    member.userId = user._id;\n\n    if (user.emails && user.emails.length) {\n      // this is some kind of denormalization. It is helpful to have both\n      // of this string and array. Array goes to avatar, string goes to\n      // template\n      member.emails = user.emails;\n      member.email = user.emails[0].address;\n    }\n    // member.user = user;\n    member.username = user.username;\n    member.isAdmin = Roles.userIsInRole(user._id, \"admin\", shopId);\n    member.roles = user.roles;\n    member.services = user.services;\n\n    if (Roles.userIsInRole(member.userId, \"owner\", shopId)) {\n      member.role = \"owner\";\n    } else if (Roles.userIsInRole(member.userId, \"admin\", shopId)) {\n      member.role = \"admin\";\n    } else if (Roles.userIsInRole(member.userId, \"dashboard\", shopId)) {\n      member.role = \"dashboard\";\n    } else if (Roles.userIsInRole(member.userId, \"guest\", shopId)) {\n      member.role = \"guest\";\n    }\n\n    return member;\n  }\n}\n\nfunction tagToggle(arr, val) {\n  if (arr.length === _.pull(arr, val).length) {\n    arr.push(val);\n  }\n  return arr;\n}\n\nfunction composer(props, onData) {\n  Meteor.subscribe(\"ShopMembers\");\n  const siteName = getSiteName();\n\n  onData(null, {\n    siteName\n  });\n}\n\nexport default composeWithTracker(composer)(SearchModalContainer);\n","import React from \"react\";\nimport { DataType } from \"react-taco-table\";\nimport { i18next } from \"/client/api\";\n\nexport default function accountsTable() {\n  const columns = [\n    {\n      id: \"_id\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.accountId\", { defaultValue: \"Account ID\" }),\n      value: rowData => {\n        return rowData._id;\n      }\n    },\n    {\n      id: \"shopId\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.shopId\", { defaultValue: \"Shop ID\" }),\n      value: rowData => {\n        return rowData.shopId;\n      }\n    },\n    {\n      id: \"firstName\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.firstName\", { defaultValue: \"First Name\" }),\n      value: rowData => {\n        if (rowData.profile) {\n          return rowData.profile.firstName;\n        }\n        return undefined;\n      }\n    },\n    {\n      id: \"lastName\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.lastName\", { defaultValue: \"Last Name\" }),\n      value: rowData => {\n        if (rowData.profile) {\n          return rowData.profile.lastName;\n        }\n        return undefined;\n      }\n    },\n    {\n      id: \"phone\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.phone\", { defaultValue: \"Phone\" }),\n      value: rowData => {\n        if (rowData.profile) {\n          return rowData.profile.phone;\n        }\n        return undefined;\n      }\n    },\n    {\n      id: \"email\",\n      type: DataType.String,\n      header: i18next.t(\"search.accountSearchResults.emails\", { defaultValue: \"Email\" }),\n      value: rowData => {\n        return rowData.emails[0];\n      }\n    },\n    {\n      id: \"manageAccount\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.shippingStatus\", { defaultValue: \"Shipping Status\" }),\n      value: rowData => {\n        return rowData.emails[0];\n      },\n      tdClassName: \"account-manage\",\n      renderer(cellData, { rowData }) {\n        return <span data-event-action=\"manageAccount\" data-event-data={rowData._id}>Manage</span>;\n      }\n    }\n  ];\n\n  return columns;\n}\n","export { default as accountsTable } from \"./accountsTable\";\nexport { default as ordersTable } from \"./ordersTable\";\n\n","import _ from \"lodash\";\nimport React from \"react\";\nimport { DataType } from \"react-taco-table\";\nimport { i18next } from \"/client/api\";\n\nexport default function ordersTable() {\n  const columns = [\n    {\n      id: \"_id\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.orderId\", { defaultValue: \"Order ID\" }),\n      renderer(cellData) { // eslint-disable-line react/no-multi-comp\n        return <a data-event-action=\"goToOrder\" data-event-data={cellData}>{cellData}</a>;\n      }\n    },\n    {\n      id: \"shippingName\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.shippingName\", { defaultValue: \"Name\" }),\n      value: rowData => {\n        return rowData.shippingName;\n      }\n    },\n    {\n      id: \"userEmail\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.userEmails\", { defaultValue: \"Email\" }),\n      value: rowData => {\n        return rowData.userEmails[0];\n      }\n    },\n    {\n      id: \"shippingAddress\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.shippingAddress\", { defaultValue: \"Address\" }),\n      value: rowData => {\n        return rowData.shippingAddress.address;\n      }\n    },\n    {\n      id: \"shippingCity\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.shippingCity\", { defaultValue: \"City\" }),\n      value: rowData => {\n        return rowData.shippingAddress.city;\n      }\n    },\n    {\n      id: \"shippingRegion\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.shippingRegion\", { defaultValue: \"Region\" }),\n      value: rowData => {\n        return rowData.shippingAddress.region;\n      }\n    },\n    {\n      id: \"shippingCountry\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.shippingCountry\", { defaultValue: \"Country\" }),\n      value: rowData => {\n        return rowData.shippingAddress.country;\n      }\n    },\n    {\n      id: \"shippingPhone\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.shippingPhone\", { defaultValue: \"Phone\" }),\n      value: rowData => {\n        return rowData.shippingPhone;\n      }\n    },\n    {\n      id: \"shippingStatus\",\n      type: DataType.String,\n      header: i18next.t(\"search.orderSearchResults.shippingStatus\", { defaultValue: \"Shipping Status\" }),\n      value: rowData => {\n        return rowData.shippingStatus;\n      },\n      tdClassName: \"shipping-status\",\n      renderer(cellData, { rowData }) { // eslint-disable-line react/no-multi-comp\n        const rowClassName = _.lowerCase(rowData.shippingStatus);\n        return <span className={rowClassName}>{cellData}</span>;\n      }\n    },\n    {\n      id: \"orderDate\",\n      type: DataType.Date,\n      header: i18next.t(\"search.orderSearchResults.orderDate\", { defaultValue: \"Date\" }),\n      value: rowData => {\n        return rowData.orderDate;\n      }\n    },\n    {\n      id: \"orderTotal\",\n      type: DataType.Number,\n      header: i18next.t(\"search.orderSearchResults.orderTotal\", { defaultValue: \"Total\" }),\n      value: rowData => {\n        return rowData.orderTotal;\n      }\n    }\n  ];\n\n  return columns;\n}\n","import { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Packages } from \"/lib/collections\";\nimport { i18next } from \"/client/api\";\n\nTemplate.reactionAnalyticsSettings.helpers({\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-analytics\"\n    });\n  },\n  googleAnalyticsEnabled() {\n    return typeof ga === \"function\";\n  },\n  segmentioEnabled() {\n    return typeof analytics === \"object\";\n  },\n  mixpanelEnabled() {\n    return typeof mixpanel === \"object\";\n  }\n});\n\n\nAutoForm.hooks({\n  \"analytics-update-form\": {\n    onSuccess() {\n      Alerts.removeType(\"analytics-not-configured\");\n      return Alerts.toast(i18next.t(\"admin.settings.analyticsSettingsSaved\"), \"success\");\n    },\n    onError(operation, error) {\n      const msg = error.message || error.reason || \"Unknown error\";\n      return Alerts.toast(`${i18next.t(\"admin.settings.analyticsSettingsFailed\")} ${msg}`, \"error\");\n    }\n  }\n});\n","import \"./templates/reactionAnalytics.html\";\nimport \"./templates/reactionAnalytics.js\";\n\nimport \"./startup\";\n","/* global mixpanel, ga */\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { $ } from \"meteor/jquery\";\nimport { AnalyticsEvents, Packages } from \"/lib/collections\";\nimport { Reaction, i18next, Logger } from \"/client/api\";\nimport Alerts from \"/imports/plugins/core/layout/client/templates/layout/alerts/inlineAlerts\";\n\n// Create a queue, but don't obliterate an existing one!\nconst analytics = window.analytics = window.analytics || [];\n\n// If the real analytics.js is already on the page return.\nif (analytics.initialize) return;\n\n// If the snippet was invoked already show an error.\nif (analytics.invoked) {\n  Logger.warn(\"Segment snippet included twice.\");\n  return;\n}\n\n// Invoked flag, to make sure the snippet\n// is never invoked twice.\nanalytics.invoked = true;\n\n// A list of the methods in Analytics.js to stub.\nanalytics.methods = [\n  \"trackSubmit\",\n  \"trackClick\",\n  \"trackLink\",\n  \"trackForm\",\n  \"pageview\",\n  \"identify\",\n  \"reset\",\n  \"group\",\n  \"track\",\n  \"ready\",\n  \"alias\",\n  \"page\",\n  \"once\",\n  \"off\",\n  \"on\"\n];\n\n// Define a factory to create stubs. These are placeholders\n// for methods in Analytics.js so that you never have to wait\n// for it to load to actually record data. The `method` is\n// stored as the first argument, so we can replay the data.\nanalytics.factory = function (method) {\n  return function () {\n    const args = Array.prototype.slice.call(arguments);\n    args.unshift(method);\n    analytics.push(args);\n    return analytics;\n  };\n};\n\n// For each of our methods, generate a queueing stub.\nfor (let i = 0; i < analytics.methods.length; i++) {\n  const key = analytics.methods[i];\n  analytics[key] = analytics.factory(key);\n}\n\n// Define a method to load Analytics.js from our CDN,\n// and that will be sure to only ever load it once.\nanalytics.load = function (key) {\n  // Create an async script element based on your key.\n  const script = document.createElement(\"script\");\n  script.type = \"text/javascript\";\n  script.async = true;\n  script.src = (document.location.protocol === \"https:\" ? \"https://\" : \"http://\") +\n    \"cdn.segment.com/analytics.js/v1/\" + key + \"/analytics.min.js\";\n  // Insert our script next to the first script element.\n  const first = document.getElementsByTagName(\"script\")[0];\n  first.parentNode.insertBefore(script, first);\n};\n\n// Add a version to keep track of what\"s in the wild.\nanalytics.SNIPPET_VERSION = \"3.1.0\";\n\n// Load Analytics.js with your key, which will automatically\n// load the tools you\"ve enabled for your account. Boosh!\n// analytics.load(\"YOUR_WRITE_KEY\");\n\n// Make the first page call to load the integrations. If\n// you\"d like to manually name or tag the page, edit or\n// move this call however you\"d like.\n// analytics.page();\n\n//\n// Initialize analytics page tracking\n//\n\n// segment page tracking\nfunction notifySegment(context) {\n  if (typeof analytics !== \"undefined\") {\n    analytics.page({\n      userId: Meteor.userId(),\n      properties: {\n        url: context.path,\n        shopId: Reaction.getShopId()\n      }\n    });\n  }\n}\n// google analytics page tracking\nfunction notifyGoogleAnalytics(context) {\n  if (typeof ga !== \"undefined\") {\n    ga(\"send\", \"pageview\", context.path);\n  }\n}\n\n// mixpanel page tracking\nfunction notifyMixpanel(context) {\n  if (typeof mixpanel !== \"undefined\") {\n    mixpanel.track(\"page viewed\", {\n      \"page name\": document.title,\n      \"url\": context.path\n    });\n  }\n}\n\nReaction.Router.triggers.enter([notifySegment, notifyGoogleAnalytics, notifyMixpanel]);\n\n//\n// Initialize analytics event tracking\n//\nMeteor.startup(function () {\n  Tracker.autorun(function () {\n    const coreAnalytics = Packages.findOne({\n      name: \"reaction-analytics\"\n    });\n\n    // check if installed and enabled\n    if (!coreAnalytics || !coreAnalytics.enabled) {\n      return Alerts.removeType(\"analytics-not-configured\");\n    }\n\n    const googleAnalytics = coreAnalytics.settings.public.googleAnalytics;\n    const mixpanel = coreAnalytics.settings.public.mixpanel;\n    const segmentio = coreAnalytics.settings.public.segmentio;\n\n    //\n    // segment.io\n    //\n    if (segmentio.enabled) {\n      if (segmentio.api_key && analytics.invoked === true) {\n        analytics.load(segmentio.api_key);\n      } else if (!segmentio.api_key && Reaction.hasAdminAccess()) {\n        _.defer(function () {\n          return Alerts.toast(\n            `${i18next.t(\"admin.settings.segmentNotConfigured\")}`,\n            \"danger\", {\n              html: true,\n              sticky: true\n            });\n        });\n      }\n    }\n\n    //\n    // Google Analytics\n    //\n    if (googleAnalytics.enabled) {\n      if (googleAnalytics.api_key) {\n        ga(\"create\", googleAnalytics.api_key, \"auto\");\n      } else if (!googleAnalytics.api_key && Reaction.hasAdminAccess()) {\n        _.defer(function () {\n          return Alerts.toast(\n            `${i18next.t(\"admin.settings.googleAnalyticsNotConfigured\")}`,\n            \"error\", {\n              type: \"analytics-not-configured\",\n              html: true,\n              sticky: true\n            });\n        });\n      }\n    }\n\n    //\n    // mixpanel\n    //\n    if (mixpanel.enabled) {\n      if (mixpanel.api_key) {\n        mixpanel.init(mixpanel.api_key);\n      } else if (!mixpanel.api_key && Reaction.hasAdminAccess()) {\n        _.defer(function () {\n          return Alerts.toast(\n            `${i18next.t(\"admin.settings.mixpanelNotConfigured\")}`,\n            \"error\", {\n              type: \"analytics-not-configured\",\n              html: true,\n              sticky: true\n            });\n        });\n      }\n    }\n\n    if (!Reaction.hasAdminAccess()) {\n      return Alerts.removeType(\"analytics-not-configured\");\n    }\n    return null;\n  });\n\n  //\n  // analytics event processing\n  //\n  return $(document.body).click(function (e) {\n    let $targets = $(e.target).closest(\"*[data-event-action]\");\n    $targets = $targets.parents(\"*[data-event-action]\").add($targets);\n    return $targets.each(function (index, element) {\n      const $element = $(element);\n      const analyticsEvent = {\n        eventType: \"event\",\n        category: $element.data(\"event-category\"),\n        action: $element.data(\"event-action\"),\n        label: $element.data(\"event-label\"),\n        value: $element.data(\"event-value\")\n      };\n      if (typeof ga === \"function\") {\n        ga(\"send\", \"event\", analyticsEvent.category, analyticsEvent.action, analyticsEvent.label,\n          analyticsEvent.value);\n      }\n      if (typeof mixpanel === \"object\" && mixpanel.length > 0) {\n        mixpanel.track(analyticsEvent.action, {\n          Category: analyticsEvent.category,\n          Label: analyticsEvent.label,\n          Value: analyticsEvent.value\n        });\n      }\n\n      if (typeof analytics === \"object\") {\n        analytics.track(analyticsEvent.action, {\n          Category: analyticsEvent.category,\n          Label: analyticsEvent.label,\n          Value: analyticsEvent.value\n        });\n      }\n      // we could add a hook here, but not needed as\n      // you can trigger using the collection hooks\n      return AnalyticsEvents.insert(analyticsEvent);\n    });\n  });\n});\n","import { Template } from \"meteor/templating\";\nimport { Cart } from \"/lib/collections\";\nimport DiscountList from \"/imports/plugins/core/discounts/client/components/list\";\nimport \"./codes.html\";\n\nTemplate.discountCodesCheckout.helpers({\n  DiscountList() {\n    return DiscountList;\n  },\n  cartId() {\n    return Cart.findOne()._id;\n  }\n});\n","import \"./codes\";\nimport \"./settings\";\n","import { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { DiscountCodes } from \"../collections/codes\";\nimport { i18next } from \"/client/api\";\nimport { DiscountCodes as DiscountSchema } from \"../../lib/collections/schemas\";\nimport { IconButton, Loading, SortableTable }  from \"/imports/plugins/core/ui/client/components\";\nimport \"./settings.html\";\n\n/* eslint no-shadow: [\"error\", { \"allow\": [\"options\"] }] */\n/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"[oO]ptions\" }] */\n\nTemplate.customDiscountCodes.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"DiscountCodes\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.customDiscountCodes.helpers({\n  editButton() {\n    const instance = Template.instance();\n    const state = instance.state;\n    const isEditing = state.equals(\"isEditing\", true);\n    let editingId = state.get(\"editingId\");\n    // toggle edit state\n    if (!isEditing) {\n      editingId = null;\n    }\n    // return icon\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick() {\n        // remove active rows from grid\n        $(\".discount-codes-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId: editingId\n        });\n      }\n    };\n  },\n  discountGrid() {\n    const filteredFields = [\"code\", \"discount\", \"conditions.redemptionLimit\", \"calculation.method\"];\n    const noDataMessage = i18next.t(\"admin.settings.noCustomDiscountCodesFound\");\n    const instance = Template.instance();\n\n    //\n    // helper to get and select row from griddle\n    // into blaze for to select discount row for editing\n    //\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is discount rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    //\n    // helper adds a class to every grid row\n    //\n    const customRowMetaData = {\n      bodyCssClassName: () =>  {\n        return \"discount-codes-grid-row\";\n      }\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach(function (field) {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.discountGrid.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return discount Grid\n    return {\n      component: SortableTable,\n      publication: \"DiscountCodes\",\n      collection: DiscountCodes,\n      matchingResultsCount: \"discounts-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields: filteredFields,\n      columns: filteredFields,\n      noDataMessage: noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n  // schema for forms\n  discountSchema() {\n    return DiscountSchema;\n  },\n\n  discountCode() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const discount = DiscountCodes.findOne(id) || {};\n    return discount;\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.customDiscountCodes.events({\n  \"submit #discount-codes-update-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #discount-codes-insert-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .discount-codes-grid-row .active\": function () {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    // ugly hack\n    $(\".discount-codes-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\": function () {\n    const confirmTitle = i18next.t(\"admin.settings.confirmRateDelete\");\n    const confirmButtonText = i18next.t(\"app.delete\");\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    // confirm delete\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: confirmButtonText\n    }, (isConfirm) => {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"discounts/deleteRate\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .discount-codes-grid-row\": function (event) {\n    // toggle all rows off, then add our active row\n    $(\".discount-codes-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n//\n// Hooks for update and insert forms\n//\nAutoForm.hooks({\n  \"discount-codes-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.settings.settingsSaveSuccess\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.settings.settingsSaveFailure\")} ${error}`, \"error\"\n      );\n    }\n  },\n  \"discount-codes-insert-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.settings.settingsSaveSuccess\"), \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.settings.settingsSaveFailure\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import { Mongo } from \"meteor/mongo\";\nimport { DiscountCodes as DiscountSchema } from \"../../lib/collections/schemas\";\n\n\n/**\n * Client side collections\n */\nexport const DiscountCodes = new Mongo.Collection(\"DiscountCodes\");\n// attach discount code specific schema\nDiscountCodes.attachSchema(DiscountSchema);\n","import \"./collections/codes\";\nimport \"./templates\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Discounts } from \"/imports/plugins/core/discounts/lib/collections/schemas\";\n\n/**\n* Discount Codes Schema\n* @type {Object}\n* @desc schema that extends discount schema\n* with properties for discount codes.\n*/\nexport const DiscountCodes = new SimpleSchema([\n  Discounts, {\n    \"discountMethod\": {\n      label: \"Method\",\n      type: String,\n      defaultValue: \"code\"\n    },\n    \"calculation.method\": {\n      type: String,\n      index: 1,\n      defaultValue: \"discount\"\n    },\n    \"code\": {\n      label: \"Discount Code\",\n      type: String\n    },\n    \"conditions.redemptionLimit\": {\n      type: Number,\n      label: \"Total Limit\",\n      optional: true\n    },\n    \"conditions.accountLimit\": {\n      type: Number,\n      label: \"Account Limit\",\n      defaultValue: 1,\n      optional: true\n    }\n  }\n]);\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { DiscountsPackageConfig } from \"/imports/plugins/core/discounts/lib/collections/schemas\";\n\n/**\n* Discount Codes Package Config Schema\n* @type {Object}\n* @desc schema that extends discount schema\n* with properties for discount rates.\n*/\nexport const DiscountCodesPackageConfig = new SimpleSchema([\n  DiscountsPackageConfig, {\n    \"settings.codes\": {\n      type: Object,\n      optional: true\n    },\n    \"settings.codes.enabled\": {\n      type: Boolean,\n      optional: true,\n      defaultValue: false\n    }\n  }\n]);\n","export * from \"./config\";\nexport * from \"./codes\";\n","import { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { DiscountRates } from \"../collections/rates\";\nimport { DiscountRates as DiscountRateSchema } from \"../../lib/collections/schemas/rates\";\nimport { i18next } from \"/client/api\";\nimport { IconButton, Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\n\n/* eslint no-shadow: [\"error\", { \"allow\": [\"options\"] }] */\n/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"[oO]ptions\" }] */\n\nTemplate.customDiscountRates.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"DiscountRates\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.customDiscountRates.helpers({\n  editButton() {\n    const instance = Template.instance();\n    const state = instance.state;\n    const isEditing = state.equals(\"isEditing\", true);\n    let editingId = state.get(\"editingId\");\n    // toggle edit state\n    if (!isEditing) {\n      editingId = null;\n    }\n    // return icon\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick() {\n        // remove active rows from grid\n        $(\".discount-rates-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId: editingId\n        });\n      }\n    };\n  },\n  discountGrid() {\n    const filteredFields = [\"label\", \"discountMethod\", \"discount\"];\n    const noDataMessage = i18next.t(\"admin.settings.noCustomDiscountRatesFound\");\n    const instance = Template.instance();\n\n    //\n    // helper to get and select row from griddle\n    // into blaze for to select discount row for editing\n    //\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is discount rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    //\n    // helper adds a class to every grid row\n    //\n    const customRowMetaData = {\n      bodyCssClassName: () =>  {\n        return \"discount-rates-grid-row\";\n      }\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach(function (field) {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.discountGrid.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return discount Grid\n    return {\n      component: SortableTable,\n      publication: \"DiscountRates\",\n      collection: DiscountRates,\n      matchingResultsCount: \"discounts-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields: filteredFields,\n      columns: filteredFields,\n      noDataMessage: noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n  // schema for forms\n  discountRateSchema() {\n    return DiscountRateSchema;\n  },\n  discountRate() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const discount = DiscountRates.findOne(id) || {};\n    return discount;\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.customDiscountRates.events({\n  \"submit #discount-rates-update-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #discount-rates-insert-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .discount-rates-grid-row.active\": function () {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    // ugly hack\n    $(\".discount-rates-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\": function () {\n    const confirmTitle = i18next.t(\"admin.settings.confirmRateDelete\");\n    const confirmButtonText = i18next.t(\"app.delete\");\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    // confirm delete\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: confirmButtonText\n    }, (isConfirm) => {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"discounts/deleteRate\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .discount-rates-grid-row\": function (event) {\n    // toggle all rows off, then add our active row\n    $(\".discount-rates-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n\nAutoForm.hooks({\n  \"discount-rates-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.settings.settingsSaveSuccess\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.settings.settingsSaveFailure\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n\nAutoForm.hooks({\n  \"discount-rates-insert-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.settings.settingsSaveSuccess\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.settings.settingsSaveFailure\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import { Mongo } from \"meteor/mongo\";\nimport { DiscountRates as DiscountSchema } from \"../../lib/collections/schemas\";\n\n/**\n * Client side collections\n */\nexport const DiscountRates = new Mongo.Collection(\"DiscountRates\");\n// attach discount code specific schema\nDiscountRates.attachSchema(DiscountSchema);\n","import \"./collections/rates.js\";\nimport \"./settings/rates.html\";\nimport \"./settings/rates.js\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { DiscountsPackageConfig } from \"/imports/plugins/core/discounts/lib/collections/schemas\";\n\n/**\n* Discount Rates Package Config Schema\n* @type {Object}\n* @desc schema that extends discount schema\n* with properties for discount rates.\n*/\nexport const DiscountRatesPackageConfig = new SimpleSchema([\n  DiscountsPackageConfig, {\n    \"settings.rates\": {\n      type: Object,\n      optional: true\n    },\n    \"settings.rates.enabled\": {\n      type: Boolean,\n      optional: true,\n      defaultValue: false\n    }\n  }\n]);\n","export * from \"./config\";\nexport * from \"./rates\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Discounts } from \"/imports/plugins/core/discounts/lib/collections/schemas/discounts\";\n\n/**\n* Discount Codes Schema\n* @type {Object}\n* @desc schema that extends discount schema\n* with properties for discount codes.\n*/\nexport const DiscountRates = new SimpleSchema([\n  Discounts, {\n    discountMethod: {\n      label: \"Calculation Method\",\n      type: String,\n      defaultValue: \"rate\"\n    }\n  }\n]);\n","import { Template } from \"meteor/templating\";\nimport { NotificationRouteContainer } from \"../containers\";\n\nTemplate.notificationRoute.helpers({\n  notificationRoute() {\n    return {\n      component: NotificationRouteContainer\n    };\n  }\n});\n","export { default as NotificationDropdown } from \"./notificationDropdown\";\nexport { default as NotificationComponent } from \"./notificationComponent\";\nexport { default as NotificationRoute } from \"./notificationRoute\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport NotificationDropdown from \"./notificationDropdown.js\";\nimport \"../styles/main.less\";\nimport \"../styles/dropdown.css\";\n\nclass NotificationComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleBtn = this.handleBtn.bind(this);\n  }\n\n  handleBtn(unread) {\n    if (unread) {\n      return (\n        <button className=\"btn btn-default notify-btn rui button flat\">\n          <i className=\"rui fa fa-bell\" />\n          <span className=\"badge notify-icon badge-red\">{ unread }</span>\n        </button>\n      );\n    }\n    return (\n      <button className=\"btn btn-default rui button flat\">\n        <i className=\"rui fa fa-bell\" />\n      </button>\n    );\n  }\n\n  render() {\n    const { notificationList, handleDelete, unread, markOneAsRead, markAllAsRead } = this.props;\n    return (\n      <div className=\"dropdown\">\n        <div className=\"notification-icon\" data-toggle=\"dropdown\">\n          { this.handleBtn(unread) }\n        </div>\n        <div className=\"notify-drop dropdown-menu\">\n          <NotificationDropdown\n            notificationList={notificationList}\n            unread={unread}\n            handleDelete={handleDelete}\n            markAllAsRead={markAllAsRead}\n            markOneAsRead={markOneAsRead}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nNotificationComponent.propTypes = {\n  handleDelete: PropTypes.func,\n  markAllAsRead: PropTypes.func,\n  markOneAsRead: PropTypes.func,\n  notificationList: PropTypes.array,\n  unread: PropTypes.number\n};\n\nexport default NotificationComponent;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { Reaction } from \"/client/api\";\n\nclass NotificationDropdown extends Component {\n  constructor(props) {\n    super(props);\n    this.prefix = Reaction.getShopPrefix();\n    this.handleNoNotifications = this.handleNoNotifications.bind(this);\n    this.renderDropdownHead = this.renderDropdownHead.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleClickViewAll = this.handleClickViewAll.bind(this);\n  }\n\n  handleNoNotifications(notifyArr) {\n    if (notifyArr.length <= 0) {\n      return (\n        <li className=\"notification\">\n          <div className=\"media\">\n            <div className=\"media-body\">\n              <strong className=\"notification-title\" data-i18n=\"notifications.body.noNotifications\">No notifications yet</strong>\n            </div>\n          </div>\n        </li>\n      );\n    }\n    return null;\n  }\n\n  handleClick(notify) {\n    if (notify.type === \"forAdmin\") {\n      const actionViewData = Reaction.Apps({\n        name: \"reaction-orders\",\n        provides: \"dashboard\"\n      });\n      Reaction.showActionView(actionViewData);\n    } else {\n      Reaction.Router.go(notify.url);\n    }\n\n    const { markOneAsRead } = this.props;\n    return markOneAsRead(notify._id);\n  }\n\n  handleClickViewAll() {\n    const url = this.prefix + \"/notifications\";\n    Reaction.Router.go(url);\n  }\n\n  renderDropdownHead() {\n    const { notificationList, unread, markAllAsRead } = this.props;\n    return (\n      <div className=\"dropdown-toolbar\">\n        <div className=\"dropdown-toolbar-actions\">\n          <a onClick={() => { markAllAsRead(notificationList); }} data-i18n=\"notifications.body.markAllAsRead\"> Mark all as read</a>\n        </div>\n        <h3 className=\"dropdown-toolbar-title\"><span data-i18n=\"notifications.body.recent\">Recent</span> ({unread})</h3>\n      </div>\n    );\n  }\n\n  render() {\n    const { notificationList } = this.props;\n    return (\n      <div className=\"notify-bar\">\n        { this.renderDropdownHead() }\n        <ul className=\"dropdown-notify notifications\">\n          { this.handleNoNotifications(notificationList) }\n          { notificationList.map((notify, key) => {\n            const timeNow = moment(notify.timeSent).fromNow();\n            const read = `notification ${notify.status}`;\n            const i18n = `notifications.messages.${notify.type}`;\n            return (\n              <li className={read} key={key}>\n                <a onClick={() => {\n                  this.handleClick(notify);\n                }}\n                >\n                  <div className=\"media\">\n                    <div className=\"media-body\">\n                      <strong className=\"notification-title\" data-i18n={i18n}>{notify.message}</strong>\n                      <div className=\"notification-meta\">\n                        <small className=\"timestamp\">{timeNow}</small>\n                      </div>\n                    </div>\n                  </div>\n                </a>\n              </li>\n            );\n          })}\n        </ul>\n        <div className=\"dropdown-footer text-center\">\n          <a onClick={this.handleClickViewAll} data-i18n=\"notifications.body.viewAll\">View All</a>\n        </div>\n      </div>\n    );\n  }\n}\n\nNotificationDropdown.propTypes = {\n  markAllAsRead: PropTypes.func.isRequired,\n  markOneAsRead: PropTypes.func.isRequired,\n  notificationList: PropTypes.array.isRequired,\n  unread: PropTypes.number.isRequired\n};\n\nexport default NotificationDropdown;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { Reaction } from \"/client/api\";\n\n\nclass NotificationRoute extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleNoNotifications = this.handleNoNotifications.bind(this);\n    this.renderDropdownHead = this.renderDropdownHead.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleNoNotifications(notifyArr) {\n    if (notifyArr.length <= 0) {\n      return (\n        <li className=\"notification\">\n          <div className=\"media\">\n            <div className=\"media-body\">\n              <strong className=\"notification-title\" data-i18n=\"notifications.body.noNotifcations\">No notifications yet</strong>\n            </div>\n          </div>\n        </li>\n      );\n    }\n    return null;\n  }\n\n  handleClick(notify) {\n    if (notify.type === \"forAdmin\") {\n      const actionViewData = Reaction.Apps({\n        name: \"reaction-orders\",\n        provides: \"dashboard\"\n      });\n      Reaction.showActionView(actionViewData);\n    } else {\n      Reaction.Router.go(notify.url);\n    }\n\n    const { markOneAsRead } = this.props;\n    return markOneAsRead(notify._id);\n  }\n\n  renderDropdownHead() {\n    const { notificationList, unread, markAllAsRead } = this.props;\n    return (\n      <div className=\"dropdown-toolbar\">\n        <div className=\"dropdown-toolbar-actions\">\n          <a onClick={() => { markAllAsRead(notificationList); }} data-i18n=\"notifications.body.markAllAsRead\"> Mark all as read</a>\n        </div>\n        <h3 className=\"dropdown-toolbar-title\"><span data-i18n=\"notifications.body.recent\">Recent</span> ({unread})</h3>\n      </div>\n    );\n  }\n\n  render() {\n    const { notificationList } = this.props;\n    return (\n      <div className=\"notify-bar\">\n        { this.renderDropdownHead() }\n        <ul className=\"dropdown-notify notifications\">\n          { this.handleNoNotifications(notificationList) }\n          { notificationList.map((notify, key) => {\n            const timeNow = moment(notify.timeSent).fromNow();\n            const read = `notification ${notify.status}`;\n            const i18n = `notifications.messages.${notify.type}`;\n            return (\n              <li className={read} key={key}>\n                <a onClick={() => {\n                  this.handleClick(notify);\n                }}\n                >\n                  <div className=\"media\">\n                    <div className=\"media-body\">\n                      <strong className=\"notification-title\" data-i18n={i18n}>{notify.message}</strong>\n                      <div className=\"notification-meta\">\n                        <small className=\"timestamp\">{timeNow}</small>\n                      </div>\n                    </div>\n                  </div>\n                </a>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nNotificationRoute.propTypes = {\n  markAllAsRead: PropTypes.func,\n  markOneAsRead: PropTypes.func,\n  notificationList: PropTypes.array,\n  unread: PropTypes.number\n};\n\nexport default NotificationRoute;\n","export { default as NotificationContainer } from \"./notificationContainer\";\nexport { default as NotificationRouteContainer } from \"./notificationRouteContainer\";\n","import React from \"react\";\nimport { composeWithTracker, merge } from \"/lib/api/compose\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Notifications } from \"/lib/collections\";\nimport { NotificationComponent } from \"../components\";\n\nconst NotificationContainer = (props) => {\n  return (\n    <NotificationComponent {...props}/>\n  );\n};\n\nfunction markAllAsRead(notificationList) {\n  notificationList.map((notify) => {\n    Meteor.call(\"notification/markOneAsRead\", notify._id);\n  });\n}\n\nfunction markOneAsRead(id) {\n  Meteor.call(\"notification/markOneAsRead\", id);\n}\n\nfunction composer(props, onData) {\n  Meteor.subscribe(\"Notification\", Meteor.userId());\n  const notificationList = Notifications.find({}, { sort: { timeSent: -1 }, limit: 5 }).fetch();\n  const unread = Notifications.find({ status: \"unread\" }).count();\n\n  onData(null, {\n    notificationList,\n    unread,\n    markAllAsRead,\n    markOneAsRead\n  });\n}\n\nexport default merge(\n  composeWithTracker(composer)\n)(NotificationContainer);\n","import React from \"react\";\nimport { composeWithTracker, merge } from \"/lib/api/compose\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Notifications } from \"/lib/collections\";\nimport { NotificationRoute } from \"../components\";\n\nconst NotificationRouteContainer = (props) => {\n  return (\n    <NotificationRoute {...props}/>\n  );\n};\n\nfunction markAllAsRead(notificationList) {\n  notificationList.map((notify) => {\n    Meteor.call(\"notification/markOneAsRead\", notify._id);\n  });\n}\n\nfunction markOneAsRead(id) {\n  Meteor.call(\"notification/markOneAsRead\", id);\n}\n\nfunction composer(props, onData) {\n  Meteor.subscribe(\"Notification\", Meteor.userId());\n  const notificationList = Notifications.find({}, { sort: { timeSent: -1 } }).fetch();\n  const unread = Notifications.find({ status: \"unread\" }).count();\n\n  onData(null, {\n    notificationList,\n    unread,\n    markAllAsRead,\n    markOneAsRead\n  });\n}\n\nexport default merge(\n  composeWithTracker(composer)\n)(NotificationRouteContainer);\n","// Styles\nimport \"./styles/main.less\";\nimport \"./templates/notifications.html\";\nimport \"./templates/notifications.js\";\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, Logger } from \"/client/api\";\nimport { getCardType } from \"/client/modules/core/helpers/globals\";\nimport { Cart, Shops, Packages } from \"/lib/collections\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { AuthNetPayment } from \"../../lib/collections/schemas\";\nimport { AuthNet } from \"../api\";\n\n\nimport \"./authnet.html\";\n\nfunction uiEnd(tpl, buttonText) {\n  tpl.$(\":input\").removeAttr(\"disabled\");\n  tpl.$(\"#btn-complete-order\").text(buttonText);\n  tpl.$(\"#btn-processing\").addClass(\"hidden\");\n}\n\nfunction paymentAlert(errorMessage) {\n  return $(\".alert\").removeClass(\"hidden\").text(errorMessage);\n}\n\nfunction hidePaymentAlert() {\n  $(\".alert\").addClass(\"hidden\").text(\"\");\n}\n\nfunction handleAuthNetSubmitError(error) {\n  // TODO - this error handling needs to be reworked for the Authorize.net API\n  paymentAlert(error);\n  Logger.fatal(error);\n}\n\n// used to track asynchronous submitting for UI changes\nlet submitting = false;\n\nTemplate.authnetPaymentForm.helpers({\n  AuthNetPayment() {\n    return AuthNetPayment;\n  }\n});\n\nAutoForm.addHooks(\"authnet-payment-form\", {\n  onSubmit(doc) {\n    // Process form (pre-validated by autoform)\n    submitting = true;\n    const tpl = this.template;\n    // regEx in the schema ensures that there will be exactly two names with one space between\n    const payerNamePieces = doc.payerName.split(\" \");\n    const form = {\n      first_name: payerNamePieces[0],\n      last_name: payerNamePieces[1],\n      number: doc.cardNumber,\n      expire_date: doc.expireMonth.toString() + doc.expireYear.slice(-2),\n      cvv2: doc.cvv,\n      type: getCardType(doc.cardNumber)\n    };\n\n    // Reaction only stores type and 4 digits\n    const storedCard = form.type.charAt(0).toUpperCase() + form.type.slice(1) + \" \" + doc.cardNumber.slice(-4);\n\n    hidePaymentAlert();\n\n    const cardInfo = {\n      cardNumber: doc.cardNumber,\n      expirationYear: doc.expireYear,\n      expirationMonth: doc.expireMonth,\n      cvv2: doc.cvv\n    };\n    const paymentInfo = {\n      total: Cart.findOne().cartTotal(),\n      currency: Shops.findOne().currency\n    };\n\n    // Submit for processing\n    AuthNet.authorize(cardInfo, paymentInfo, function (error, transaction) {\n      if (error || !transaction) {\n        handleAuthNetSubmitError(error);\n        uiEnd(tpl, \"Resubmit payment\");\n      } else {\n        const normalizedMode = \"authorize\";\n        let normalizedStatus = \"failed\";\n\n        const transId = transaction.transactionId[0].toString();\n        Meteor.subscribe(\"Packages\");\n        const packageData = Packages.findOne({\n          name: \"reaction-auth-net\",\n          shopId: Reaction.getShopId()\n        });\n\n        if (transaction._original.responseCode[0] === \"1\") {\n          normalizedStatus = \"created\";\n        }\n\n        const paymentMethod = {\n          processor: \"AuthNet\",\n          paymentPackageId: packageData._id,\n          paymentSettingsKey: packageData.registry[0].settingsKey,\n          storedCard: storedCard,\n          method: \"credit\",\n          transactionId: transId,\n          amount: +paymentInfo.total,\n          status: normalizedStatus,\n          mode: normalizedMode,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          transactions: [\n            transaction._original\n          ]\n        };\n        Meteor.call(\"cart/submitPayment\", paymentMethod);\n        uiEnd(tpl, \"Resubmit payment\");\n      }\n    });\n\n    return false;\n  },\n\n  beginSubmit() {\n    this.template.$(\":input\").attr(\"disabled\", true);\n    this.template.$(\"#btn-complete-order\").text(\"Submitting \");\n    return this.template.$(\"#btn-processing\").removeClass(\"hidden\");\n  },\n\n  endSubmit() {\n    // Hide processing UI here if form was not valid\n    if (!submitting) {\n      uiEnd(this.template, \"Complete your order\");\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Packages } from \"/lib/collections\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { AuthNetPackageConfig } from \"../../lib/collections/schemas\";\n\nimport \"./authnet.html\";\n\nTemplate.authnetSettings.helpers({\n  AuthNetPackageConfig() {\n    return AuthNetPackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({ name: \"reaction-auth-net\", shopId: Reaction.getShopId() });\n  }\n});\n\nAutoForm.hooks({\n  \"authnet-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    },\n    onError: function (error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.saveFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\n\nexport const AuthNet = {\n  authorize(cardInfo, paymentInfo, callback) {\n    Meteor.call(\"authnetSubmit\", \"authorizeTransaction\",\n      cardInfo,\n      paymentInfo,\n      callback\n    );\n  }\n};\n","export { AuthNet } from \"./authnet\";\n","import \"./checkout/authnet\";\nimport \"./settings/authnet\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\n/**\n * Meteor.settings.authnet =\n *   mode: false (sandbox)\n *   api_id: \"\"\n *   transaction_key: \"\"\n *   see: https://developer.authnet.com/webapps/developer/docs/api/\n *   see: https://github.com/authnet/rest-api-sdk-nodejs\n */\n\nexport const AuthNetPackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.mode\": {\n      type: Boolean,\n      defaultValue: false\n    },\n    \"settings.reaction-auth-net.support\": {\n      type: Array,\n      label: \"Payment provider supported methods\"\n    },\n    \"settings.reaction-auth-net.support.$\": {\n      type: String,\n      allowedValues: [\"Authorize\", \"De-authorize\", \"Capture\", \"Refund\"]\n    },\n    \"settings.api_id\": {\n      type: String,\n      label: \"API Login ID\",\n      min: 60\n    },\n    \"settings.transaction_key\": {\n      type: String,\n      label: \"Transaction Key\",\n      min: 60\n    }\n  }\n]);\n\nexport const AuthNetPayment = new SimpleSchema({\n  payerName: {\n    type: String,\n    label: \"Cardholder name\"\n  },\n  cardNumber: {\n    type: String,\n    label: \"Card number\",\n    min: 12,\n    max: 19\n  },\n  expireMonth: {\n    type: String,\n    label: \"Expiration month\",\n    max: 2\n  },\n  expireYear: {\n    type: String,\n    label: \"Expiration year\",\n    max: 4\n  },\n  cvv: {\n    type: String,\n    label: \"CVV\",\n    max: 4\n  }\n});\n","export * from \"./authnet\";\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { $ } from \"meteor/jquery\";\nimport { getCardType } from \"/client/modules/core/helpers/globals\";\nimport { Cart, Shops, Packages } from \"/lib/collections\";\nimport { Braintree } from \"../api/braintree\";\nimport { Reaction } from \"/client/api\";\nimport { BraintreePayment } from \"../../lib/collections/schemas\";\n\nimport \"./braintree.html\";\n\nTemplate.braintreePaymentForm.helpers({\n  BraintreePayment() {\n    return BraintreePayment;\n  }\n});\n\n\nfunction uiEnd(template, buttonText) {\n  template.$(\":input\").removeAttr(\"disabled\");\n  template.$(\"#btn-complete-order\").text(buttonText);\n  return template.$(\"#btn-processing\").addClass(\"hidden\");\n}\n\nfunction paymentAlert(errorMessage) {\n  return $(\".alert\").removeClass(\"hidden\").text(errorMessage);\n}\n\nfunction hidePaymentAlert() {\n  return $(\".alert\").addClass(\"hidden\").text(\"\");\n}\n\nfunction handleBraintreeSubmitError(error) {\n  const serverError = error !== null ? error.message : void 0;\n  if (serverError) {\n    return paymentAlert(\"Server Error \" + serverError);\n  } else if (error) {\n    return paymentAlert(\"Oops! Credit card is invalid. Please check your information and try again.\");\n  }\n}\n\nlet submitting = false;\n\nfunction submitToBrainTree(doc, template) {\n  submitting = true;\n  hidePaymentAlert();\n  const cardData = {\n    name: doc.payerName,\n    number: doc.cardNumber,\n    expirationMonth: doc.expireMonth,\n    expirationYear: doc.expireYear,\n    cvv2: doc.cvv,\n    type: getCardType(doc.cardNumber)\n  };\n  const cartTotal = Cart.findOne().cartTotal();\n  const currencyCode = Shops.findOne().currency;\n\n  Braintree.authorize(cardData, {\n    total: cartTotal,\n    currency: currencyCode\n  }, function (error, results) {\n    let paymentMethod;\n    submitting = false;\n    if (error) {\n      handleBraintreeSubmitError(error);\n      uiEnd(template, \"Resubmit payment\");\n    } else {\n      if (results.saved === true) {\n        const normalizedStatus = normalizeState(results.response.transaction.status);\n        const normalizedMode = normalizeMode(results.response.transaction.status);\n        Meteor.subscribe(\"Packages\");\n        const packageData = Packages.findOne({\n          name: \"reaction-braintree\",\n          shopId: Reaction.getShopId()\n        });\n\n        const storedCard = results.response.transaction.creditCard.cardType.toUpperCase() + \" \" + results.response.transaction.creditCard.last4;\n        paymentMethod = {\n          processor: \"Braintree\",\n          storedCard: storedCard,\n          paymentPackageId: packageData._id,\n          paymentSettingsKey: packageData.registry[0].settingsKey,\n          method: \"credit\",\n          transactionId: results.response.transaction.id,\n          amount: parseFloat(results.response.transaction.amount),\n          status: normalizedStatus,\n          mode: normalizedMode,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          transactions: []\n        };\n        paymentMethod.transactions.push(results.response);\n        Meteor.call(\"cart/submitPayment\", paymentMethod);\n      } else {\n        handleBraintreeSubmitError(results.response.message);\n        uiEnd(template, \"Resubmit payment\");\n      }\n    }\n  });\n}\n\nAutoForm.addHooks(\"braintree-payment-form\", {\n  onSubmit: function (doc) {\n    submitToBrainTree(doc, this.template);\n    return false;\n  },\n  beginSubmit: function () {\n    this.template.$(\":input\").attr(\"disabled\", true);\n    this.template.$(\"#btn-complete-order\").text(\"Submitting \");\n    return this.template.$(\"#btn-processing\").removeClass(\"hidden\");\n  },\n  endSubmit: function () {\n    if (!submitting) {\n      return uiEnd(this.template, \"Complete your order\");\n    }\n  }\n});\n\nconst normalizedStates = {\n  authorization_expired: \"expired\",\n  authorized: \"created\",\n  authorizing: \"pending\",\n  settlement_pending: \"pending\",\n  settlement_confirmed: \"settled\",\n  settlement_declined: \"failed\",\n  failed: \"failed\",\n  gateway_rejected: \"failed\",\n  processor_declined: \"failed\",\n  settled: \"settled\",\n  settling: \"pending\",\n  submitted_for_settlement: \"pending\",\n  voided: \"voided\",\n  default: \"failed\"\n};\n\nfunction normalizeState(stateString) {\n  let normalizedState = normalizedStates[stateString];\n  if (typeof normalizedState === \"undefined\") {\n    normalizedState = normalizedStates.default;\n  }\n  return normalizedState;\n}\n\nconst normalizedModes = {\n  settled: \"capture\",\n  settling: \"capture\",\n  submitted_for_settlement: \"capture\",\n  settlement_confirmed: \"capture\",\n  authorized: \"authorize\",\n  authorizing: \"authorize\",\n  default: \"capture\"\n};\n\nfunction normalizeMode(modeString) {\n  let normalizedMode = normalizedModes[modeString];\n  if (typeof normalizedMode === \"undefined\") {\n    normalizedMode = normalizedModes.default;\n  }\n  return normalizedMode;\n}\n","/* eslint no-unused-vars: 0 */\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { BraintreePackageConfig } from \"../../lib/collections/schemas\";\n\nimport \"./braintree.html\";\n\nTemplate.braintreeSettings.helpers({\n  BraintreePackageConfig: function () {\n    return BraintreePackageConfig;\n  },\n\n  packageData: function () {\n    return Packages.findOne({\n      name: \"reaction-braintree\"\n    });\n  }\n});\n\nTemplate.braintree.helpers({\n  packageData: function () {\n    const packageData = Packages.findOne({\n      name: \"reaction-braintree\"\n    });\n    return packageData;\n  }\n});\n\nTemplate.braintree.events({\n  \"click [data-event-action=showBraintreeSettings]\": function () {\n    Reaction.showActionView();\n  }\n});\n\nAutoForm.hooks({\n  \"braintree-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    },\n    onError: function (error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.saveFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\n\nexport const Braintree =\n  {// authorize submits a payment authorization to Braintree\n    authorize(cardData, paymentData, callback) {\n      Meteor.call(\"braintreeSubmit\", \"authorize\", cardData, paymentData, callback);\n    }\n  };\n","import \"./checkout/braintree\";\nimport \"./settings/braintree\";\nimport \"./api/braintree\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\n\n/**\n *  Meteor.settings.braintree =\n *    mode: false  #sandbox\n *    merchant_id: \"\"\n *    public_key: \"\"\n *    private_key: \"\"\n *  see: https://developers.braintreepayments.com/javascript+node/reference\n */\n\nexport const BraintreePackageConfig = new SimpleSchema([\n  PackageConfig,\n  {\n    \"settings.mode\": {\n      type: Boolean,\n      defaultValue: false\n    },\n    \"settings.merchant_id\": {\n      type: String,\n      label: \"Merchant ID\",\n      optional: false\n    },\n    \"settings.public_key\": {\n      type: String,\n      label: \"Public Key\",\n      optional: false\n    },\n    \"settings.private_key\": {\n      type: String,\n      label: \"Private Key\",\n      optional: false\n    },\n    \"settings.reaction-braintree.support\": {\n      type: Array,\n      label: \"Payment provider supported methods\"\n    },\n    \"settings.reaction-braintree.support.$\": {\n      type: String,\n      allowedValues: [\"Authorize\", \"De-authorize\", \"Capture\", \"Refund\"]\n    }\n  }\n]);\n\nexport const BraintreePayment = new SimpleSchema({\n  payerName: {\n    type: String,\n    label: \"Cardholder name\"\n  },\n  cardNumber: {\n    type: String,\n    min: 12,\n    max: 19,\n    label: \"Card number\"\n  },\n  expireMonth: {\n    type: String,\n    max: 2,\n    label: \"Expiration month\"\n  },\n  expireYear: {\n    type: String,\n    max: 4,\n    label: \"Expiration year\"\n  },\n  cvv: {\n    type: String,\n    max: 4,\n    label: \"CVV\"\n  }\n});\n\n","export * from \"./braintree\";\n","/* eslint camelcase: 0 */\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { $ } from \"meteor/jquery\";\nimport { getCardType } from \"/client/modules/core/helpers/globals\";\nimport { Reaction } from \"/client/api\";\nimport { Cart, Shops, Packages } from \"/lib/collections\";\nimport { Stripe } from \"../../lib/api\";\nimport { StripePayment } from \"../../lib/collections/schemas\";\n\nimport \"./stripe.html\";\n\nlet submitting = false;\n\n//\n// local helpers\n//\nfunction uiEnd(template, buttonText) {\n  template.$(\":input\").removeAttr(\"disabled\");\n  template.$(\"#btn-complete-order\").text(buttonText);\n  return template.$(\"#btn-processing\").addClass(\"hidden\");\n}\n\nfunction paymentAlert(errorMessage) {\n  return $(\".alert\").removeClass(\"hidden\").text(errorMessage);\n}\n\nfunction hidePaymentAlert() {\n  return $(\".alert\").addClass(\"hidden\").text(\"\");\n}\n\nfunction handleStripeSubmitError(error) {\n  // Match eror on card number. Not submitted to stripe\n  if (error && error.reason && error.reason === \"Match failed\") {\n    const message = \"Your card number is invalid. Please check the number and try again\";\n    return paymentAlert(message);\n  }\n\n  // this is a server message with a client-sanitized message\n  if (error && error.details) {\n    return paymentAlert(error.details);\n  }\n}\n\n//\n// Template helpers\n//\nTemplate.stripePaymentForm.helpers({\n  StripePayment() {\n    return StripePayment;\n  }\n});\n\n//\n// autoform handling\n//\nAutoForm.addHooks(\"stripe-payment-form\", {\n  onSubmit(doc) {\n    submitting = true;\n    const template = this.template;\n    hidePaymentAlert();\n    const cardData = {\n      name: doc.payerName,\n      number: doc.cardNumber,\n      expire_month: doc.expireMonth,\n      expire_year: doc.expireYear,\n      cvv2: doc.cvv,\n      type: getCardType(doc.cardNumber)\n    };\n    const storedCard = cardData.type.charAt(0).toUpperCase() + cardData.type.slice(1) + \" \" + doc.cardNumber.slice(-4);\n    Stripe.authorize(cardData, {\n      total: Cart.findOne().cartTotal(),\n      currency: Shops.findOne().currency\n    }, function (error, transaction) {\n      submitting = false;\n      if (error) {\n        handleStripeSubmitError(error);\n        uiEnd(template, \"Resubmit payment\");\n      } else {\n        if (transaction.saved === true) {\n          const normalizedStatus = (function () {\n            switch (false) {\n              case !(!transaction.response.captured && !transaction.response.failure_code):\n                return \"created\";\n              case !(transaction.response.captured === true && !transaction.response.failure_code):\n                return \"settled\";\n              case !transaction.response.failure_code:\n                return \"failed\";\n              default:\n                return \"failed\";\n            }\n          })();\n          const normalizedMode = (function () {\n            switch (false) {\n              case !(!transaction.response.captured && !transaction.response.failure_code):\n                return \"authorize\";\n              case !transaction.response.captured:\n                return \"capture\";\n              default:\n                return \"capture\";\n            }\n          })();\n          Meteor.subscribe(\"Packages\");\n          const packageData = Packages.findOne({\n            name: \"reaction-stripe\",\n            shopId: Reaction.getShopId()\n          });\n\n          submitting = false;\n          const paymentMethod = {\n            processor: \"Stripe\",\n            storedCard: storedCard,\n            method: \"credit\",\n            paymentPackageId: packageData._id,\n            paymentSettingsKey: packageData.registry[0].settingsKey,\n            transactionId: transaction.response.id,\n            amount: transaction.response.amount * 0.01,\n            status: normalizedStatus,\n            mode: normalizedMode,\n            createdAt: new Date(transaction.response.created),\n            transactions: []\n          };\n          paymentMethod.transactions.push(transaction.response);\n          Meteor.call(\"cart/submitPayment\", paymentMethod);\n        } else {\n          handleStripeSubmitError(transaction.error);\n          uiEnd(template, \"Resubmit payment\");\n        }\n      }\n    });\n    return false;\n  },\n  beginSubmit() {\n    this.template.$(\":input\").attr(\"disabled\", true);\n    this.template.$(\"#btn-complete-order\").text(\"Submitting \");\n    return this.template.$(\"#btn-processing\").removeClass(\"hidden\");\n  },\n  endSubmit() {\n    if (!submitting) {\n      return uiEnd(this.template, \"Complete your order\");\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { StripePackageConfig } from \"../../lib/collections/schemas\";\n\nimport \"./stripe.html\";\n\nTemplate.stripeSettings.helpers({\n  StripePackageConfig() {\n    return StripePackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-stripe\",\n      shopId: Reaction.getShopId()\n    });\n  }\n});\n\nTemplate.stripe.helpers({\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-stripe\",\n      shopId: Reaction.getShopId()\n    });\n  }\n});\n\nTemplate.stripe.events({\n  \"click [data-event-action=showStripeSettings]\"() {\n    Reaction.showActionView();\n  }\n});\n\nAutoForm.hooks({\n  \"stripe-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    },\n    onError: function (error) {\n      return Alerts.toast(`${i18next.t(\"admin.settings.saveFailed\")} ${error}`, \"error\");\n    }\n  }\n});\n","import \"./checkout/stripe\";\nimport \"./settings/stripe\";\n","export * from \"./stripe\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\n/*\n *  Meteor.settings.stripe =\n *    mode: false  #sandbox\n *    api_key: \"\"\n *  see: https://stripe.com/docs/api\n */\n\nexport const StripePackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.mode\": {\n      type: Boolean,\n      defaultValue: false\n    },\n    \"settings.api_key\": {\n      type: String,\n      label: \"API Client ID\"\n    },\n    \"settings.reaction-stripe.support\": {\n      type: Array,\n      label: \"Payment provider supported methods\"\n    },\n    \"settings.reaction-stripe.support.$\": {\n      type: String,\n      allowedValues: [\"Authorize\", \"De-authorize\", \"Capture\", \"Refund\"]\n    }\n  }\n]);\n\nexport const StripePayment = new SimpleSchema({\n  payerName: {\n    type: String,\n    label: \"Cardholder name\"\n  },\n  cardNumber: {\n    type: String,\n    min: 13,\n    max: 16,\n    label: \"Card number\"\n  },\n  expireMonth: {\n    type: String,\n    max: 2,\n    label: \"Expiration month\"\n  },\n  expireYear: {\n    type: String,\n    max: 4,\n    label: \"Expiration year\"\n  },\n  cvv: {\n    type: String,\n    max: 4,\n    label: \"CVV\"\n  }\n});\n","export { Stripe } from \"./stripe\";\n","import { Meteor } from \"meteor/meteor\";\n\nexport const Stripe = {\n  authorize: function (cardData, paymentInfo, callback) {\n    Meteor.call(\"stripeSubmit\", \"authorize\", cardData, paymentInfo, (error, result) => {\n      callback(error, result);\n    });\n  }\n};\n","import { Template } from \"meteor/templating\";\nimport { ProductAdminContainer } from \"../containers\";\n\nTemplate.ProductAdmin.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n\n    return {\n      ...currentData,\n      component: ProductAdminContainer\n    };\n  }\n});\n","export { default as ProductAdmin } from \"./productAdmin.js\";\n","import { isEqual } from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardGroup,\n  Metadata,\n  TextField,\n  Translation,\n  Select\n} from \"/imports/plugins/core/ui/client/components\";\nimport { Router } from \"/client/api\";\nimport { TagListContainer } from \"/imports/plugins/core/ui/client/containers\";\nimport update from \"react/lib/update\";\n\nconst fieldNames = [\n  \"title\",\n  \"handle\",\n  \"subtitle\",\n  \"vendor\",\n  \"description\",\n  \"origincountry\",\n  \"facebookMsg\",\n  \"twitterMsg\",\n  \"pinterestMsg\",\n  \"googleplusMsg\"\n];\n\nconst fieldGroups = {\n  title: { group: \"productDetails\" },\n  handle: { group: \"productDetails\" },\n  pageTitle: { group: \"productDetails\" },\n  vendor: { group: \"productDetails\" },\n  description: { group: \"productDetails\" },\n  facebookMsg: { group: \"social\" },\n  twitterMsg: { group: \"social\" },\n  pinterestMsg: { group: \"social\" },\n  googleplusMsg: { group: \"social\" },\n  hashtags: { group: \"hashtags\" },\n  metafields: { group: \"metafields\" }\n};\n\nclass ProductAdmin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expandedCard: this.fieldGroupForFieldName(props.editFocus),\n      product: props.product,\n      viewProps: props.viewProps\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextProduct = nextProps.product || {};\n    const currentProduct = this.props.product || {};\n\n    if (!isEqual(nextProduct, currentProduct)) {\n      for (const fieldName of fieldNames) {\n        if (nextProduct[fieldName] !== currentProduct[fieldName]) {\n          this.animateFieldFlash(fieldName);\n        }\n      }\n    }\n\n    const cardGroupName = this.fieldGroupForFieldName(nextProps.editFocus);\n\n    this.setState({\n      expandedCard: cardGroupName,\n      viewProps: nextProps.viewProps\n    });\n\n    this.setState({\n      product: nextProps.product\n    });\n  }\n\n  fieldGroupForFieldName(field) {\n    // Other wise, if a field was passed\n    // const fieldName = this.state.viewProps.field;\n\n    let fieldName;\n\n    // If the field is an array of field name\n    if (Array.isArray(field) && field.length) {\n      // Use the first field name\n      fieldName = field[0];\n    } else {\n      fieldName = field;\n    }\n\n    const fieldData = fieldGroups[fieldName];\n\n    if (fieldData && fieldData.group) {\n      return fieldData.group;\n    }\n\n    return fieldName;\n  }\n\n  animateFieldFlash(fieldName) {\n    const fieldRef = this.refs[`${fieldName}Input`];\n\n    if (fieldRef) {\n      const input = fieldRef.refs.input;\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n  }\n\n  handleCardExpand(cardName) {\n    if (this.props.onCardExpand) {\n      this.props.onCardExpand(cardName);\n    }\n  }\n\n  handleDeleteProduct = () => {\n    if (this.props.onDeleteProduct) {\n      this.props.onDeleteProduct(this.props.product);\n    }\n  }\n\n  handleRestoreProduct = () => {\n    if (this.props.onRestoreProduct) {\n      this.props.onRestoreProduct(this.props.product);\n    }\n  }\n\n\n  handleFieldChange = (event, value, field) => {\n    const newState = update(this.state, {\n      product: {\n        $merge: {\n          [field]: value\n        }\n      }\n    });\n\n    this.setState(newState, () => {\n      if (this.props.onFieldChange) {\n        this.props.onFieldChange(field, value);\n      }\n    });\n  }\n\n  handleSelectChange = (value, field) => {\n    if (this.props.onProductFieldSave) {\n      this.props.onProductFieldSave(this.product._id, field, value);\n    }\n  }\n\n  handleToggleVisibility = () => {\n    if (this.props.onProductFieldSave) {\n      this.props.onProductFieldSave(this.product._id, \"isVisible\", !this.product.isVisible);\n    }\n  }\n\n  handleMetaChange = (event, metafield, index) => {\n    if (this.props.onMetaChange) {\n      this.props.onMetaChange(metafield, index);\n    }\n  }\n\n  handleFieldBlur = (event, value, field) => {\n    if (this.props.onProductFieldSave) {\n      this.props.onProductFieldSave(this.product._id, field, value);\n    }\n  }\n\n  handleMetaSave = (event, metafield, index) => {\n    if (this.props.onMetaSave) {\n      this.props.onMetaSave(this.product._id, metafield, index);\n    }\n  }\n\n  handleMetaRemove = (event, metafield, index) => {\n    if (this.props.onMetaRemove) {\n      this.props.onMetaRemove(this.product._id, metafield, index);\n    }\n  }\n\n  get product() {\n    return this.state.product || this.props.product || {};\n  }\n\n  get permalink() {\n    if (this.props.product) {\n      return Router.pathFor(\"product\", {\n        hash: {\n          handle: this.props.product.handle\n        }\n      });\n    }\n\n    return \"\";\n  }\n\n  renderProductVisibilityLabel() {\n    if (this.product.isVisible) {\n      return (\n        <Translation defaultValue=\"Product is visible\" i18nKey=\"productDetailEdit.productIsVisible\" />\n      );\n    }\n\n    return (\n      <Translation defaultValue=\"Product is not visible\" i18nKey=\"productDetailEdit.productIsNotVisible\" />\n    );\n  }\n\n  isExpanded(groupName) {\n    if (this.state.expandedCard && this.state.expandedCard === groupName) {\n      return true;\n    }\n\n    return false;\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        <Card\n          expanded={this.isExpanded(\"productDetails\")}\n          onExpand={this.handleCardExpand.bind(this, \"productDetails\")}\n        >\n          <CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetailEdit.productSettings\"\n            title=\"Product Settings\"\n            onChange={this.handleFieldChange}\n          />\n          <CardBody expandable={true}>\n            <Select\n              clearable={false}\n              i18nKeyLabel=\"productDetailEdit.template\"\n              i18nKeyPlaceholder=\"productDetailEdit.templateSelectPlaceholder\"\n              label=\"Template\"\n              name=\"template\"\n              onChange={this.handleSelectChange}\n              options={this.props.templates}\n              placeholder=\"Select a template\"\n              value={this.product.template}\n            />\n            <TextField\n              i18nKeyLabel=\"productDetailEdit.title\"\n              i18nKeyPlaceholder=\"productDetailEdit.title\"\n              label=\"Title\"\n              name=\"title\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Title\"\n              ref=\"titleInput\"\n              value={this.product.title}\n            />\n            <TextField\n              helpText={this.permalink}\n              i18nKeyLabel=\"productDetailEdit.permalink\"\n              i18nKeyPlaceholder=\"productDetailEdit.permalink\"\n              label=\"Permalink\"\n              name=\"handle\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Permalink\"\n              ref=\"handleInput\"\n              value={this.product.handle}\n            />\n            <TextField\n              i18nKeyLabel=\"productDetailEdit.pageTitle\"\n              i18nKeyPlaceholder=\"productDetailEdit.pageTitle\"\n              label=\"Subtitle\"\n              name=\"pageTitle\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Subtitle\"\n              ref=\"subtitleInput\"\n              value={this.product.pageTitle}\n            />\n            <TextField\n              i18nKeyLabel=\"productDetailEdit.vendor\"\n              i18nKeyPlaceholder=\"productDetailEdit.vendor\"\n              label=\"Vendor\"\n              name=\"vendor\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              onReturnKeyDown={this.handleFieldBlur}\n              placeholder=\"Vendor\"\n              ref=\"vendorInput\"\n              value={this.product.vendor}\n            />\n            <TextField\n              i18nKeyLabel=\"productDetailEdit.description\"\n              i18nKeyPlaceholder=\"productDetailEdit.description\"\n              label=\"Description\"\n              multiline={true}\n              name=\"description\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              placeholder=\"Description\"\n              ref=\"descriptionInput\"\n              value={this.product.description}\n            />\n            <Select\n              clearable={false}\n              i18nKeyLabel=\"productDetailEdit.originCountry\"\n              i18nKeyPlaceholder=\"productDetailEdit.originCountry\"\n              label=\"Origin Country\"\n              name=\"originCountry\"\n              onChange={this.handleSelectChange}\n              placeholder=\"Select a Country\"\n              ref=\"countryOfOriginInput\"\n              value={this.product.originCountry}\n              options={this.props.countries}\n            />\n          </CardBody>\n        </Card>\n        <Card\n          expanded={this.isExpanded(\"social\")}\n          onExpand={this.handleCardExpand.bind(this, \"social\")}\n        >\n          <CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"social.socialTitle\"\n            title=\"Social\"\n          />\n          <CardBody expandable={true}>\n            <TextField\n              i18nKeyLabel=\"productDetailEdit.facebookMsg\"\n              label=\"Facebook Message\"\n              multiline={true}\n              name=\"facebookMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"facebookMsgInput\"\n              value={this.product.facebookMsg}\n            />\n            <TextField\n              i18nKeyLabel=\"productDetailEdit.twitterMsg\"\n              label=\"Twitter Message\"\n              multiline={true}\n              name=\"twitterMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"twitterMsgInput\"\n              value={this.product.twitterMsg}\n            />\n            <TextField\n              i18nKeyLabel=\"productDetailEdit.pinterestMsg\"\n              label=\"Pinterest Message\"\n              multiline={true}\n              name=\"pinterestMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"pinterestMsgInput\"\n              value={this.product.pinterestMsg}\n            />\n            <TextField\n              i18nKeyLabel=\"productDetailEdit.googleplusMsg\"\n              label=\"Google+ Message\"\n              multiline={true}\n              name=\"googleplusMsg\"\n              onBlur={this.handleFieldBlur}\n              onChange={this.handleFieldChange}\n              ref=\"googleplusMsgInput\"\n              value={this.product.googleplusMsg}\n            />\n          </CardBody>\n        </Card>\n\n        <Card\n          expanded={this.isExpanded(\"hashtags\")}\n          onExpand={this.handleCardExpand.bind(this, \"hashtags\")}\n        >\n          <CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetail.tags\"\n            title=\"Tags\"\n          />\n          <CardBody expandable={true}>\n            <TagListContainer\n              enableNewTagForm={true}\n              product={this.product}\n              tagProps={{\n                fullWidth: true\n              }}\n            />\n          </CardBody>\n        </Card>\n\n        <Card\n          expanded={this.isExpanded(\"metafields\")}\n          onExpand={this.handleCardExpand.bind(this, \"metafields\")}\n        >\n          <CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"productDetailEdit.details\"\n            title=\"Details\"\n          />\n          <CardBody expandable={true}>\n            <Metadata\n              metafields={this.product.metafields}\n              newMetafield={this.props.newMetafield}\n              onMetaChange={this.handleMetaChange}\n              onMetaRemove={this.handleMetaRemove}\n              onMetaSave={this.handleMetaSave}\n            />\n          </CardBody>\n        </Card>\n      </CardGroup>\n    );\n  }\n}\n\nProductAdmin.propTypes = {\n  countries: PropTypes.arrayOf(PropTypes.object),\n  editFocus: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  handleFieldBlur: PropTypes.func,\n  handleFieldChange: PropTypes.func,\n  handleProductFieldChange: PropTypes.func,\n  newMetafield: PropTypes.object,\n  onCardExpand: PropTypes.func,\n  onDeleteProduct: PropTypes.func,\n  onFieldChange: PropTypes.func,\n  onMetaChange: PropTypes.func,\n  onMetaRemove: PropTypes.func,\n  onMetaSave: PropTypes.func,\n  onProductFieldSave: PropTypes.func,\n  onRestoreProduct: PropTypes.func,\n  product: PropTypes.object,\n  revisonDocumentIds: PropTypes.arrayOf(PropTypes.string),\n  templates: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string,\n    value: PropTypes.any\n  })),\n  viewProps: PropTypes.object\n};\n\nexport default ProductAdmin;\n","export { default as ProductAdminContainer } from \"./productAdminContainer\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport update from \"react/lib/update\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Tags, Media, Templates } from \"/lib/collections\";\nimport { Countries } from \"/client/collections\";\nimport { ProductAdmin } from \"../components\";\n\nclass ProductAdminContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      newMetafield: {\n        key: \"\",\n        value: \"\"\n      }\n    };\n  }\n\n  handleCardExpand = (cardName) => {\n    Reaction.state.set(\"edit/focus\", cardName);\n  }\n\n  handleDeleteProduct = (product) => {\n    ReactionProduct.archiveProduct(product || this.product);\n  }\n\n  handleProductFieldSave = (productId, fieldName, value) => {\n    let updateValue = value;\n    // special case, slugify handles.\n    if (fieldName === \"handle\") {\n      updateValue = Reaction.getSlug(value);\n    }\n    Meteor.call(\"products/updateProductField\", productId, fieldName, updateValue, (error) => {\n      if (error) {\n        Alerts.toast(error.message, \"error\");\n        this.forceUpdate();\n      }\n    });\n  }\n\n\n  handleMetaChange = (metafield, index) => {\n    let newState = {};\n\n    if (index >= 0) {\n      newState = update(this.state, {\n        product: {\n          metafields: {\n            [index]: {\n              $set: metafield\n            }\n          }\n        }\n      });\n    } else {\n      newState = {\n        newMetafield: metafield\n      };\n    }\n\n    this.setState(newState);\n  }\n\n  handleMetafieldSave = (productId, metafield, index) => {\n    // update existing metafield\n    if (index >= 0) {\n      Meteor.call(\"products/updateMetaFields\", productId, metafield, index);\n    } else if (metafield.key && metafield.value) {\n      Meteor.call(\"products/updateMetaFields\", productId, metafield);\n    }\n\n    this.setState({\n      newMetafield: {\n        key: \"\",\n        value: \"\"\n      }\n    });\n  }\n\n  handleMetaRemove = (productId, metafield) => {\n    Meteor.call(\"products/removeMetaFields\", productId, metafield);\n  }\n\n  handleProductRestore = (product) => {\n    Meteor.call(\"products/updateProductField\", product._id, \"isDeleted\", false);\n  }\n\n  render() {\n    return (\n      <ProductAdmin\n        newMetafield={this.state.newMetafield}\n        onCardExpand={this.handleCardExpand}\n        onDeleteProduct={this.handleDeleteProduct}\n        onMetaChange={this.handleMetaChange}\n        onMetaRemove={this.handleMetaRemove}\n        onMetaSave={this.handleMetafieldSave}\n        onProductFieldSave={this.handleProductFieldSave}\n        onRestoreProduct={this.handleProductRestore}\n        {...this.props}\n      />\n    );\n  }\n}\n\n\nfunction composer(props, onData) {\n  const product = ReactionProduct.selectedProduct();\n  let tags;\n  let media;\n  let revisonDocumentIds;\n\n  if (product) {\n    if (_.isArray(product.hashtags)) {\n      tags = _.map(product.hashtags, function (id) {\n        return Tags.findOne(id);\n      });\n    }\n\n    const selectedVariant = ReactionProduct.selectedVariant();\n\n    if (selectedVariant) {\n      media = Media.find({\n        \"metadata.variantId\": selectedVariant._id\n      }, {\n        sort: {\n          \"metadata.priority\": 1\n        }\n      });\n    }\n\n    revisonDocumentIds = [product._id];\n\n    const templates = Templates.find({\n      parser: \"react\",\n      provides: \"template\",\n      templateFor: { $in: [\"pdp\"] },\n      enabled: true\n    }).map((template) => {\n      return {\n        label: template.title,\n        value: template.name\n      };\n    });\n\n    const countries = Countries.find({}).fetch();\n\n    onData(null, {\n      editFocus: Reaction.state.get(\"edit/focus\"),\n      product: product,\n      media,\n      tags,\n      revisonDocumentIds,\n      templates,\n      countries\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nProductAdminContainer.propTypes = {\n  product: PropTypes.object,\n  tags: PropTypes.arrayOf(PropTypes.object)\n};\n\n// Decorate component and export\nexport default composeWithTracker(composer)(ProductAdminContainer);\n","import \"./templates/productAdmin.html\";\nimport \"./templates/productAdmin.js\";\n","import { Template } from \"meteor/templating\";\nimport { ProductDetailContainer, PublishContainer } from \"../containers\";\n\nTemplate.productDetailSimple.helpers({\n  PDC() {\n    return ProductDetailContainer;\n  }\n});\n\nTemplate.productDetailSimpleToolbar.helpers({\n  PublishContainerComponent() {\n    return {\n      component: PublishContainer\n    };\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Alert, Translation } from \"/imports/plugins/core/ui/client/components\";\n\n\nclass AddToCartButton extends Component {\n  get hasVariants() {\n    return Array.isArray(this.props.variants) && this.props.variants.length > 0;\n  }\n  handleCartQuantityChange = (event) => {\n    if (this.props.onCartQuantityChange) {\n      this.props.onCartQuantityChange(event, event.target.value);\n    }\n  }\n\n  render() {\n    if (this.hasVariants) {\n      return (\n        <div className=\"pdp add-to-cart block\">\n          <input\n            className=\"form-control input-md\"\n            id=\"add-to-cart-quantity\"\n            min=\"1\"\n            name=\"addToCartQty\"\n            onChange={this.handleCartQuantityChange}\n            type=\"number\"\n            value={this.props.cartQuantity}\n          />\n          <button\n            className=\"input-group-addon add-to-cart-text js-add-to-cart\"\n            data-i18n=\"productDetail.addToCart\"\n            onClick={this.props.onClick || this.props.onAddToCart}\n          >\n            <Translation defaultValue=\"Add to cart\" i18nKey=\"productDetail.addToCart\" />\n          </button>\n        </div>\n      );\n    }\n\n    if (this.props.editable && this.hasVariants === false) {\n      return (\n        <Alert>\n          <Translation defaultValue=\"Add options to enable 'Add to Cart' button\" i18nkey=\"productVariant.addVariantOptions\" />\n        </Alert>\n      );\n    }\n    return null;\n  }\n}\n\nAddToCartButton.propTypes = {\n  cartQuantity: PropTypes.number,\n  editable: PropTypes.bool,\n  onAddToCart: PropTypes.func,\n  onCartQuantityChange: PropTypes.func,\n  onClick: PropTypes.func,\n  variants: PropTypes.arrayOf(PropTypes.object)\n};\n\nexport default AddToCartButton;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\nimport { MediaItem } from \"/imports/plugins/core/ui/client/components\";\n\nclass ChildVariant extends Component {\n  handleClick = (event) => {\n    if (this.props.onClick) {\n      this.props.onClick(event, this.props.variant);\n    }\n  }\n\n  get hasMedia() {\n    return Array.isArray(this.props.media) && this.props.media.length > 0;\n  }\n\n  get primaryMediaItem() {\n    if (this.hasMedia) {\n      return this.props.media[0];\n    }\n\n    return null;\n  }\n\n  renderInventoryStatus() {\n    const {\n      inventoryManagement,\n      inventoryPolicy\n    } = this.props.variant;\n\n    // If childVariant is sold out, show Sold Out badge\n    if (inventoryManagement && this.props.variant.inventoryQuantity <= 0) {\n      if (inventoryPolicy) {\n        return (\n          <span className=\"variant-qty-sold-out badge badge-danger\">\n            <Translation defaultValue=\"Sold Out!\" i18nKey=\"productDetail.soldOut\" />\n          </span>\n        );\n      }\n\n      return (\n        <span className=\"variant-qty-sold-out badge badge-info\">\n          <Translation defaultValue=\"Backorder\" i18nKey=\"productDetail.backOrder\" />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderDeletionStatus() {\n    if (this.props.variant.isDeleted) {\n      return (\n        <span className=\"badge badge-danger\">\n          <Translation defaultValue=\"Archived\" i18nKey=\"app.archived\" />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderMedia() {\n    if (this.hasMedia) {\n      const media = this.primaryMediaItem;\n\n      return (\n        <MediaItem source={media.url()} />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const variant = this.props.variant;\n    const classes = classnames({\n      \"btn\": true,\n      \"btn-default\": true,\n      \"variant-detail-selected\": this.props.isSelected,\n      \"variant-deleted\": this.props.variant.isDeleted\n    });\n\n    return (\n      <div className=\"variant-select-option\">\n        <button\n          className={classes}\n          onClick={this.handleClick}\n          type=\"button\"\n        >\n          {this.renderMedia()}\n          <span className=\"title\">{variant.optionTitle}</span>\n        </button>\n\n        <div className=\"variant-controls\">\n          {this.renderDeletionStatus()}\n          {this.renderInventoryStatus()}\n          {this.props.visibilityButton}\n          {this.props.editButton}\n        </div>\n      </div>\n    );\n  }\n}\n\nChildVariant.propTypes = {\n  editButton: PropTypes.node,\n  isSelected: PropTypes.bool,\n  media: PropTypes.arrayOf(PropTypes.object),\n  onClick: PropTypes.func,\n  soldOut: PropTypes.bool,\n  variant: PropTypes.object,\n  visibilityButton: PropTypes.node\n};\n\n\nexport default ChildVariant;\n","export { default as ProductDetail } from \"./productDetail\";\nexport { default as VariantList } from \"./variantList\";\nexport { default as ChildVariant } from \"./childVariant\";\nexport { default as AddToCartButton } from \"./addToCartButton\";\nexport { default as ProductMetadata } from \"./metadata\";\nexport { default as ProductTags } from \"./tags\";\nexport { default as ProductField } from \"./productField\";\nexport { default as PriceRange } from \"./priceRange\";\nexport { default as ProductNotFound } from \"./productNotFound\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Metadata, Translation } from \"/imports/plugins/core/ui/client/components/\";\nimport { EditContainer } from \"/imports/plugins/core/ui/client/containers\";\n\nclass ProductMetadata extends Component {\n  get metafields() {\n    return this.props.metafields || this.props.product.metafields;\n  }\n\n  get showEditControls() {\n    return this.props.product && this.props.editable;\n  }\n\n  renderEditButton() {\n    if (this.showEditControls) {\n      return (\n        <span className=\"edit-button\">\n          <EditContainer\n            data={this.props.product}\n            disabled={this.props.editable === false}\n            editTypes={[\"edit\"]}\n            editView=\"ProductAdmin\"\n            field=\"metafields\"\n            i18nKeyLabel=\"productDetailEdit.productSettings\"\n            label=\"Product Settings\"\n            permissions={[\"createProduct\"]}\n            {...this.props.editContainerProps}\n          />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    if (Array.isArray(this.metafields) && this.metafields.length > 0) {\n      const headerClassName = classnames({\n        \"meta-header\": true,\n        \"edit\": this.showEditControls\n      });\n\n      return (\n        <div className=\"pdp product-metadata\">\n          <h3 className={headerClassName}>\n            <Translation defaultValue=\"Details\" i18nKey=\"productDetail.details\" />\n            {this.renderEditButton()}\n          </h3>\n          <Metadata editable={false} metafields={this.metafields} />\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n\nProductMetadata.propTypes = {\n  editContainerProps: PropTypes.object,\n  editable: PropTypes.bool,\n  metafields: PropTypes.arrayOf(PropTypes.object),\n  product: PropTypes.object\n};\n\nexport default ProductMetadata;\n","import React from \"react\";\nimport { Currency } from \"/imports/plugins/core/ui/client/components/\";\n\nconst PriceRange = (props) => {\n  return (\n    <div className=\"pdp price-range\">\n      <Currency {...props} />\n    </div>\n  );\n};\n\nexport default PriceRange;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { AlertContainer } from \"/imports/plugins/core/ui/client/containers\";\nimport { ReactionLayout } from \"/imports/plugins/core/layout/lib\";\n\nclass ProductDetail extends Component {\n  get tags() {\n    return this.props.tags || [];\n  }\n\n  get product() {\n    return this.props.product || {};\n  }\n\n  get editable() {\n    return this.props.editable;\n  }\n\n  render() {\n    return (\n      <div className=\"pdp\" style={{ position: \"relative\" }}>\n        <div className=\"container-main pdp-container\" itemScope itemType=\"http://schema.org/Product\">\n          <div className=\"row\">\n            <AlertContainer placement=\"productManagement\" />\n            <ReactionLayout\n              context={this}\n              layoutName={this.props.layout}\n              layoutProps={this.props}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nProductDetail.propTypes = {\n  cartQuantity: PropTypes.number,\n  editable: PropTypes.bool,\n  hasAdminPermission: PropTypes.bool,\n  layout: PropTypes.string,\n  layoutName: PropTypes.string,\n  mediaGalleryComponent: PropTypes.node,\n  onAddToCart: PropTypes.func,\n  onCartQuantityChange: PropTypes.func,\n  onDeleteProduct: PropTypes.func,\n  onProductFieldChange: PropTypes.func,\n  onViewContextChange: PropTypes.func,\n  priceRange: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  product: PropTypes.object,\n  socialComponent: PropTypes.node,\n  tags: PropTypes.arrayOf(PropTypes.object),\n  topVariantComponent: PropTypes.node,\n  viewAs: PropTypes.string\n};\n\nexport default ProductDetail;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { TextField } from \"/imports/plugins/core/ui/client/components/\";\nimport { EditContainer } from \"/imports/plugins/core/ui/client/containers\";\n\nclass ProductField extends Component {\n  static state = {}\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: this.value\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.product[this.fieldName] !== this.props.product[this.fieldName]) {\n      this.setState({\n        value: nextProps.product[this.fieldName]\n      }, () => {\n        if (this._input && this._input.refs.input) {\n          const input = this._input.refs.input;\n\n          Velocity.RunSequence([\n            { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n            { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n          ]);\n        }\n      });\n    } else {\n      this.setState({\n        value: nextProps.product[this.fieldName]\n      });\n    }\n  }\n\n  handleChange = (event, value) => {\n    this.setState({\n      value\n    });\n  }\n\n  handleBlur = (event, value) => {\n    if (this.props.onProductFieldChange) {\n      this.props.onProductFieldChange(this.props.product._id, this.fieldName, value);\n    }\n  }\n\n  get fieldName() {\n    return this.props.fieldName;\n  }\n\n  get value() {\n    return (this.state && this.state.value) || this.props.product[this.fieldName];\n  }\n\n  get showEditControls() {\n    return this.props.product && this.props.editable;\n  }\n\n  renderEditButton() {\n    if (this.showEditControls) {\n      return (\n        <span className=\"edit-controls\">\n          <EditContainer\n            autoHideEditButton={true}\n            data={this.props.product}\n            editView=\"ProductAdmin\"\n            field={this.fieldName}\n            i18nKeyLabel={`productDetailEdit.${this.field}`}\n            label=\"Edit Field\"\n            permissions={[\"createProduct\"]}\n            {...this.props.editContainerProps}\n          />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderTextField() {\n    const baseClassName = classnames({\n      \"pdp\": true,\n      \"product-detail-edit\": true,\n      [`${this.fieldName}-edit`]: this.fieldName\n    });\n\n    const textFieldClassName = classnames({\n      \"pdp\": true,\n      \"product-detail-edit\": true,\n      [`${this.fieldName}-edit-input`]: this.fieldName\n    });\n\n    return (\n      <div className={baseClassName}>\n        <TextField\n          ref={(ref) => { this._input = ref;}}\n          className={textFieldClassName}\n          multiline={this.props.multiline}\n          onBlur={this.handleBlur}\n          onChange={this.handleChange}\n          onReturnKeyDown={this.handleBlur}\n          value={this.state.value}\n          {...this.props.textFieldProps}\n        />\n        {this.renderEditButton()}\n      </div>\n    );\n  }\n\n  render() {\n    if (this.showEditControls) {\n      return this.renderTextField();\n    }\n\n    if (this.props.element) {\n      return React.createElement(this.props.element, {\n        className: \"pdp field\",\n        itemProp: this.props.itemProp,\n        children: this.value\n      });\n    }\n\n    return (\n      <div className=\"pdp field\">\n        {this.value}\n      </div>\n    );\n  }\n}\n\nProductField.propTypes = {\n  editContainerProps: PropTypes.object,\n  editable: PropTypes.bool,\n  element: PropTypes.node,\n  fieldName: PropTypes.string,\n  fieldTitle: PropTypes.string,\n  itemProp: PropTypes.string,\n  multiline: PropTypes.bool,\n  onProductFieldChange: PropTypes.func,\n  product: PropTypes.object,\n  textFieldProps: PropTypes.object\n};\n\nexport default ProductField;\n","import React from \"react\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\n\nconst ProductNotFound = () => {\n  return (\n    <TranslationProvider>\n      <div className=\"container-fluid-sm\">\n        <div className=\"empty-view-message\">\n          <i className=\"fa fa-barcode\" />\n          <Translation defaultValue=\"Oops\" i18nKey=\"productDetail.notFoundTitle\" />\n          <Translation defaultValue=\"Product Not Found\" i18nKey=\"productDetail.notFoundError\" />\n        </div>\n      </div>\n    </TranslationProvider>\n  );\n};\n\nexport default ProductNotFound;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components/\";\nimport { TagListContainer, EditContainer } from \"/imports/plugins/core/ui/client/containers\";\n\nclass ProductTags extends Component {\n  get tags() {\n    return this.props.tags;\n  }\n\n  get showEditControls() {\n    return this.props.product && this.props.editable;\n  }\n\n  renderEditButton() {\n    if (this.showEditControls) {\n      return (\n        <span className=\"edit-button\">\n          <EditContainer\n            data={this.props.product}\n            disabled={this.props.editable === false}\n            editView=\"ProductAdmin\"\n            field=\"hashtags\"\n            i18nKeyLabel=\"productDetailEdit.productSettings\"\n            label=\"Product Settings\"\n            permissions={[\"createProduct\"]}\n          />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    if (Array.isArray(this.tags) && this.tags.length > 0) {\n      const headerClassName = classnames({\n        \"tags-header\": true,\n        \"edit\": this.showEditControls\n      });\n\n      return (\n        <div className=\"pdp product-tags\">\n          <h3 className={headerClassName}>\n            <Translation defaultValue=\"Tags\" i18nKey=\"productDetail.tags\" />\n            {this.renderEditButton()}\n          </h3>\n          <TagListContainer\n            editable={false}\n            product={this.props.product}\n            tags={this.tags}\n          />\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nProductTags.propTypes = {\n  editButton: PropTypes.node,\n  editable: PropTypes.bool,\n  product: PropTypes.object,\n  tags: PropTypes.arrayOf(PropTypes.object)\n};\n\nexport default ProductTags;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Currency, Translation } from \"/imports/plugins/core/ui/client/components\";\nimport { SortableItem } from \"/imports/plugins/core/ui/client/containers\";\n\nclass Variant extends Component {\n  handleClick = (event) => {\n    if (this.props.onClick) {\n      this.props.onClick(event, this.props.variant);\n    }\n  }\n\n  get price() {\n    return this.props.displayPrice || this.props.variant.price;\n  }\n\n  renderInventoryStatus() {\n    const {\n      inventoryManagement,\n      inventoryPolicy\n    } = this.props.variant;\n\n    // If variant is sold out, show Sold Out badge\n    if (inventoryManagement && this.props.soldOut) {\n      if (inventoryPolicy) {\n        return (\n          <span className=\"variant-qty-sold-out badge badge-danger\">\n            <Translation defaultValue=\"Sold Out!\" i18nKey=\"productDetail.soldOut\" />\n          </span>\n        );\n      }\n\n      return (\n        <span className=\"variant-qty-sold-out badge badge-info\">\n          <Translation defaultValue=\"Backorder\" i18nKey=\"productDetail.backOrder\" />\n        </span>\n      );\n    }\n\n    // If Warning Threshold is met, show Limited Supply Badge\n    if (inventoryManagement && this.props.variant.lowInventoryWarningThreshold >= this.props.variant.inventoryTotal) {\n      if (inventoryPolicy) {\n        return (\n          <span className=\"variant-qty-sold-out badge badge-warning\">\n            <Translation defaultValue=\"Limited Supply\" i18nKey=\"productDetail.limitedSupply\" />\n          </span>\n        );\n      }\n\n      return (\n        <span className=\"variant-qty-sold-out badge badge-info\">\n          <Translation defaultValue=\"Backorder\" i18nKey=\"productDetail.backOrder\" />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderDeletionStatus() {\n    if (this.props.variant.isDeleted) {\n      return (\n        <span className=\"badge badge-danger\">\n          <Translation defaultValue=\"Archived\" i18nKey=\"app.archived\" />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const variant = this.props.variant;\n    const classes = classnames({\n      \"variant-detail\": true,\n      \"variant-detail-selected\": this.props.isSelected,\n      \"variant-deleted\": this.props.variant.isDeleted\n    });\n\n    let variantTitleElement;\n\n    if (typeof variant.title === \"string\" && variant.title.length) {\n      variantTitleElement = (\n        <span className=\"variant-title\">{variant.title}</span>\n      );\n    } else {\n      variantTitleElement = (\n        <Translation defaultValue=\"Label\" i18nKey=\"productVariant.title\" />\n      );\n    }\n\n    const variantElement = (\n      <li\n        className=\"variant-list-item\"\n        id=\"variant-list-item-{variant._id}\"\n        key={variant._id}\n        onClick={this.handleClick}\n      >\n        <div className={classes}>\n          <div className=\"title\">\n            {variantTitleElement}\n          </div>\n\n          <div className=\"actions\">\n            <span className=\"variant-price\">\n              <Currency amount={this.price} editable={this.props.editable}/>\n            </span>\n          </div>\n\n          <div className=\"alerts\">\n            {this.renderDeletionStatus()}\n            {this.renderInventoryStatus()}\n            {this.props.visibilityButton}\n            {this.props.editButton}\n          </div>\n        </div>\n      </li>\n    );\n\n    if (this.props.editable) {\n      return this.props.connectDragSource(\n        this.props.connectDropTarget(\n          variantElement\n        )\n      );\n    }\n\n    return variantElement;\n  }\n}\n\nVariant.propTypes = {\n  connectDragSource: PropTypes.func,\n  connectDropTarget: PropTypes.func,\n  displayPrice: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  editButton: PropTypes.node,\n  editable: PropTypes.bool,\n  isSelected: PropTypes.bool,\n  onClick: PropTypes.func,\n  soldOut: PropTypes.bool,\n  variant: PropTypes.object,\n  visibilityButton: PropTypes.node\n};\n\nexport default SortableItem(\"product-variant\", Variant);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Variant from \"./variant\";\nimport { EditContainer } from \"/imports/plugins/core/ui/client/containers\";\nimport { Divider, IconButton } from \"/imports/plugins/core/ui/client/components\";\nimport { ChildVariant } from \"./\";\n\nclass VariantList extends Component {\n  handleVariantEditClick = (event, editButtonProps) => {\n    if (this.props.onEditVariant) {\n      return this.props.onEditVariant(event, editButtonProps.data);\n    }\n    return true;\n  }\n\n  handleVariantVisibilityClick = (event, editButtonProps) => {\n    if (this.props.onVariantVisibiltyToggle) {\n      const isVariantVisible = !editButtonProps.data.isVisible;\n      this.props.onVariantVisibiltyToggle(event, editButtonProps.data, isVariantVisible);\n    }\n  }\n\n  handleChildleVariantClick = (event, variant) => {\n    if (this.props.onVariantClick) {\n      this.props.onVariantClick(event, variant, 1);\n    }\n  }\n\n  handleChildVariantEditClick = (event, editButtonProps) => {\n    if (this.props.onEditVariant) {\n      return this.props.onEditVariant(event, editButtonProps.data, 1);\n    }\n    return true;\n  }\n\n  isSoldOut(variant) {\n    if (this.props.isSoldOut) {\n      return this.props.isSoldOut(variant);\n    }\n\n    return false;\n  }\n\n  renderVariants() {\n    let variants = [];\n    let addButton;\n\n    if (this.props.editable) {\n      addButton = (\n        <div className=\"rui items flex\">\n          <div className=\"rui item full justify center\">\n            <IconButton\n              i18nKeyTooltip=\"variantList.createVariant\"\n              icon=\"fa fa-plus\"\n              primary={true}\n              tooltip=\"Create Variant\"\n              onClick={this.props.onCreateVariant}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    if (this.props.variants) {\n      variants = this.props.variants.map((variant, index) => {\n        const displayPrice = this.props.displayPrice && this.props.displayPrice(variant._id);\n\n        return (\n          <EditContainer\n            data={variant}\n            disabled={this.props.editable === false}\n            editView=\"variantForm\"\n            i18nKeyLabel=\"productDetailEdit.editVariant\"\n            key={index}\n            label=\"Edit Variant\"\n            onEditButtonClick={this.handleVariantEditClick}\n            onVisibilityButtonClick={this.handleVariantVisibilityClick}\n            permissions={[\"createProduct\"]}\n            showsVisibilityButton={true}\n          >\n            <Variant\n              displayPrice={displayPrice}\n              editable={this.props.editable}\n              index={index}\n              isSelected={this.props.variantIsSelected(variant._id)}\n              onClick={this.props.onVariantClick}\n              onMove={this.props.onMoveVariant}\n              soldOut={this.isSoldOut(variant)}\n              variant={variant}\n            />\n          </EditContainer>\n        );\n      });\n    }\n\n    const variantList = (\n      <ul className=\"variant-list list-unstyled\" id=\"variant-list\" key=\"variantList\">\n        {variants}\n        {addButton}\n      </ul>\n    );\n\n    if (variants.length === 0 && this.props.editable === false) {\n      return variantList;\n    } else if (variants.length > 1 || variants.length === 0) {\n      return [\n        <Divider\n          i18nKeyLabel=\"productDetail.options\"\n          key=\"dividerWithLabel\"\n          label=\"Options\"\n        />,\n        variantList\n      ];\n    } else if (variants.length === 1) {\n      return [\n        <Divider key=\"divider\" />,\n        variantList\n      ];\n    }\n\n    return variantList;\n  }\n\n  renderChildVariants() {\n    let childVariants = [];\n\n    if (this.props.childVariants) {\n      childVariants = this.props.childVariants.map((childVariant, index) => {\n        const media = this.props.childVariantMedia.filter((mediaItem) => {\n          if (mediaItem.metadata.variantId === childVariant._id) {\n            return true;\n          }\n          return false;\n        });\n\n        return (\n          <EditContainer\n            data={childVariant}\n            disabled={this.props.editable === false}\n            editView=\"variantForm\"\n            i18nKeyLabel=\"productDetailEdit.editVariant\"\n            key={index}\n            label=\"Edit Variant\"\n            onEditButtonClick={this.handleChildVariantEditClick}\n            onVisibilityButtonClick={this.handleVariantVisibilityClick}\n            permissions={[\"createProduct\"]}\n            showsVisibilityButton={true}\n          >\n            <ChildVariant\n              isSelected={this.props.variantIsSelected(childVariant._id)}\n              media={media}\n              onClick={this.handleChildleVariantClick}\n              variant={childVariant}\n            />\n          </EditContainer>\n        );\n      });\n    }\n\n    if (childVariants.length) {\n      return [\n        <Divider\n          key=\"availableOptionsDivider\"\n          i18nKeyLabel=\"availableOptions\"\n          label=\"Available Options\"\n        />,\n        <div className=\"row variant-product-options\" key=\"childVariantList\">\n          {childVariants}\n        </div>\n      ];\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <div className=\"product-variants\">\n        {this.renderVariants()}\n        {this.renderChildVariants()}\n      </div>\n    );\n  }\n}\n\nVariantList.propTypes = {\n  childVariantMedia: PropTypes.arrayOf(PropTypes.any),\n  childVariants: PropTypes.arrayOf(PropTypes.object),\n  displayPrice: PropTypes.func,\n  editable: PropTypes.bool,\n  isSoldOut: PropTypes.func,\n  onCreateVariant: PropTypes.func,\n  onEditVariant: PropTypes.func,\n  onMoveVariant: PropTypes.func,\n  onVariantClick: PropTypes.func,\n  onVariantVisibiltyToggle: PropTypes.func,\n  variantIsSelected: PropTypes.func,\n  variants: PropTypes.arrayOf(PropTypes.object)\n};\n\nexport default VariantList;\n","export { default as ProductDetailContainer } from \"./productDetailContainer\";\nexport { default as SocialContainer } from \"./socialContainer\";\nexport { default as VariantListContainer } from \"./variantListContainer\";\nexport { default as PublishContainer } from \"./publishContainer\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEmpty } from \"lodash\";\nimport _ from \"lodash\";\nimport { StyleRoot } from \"radium\";\nimport { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Reaction, i18next, Logger } from \"/client/api\";\nimport { Tags, Media, Cart } from \"/lib/collections\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { ProductDetail, ProductNotFound } from \"../components\";\nimport { SocialContainer, VariantListContainer } from \"./\";\nimport { MediaGalleryContainer } from \"/imports/plugins/core/ui/client/containers\";\nimport { DragDropProvider, TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\n\nclass ProductDetailContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.animationTimeOut = null;\n    this.textTimeOut = null;\n    this.state = {\n      cartQuantity: 1,\n      click: 0\n    };\n  }\n\n  handleCartQuantityChange = (event, quantity) => {\n    this.setState({\n      cartQuantity: Math.max(quantity, 1)\n    });\n  }\n\n  handleAddToCart = () => {\n    let productId;\n    let quantity;\n    let maxQuantity;\n    let totalQuantity;\n    let storedQuantity = 0;\n    const currentVariant = ReactionProduct.selectedVariant();\n    const currentProduct = ReactionProduct.selectedProduct();\n\n    if (currentVariant) {\n      if (currentVariant.ancestors.length === 1) {\n        const options = ReactionProduct.getVariants(currentVariant._id);\n\n        if (options.length > 0) {\n          Alerts.inline(\"Please choose options before adding to cart\", \"warning\", {\n            placement: \"productDetail\",\n            i18nKey: \"productDetail.chooseOptions\",\n            autoHide: 10000\n          });\n          return [];\n        }\n      }\n\n      if (currentVariant.inventoryPolicy && currentVariant.inventoryQuantity < 1) {\n        Alerts.inline(\"Sorry, this item is out of stock!\", \"warning\", {\n          placement: \"productDetail\",\n          i18nKey: \"productDetail.outOfStock\",\n          autoHide: 10000\n        });\n        return [];\n      }\n\n      if (this.props.storedCart && this.props.storedCart.items) {\n        this.props.storedCart.items.forEach((item) => {\n          if (item.variants._id === currentVariant._id) {\n            storedQuantity = item.quantity;\n          }\n        });\n      }\n\n      quantity = parseInt(this.state.cartQuantity, 10);\n      totalQuantity = quantity + storedQuantity;\n      maxQuantity = currentVariant.inventoryQuantity;\n\n      if (quantity < 1) {\n        quantity = 1;\n      }\n\n      if (currentVariant.inventoryPolicy && quantity > maxQuantity && storedQuantity < maxQuantity) {\n        Alerts.inline(\"Your product quantity has been adjusted to the max quantity in stock\", \"warning\", {\n          placement: \"productDetail\",\n          i18nKey: \"admin.inventoryAlerts.adjustedQuantity\",\n          autoHide: 10000\n        });\n        quantity = maxQuantity - storedQuantity;\n        totalQuantity = maxQuantity;\n      }\n\n      if (currentVariant.inventoryPolicy && totalQuantity > maxQuantity && storedQuantity < maxQuantity && quantity < maxQuantity) {\n        Alerts.inline(\"Your product quantity has been adjusted to the max quantity in stock\", \"warning\", {\n          placement: \"productDetail\",\n          i18nKey: \"admin.inventoryAlerts.adjustedQuantity\",\n          autoHide: 10000\n        });\n        quantity = maxQuantity - storedQuantity;\n        totalQuantity = maxQuantity;\n      }\n\n      if (currentVariant.inventoryPolicy && totalQuantity > maxQuantity) {\n        Alerts.inline(\"Sorry, this item is out of stock!\", \"error\", {\n          placement: \"productDetail\",\n          i18nKey: \"productDetail.outOfStock\",\n          autoHide: 10000\n        });\n        return [];\n      }\n\n      if (!currentProduct.isVisible) {\n        Alerts.inline(\"Publish product before adding to cart.\", \"error\", {\n          placement: \"productDetail\",\n          i18nKey: \"productDetail.publishFirst\",\n          autoHide: 10000\n        });\n      } else {\n        productId = currentProduct._id;\n\n        if (productId) {\n          Meteor.call(\"cart/addToCart\", productId, currentVariant._id, quantity, (error) => {\n            if (error) {\n              Logger.error(error, \"Failed to add to cart.\");\n              return error;\n            }\n            // Reset cart quantity on success\n            this.handleCartQuantityChange(null, 1);\n            this.state.click++;\n\n            return true;\n          });\n        }\n\n        // template.$(\".variant-select-option\").removeClass(\"active\");\n        ReactionProduct.setCurrentVariant(null);\n        // qtyField.val(1);\n        // scroll to top on cart add\n        $(\"html,body\").animate({\n          scrollTop: 0\n        }, 0);\n        // slide out label\n        const addToCartText = i18next.t(\"productDetail.addedToCart\");\n        const addToCartTitle = currentVariant.title || \"\";\n        // Grab and cache the width of the alert to be used in animation\n        const alertWidth = $(\".cart-alert\").width();\n        const direction = i18next.dir() === \"rtl\" ? \"left\" : \"right\";\n        const oppositeDirection = i18next.dir() === \"rtl\" ? \"right\" : \"left\";\n        if ($(\".cart-alert\").css(\"display\") === \"none\") {\n          $(\"#spin\").addClass(\"hidden\");\n          $(\".cart-alert-text\").text(`${quantity} ${addToCartTitle} ${addToCartText}`);\n          this.handleSlideOut(alertWidth, direction, oppositeDirection);\n          this.animationTimeOut = setTimeout(() => {\n            this.handleSlideIn(alertWidth, direction, oppositeDirection);\n          }, 4000);\n        } else {\n          clearTimeout(this.textTimeOut);\n\n          // hides text and display spinner\n          $(\".cart-alert-text\").hide();\n          $(\"#spin\").removeClass(\"hidden\");\n\n          this.textTimeOut = setTimeout(() => {\n            $(\"#spin\").addClass(\"hidden\");\n            $(\".cart-alert-text\").text(`${this.state.click * quantity} ${addToCartTitle} ${addToCartText}`);\n            $(\".cart-alert-text\").fadeIn(\"slow\");\n            this.setState({ click: 0 });\n          }, 2000);\n\n          clearTimeout(this.animationTimeOut);\n          this.animationTimeOut = setTimeout(() => {\n            this.handleSlideIn(alertWidth, direction, oppositeDirection);\n          }, 4000);\n        }\n      }\n    } else {\n      Alerts.inline(\"Select an option before adding to cart\", \"warning\", {\n        placement: \"productDetail\",\n        i18nKey: \"productDetail.selectOption\",\n        autoHide: 8000\n      });\n    }\n\n    return null;\n  }\n\n  handleSlideOut(alertWidth, direction, oppositeDirection) {\n    // Animate slide out\n    return $(\".cart-alert\")\n      .show()\n      .css({\n        [oppositeDirection]: \"auto\",\n        [direction]: -alertWidth\n      })\n      .animate({\n        [oppositeDirection]: \"auto\",\n        [direction]: 0\n      }, 600);\n  }\n\n  handleSlideIn(alertWidth, direction, oppositeDirection) {\n    // Animate slide in\n    return $(\".cart-alert\").animate({\n      [oppositeDirection]: \"auto\",\n      [direction]: -alertWidth\n    }, {\n      duration: 600,\n      complete() {\n        $(\".cart-alert\").hide();\n      }\n    });\n  }\n\n  handleProductFieldChange = (productId, fieldName, value) => {\n    Meteor.call(\"products/updateProductField\", productId, fieldName, value, (error) => {\n      if (error) {\n        Alerts.toast(error.message, \"error\");\n        this.forceUpdate();\n      }\n    });\n  }\n\n  handleViewContextChange = (event, value) => {\n    Reaction.Router.setQueryParams({ as: value });\n  }\n\n  handleDeleteProduct = () => {\n    ReactionProduct.archiveProduct(this.props.product);\n  }\n\n  render() {\n    if (isEmpty(this.props.product)) {\n      return (\n        <ProductNotFound />\n      );\n    }\n    return (\n      <TranslationProvider>\n        <DragDropProvider>\n          <StyleRoot>\n            <ProductDetail\n              cartQuantity={this.state.cartQuantity}\n              mediaGalleryComponent={<MediaGalleryContainer media={this.props.media} />}\n              onAddToCart={this.handleAddToCart}\n              onCartQuantityChange={this.handleCartQuantityChange}\n              onViewContextChange={this.handleViewContextChange}\n              socialComponent={<SocialContainer />}\n              topVariantComponent={<VariantListContainer />}\n              onDeleteProduct={this.handleDeleteProduct}\n              onProductFieldChange={this.handleProductFieldChange}\n              {...this.props}\n            />\n          </StyleRoot>\n        </DragDropProvider>\n      </TranslationProvider>\n    );\n  }\n}\n\nProductDetailContainer.propTypes = {\n  media: PropTypes.arrayOf(PropTypes.object),\n  product: PropTypes.object,\n  storedCart: PropTypes.object\n};\n\nfunction composer(props, onData) {\n  const tagSub = Meteor.subscribe(\"Tags\");\n  const productId = Reaction.Router.getParam(\"handle\");\n  const variantId = Reaction.Router.getParam(\"variantId\");\n  const revisionType = Reaction.Router.getQueryParam(\"revision\");\n  const viewProductAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  let productSub;\n\n  if (productId) {\n    productSub = Meteor.subscribe(\"Product\", productId);\n  }\n\n  if (productSub && productSub.ready() && tagSub.ready() && Reaction.Subscriptions.Cart.ready()) {\n    // Get the product\n    const product = ReactionProduct.setProduct(productId, variantId);\n\n    if (Reaction.hasPermission(\"createProduct\")) {\n      if (!Reaction.getActionView() && Reaction.isActionViewOpen() === true) {\n        Reaction.setActionView({\n          template: \"productAdmin\",\n          data: product\n        });\n      }\n    }\n\n    // Get the product tags\n    if (product) {\n      let tags;\n      if (_.isArray(product.hashtags)) {\n        tags = _.map(product.hashtags, function (id) {\n          return Tags.findOne(id);\n        });\n      }\n\n      let mediaArray = [];\n      const selectedVariant = ReactionProduct.selectedVariant();\n\n      if (selectedVariant) {\n        // Find the media for the selected variant\n        mediaArray = Media.find({\n          \"metadata.variantId\": selectedVariant._id\n        }, {\n          sort: {\n            \"metadata.priority\": 1\n          }\n        }).fetch();\n\n        // If no media found, broaden the search to include other media from parents\n        if (Array.isArray(mediaArray) && mediaArray.length === 0 && selectedVariant.ancestors) {\n          // Loop through ancestors in reverse to find a variant that has media to use\n          for (const ancestor of selectedVariant.ancestors.reverse()) {\n            const media = Media.find({\n              \"metadata.variantId\": ancestor\n            }, {\n              sort: {\n                \"metadata.priority\": 1\n              }\n            }).fetch();\n\n            // If we found some media, then stop here\n            if (Array.isArray(media) && media.length) {\n              mediaArray = media;\n              break;\n            }\n          }\n        }\n      }\n\n      let priceRange;\n      if (selectedVariant && typeof selectedVariant === \"object\") {\n        const childVariants = ReactionProduct.getVariants(selectedVariant._id);\n        // when top variant has no child variants we display only its price\n        if (childVariants.length === 0) {\n          priceRange = selectedVariant.price;\n        } else {\n          // otherwise we want to show child variants price range\n          priceRange = ReactionProduct.getVariantPriceRange();\n        }\n      }\n\n      let productRevision;\n\n      if (revisionType === \"published\") {\n        productRevision = product.__published;\n      }\n\n      let editable;\n\n      if (viewProductAs === \"customer\") {\n        editable = false;\n      } else {\n        editable = Reaction.hasPermission([\"createProduct\"]);\n      }\n\n      const topVariants = ReactionProduct.getTopVariants();\n\n      const storedCart = Cart.findOne();\n\n      onData(null, {\n        variants: topVariants,\n        layout: product.template || \"productDetailSimple\",\n        product: productRevision || product,\n        priceRange,\n        tags,\n        media: mediaArray,\n        editable,\n        viewAs: viewProductAs,\n        hasAdminPermission: Reaction.hasPermission([\"createProduct\"]),\n        storedCart\n      });\n    } else {\n      // onData must be called with composeWithTracker, or else the loading icon will show forever.\n      onData(null, {});\n    }\n  }\n}\n\n// Decorate component and export\nexport default composeWithTracker(composer, Loading)(ProductDetailContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Router } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Products } from \"/lib/collections\";\nimport PublishContainer from \"/imports/plugins/core/revisions/client/containers/publishContainer\";\n\nclass ProductPublishContainer extends Component {\n  handleMetaRemove = (productId, metafield) => {\n    Meteor.call(\"products/removeMetaFields\", productId, metafield);\n  }\n\n  handleProductRestore = (product) => {\n    Meteor.call(\"products/updateProductField\", product._id, \"isDeleted\", false);\n  }\n\n  handleVisibilityChange = (event, isProductVisible) => {\n    // Update main product\n    Meteor.call(\"products/updateProductField\", this.props.product._id, \"isVisible\", isProductVisible);\n\n    const variants = Products.find({\n      ancestors: {\n        $in: [this.props.product._id]\n      }\n    }).fetch();\n\n    variants.map(variant => {\n      // update variant\n      Meteor.call(\"products/updateProductField\", variant._id, \"isVisible\", isProductVisible);\n    });\n  }\n\n  handlePublishActions = (event, action, documentIds) => {\n    if (action === \"archive\") {\n      ReactionProduct.archiveProduct(documentIds);\n    }\n  }\n\n  handlePublishSuccess = (result) => {\n    if (result && result.status === \"success\" && this.props.product) {\n      const productDocument = result.previousDocuments.find((product) => this.props.product._id === product._id);\n\n      if (productDocument && this.props.product.handle !== productDocument.handle) {\n        const newProductPath = Router.pathFor(\"product\", {\n          hash: {\n            handle: this.props.product.handle\n          }\n        });\n\n        window.location.href = newProductPath;\n      }\n    }\n  }\n\n  render() {\n    return (\n      <PublishContainer\n        onAction={this.handlePublishActions}\n        onPublishSuccess={this.handlePublishSuccess}\n        onVisibilityChange={this.handleVisibilityChange}\n        {...this.props}\n      />\n    );\n  }\n}\n\n\nfunction composer(props, onData) {\n  const product = ReactionProduct.selectedProduct();\n  let revisonDocumentIds;\n\n  if (product) {\n    revisonDocumentIds = [product._id];\n\n    onData(null, {\n      product,\n      documentIds: revisonDocumentIds,\n      documents: [product]\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nProductPublishContainer.propTypes = {\n  product: PropTypes.object,\n  tags: PropTypes.arrayOf(PropTypes.object)\n};\n\n// Decorate component and export\nexport default composeWithTracker(composer)(ProductPublishContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { ReactionProduct } from \"/lib/api\";\nimport SocialButtons from \"/imports/plugins/included/social/client/components/socialButtons\";\nimport { createSocialSettings } from \"/imports/plugins/included/social/lib/helpers\";\nimport { EditContainer } from \"/imports/plugins/core/ui/client/containers\";\nimport { Media } from \"/lib/collections\";\n\nclass ProductSocialContainer extends Component {\n  render() {\n    return (\n      <EditContainer\n        data={this.props.data}\n        editView=\"ProductAdmin\"\n        field={[\"facebookMsg\", \"twitterMsg\", \"googleplusMsg\", \"pinterestMsg\"]}\n        i18nKeyLabel=\"productDetailEdit.editSocial\"\n        label=\"Edit Social Messaging\"\n        permissions={[\"createProduct\"]}\n      >\n        <SocialButtons {...this.props.socialSettings} />\n      </EditContainer>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const product = ReactionProduct.selectedProduct() || {};\n  const selectedVariant = ReactionProduct.selectedVariant() || {};\n  let title = product.title;\n  let mediaUrl;\n\n  if (selectedVariant) {\n    title = selectedVariant.title;\n  }\n\n  let description;\n\n  if (typeof product.description === \"string\") {\n    description = product.description.substring(0, 254);\n  }\n\n  const media = Media.findOne({\n    \"metadata.variantId\": {\n      $in: [\n        selectedVariant._id,\n        product._id\n      ]\n    }\n  }, {\n    sort: {\n      \"metadata.priority\": 1\n    }\n  });\n\n  if (media) {\n    mediaUrl = media.url();\n  }\n\n  const options = {\n    data: product,\n    title: product.title,\n    description,\n    placement: \"productDetail\",\n    buttonClassName: \"fa-lg\",\n    media: mediaUrl,\n    apps: {\n      facebook: {\n        description: product.facebookMsg || description,\n        media: mediaUrl\n      },\n      twitter: {\n        description: product.twitterMsg || title,\n        media: mediaUrl\n      },\n      googleplus: {\n        itemtype: \"Product\",\n        description: product.googleplusMsg || description,\n        media: mediaUrl\n      },\n      pinterest: {\n        description: product.pinterestMsg || description,\n        media: mediaUrl\n      }\n    }\n  };\n\n  const socialSettings = createSocialSettings(options);\n\n  onData(null, {\n    data: product,\n    socialSettings\n  });\n}\n\nProductSocialContainer.propTypes = {\n  data: PropTypes.object,\n  socialSettings: PropTypes.object\n};\n\nexport default composeWithTracker(composer)(ProductSocialContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { VariantList } from \"../components\";\nimport { getChildVariants } from \"../selectors/variants\";\nimport { Products, Media } from \"/lib/collections\";\nimport update from \"react/lib/update\";\nimport { getVariantIds } from \"/lib/selectors/variants\";\nimport { DragDropProvider } from \"/imports/plugins/core/ui/client/providers\";\n\nfunction variantIsSelected(variantId) {\n  const current = ReactionProduct.selectedVariant();\n  if (current && typeof current === \"object\" && (variantId === current._id || ~current.ancestors.indexOf(variantId))) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction variantIsInActionView(variantId) {\n  const actionViewVariant = Reaction.getActionView().data;\n\n  if (actionViewVariant) {\n    // Check if the variant is selected, and also visible & selected in the action view\n    return variantIsSelected(variantId) && variantIsSelected(actionViewVariant._id) && Reaction.isActionViewOpen();\n  }\n\n  return false;\n}\n\nfunction getTopVariants() {\n  let inventoryTotal = 0;\n  const variants = ReactionProduct.getTopVariants();\n  if (variants.length) {\n    // calculate inventory total for all variants\n    for (const variant of variants) {\n      if (variant.inventoryManagement) {\n        const qty = ReactionProduct.getVariantQuantity(variant);\n        if (typeof qty === \"number\") {\n          inventoryTotal += qty;\n        }\n      }\n    }\n    // calculate percentage of total inventory of this product\n    for (const variant of variants) {\n      const qty = ReactionProduct.getVariantQuantity(variant);\n      variant.inventoryTotal = inventoryTotal;\n      if (variant.inventoryManagement && inventoryTotal) {\n        variant.inventoryPercentage = parseInt(qty / inventoryTotal * 100, 10);\n      } else {\n        // for cases when sellers doesn't use inventory we should always show\n        // \"green\" progress bar\n        variant.inventoryPercentage = 100;\n      }\n      if (variant.title) {\n        variant.inventoryWidth = parseInt(variant.inventoryPercentage -\n          variant.title.length, 10);\n      } else {\n        variant.inventoryWidth = 0;\n      }\n    }\n    // sort variants in correct order\n    variants.sort((a, b) => a.index - b.index);\n\n    return variants;\n  }\n  return [];\n}\n\nfunction isSoldOut(variant) {\n  return ReactionProduct.getVariantQuantity(variant) < 1;\n}\n\nclass VariantListContainer extends Component {\n  componentWillReceiveProps() {\n    this.setState({});\n  }\n\n  get variants() {\n    return (this.state && this.state.variants) || this.props.variants;\n  }\n\n  get productHandle() {\n    const selectedProduct = ReactionProduct.selectedProduct();\n    return selectedProduct.__published && selectedProduct.__published.handle || selectedProduct.handle;\n  }\n\n  handleCreateVariant = () => {\n    const selectedProduct =  ReactionProduct.selectedProduct();\n\n    Meteor.call(\"products/createVariant\", selectedProduct._id, (error) => {\n      if (error) {\n        Alerts.alert({\n          text: i18next.t(\"productDetailEdit.addVariantFail\", { title: selectedProduct.title }),\n          confirmButtonText: i18next.t(\"app.close\", { defaultValue: \"Close\" })\n        });\n      }\n    });\n  }\n\n  handleVariantClick = (event, variant, ancestors = -1) => {\n    if (Reaction.isActionViewOpen()) {\n      this.handleEditVariant(event, variant, ancestors);\n    } else {\n      ReactionProduct.setCurrentVariant(variant._id);\n      Session.set(\"variant-form-\" + variant._id, true);\n      Reaction.Router.go(\"product\", {\n        handle: this.productHandle,\n        variantId: variant._id\n      }, {\n        as: Reaction.Router.getQueryParam(\"as\")\n      });\n    }\n  }\n\n  handleEditVariant = (event, variant, ancestors = -1) => {\n    let editVariant = variant;\n    if (ancestors >= 0) {\n      editVariant = Products.findOne(variant.ancestors[ancestors]);\n    }\n\n    ReactionProduct.setCurrentVariant(variant._id);\n    Session.set(\"variant-form-\" + editVariant._id, true);\n    Reaction.Router.go(\"product\", {\n      handle: this.productHandle,\n      variantId: variant._id\n    }, {\n      as: Reaction.Router.getQueryParam(\"as\")\n    });\n\n    if (Reaction.hasPermission(\"createProduct\")) {\n      Reaction.showActionView({\n        label: \"Edit Variant\",\n        i18nKeyLabel: \"productDetailEdit.editVariant\",\n        template: \"variantForm\",\n        data: editVariant\n      });\n    }\n\n    // Prevent the default edit button `onEditButtonClick` function from running\n    return false;\n  }\n\n  handleVariantVisibilityToggle = (event, variant, variantIsVisible) => {\n    Meteor.call(\"products/updateProductField\", variant._id, \"isVisible\", variantIsVisible);\n  }\n\n  handleMoveVariant = (dragIndex, hoverIndex) => {\n    const variant = this.props.variants[dragIndex];\n\n    // Apply new sort order to variant list\n    const newVariantOrder = update(this.props.variants, {\n      $splice: [\n        [dragIndex, 1],\n        [hoverIndex, 0, variant]\n      ]\n    });\n\n    // Set local state so the component does't have to wait for a round-trip\n    // to the server to get the updated list of variants\n    this.setState({\n      variants: newVariantOrder\n    });\n\n    // Save the updated positions\n    Meteor.defer(() => {\n      Meteor.call(\"products/updateVariantsPosition\", getVariantIds(newVariantOrder));\n    });\n  }\n\n  render() {\n    return (\n      <DragDropProvider>\n        <VariantList\n          onEditVariant={this.handleEditVariant}\n          onMoveVariant={this.handleMoveVariant}\n          onVariantClick={this.handleVariantClick}\n          onVariantVisibiltyToggle={this.handleVariantVisibilityToggle}\n          onCreateVariant={this.handleCreateVariant}\n          {...this.props}\n          variants={this.variants}\n        />\n      </DragDropProvider>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  let childVariantMedia = [];\n  const childVariants = getChildVariants();\n\n  if (Array.isArray(childVariants)) {\n    childVariantMedia = Media.find({\n      \"metadata.variantId\": {\n        $in: getVariantIds(childVariants)\n      }\n    }, {\n      sort: {\n        \"metadata.priority\": 1\n      }\n    }).fetch();\n  }\n\n  let editable;\n\n  if (Reaction.isPreview() === true) {\n    editable = false;\n  } else {\n    editable = Reaction.hasPermission([\"createProduct\"]);\n  }\n\n  onData(null, {\n    variants: getTopVariants(),\n    variantIsSelected,\n    variantIsInActionView,\n    childVariants,\n    childVariantMedia,\n    displayPrice: ReactionProduct.getVariantPriceRange,\n    isSoldOut: isSoldOut,\n    editable\n  });\n}\n\nVariantListContainer.propTypes = {\n  variants: PropTypes.arrayOf(PropTypes.object)\n};\n\nexport default composeWithTracker(composer)(VariantListContainer);\n","import { ReactionProduct } from \"/lib/api\";\n\nexport function getChildVariants() {\n  const childVariants = [];\n  const variants = ReactionProduct.getVariants();\n  if (variants.length > 0) {\n    const current = ReactionProduct.selectedVariant();\n\n    if (!current) {\n      return [];\n    }\n\n    if (current.ancestors.length === 1) {\n      variants.map(variant => {\n        if (typeof variant.ancestors[1] === \"string\" &&\n          variant.ancestors[1] === current._id &&\n          variant.optionTitle &&\n          variant.type !== \"inventory\") {\n          childVariants.push(variant);\n        }\n      });\n    } else {\n      // TODO not sure we need this part...\n      variants.map(variant => {\n        if (typeof variant.ancestors[1] === \"string\" &&\n          variant.ancestors.length === current.ancestors.length &&\n          variant.ancestors[1] === current.ancestors[1] &&\n          variant.optionTitle\n        ) {\n          childVariants.push(variant);\n        }\n      });\n    }\n\n    return childVariants;\n  }\n\n  return null;\n}\n","import \"./templates/productDetailSimple.html\";\nimport \"./templates/productDetailSimple.js\";\nimport { registerComponent } from \"/imports/plugins/core/layout/lib/components\";\n\nimport {\n  ProductField,\n  ProductTags,\n  ProductMetadata,\n  PriceRange,\n  AddToCartButton,\n  ProductNotFound\n} from \"./components\";\n\nimport {\n  Divider\n} from \"/imports/plugins/core/ui/client/components\";\n\nimport {\n  SocialContainer,\n  VariantListContainer\n} from \"./containers\";\n\nimport {\n  AlertContainer,\n  MediaGalleryContainer\n} from \"/imports/plugins/core/ui/client/containers\";\n\n\n// Register PDP components and some others\nregisterComponent({\n  name: \"ProductField\",\n  component: ProductField\n});\n\nregisterComponent({\n  name: \"ProductTags\",\n  component: ProductTags\n});\n\nregisterComponent({\n  name: \"ProductMetadata\",\n  component: ProductMetadata\n});\n\nregisterComponent({\n  name: \"PriceRange\",\n  component: PriceRange\n});\n\nregisterComponent({\n  name: \"AlertContainer\",\n  component: AlertContainer\n});\n\nregisterComponent({\n  name: \"MediaGalleryContainer\",\n  component: MediaGalleryContainer\n});\n\nregisterComponent({\n  name: \"SocialContainer\",\n  component: SocialContainer\n});\n\nregisterComponent({\n  name: \"VariantListContainer\",\n  component: VariantListContainer\n});\n\nregisterComponent({\n  name: \"AddToCartButton\",\n  component: AddToCartButton\n});\n\nregisterComponent({\n  name: \"Divider\",\n  component: Divider\n});\n\nregisterComponent({\n  name: \"ProductNotFound\",\n  component: ProductNotFound\n});\n","import { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { SearchPackageConfig } from \"../../lib/collections/schemas\";\n\n\nTemplate.searchSettings.helpers({\n  SearchPackageConfig() {\n    return SearchPackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-search\",\n      shopId: Reaction.getShopId()\n    });\n  }\n});\n\n\nTemplate.searchSettings.events({\n  \"click [data-event-action=showSearchSettings]\"() {\n    Reaction.showActionView();\n  }\n});\n\nAutoForm.hooks({\n  \"search-update-form\": {\n    /* eslint-disable no-unused-vars*/\n    onSuccess: function () {\n      Alerts.removeSeen();\n      return Alerts.toast(i18next.t(\"searchSettings.settingsSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      Alerts.removeSeen();\n      return Alerts.toast(\n        `${i18next.t(\"searchSettings.settingsFailed\")} ${error}`, \"error\"\n      );\n    }\n    /* eslint-enable no-unused-vars*/\n  }\n});\n","import \"./settings/search.html\";\nimport \"./settings/search.js\";\n\n","export * from \"./search\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\n\nexport const SearchPackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.products.includes.title\": {\n      type: Boolean,\n      defaultValue: true,\n      label: \"Include title\"\n    },\n    \"settings.products.weights.title\": {\n      type: Number,\n      label: \"Title weight\",\n      defaultValue: 10,\n      max: 10,\n      min: 1\n    },\n    \"settings.products.includes.description\": {\n      type: Boolean,\n      label: \"Include description\",\n      defaultValue: true\n    },\n    \"settings.products.weights.description\": {\n      type: Number,\n      label: \"Desc. weight\",\n      defaultValue: 5,\n      max: 10,\n      min: 1\n    },\n    \"settings.products.includes.pageTitle\": {\n      type: Boolean,\n      label: \"Include page title\",\n      defaultValue: false\n    },\n    \"settings.products.weights.pageTitle\": {\n      type: Number,\n      label: \"Page title weight\",\n      defaultValue: 2,\n      max: 10,\n      min: 1\n    },\n    \"settings.products.includes.metafields\": {\n      type: Boolean,\n      label: \"Include details\",\n      defaultValue: true\n    },\n    \"settings.products.weights.metafields\": {\n      type: Number,\n      label: \"Details weight\",\n      defaultValue: 6,\n      max: 10,\n      min: 1\n    },\n    \"settings.products.includes.vendor\": {\n      type: Boolean,\n      label: \"Include vendor\",\n      defaultValue: true\n    },\n    \"settings.products.weights.vendor\": {\n      type: Number,\n      label: \"Vendor weight\",\n      defaultValue: 6,\n      max: 10,\n      min: 1\n    }\n  }\n]);\n","import { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Shipping } from \"/lib/collections\";\nimport { i18next } from \"/client/api\";\nimport { Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\nimport ShippoTableColumn from \"./shippoTableColumn\";\nimport React from \"react\";\n\nimport \"./carriers.html\";\n\nTemplate.shippoCarriers.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Shipping\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.shippoCarriers.helpers({\n  carrierGrid() {\n    const filteredFields = [\"name\", \"carrier\", \"label\", \"enabled\"];\n    const noDataMessage = i18next.t(\"admin.shippingSettings.noCarriersFound\");\n    const instance = Template.instance();\n\n    // griddle helper to select row\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is shipping rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    // add shipping-carriers-grid-row class\n    const customRowMetaData = {\n      bodyCssClassName: () =>  {\n        return \"shipping-carriers-grid-row\";\n      }\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach(function (field) {\n      let colWidth = undefined;\n      let colStyle = undefined;\n      let colClassName = undefined;\n\n      if (field === \"enabled\") {\n        colWidth = undefined;\n        colStyle = { textAlign: \"center\" };\n        colClassName = \"shippo-carrier-status\";\n      }\n\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.shippingGrid.${field}`),\n        Cell: row => ( // eslint-disable-line\n          <ShippoTableColumn row={row} />\n        ),\n        className: colClassName,\n        width: colWidth,\n        style: colStyle\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // filter and extract shipping methods\n    // from flat rate shipping provider\n    function transform(results) {\n      const result = [];\n      for (const method of results) {\n        if (method.provider && typeof method.provider.shippoProvider === \"object\") {\n          method.provider.carrier = method.name;\n          result.push(method.provider);\n        }\n      }\n      return result;\n    }\n\n    // return shipping Grid\n    return {\n      component: SortableTable,\n      publication: \"Shipping\",\n      transform: transform,\n      collection: Shipping,\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields: filteredFields,\n      columns: filteredFields,\n      noDataMessage: noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n\n  shippoCarrier() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const shippoCarriers = Shipping.findOne({ \"provider._id\": id });\n    return shippoCarriers.provider;\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.shippoCarriers.events({\n  \"submit #shipping-carrier-insert-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .shipping-carriers-grid-row .active\": function () {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    $(\".shipping-carriers-grid-row\").removeClass(\"active\");\n  },\n  \"click .shipping-carriers-grid-row\": function (event) {\n    // toggle all rows off, then add our active row\n    $(\".shipping-carriers-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n//\n// Hooks for update and insert forms\n//\nAutoForm.hooks({\n  \"shipping-carrier-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.shippingSettings.carrierSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.shippingSettings.carrierFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { ShippoPackageConfig } from \"../../lib/collections/schemas\";\n\nimport \"./shippo.html\";\n\nTemplate.shippoSettings.helpers({\n  packageData() {\n    return Packages.findOne({\n      name: \"reaction-shippo\",\n      shopId: Reaction.getShopId()\n    });\n  },\n  ShippoPackageConfig() {\n    return ShippoPackageConfig;\n  }\n});\n\nTemplate.shippoSettings.events({\n  \"click [data-event-action=fetchShippoProviders]\"(event) {\n    event.preventDefault();\n    Meteor.call(\"shippo/fetchProviders\");\n  }\n});\n\nAutoForm.hooks({\n  \"shippo-update-form\": {\n    onSuccess(formType, result) {\n      Alerts.removeSeen();\n      const successMsg = (result.type === \"delete\") ? i18next.t(\"admin.settings.saveSuccess\") :\n        i18next.t(\"shippo.connectedAndSaved\");\n\n      return Alerts.toast(successMsg, \"success\", {\n        autoHide: true\n      });\n    },\n    onError(operation, error) {\n      Alerts.removeSeen();\n\n      return Alerts.toast(`Shippo settings update failed. ${error}`, \"error\");\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Icon } from \"/imports/plugins/core/ui/client/components\";\n\nclass ShippoTableColumn extends Component {\n  static propTypes = {\n    data: PropTypes.object,\n    row: PropTypes.object\n  }\n\n  render() {\n    const { row } = this.props;\n\n    const renderColumn = row.column.id;\n\n    if (renderColumn === \"enabled\") {\n      if (row.value === true) {\n        return (\n          <span>\n            <Icon icon=\"fa fa-check\" className=\"enabled\" />\n          </span>\n        );\n      }\n      return (\n        <span>\n          <Icon icon=\"fa fa-check\" className=\"disabled\" />\n        </span>\n      );\n    }\n    return (\n      <span>{row.value}</span>\n    );\n  }\n}\n\nexport default ShippoTableColumn;\n","import \"./settings/shippo\";\nimport \"./settings/carriers\";\n","export * from \"./shippo\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\n\nexport const ShippoPackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.apiKey\": {\n      type: String,\n      label: \"API Key\",\n      min: 10,\n      optional: true\n    }\n  }\n]);\n","import { Template } from \"meteor/templating\";\nimport SmsSettings from \"../containers/smsSettingsContainer\";\n\nTemplate.smsSettings.helpers({\n  SmsSettings() {\n    return {\n      component: SmsSettings\n    };\n  }\n});\n","export { default as settings } from \"./settings\";\n","import Alert from \"sweetalert2\";\nimport { Meteor } from \"meteor/meteor\";\nimport { i18next } from \"/client/api\";\n\nexport default {\n\n  /**\n   * Save email settings\n   * @param {Object} settings - object of mail provider settings\n   * @param {Function} callback - optional callback\n   * @return {Boolean} returns true if all fields provided and update method called\n   */\n  saveSettings(settings, callback) {\n    const { apiKey, apiToken, smsProvider, smsPhone } = settings;\n\n    if (!apiKey) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"admin.alerts.noApiKey\"), \"error\");\n      return callback();\n    }\n    if (!apiToken) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"admin.alerts.noApiToken\"), \"error\");\n      return callback();\n    }\n    if (!smsProvider) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"admin.alerts.noSmsProvider\"), \"error\");\n      return callback();\n    }\n    if (!smsPhone) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"admin.alerts.noSmsPhone\"), \"error\");\n      return callback();\n    }\n\n    const save = () => {\n      Meteor.call(\"sms/saveSettings\", settings, (err) => {\n        if (err) {\n          return Alert(i18next.t(\"app.error\"),\n            \"Your API credentials could not be saved\",\n            \"error\");\n        }\n        return Alert({\n          title: i18next.t(\"app.success\"),\n          text: i18next.t(\"admin.alerts.saveSuccess\"),\n          type: \"success\",\n          timer: 1700\n        }).catch(() => null);\n      });\n    };\n    save();\n    return callback();\n  }\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport { Button, Card, CardHeader, CardBody, CardGroup, TextField, Select } from \"/imports/plugins/core/ui/client/components\";\n\nclass SmsSettings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: props.settings || {},\n      isSaving: false\n    };\n    this.handleStateChange = this.handleStateChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n  }\n\n  handleStateChange(e) {\n    const { settings } = this.state;\n    settings[e.target.name] = e.target.value;\n    this.setState({ settings });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const { saveSettings } = this.props;\n    const { settings } = this.state;\n    this.setState({ isSaving: true });\n    saveSettings(settings, () => this.setState({ isSaving: false }));\n  }\n\n  handleSelect(e) {\n    const { settings } = this.state;\n    settings.smsProvider = e;\n    this.setState({ settings });\n  }\n\n  handleProductFieldSave = (productId, fieldName, value) => {\n    let updateValue = value;\n    // special case, slugify handles.\n    if (fieldName === \"handle\") {\n      updateValue = Reaction.getSlug(value);\n    }\n    Meteor.call(\"products/updateProductField\", productId, fieldName, updateValue);\n  }\n\n\n  render() {\n    const settings = this.state.settings;\n    const isSaving = this.state.isSaving;\n\n    const smsProviders = [{\n      label: \"Twilio\", value: \"twilio\"\n    }, {\n      label: \"Nexmo\", value: \"nexmo\"\n    }];\n\n    return (\n      <CardGroup>\n        <Card\n          expanded={true}\n        >\n          <CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"admin.settings.smsProvider\"\n            title=\"SMS Provider\"\n          />\n          <CardBody expandable={true}>\n            <form onSubmit={this.handleSubmit}>\n              <Select\n                clearable={false}\n                label=\"Provider Name\"\n                i18nKeyLabel=\"admin.settings.providerName\"\n                placeholder=\"Select an SMS provider\"\n                i18nKeyPlaceholder=\"admin.settings.selectProvider\"\n                name=\"smsProvider\"\n                onChange={this.handleSelect}\n                options={smsProviders}\n                value={settings.smsProvider || \"\"}\n              />\n              <hr/>\n              <TextField\n                label=\"SMS Phone Number\"\n                type=\"text\"\n                i18nKeyLabel=\"admin.settings.phoneNumber\"\n                name=\"smsPhone\"\n                value={settings.smsPhone || \"\"}\n                onChange={this.handleStateChange}\n              />\n              <TextField\n                label=\"API Key\"\n                type=\"password\"\n                i18nKeyLabel=\"admin.settings.apiKey\"\n                name=\"apiKey\"\n                value={settings.apiKey || \"\"}\n                onChange={this.handleStateChange}\n              />\n              <TextField\n                label=\"API Token/Secret\"\n                type=\"password\"\n                i18nKeyLabel=\"admin.settings.apiToken\"\n                name=\"apiToken\"\n                value={settings.apiToken || \"\"}\n                onChange={this.handleStateChange}\n              />\n              <Button\n                bezelStyle=\"solid\"\n                status=\"primary\"\n                className=\"pull-right\"\n                type=\"submit\" disabled={isSaving}\n              >\n                {isSaving ?\n                  <i className=\"fa fa-refresh fa-spin\"/>\n                  : <span data-i18n=\"app.save\">Save</span>}\n              </Button>\n            </form>\n          </CardBody>\n        </Card>\n      </CardGroup>\n    );\n  }\n}\n\nSmsSettings.propTypes = {\n  saveSettings: PropTypes.func.isRequired,\n  settings: PropTypes.shape({\n    apiKey: PropTypes.string,\n    apiToken: PropTypes.string,\n    smsPhone: PropTypes.string,\n    smsProvider: PropTypes.string\n  })\n};\n\nexport default SmsSettings;\n","import { composeWithTracker, merge } from \"/lib/api/compose\";\nimport { useDeps } from \"react-simple-di\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { Sms } from \"/lib/collections\";\nimport actions from \"../actions\";\nimport SmsSettings from \"../components/smsSettings\";\n\n\nconst composer = ({}, onData) => {\n  if (Meteor.subscribe(\"SmsSettings\").ready()) {\n    const settings = Sms.findOne();\n    onData(null, { settings: settings });\n  }\n};\n\nconst depsMapper = () => ({\n  saveSettings: actions.settings.saveSettings\n});\n\nexport default merge(\n  composeWithTracker(composer, Loading),\n  useDeps(depsMapper)\n)(SmsSettings);\n","import \"./templates/smsSettings.html\";\nimport \"./templates/smsSettings.js\";\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages, Accounts } from \"/lib/collections\";\nimport { Accounts as AccountsSchema } from \"/lib/collections/schemas/accounts\";\nimport { TaxEntityCodes } from \"/client/collections\";\n\nlet entityCodeList = [];\nlet currentAccount;\n\nTemplate.taxSettingsPanel.onCreated(function () {\n  this.subscribe(\"UserAccount\", Meteor.userId());\n});\n\nTemplate.taxSettingsPanel.helpers({\n  account() {\n    if (Template.instance().subscriptionsReady()) {\n      const account = Accounts.findOne(this.member.userId);\n      currentAccount = account;\n      return account;\n    }\n\n    return null;\n  },\n  makeUniqueId() {\n    return `tax-settings-form-${this.member.userId}`;\n  },\n  accountsSchema() {\n    return AccountsSchema;\n  },\n  entityCodes() {\n    const customOption = [{\n      label: i18next.t(\"admin.taxSettings.entityCodeCustomLabel\"),\n      value: \"CUSTOM USER INPUT\"\n    }];\n\n    const entityCodes = TaxEntityCodes.find().map((entityCode) => {\n      return Object.assign({}, entityCode, {\n        label: entityCode.name,\n        value: entityCode.code\n      });\n    });\n    entityCodeList = (entityCodes || []).map((a) => a.code);\n    return (entityCodes || []).concat(customOption);\n  }\n});\n\nTemplate.taxSettingsPanel.events({\n  \"change [data-event-action=customType]\": function (event) {\n    event.stopPropagation();\n    const formId = $(event.currentTarget.closest(\"form\")).attr(\"id\");\n\n    if (isCustomValue(formId)) {\n      // show input field for custom; pre-fill with existing custom val\n      const currType = _.get(currentAccount, \"taxSettings.customerUsageType\", \"\");\n      if (entityCodeList.indexOf(currType) < 0) {\n        $(\".customerUsageType input\").val(currType);\n      }\n      return $(\".customerUsageType\").toggleClass(\"hide\");\n    }\n\n    $(\".customerUsageType\").addClass(\"hide\");\n  }\n});\n\nTemplate.taxSettingsPanel.onCreated(function () {\n  const avalaraPackage = Packages.findOne({\n    name: \"taxes-avalara\",\n    shopId: Reaction.getShopId()\n  });\n  const isAvalaraEnabled = _.get(avalaraPackage, \"settings.avalara.enabled\", false);\n  const currentCodes = TaxEntityCodes.find().fetch();\n\n  if (isAvalaraEnabled && !currentCodes.length) {\n    Meteor.call(\"avalara/getEntityCodes\", (error, entityCodes) => {\n      if (error) {\n        return Alerts.toast(\n          `${i18next.t(\"settings.apiError\")} ${error.message}`, \"error\"\n        );\n      }\n      (entityCodes || []).forEach((entityCode) => TaxEntityCodes.insert(entityCode));\n    });\n  }\n});\n\nAutoForm.addHooks(null, {\n  before: {\n    update: function (doc) {\n      const oldType = _.get(Template.instance(), \"data.doc.taxSettings.customerUsageType\");\n      if (isCustomValue()) {\n        const value = $(\".customerUsageType input\").val();\n        doc.$set[\"taxSettings.customerUsageType\"] = value;\n      }\n      if (oldType && entityCodeList.indexOf(oldType) < 0) {\n        delete doc.$unset; // there's existing custom value.... this prevent autoform override\n      }\n\n      return doc;\n    }\n  }\n});\n\n/**\n * @summary Checks if customerUsageType is set to \"custom\"\n * @param {String} formId - Id of the Autoform instance..\n * @returns {boolean} - true if Custom Entity Type is set\n */\nfunction isCustomValue(formId) {\n  const formData = AutoForm.getFormValues(formId);\n  const value = _.get(formData, \"insertDoc.taxSettings.customerUsageType\");\n  return value === \"CUSTOM USER INPUT\";\n}\n","import _ from \"lodash\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Meteor } from \"meteor/meteor\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Countries } from \"/client/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages, Logs } from \"/lib/collections\";\nimport { Logs as LogSchema } from \"/lib/collections/schemas/logs\";\nimport { AvalaraPackageConfig } from \"../../lib/collections/schemas\";\nimport { Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\n\n\nfunction getPackageData() {\n  return Packages.findOne({\n    name: \"taxes-avalara\",\n    shopId: Reaction.getShopId()\n  });\n}\n\n\nTemplate.avalaraSettings.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Logs\", {\n      logType: \"avalara\"\n    });\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\n// Avalara supports only Canada and US for address validation\nconst countryDefaults = [\"US\", \"CA\"];\n\nTemplate.avalaraSettings.helpers({\n  packageConfigSchema() {\n    return AvalaraPackageConfig;\n  },\n  packageData() {\n    return getPackageData();\n  },\n  logSchema() {\n    return LogSchema;\n  },\n  logCollection() {\n    return Logs;\n  },\n  countryOptions() {\n    return Countries.find({ value: { $in: countryDefaults } }).fetch();\n  },\n  countryDefaults() {\n    return countryDefaults;\n  },\n  currentCountryList() {\n    return AutoForm.getFieldValue(\"settings.addressValidation.countryList\");\n  },\n  loggingEnabled() {\n    const pkgData = getPackageData();\n    return pkgData.settings.avalara.enableLogging;\n  },\n\n  logGrid() {\n    const filteredFields = [ \"data.request.data.date\", \"data.request.data.type\"];\n    const noDataMessage = i18next.t(\"logGrid.noLogsFound\");\n    const instance = Template.instance();\n\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    // helper adds a class to every grid row\n    const customRowMetaData = {\n      bodyCssClassName: () =>  {\n        return \"log-grid-row\";\n      }\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach(function (field) {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`logGrid.columns.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return template Grid\n    return {\n      component: SortableTable,\n      publication: \"Logs\",\n      collection: Logs,\n      matchingResultsCount: \"logs-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields: filteredFields,\n      columns: filteredFields,\n      noDataMessage: noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading,\n      query: { logType: \"avalara\" }\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n\n  logEntry() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const log = Logs.findOne(id) || {};\n    log.data = JSON.stringify(log.data, null, 4);\n    return log;\n  }\n\n\n});\n\nTemplate.avalaraSettings.events({\n  \"click .template-grid-row\": function (event) {\n    // toggle all rows off, then add our active row\n    $(\".template-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  },\n  \"click [data-event-action=testCredentials]\": function (event) {\n    const formId = \"avalara-update-form\";\n    if (!AutoForm.validateForm(formId)) {\n      return null;\n    }\n    event.preventDefault();\n    event.stopPropagation();\n    const formData = AutoForm.getFormValues(formId);\n    const settings = _.get(formData, \"insertDoc.settings.avalara\");\n\n    Meteor.call(\"avalara/testCredentials\", settings, function (error, result) {\n      if (error && error.message) {\n        return Alerts.toast(`${i18next.t(\"settings.testCredentialsFailed\")} ${error.message}`, \"error\");\n      }\n      const statusCode = _.get(result, \"statusCode\");\n      const connectionValid = _.inRange(statusCode, 400);\n      if (connectionValid) {\n        return Alerts.toast(i18next.t(\"settings.testCredentialsSuccess\"), \"success\");\n      }\n      return Alerts.toast(i18next.t(\"settings.testCredentialsFailed\"), \"error\");\n    });\n  }\n});\n\nAutoForm.hooks({\n  \"avalara-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopTaxMethodsSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.taxSettings.shopTaxMethodsFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import \"./settings/avalara.html\";\nimport \"./accounts/exemption.html\";\nimport \"./settings/avalara.js\";\nimport \"./accounts/exemption.js\";\nimport \"./styles/settings.less\";\n","export * from \"./schema\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { TaxPackageConfig } from \"/imports/plugins/core/taxes/lib/collections/schemas\";\n\n/**\n* TaxPackageConfig Schema\n*/\n\nexport const AvalaraPackageConfig = new SimpleSchema([\n  TaxPackageConfig, {\n    \"settings.avalara\": {\n      type: Object,\n      optional: true\n    },\n    \"settings.avalara.enabled\": {\n      type: Boolean,\n      optional: true,\n      defaultValue: false\n    },\n    \"settings.avalara.apiLoginId\": {\n      type: String,\n      label: \"Avalara API Login ID\"\n    },\n    \"settings.avalara.username\": {\n      type: String\n    },\n    \"settings.avalara.companyCode\": {\n      type: String\n    },\n    \"settings.avalara.companyId\": {\n      type: String\n    },\n    \"settings.avalara.password\": {\n      type: String\n    },\n    \"settings.avalara.mode\": {\n      label: \"Production Mode\",\n      type: Boolean,\n      defaultValue: false\n    },\n    \"settings.avalara.shippingTaxCode\": {\n      label: \"Shipping Tax Code\",\n      type: String\n    },\n    \"settings.addressValidation.enabled\": {\n      label: \"Address Validation\",\n      type: Boolean,\n      defaultValue: true\n    },\n    \"settings.avalara.commitDocuments\": {\n      label: \"Commit Documents\",\n      type: Boolean,\n      defaultValue: true\n    },\n    \"settings.avalara.performTaxCalculation\": {\n      label: \"Perform Tax Calculation\",\n      type: Boolean,\n      defaultValue: true\n    },\n    \"settings.avalara.enableLogging\": {\n      label: \"Enable Transaction Logging\",\n      type: Boolean,\n      defaultValue: false\n    },\n    \"settings.avalara.logRetentionDuration\": {\n      label: \"Retain Logs Duration (Days)\",\n      type: Number,\n      defaultValue: 30\n    },\n    \"settings.avalara.requestTimeout\": {\n      label: \"Request Timeout\",\n      type: Number,\n      defaultValue: 1500\n    },\n    \"settings.addressValidation.countryList\": {\n      label: \"Enable Address Validation by Country\",\n      type: [String],\n      optional: true\n    }\n  }\n]);\n","import { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Packages } from \"/lib/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { TaxCloudPackageConfig } from \"../../lib/collections/schemas\";\n\nTemplate.taxCloudSettings.helpers({\n  packageConfigSchema() {\n    return TaxCloudPackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"taxes-taxcloud\",\n      shopId: Reaction.getShopId()\n    });\n  }\n});\n\n\nAutoForm.hooks({\n  \"taxcloud-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopTaxMethodsSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.taxSettings.shopTaxMethodsFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import \"./settings/taxcloud.html\";\nimport \"./settings/taxcloud.js\";\n","export * from \"./schema\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { TaxPackageConfig } from \"/imports/plugins/core/taxes/lib/collections/schemas\";\n\n/**\n* TaxPackageConfig Schema\n*/\n\nexport const TaxCloudPackageConfig = new SimpleSchema([\n  TaxPackageConfig, {\n    \"settings.taxcloud\": {\n      type: Object,\n      optional: true\n    },\n    \"settings.taxcloud.enabled\": {\n      type: Boolean,\n      optional: true,\n      defaultValue: false\n    },\n    \"settings.taxcloud.apiLoginId\": {\n      type: String,\n      label: \"TaxCloud API Login ID\"\n    },\n    \"settings.taxcloud.apiKey\": {\n      type: String,\n      label: \"TaxCloud API Key\"\n    },\n    \"settings.taxcloud.refreshPeriod\": {\n      type: String,\n      label: \"TaxCode Refresh Period\",\n      defaultValue: \"every 7 days\",\n      optional: true\n    },\n    \"settings.taxcloud.taxCodeUrl\": {\n      type: String,\n      label: \"TaxCode API Url\",\n      defaultValue: \"https://taxcloud.net/tic/?format=json\",\n      optional: true\n    }\n  }\n]);\n","import { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Packages } from \"/lib/collections\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { TaxJarPackageConfig } from \"../../lib/collections/schemas\";\n\nTemplate.taxJarSettings.helpers({\n  packageConfigSchema() {\n    return TaxJarPackageConfig;\n  },\n  packageData() {\n    return Packages.findOne({\n      name: \"taxes-taxjar\",\n      shopId: Reaction.getShopId()\n    });\n  }\n});\n\n\nAutoForm.hooks({\n  \"taxjar-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopTaxMethodsSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.taxSettings.shopTaxMethodsFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import \"./settings/taxjar.html\";\nimport \"./settings/taxjar.js\";\n","export * from \"./schema\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { TaxPackageConfig } from \"/imports/plugins/core/taxes/lib/collections/schemas\";\n\n/**\n* TaxPackageConfig Schema\n*/\n\nexport const TaxJarPackageConfig = new SimpleSchema([\n  TaxPackageConfig, {\n    \"settings.taxjar\": {\n      type: Object,\n      optional: true\n    },\n    \"settings.taxjar.enabled\": {\n      type: Boolean,\n      optional: true,\n      defaultValue: false\n    },\n    \"settings.taxjar.apiLoginId\": {\n      type: String,\n      label: \"TaxJar API Login ID\",\n      optional: true\n    }\n  }\n]);\n","/**\n * Set up default Reaction favicon for all browsers/platforms\n * Assets generated by https://realfavicongenerator.net\n */\n\n\n// folder path where all assets live\nconst basePath = \"https://assets.reactioncommerce.com/favicon/\";\n\n\n// define link tags\nconst linkTags = [\n  {\n    rel: \"apple-touch-icon\",\n    sizes: \"180x180\",\n    href: basePath + \"apple-touch-icon.png\"\n  },\n  {\n    rel: \"icon\",\n    type: \"image/png\",\n    sizes: \"32x32\",\n    href: basePath + \"favicon-32x32.png\"\n  },\n  {\n    rel: \"icon\",\n    type: \"image/png\",\n    sizes: \"16x16\",\n    href: basePath + \"favicon-16x16.png\"\n  },\n  {\n    rel: \"manifest\",\n    href: basePath + \"manifest.json\"\n  },\n  {\n    rel: \"mask-icon\",\n    color: \"#5bbad5\",\n    href: basePath + \"safari-pinned-tab.svg\"\n  },\n  {\n    rel: \"shortcut icon\",\n    href: basePath + \"favicon.ico\"\n  }\n];\n\n\n// define meta tags\nconst metaTags = [\n  {\n    name: \"msapplication-config\",\n    content: basePath + \"browserconfig.xml\"\n  },\n  {\n    name: \"theme-color\",\n    content: \"#ffffff\"\n  }\n];\n\n\n/**\n * Add a tag to the <head> of the page\n * @param {String} type - tag type (link, meta, etc.)\n * @param {Object} details - key/value pairs for tag attributes\n * @return {undefined} no return value\n */\nfunction addTag(type, details) {\n  let props = \"\";\n  for (const key in details) {\n    if ({}.hasOwnProperty.call(details, key)) {\n      props += `${key}=\"${details[key]}\" `;\n    }\n  }\n  const tag = `<${type} ${props}/>`;\n  document.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", tag);\n}\n\n\n// add the favicon tags to the <head>\nlinkTags.forEach(tag => addTag(\"link\", tag));\nmetaTags.forEach(tag => addTag(\"meta\", tag));\n\n\n// HTML output should look like this...\n//\n// <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"https://assets.reactioncommerce.com/favicon/apple-touch-icon.png\">\n// <link rel=\"icon\" type=\"image/png\" href=\"https://assets.reactioncommerce.com/favicon/favicon-32x32.png\" sizes=\"32x32\">\n// <link rel=\"icon\" type=\"image/png\" href=\"https://assets.reactioncommerce.com/favicon/favicon-16x16.png\" sizes=\"16x16\">\n// <link rel=\"manifest\" href=\"https://assets.reactioncommerce.com/favicon/manifest.json\">\n// <link rel=\"mask-icon\" href=\"https://assets.reactioncommerce.com/favicon/safari-pinned-tab.svg\" color=\"#5bbad5\">\n// <link rel=\"shortcut icon\" href=\"https://assets.reactioncommerce.com/favicon/favicon.ico\">\n// <meta name=\"msapplication-config\" content=\"https://assets.reactioncommerce.com/favicon/browserconfig.xml\">\n// <meta name=\"theme-color\" content=\"#ffffff\">\n","// Favicons\nimport \"./favicons\";\n\n// Scripts\nimport \"bootstrap/dist/js/npm.js\";\n","import { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\nimport { check } from \"meteor/check\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Orders } from \"/lib/collections\";\n\n\n/**\n * cartCompleted helpers\n *\n * if order status = new translate submitted message\n */\nTemplate.cartCompleted.helpers({\n  orderCompleted: function () {\n    const id = Reaction.Router.getQueryParam(\"_id\");\n    if (id) {\n      const ccoSub = Meteor.subscribe(\"CompletedCartOrder\", Meteor.userId(), id);\n      if (ccoSub.ready()) {\n        return true;\n      }\n    }\n    return false;\n  },\n  order: function () {\n    return Orders.findOne({\n      userId: Meteor.userId(),\n      cartId: Reaction.Router.getQueryParam(\"_id\")\n    });\n  },\n  orderStatus: function () {\n    switch (this.workflow.status) {\n      case \"new\":\n        return i18next.t(\"cartCompleted.submitted\");\n      case \"coreOrderWorkflow/processing\":\n        return i18next.t(\"cartCompleted.processing\");\n      case \"coreOrderWorkflow/completed\":\n        return i18next.t(\"cartCompleted.completed\");\n      default:\n        return this.workflow.status;\n    }\n  },\n  userOrders: function () {\n    if (Meteor.user()) {\n      return Orders.find({\n        userId: Meteor.userId(),\n        cartId: this._id\n      });\n    }\n    return {};\n  }\n});\n\n/**\n * cartCompleted events\n *\n * adds email to order\n */\nTemplate.cartCompleted.events({\n  \"click #update-order\": function () {\n    const templateInstance = Template.instance();\n    const email = templateInstance.find(\"input[name=email]\").value;\n    check(email, String);\n    const cartId = Reaction.Router.getQueryParam(\"_id\");\n\n    return Meteor.call(\"orders/addOrderEmail\", cartId, email, (err) => {\n      if (err) {\n        Alerts.toast(i18next.t(\"mail.alerts.cantSendEmail\"), \"error\");\n      } else {\n        const order = Orders.findOne({\n          userId: Meteor.userId(),\n          cartId: Reaction.Router.getQueryParam(\"_id\")\n        });\n        Meteor.call(\"orders/sendNotification\", order);\n      }\n    });\n  }\n});\n\n/**\n * cartCompleted onCreated\n *\n * when the order is completed we need to destroy and recreate\n * the subscription to get the new cart\n */\nTemplate.cartCompleted.onCreated(function () {\n  const sessionId = Session.get(\"sessionId\");\n  const userId = Meteor.userId();\n  const cartSub = Reaction.Subscriptions.Cart = Meteor.subscribe(\"Cart\", sessionId, userId);\n  cartSub.stop();\n  Reaction.Subscriptions.Cart = Meteor.subscribe(\"Cart\", sessionId, userId);\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Reaction } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\n\n\n/**\n * checkoutLoginCompleted\n * returns true if we've already past this stage,\n * or if the user is a guest but not anonymous\n */\n\nTemplate.checkoutLogin.helpers({\n  checkoutLoginCompleted: function () {\n    const self = this;\n    const cart = Cart.findOne();\n    if (cart && cart.workflow) {\n      const currentStatus = cart.workflow.status;\n      const guestUser = Reaction.hasPermission(\"guest\", Meteor.user());\n      const anonUser = Roles.userIsInRole(\"anonymous\", Meteor.user(), Reaction.getShopId());\n\n      if (currentStatus !== self.template && guestUser === true && anonUser === false) {\n        return true;\n      }\n    }\n    return false;\n  }\n});\n","import _ from \"lodash\";\nimport { Cart } from \"/lib/collections\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * checkoutProgressBar helpers\n * progressbar status: \"visited first\",\"previous visited\",\"active\",\"next\"\n */\n\nTemplate.checkoutProgressBar.helpers({\n  progressbarStatusClass() {\n    const cartWorkflow = Cart.findOne().workflow;\n    const thisStep = cartWorkflow.status === this.template; // active\n    const previouslyVisited = _.includes(cartWorkflow.workflow, this.template);\n\n    if (previouslyVisited === true && thisStep === false) {\n      return \"visited\";\n    } else if (thisStep === true) {\n      return \"visited active\";\n    }\n    return \"\";\n  }\n});\n","import \"./review.html\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport CartSubTotals from \"../../../container/cartSubTotalContainer\";\n\n/**\n* review status\n* trigger checkoutPayment step on template checkoutReview render\n*/\n\nTemplate.checkoutReview.onRendered(function () {\n  Meteor.call(\"workflow/pushCartWorkflow\", \"coreCartWorkflow\", \"checkoutReview\");\n});\n\nTemplate.checkoutReview.helpers({\n  CartSubTotals() {\n    return CartSubTotals;\n  }\n});\n","import { Reaction } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport \"./checkout.html\";\n\n//\n// cartCheckout is a wrapper template\n// controlling the load order of checkout step templates\n//\n\nTemplate.cartCheckout.helpers({\n  cart() {\n    if (Reaction.Subscriptions.Cart.ready()) {\n      return Cart.findOne();\n    }\n    return {};\n  }\n});\n\n\nTemplate.cartCheckout.onCreated(function () {\n  if (Reaction.Subscriptions.Cart.ready()) {\n    const cart = Cart.findOne();\n    if (cart && cart.workflow && cart.workflow.status === \"new\") {\n      // if user logged in as normal user, we must pass it through the first stage\n      Meteor.call(\"workflow/pushCartWorkflow\", \"coreCartWorkflow\", \"checkoutLogin\", cart._id);\n    }\n  }\n});\n\n/**\n * checkoutSteps Helpers\n * helper isPending evaluates that this is\n * the current step, or has been processed already\n */\nTemplate.checkoutSteps.helpers({\n  isCompleted: function () {\n    if (this.status === true) {\n      return this.status;\n    }\n    return false;\n  },\n\n  isPending: function () {\n    if (this.status === this.template) {\n      return this.status;\n    }\n    return false;\n  }\n});\n\n/**\n * checkoutStepBadge Helpers\n */\nTemplate.checkoutStepBadge.helpers({\n  checkoutStepBadgeClass: function () {\n    const workflowStep = Template.instance().data;\n    // let currentStatus = Cart.findOne().workflow.status;\n    if (workflowStep.status === true || workflowStep.status === this.template) {\n      return \"active\";\n    }\n    return \"\";\n  }\n});\n","import { $ } from \"meteor/jquery\";\nimport { Cart } from \"/lib/collections\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\nimport Swiper from \"swiper\";\nimport CartDrawerContainer from \"../../container/cartDrawerContainer\";\nimport EmptyCartDrawer from \"../../container/emptyCartContainer\";\n/**\n * cartDrawer helpers\n *\n * @provides displayCartDrawer\n * @returns  open or closed cart drawer template\n */\n\nTemplate.cartDrawer.helpers({\n  displayCartDrawer: function () {\n    if (!Session.equals(\"displayCart\", true)) {\n      return null;\n    }\n\n    const storedCart = Cart.findOne();\n    let count = 0;\n\n    if (typeof storedCart === \"object\" && storedCart.items) {\n      for (const items of storedCart.items) {\n        count += items.quantity;\n      }\n    }\n\n    if (count === 0) {\n      return Template.emptyCartDrawer;\n    }\n    return Template.openCartDrawer;\n  }\n});\n\n/**\n * openCartDrawer helpers\n *\n */\nTemplate.openCartDrawer.onRendered(function () {\n  /**\n   * Add swiper to openCartDrawer\n   *\n   */\n\n  let swiper;\n\n  $(\"#cart-drawer-container\").fadeIn(() => {\n    if (!swiper) {\n      swiper = new Swiper(\".cart-drawer-swiper-container\", {\n        direction: \"horizontal\",\n        setWrapperSize: true,\n        loop: false,\n        grabCursor: true,\n        slidesPerView: \"auto\",\n        wrapperClass: \"cart-drawer-swiper-wrapper\",\n        slideClass: \"cart-drawer-swiper-slide\",\n        slideActiveClass: \"cart-drawer-swiper-slide-active\",\n        pagination: \".cart-drawer-pagination\",\n        paginationClickable: true\n      });\n    }\n  });\n});\n\nTemplate.openCartDrawer.helpers({\n  CartDrawerContainer() {\n    return CartDrawerContainer;\n  }\n});\n\nTemplate.emptyCartDrawer.onRendered(function () {\n  return $(\"#cart-drawer-container\").fadeIn();\n});\n\nTemplate.emptyCartDrawer.helpers({\n  EmptyCartDrawer() {\n    return EmptyCartDrawer;\n  }\n});\n","import { $ } from \"meteor/jquery\";\nimport { Reaction } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * cartIcon helpers\n *\n */\nTemplate.cartIcon.helpers({\n  cart() {\n    return Cart.findOne();\n  }\n});\n\nTemplate.cartIcon.events({\n  \"click .cart-icon\"() {\n    return $(\"#cart-drawer-container\").fadeOut(300, function () {\n      return Reaction.toggleSession(\"displayCart\");\n    });\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"/imports/plugins/core/ui/client/components\";\n\nclass CartPanel extends Component {\n  render() {\n    return (\n      <div style={{ textAlign: \"center\" }}>\n        <span id=\"spin\" >\n          <i className=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\"\n            style={{ marginBottom: \"10px\", marginTop: \"10px\", fontSize: \"2.65em\" }}\n          />\n        </span>\n        <div className=\"cart-alert-text\">{}</div>\n        <div className=\"cart-alert-checkout\">\n          <Button\n            id=\"btn-checkout\"\n            bezelStyle=\"solid\"\n            className=\"btn-lg btn-block\"\n            i18nKeyLabel=\"cartDrawer.checkout\"\n            label=\"Checkout now\"\n            onClick={this.props.onClick || this.props.checkout}\n            status=\"success\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nCartPanel.propTypes = {\n  checkout: PropTypes.func,\n  onClick: PropTypes.func\n};\n\nexport default CartPanel;\n","import React, { Component } from \"react\";\nimport { $ } from \"meteor/jquery\";\nimport { Session } from \"meteor/session\";\nimport { Reaction } from \"/client/api\";\nimport CartPanel from \"../component/cartPanel\";\n\nclass CartPanelContainer extends Component {\n  handleCheckout() {\n    $(\"#cart-drawer-container\").fadeOut();\n    Session.set(\"displayCart\", false);\n    return Reaction.Router.go(\"cart/checkout\");\n  }\n  render() {\n    return (\n      <CartPanel\n        checkout={this.handleCheckout}\n      />\n    );\n  }\n}\n\nexport default CartPanelContainer;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport CartSubTotals from \"../container/cartSubTotalContainer\";\nimport CartItems from \"./cartItems\";\n\nconst cartDrawer = ({ productItems, pdpPath, handleRemoveItem, handleCheckout, handleImage, handleLowInventory, handleShowProduct }) => {\n  return (\n    <div>\n      <div className=\"cart-drawer-swiper-container\">\n        <div className=\"cart-drawer-swiper-wrapper\">\n          <div className=\"cart-drawer-swiper-slide\">\n            <CartSubTotals />\n          </div>\n          {productItems.map(item => {\n            return (\n              <div className=\"cart-drawer-swiper-slide\" key={item._id}>\n                <CartItems\n                  item={item}\n                  pdpPath={pdpPath}\n                  handleLowInventory={handleLowInventory}\n                  handleImage={handleImage}\n                  handleRemoveItem={handleRemoveItem}\n                  handleShowProduct={handleShowProduct}\n                />\n              </div>\n            );\n          })}\n        </div>\n      </div>\n      <div className=\"cart-drawer-pagination\" />\n      <div className=\"row\">\n        <span className=\"rui btn btn-cta btn-lg btn-block\" id=\"btn-checkout\" data-i18n=\"cartDrawer.checkout\" onClick={handleCheckout}>\n          Checkout now\n        </span>\n      </div>\n    </div>\n  );\n};\n\ncartDrawer.propTypes = {\n  handleCheckout: PropTypes.func,\n  handleImage: PropTypes.func,\n  handleLowInventory: PropTypes.func,\n  handleRemoveItem: PropTypes.func,\n  handleShowProduct: PropTypes.func,\n  pdpPath: PropTypes.func,\n  productItems: PropTypes.array\n};\n\nexport default cartDrawer;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Velocity from \"velocity-animate\";\nimport { Reaction } from \"/client/api\";\n\nclass CartIcon extends Component {\n  static propTypes = {\n    cart: PropTypes.object\n  }\n\n  handleClick = (event) => {\n    event.preventDefault();\n    const cartDrawer = document.querySelector(\"#cart-drawer-container\");\n    Velocity(cartDrawer, { opacity: 1 }, 300, () => {\n      Reaction.toggleSession(\"displayCart\");\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cart-icon\" onClick={this.handleClick}>\n        <span data-event-category=\"cart\">\n          <i className=\"fa fa-shopping-cart fa-2x\" />\n        </span>\n        <div className=\"badge\">{this.props.cart ? this.props.cart.cartCount() : 0}</div>\n      </div>\n    );\n  }\n}\n\nexport default CartIcon;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass CartItems extends Component {\n  static propTypes = {\n    handleImage: PropTypes.func,\n    handleLowInventory: PropTypes.func,\n    handleRemoveItem: PropTypes.func,\n    handleShowProduct: PropTypes.func,\n    item: PropTypes.object,\n    pdpPath: PropTypes.func\n  }\n\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (typeof this.props.handleShowProduct === \"function\") {\n      this.props.handleShowProduct(this.props.item);\n    }\n  }\n\n  render() {\n    const {\n      handleLowInventory,\n      pdpPath,\n      handleImage,\n      handleRemoveItem,\n      item\n    } = this.props;\n\n    return (\n      <div className=\"cart-items\" key={item._id} style={{ display: \"inline-block\" }}>\n        <i className=\"remove-cart-item fa fa-times fa-lg\"\n          id={item._id}\n          onClick={handleRemoveItem}\n        />\n        <a href={pdpPath(item)}\n          data-event-action=\"product-click\"\n          data-event-value={item.productId}\n          onClick={this.handleClick}\n        >\n          {handleImage(item) ?\n            <div className=\"center-cropped\" style={{ backgroundImage: `url(${handleImage(item).url({ store: \"small\" })})` }}>\n              <img src={handleImage(item).url({ store: \"small\" })} className=\"product-grid-item-images img-responsive\" />\n            </div> :\n            <div className=\"center-cropped\" style={{ backgroundImage: \"url('/resources/placeholder.gif')\" }}>\n              <img src=\"/resources/placeholder.gif\" className=\"product-grid-item-images img-responsive\" />\n            </div>\n          }\n        </a>\n        <div className=\"cart-labels\">\n          {handleLowInventory(item) ?\n            <div className=\"badge badge-low-inv-warning\"\n              title={item.variants.inventoryQuantity}\n              data-i18n=\"cartDrawerItems.left\"\n            >!</div> :\n            <div>\n              <span className=\"badge\" style={{ marginRight: \"3px\" }}>{item.quantity}</span>\n              <span className=\"cart-item-title\">\n                {item.title}\n                <br />\n                <small>{item.variants.title}</small>\n              </span>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CartItems;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Currency, Translation } from \"/imports/plugins/core/ui/client/components/\";\n\nclass CartSubTotal extends Component {\n  static propTypes = {\n    cartCount: PropTypes.number,\n    cartDiscount: PropTypes.string,\n    cartShipping: PropTypes.string,\n    cartSubTotal: PropTypes.string,\n    cartTaxes: PropTypes.string,\n    cartTotal: PropTypes.string\n  }\n\n  validateDiscount() {\n    if (Number(this.props.cartDiscount) > 0) {\n      return (\n        <tr>\n          <td><Translation defaultValue=\"Discount\" i18nKey=\"cartSubTotals.discount\" /></td>\n          <td><Currency amount={this.props.cartDiscount} /></td>\n        </tr>\n      );\n    }\n  }\n  validateShipping() {\n    if (Number(this.props.cartShipping) > 0) {\n      return (\n        <tr>\n          <td><Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\" /></td>\n          <td><Currency amount={this.props.cartShipping} /></td>\n        </tr>\n      );\n    }\n  }\n  validateTaxes() {\n    if (Number(this.props.cartTaxes) > 0) {\n      return (\n        <tr>\n          <td><Translation defaultValue=\"Tax\" i18nKey=\"cartSubTotals.tax\" /></td>\n          <td><Currency amount={this.props.cartTaxes} /></td>\n        </tr>\n      );\n    }\n  }\n  render() {\n    return (\n      <div className=\"cart-items\">\n        <div className=\"cart-totals\">\n          <table className=\"table table-condensed\">\n            <thead>\n              <tr><th><Translation defaultValue=\"Your cart\" i18nKey=\"cartSubTotals.head\" /></th></tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td><Translation defaultValue=\"Items in cart\" i18nKey=\"cartSubTotals.items\" /></td>\n                <td>{this.props.cartCount}</td>\n              </tr>\n              <tr>\n                <td><Translation defaultValue=\"Sub total\" i18nKey=\"cartSubTotals.subtotal\" /></td>\n                <td><Currency amount={this.props.cartSubTotal} /></td>\n              </tr>\n              {this.validateDiscount()}\n              {this.validateShipping()}\n              {this.validateTaxes()}\n              <tr>\n                <td><Translation defaultValue=\"Total\" i18nKey=\"cartSubTotals.total\" /></td>\n                <td><Currency amount={this.props.cartTotal} /></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CartSubTotal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Translation } from \"/imports/plugins/core/ui/client/components\";\n\n\nconst EmptyCartDrawer = ({ keepShopping }) => {\n  return (\n    <div className=\"cart-drawer\" id=\"cart-drawer\">\n      <div className=\"cart-drawer-empty\">\n        <div className=\"row cart-drawer-empty-msg\">\n          <p className=\"text-align\">\n            <i className=\"fa fa-frown-o fa-lg\" />\n          </p>\n          <p className=\"text-align\">\n            <Translation defaultValue=\"We're sad. Your cart is empty.\" i18nKey=\"cartDrawer.empty\" />\n          </p>\n        </div>\n        <div className=\"row\">\n          <Button\n            id=\"btn-keep-shopping\"\n            bezelStyle=\"solid\"\n            className=\"btn-lg btn-block\"\n            i18nKeyLabel=\"cartDrawer.keepShopping\"\n            label=\"Keep on shopping\"\n            onClick={keepShopping}\n            status=\"warning\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nEmptyCartDrawer.propTypes = {\n  keepShopping: PropTypes.func\n};\n\nexport default EmptyCartDrawer;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { $ } from \"meteor/jquery\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Cart, Media } from \"/lib/collections\";\nimport { Reaction } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport CartDrawer from \"../components/cartDrawer\";\n\nclass CartDrawerContainer extends Component {\n  static propTypes = {\n    defaultImage: PropTypes.object,\n    lowInventory: PropTypes.bool,\n    productItems: PropTypes.array\n  }\n\n  handleImage(item) {\n    const { defaultImage } = item;\n    if (defaultImage && defaultImage.url({ store: \"small\" })) {\n      return defaultImage;\n    }\n    return false;\n  }\n  /**\n  * showLowInventoryWarning\n  * @param {Object} productItem - product item object\n  * @return {Boolean} return true if low inventory on variant\n  */\n  showItemLowInventoryWarning(productItem) {\n    const { variants } = productItem;\n    if (variants && variants.inventoryPolicy &&\n      variants.lowInventoryWarningThreshold) {\n      return variants.inventoryQuantity <=\n        variants.lowInventoryWarningThreshold;\n    }\n    return false;\n  }\n\n  handleLowInventory = (productItem) => {\n    return this.showItemLowInventoryWarning(productItem);\n  }\n\n  handleShowProduct = (productItem) => {\n    if (productItem) {\n      Reaction.Router.go(\"product\", {\n        handle: productItem.productId,\n        variantId: productItem.variants._id\n      });\n    }\n  }\n\n  pdpPath(productItem) {\n    if (productItem) {\n      const handle = productItem.productId;\n      return Reaction.Router.pathFor(\"product\", {\n        hash: {\n          handle,\n          variantId: productItem.variants._id\n        }\n      });\n    }\n  }\n\n  handleRemoveItem(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    const currentCartItemId = event.target.getAttribute(\"id\");\n    $(`#${currentCartItemId}`).fadeOut(500, () => {\n      return Meteor.call(\"cart/removeFromCart\", currentCartItemId);\n    });\n  }\n  handleCheckout() {\n    $(\"#cart-drawer-container\").fadeOut();\n    Session.set(\"displayCart\", false);\n    return Reaction.Router.go(\"cart/checkout\");\n  }\n  render() {\n    const { productItems } = this.props;\n    return (\n      <CartDrawer\n        productItems={productItems}\n        pdpPath={this.pdpPath}\n        handleLowInventory={this.handleLowInventory}\n        handleImage={this.handleImage}\n        handleRemoveItem={this.handleRemoveItem}\n        handleCheckout={this.handleCheckout}\n        handleShowProduct={this.handleShowProduct}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const userId = Meteor.userId();\n  const shopId = Reaction.getShopId();\n  let productItems = Cart.findOne({ userId, shopId }).items;\n  let defaultImage;\n\n  productItems = productItems.map((item) => {\n    Meteor.subscribe(\"CartItemImage\", item);\n    defaultImage = Media.findOne({\n      \"metadata.variantId\": item.variants._id\n    });\n    if (defaultImage) {\n      return Object.assign({}, item, { defaultImage });\n    }\n    defaultImage = Media.findOne({\n      \"metadata.productId\": item.productId\n    });\n    return Object.assign({}, item, { defaultImage });\n  });\n  onData(null, {\n    productItems\n  });\n}\n\nexport default composeWithTracker(composer, Loading)(CartDrawerContainer);\n","import React, { Component } from \"react\";\nimport { Cart } from \"/lib/collections\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction } from \"/client/api\";\nimport CartIcon from \"../components/cartIcon\";\n\nclass CartIconContainer extends Component {\n  render() {\n    return (\n      <div>\n        <CartIcon {...this.props} />\n      </div>\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  const subscription = Reaction.Subscriptions.Cart;\n\n  if (subscription.ready()) {\n    const cart = Cart.findOne();\n\n    onData(null, {\n      cart: cart\n    });\n  }\n};\n\nexport default composeWithTracker(composer)(CartIconContainer);\n","import React, { Component } from \"react\";\nimport { Cart } from \"/lib/collections\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport CartSubTotal from \"../components/cartSubTotal\";\n\nclass CartSubTotalContainer extends Component {\n  render() {\n    return (\n      <CartSubTotal\n        {...this.props}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const cart = Cart.findOne();\n  if (cart) {\n    onData(null, {\n      cartSubTotal: cart.cartSubTotal(),\n      cartCount: cart.cartCount(),\n      cartShipping: cart.cartShipping(),\n      cartDiscount: cart.cartDiscounts(),\n      cartTaxes: cart.cartTaxes(),\n      cartTotal: cart.cartTotal()\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nexport default composeWithTracker(composer, Loading)(CartSubTotalContainer);\n","import React, { Component } from \"react\";\nimport { $ } from \"meteor/jquery\";\nimport { Reaction } from \"/client/api\";\nimport EmptyCartDrawer from \"../components/emptyCartDrawer\";\n\nclass EmptyCartContainer extends Component {\n  handleKeepShopping(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    return $(\"#cart-drawer-container\").fadeOut(300, function () {\n      return Reaction.toggleSession(\"displayCart\");\n    });\n  }\n  render() {\n    return (\n      <div>\n        <EmptyCartDrawer keepShopping={this.handleKeepShopping}/>\n      </div>\n    );\n  }\n}\n\nexport default EmptyCartContainer;\n","import { Cart } from \"/lib/collections\";\nimport { Template } from \"meteor/templating\";\n\n/*\n * Template helpers for cart\n *\n */\n\n/**\n * cart template helper\n * @description\n * methods to return cart calculated values\n * cartCount, cartSubTotal, cartShipping, cartTaxes, cartTotal\n * are calculated by a transformation on the collection\n * and are available to use in template as cart.xxx\n * in template: {{cart.cartCount}}\n * in code: Cart.findOne().cartTotal()\n * @return {Object} returns inventory helpers\n */\nTemplate.registerHelper(\"cart\", function () {\n  const cartHelpers = {\n    /**\n     * showCartIconWarning\n     * @return {Boolean} return true if low inventory on any item in cart\n     */\n    showCartIconWarning() {\n      if (this.showLowInventoryWarning()) {\n        return true;\n      }\n      return false;\n    },\n    /**\n     * showLowInventoryWarning\n     * @return {Boolean} return true if low inventory on any item in cart\n     */\n    showLowInventoryWarning() {\n      let item;\n      const storedCart = Cart.findOne();\n      // we're not being picky here - first thing in cart\n      // that is low will trigger a inventory warning\n      if (storedCart && storedCart.items) {\n        for (item of storedCart.items) {\n          if (item.variants && item.variants.inventoryPolicy &&\n            item.variants.lowInventoryWarningThreshold) {\n            return item.variants.inventoryQuantity <=\n              item.variants.lowInventoryWarningThreshold;\n          }\n        }\n      }\n      return false;\n    },\n    /**\n     * showLowInventoryWarning\n     * @param {Object} variant - variant object to check inventory levels on\n     * @return {Boolean} return true if low inventory on variant\n     */\n    showItemLowInventoryWarning(variant) {\n      if (variant && variant.inventoryPolicy &&\n        variant.lowInventoryWarningThreshold) {\n        return variant.inventoryQuantity <=\n          variant.lowInventoryWarningThreshold;\n      }\n      return false;\n    }\n  };\n  return cartHelpers;\n});\n\n/**\n * cartPayerName\n * @summary gets current cart billing address / payment name\n * @return {String} returns cart.billing[0].fullName\n */\nTemplate.registerHelper(\"cartPayerName\", function () {\n  const cart = Cart.findOne();\n  if (cart && cart.billing && cart.billing[0] && cart.billing[0].address && cart.billing[0].address.fullName) {\n    const name = cart.billing[0].address.fullName;\n    if (name.replace(/[a-zA-Z ]*/, \"\").length === 0) return name;\n  }\n});\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { check } from \"meteor/check\";\nimport { Logger, Reaction, i18next } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\n\n// Client Cart Methods\n// Stubs with matching server methods.\nMeteor.methods({\n  \"cart/submitPayment\": function (paymentMethod) {\n    check(paymentMethod, Reaction.Schemas.PaymentMethod);\n    const checkoutCart = Cart.findOne({\n      userId: Meteor.userId()\n    });\n\n    const cart = _.clone(checkoutCart);\n    const cartId = cart._id;\n    const invoice = {\n      shipping: cart.cartShipping(),\n      subtotal: cart.cartSubTotal(),\n      taxes: cart.cartTaxes(),\n      discounts: cart.cartDiscounts(),\n      total: cart.cartTotal()\n    };\n    // we won't actually close the order at this stage.\n    // we'll just update the workflow and billing data where\n    // method-hooks can process the workflow update.\n\n    let selector;\n    let update;\n    // temp hack until we build out multiple billing handlers\n    // if we have an existing item update it, otherwise add to set.\n    if (cart.billing) {\n      selector = {\n        \"_id\": cartId,\n        \"billing._id\": cart.billing[0]._id\n      };\n      update = {\n        $set: {\n          \"billing.$.paymentMethod\": paymentMethod,\n          \"billing.$.invoice\": invoice\n        }\n      };\n    } else {\n      selector = {\n        _id: cartId\n      };\n      update = {\n        $addToSet: {\n          \"billing.paymentMethod\": paymentMethod,\n          \"billing.invoice\": invoice\n        }\n      };\n    }\n\n    Cart.update(selector, update, function (error, result) {\n      if (error) {\n        Logger.debug(error, \"An error occurred saving the order\");\n        throw new Meteor.Error(\"An error occurred saving the order\", error);\n      } else {\n        // it's ok and a safety check for this to be called multiple times\n        Meteor.call(\"workflow/pushCartWorkflow\", \"coreCartWorkflow\", \"paymentSubmitted\");\n        // Client Stub Actions\n        if (result === 1) {\n          Reaction.Router.go(\"cart/completed\", {}, {\n            _id: cartId\n          });\n        } else {\n          Alerts.inline(i18next.t(\"checkoutPayment.failedToPlaceOrder\"), \"danger\", {\n            autoHide: true,\n            placement: \"paymentMethod\"\n          });\n          Logger.debug(error, \"An error occurred saving the order\", cartId, error);\n          throw new Meteor.Error(\"An error occurred saving the order\", cartId, error);\n        }\n      }\n    });\n  }\n});\n","import \"./helpers/cart\";\nimport \"./methods/cart\";\n\nimport \"./templates/cartDrawer/cartDrawer.html\";\nimport \"./templates/cartDrawer/cartDrawer.js\";\n\nimport \"./templates/cartIcon/cartIcon.html\";\nimport \"./templates/cartIcon/cartIcon.js\";\n\nimport \"./templates/checkout/addressBook/addressBook.html\";\nimport \"./templates/checkout/completed/completed.html\";\nimport \"./templates/checkout/completed/completed.js\";\nimport \"./templates/checkout/header/header.html\";\nimport \"./templates/checkout/login/login.html\";\nimport \"./templates/checkout/login/login.js\";\nimport \"./templates/checkout/progressBar/progressBar.html\";\nimport \"./templates/checkout/progressBar/progressBar.js\";\nimport \"./templates/checkout/review/review.html\";\nimport \"./templates/checkout/review/review.js\";\nimport \"./templates/checkout/checkout.html\";\nimport \"./templates/checkout/checkout.js\";\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\n\nfunction pkgPermissions(pkg) {\n  // if (Reaction.hasPermission(\"dashboard\")) {\n  //   // route specific permissions\n  //   if (pkg.name) {\n  //     return Reaction.hasPermission(pkg.name);\n  //   }\n  //   // name is a global group role for packages\n  //   if (pkg.template) {\n  //     return Reaction.hasPermission(pkg.template);\n  //   }\n  // }\n  return Reaction.hasPermission(pkg.name);\n}\n\nfunction enableReactionPackage(reactionPackage) {\n  const self = reactionPackage;\n\n  Meteor.call(\"shop/togglePackage\", self.packageId, false,\n    (error, result) => {\n      if (result === 1) {\n        Alerts.toast(\n          i18next.t(\n            \"gridPackage.pkgEnabled\",\n            { app: i18next.t(self.i18nKeyLabel) }\n          ),\n          \"error\", {\n            type: \"pkg-enabled-\" + self.name\n          }\n        );\n        if (self.name || self.route) {\n          const route = self.name || self.route;\n          return Reaction.Router.go(route);\n        }\n      } else if (error) {\n        return Alerts.toast(\n          i18next.t(\n            \"gridPackage.pkgDisabled\",\n            { app: i18next.t(self.i18nKeyLabel) }\n          ),\n          \"warning\"\n        );\n      }\n    }\n  );\n}\n\nfunction disableReactionPackage(reactionPackage) {\n  const self = reactionPackage;\n\n  if (self.name === \"core\") {\n    return;\n  }\n\n  Alerts.alert(\n    \"Disable Package\",\n    i18next.t(\"gridPackage.disableConfirm\", { app: i18next.t(self.i18nKeyLabel) }),\n    {\n      type: \"warning\",\n      showCancelButton: true\n    },\n    () => {\n      Meteor.call(\"shop/togglePackage\", self.packageId, true,\n        (error, result) => {\n          if (result === 1) {\n            return Alerts.toast(\n              i18next.t(\"gridPackage.pkgDisabled\", {\n                app: i18next.t(self.i18nKeyLabel)\n              }),\n              \"success\"\n            );\n          } else if (error) {\n            throw new Meteor.Error(\"error disabling package\", error);\n          }\n        }\n      );\n    });\n}\n\nTemplate.packagesGrid.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    groups: [],\n    appsByGroup: {},\n    apps: []\n  });\n\n  this.autorun(() => {\n    const apps = Reaction.Apps({ provides: \"dashboard\", enabled: true });\n    const groupedApps = _.groupBy(apps, (app) => {\n      return app.container || \"misc\";\n    });\n    this.state.set(\"apps\", apps);\n    this.state.set(\"appsByGroup\", groupedApps);\n    this.state.set(\"groups\", Object.keys(groupedApps));\n  });\n});\n\n/**\n * packagesGrid helpers\n */\nTemplate.packagesGrid.helpers({\n  groups() {\n    return Template.instance().state.get(\"groups\");\n  },\n\n  appsInGroup(groupName) {\n    const group = Template.instance().state.get(\"appsByGroup\") || {};\n    return group[groupName] || false;\n  },\n\n  shopId() {\n    return Reaction.getShopId();\n  },\n\n\n  pkgPermissions\n});\n\nTemplate.packagesGridGroup.helpers({\n  pkgPermissions,\n\n  packageProps(app) {\n    return {\n      package: app,\n      enablePackage(reactionPackage, value) {\n        if (value === true) {\n          enableReactionPackage(reactionPackage);\n        } else {\n          disableReactionPackage(reactionPackage);\n        }\n      }\n    };\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\n/* eslint no-loop-func: 0 */\n\n/**\n * gridPackage helpers\n */\nTemplate.gridPackage.helpers({\n  /**\n   * Properties for the card\n   * @see packages/reaction-ui/client/components/cards/cards.js\n   * @return {CardProps} Object of properties for the card component\n   */\n  cardProps() {\n    const instance = Template.instance();\n    const data = instance.data;\n    const apps = Reaction.Apps({\n      provides: \"settings\",\n      name: data.package.packageName\n    });\n\n    const controls = [];\n\n    if (data.package.priority > 1) {\n      controls.push({\n        icon: \"fa fa-plus-square fa-fw\",\n        onIcon: \"fa fa-check-square fa-fw\",\n        toggle: true,\n        toggleOn: data.package.enabled,\n        onClick() {\n          if (instance.data.enablePackage) {\n            instance.data.enablePackage(data.package, !data.package.enabled);\n          }\n        }\n      });\n    }\n\n    for (const app of apps) {\n      controls.push({\n        icon: app.icon || \"fa fa-cog fa-fw\",\n        onClick() {\n          Reaction.pushActionView(app);\n        }\n      });\n    }\n\n    if (data.package.route) {\n      controls.push({\n        icon: \"angle-right\",\n        onClick() {\n          Reaction.pushActionView(data.package);\n        }\n      });\n    }\n\n    return {\n      controls,\n      onContentClick() {\n        Reaction.pushActionView(data.package);\n      }\n    };\n  },\n\n  showPackageManagementEvent(pkg) {\n    if (pkg.name && pkg.route && pkg.template) {\n      return \"showPackageManagement\";\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { PackageList } from \"../../components\";\nimport { PackageListContainer } from \"../../containers\";\n\nTemplate.dashboardPackages.helpers({\n  PackageListComponent() {\n    return {\n      component: PackageListContainer(PackageList)\n    };\n  }\n});\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Media, Packages, Shops } from \"/lib/collections\";\n\nTemplate.shopBrandImageOption.helpers({\n  cardProps(data) {\n    const props = {\n      controls: []\n    };\n\n    // Add the enable / disable toggle button\n    props.controls.push({\n      icon: \"square-o\",\n      onIcon: \"check-square-o\",\n      toggle: true,\n      toggleOn: data.selected,\n      onClick() {\n        const asset = {\n          mediaId: data.option._id,\n          type: \"navbarBrandImage\"\n        };\n\n        Meteor.call(\"shop/updateBrandAssets\", asset, (error, result) => {\n          if (error) {\n            // Display Error\n            return Alerts.toast(\"Couldn't update brand asset.\", \"error\");\n          }\n\n          if (result === 1) {\n            Alerts.toast(\"Updated brand asset\", \"success\");\n          }\n        });\n      }\n    });\n\n    // Show the delete button for brand assets that are not enabled.\n    // This will prevent users from deleting assets that are being used at the moment.\n    if (!data.selected) {\n      props.controls.push({\n        icon: \"trash-o\",\n        onClick() {\n          Alerts.alert({\n            title: \"Remove this brand image?\",\n            type: \"warning\",\n            showCancelButton: true,\n            confirmButtonText: \"Remove\"\n          }, () => {\n            Media.findOne(data.option._id).remove();\n          });\n        }\n      });\n    }\n\n    return props;\n  }\n});\n\n/**\n * shopSettings helpers\n *\n */\nTemplate.shopSettings.helpers({\n  brandImageSelectProps() {\n    const media = Media.find({\n      \"metadata.type\": \"brandAsset\"\n    });\n\n    const shop = Shops.findOne({\n      \"_id\": Reaction.getShopId(),\n      \"brandAssets.type\": \"navbarBrandImage\"\n    });\n\n    let selectedMediaId;\n    if (shop && _.isArray(shop.brandAssets)) {\n      selectedMediaId = shop.brandAssets[0].mediaId;\n    }\n\n    return {\n      type: \"radio\",\n      options: media,\n      key: \"_id\",\n      optionTemplate: \"shopBrandImageOption\",\n      selected: selectedMediaId,\n      classNames: {\n        itemList: { half: true },\n        input: { hidden: true }\n      },\n      onSelect(value) {\n        const asset = {\n          mediaId: value,\n          type: \"navbarBrandImage\"\n        };\n\n        Meteor.call(\"shop/updateBrandAssets\", asset, (error, result) => {\n          if (error) {\n            // Display Error\n            return Alerts.toast(\"Couldn't update brand asset.\", \"error\");\n          }\n\n          if (result === 1) {\n            Alerts.toast(\"Updated brand asset\", \"success\");\n          }\n        });\n      }\n    };\n  },\n\n  handleFileUpload() {\n    const userId = Meteor.userId();\n    const shopId = Reaction.getShopId();\n\n    return (files) => {\n      for (const file of files) {\n        file.metadata = {\n          type: \"brandAsset\",\n          ownerId: userId,\n          shopId: shopId\n        };\n\n        Media.insert(file);\n      }\n    };\n  },\n\n  shop: function () {\n    return Shops.findOne();\n  },\n  packageData: function () {\n    return Packages.findOne({\n      name: \"core\"\n    });\n  },\n  addressBook: function () {\n    const address = Shops.findOne().addressBook;\n    return address[0];\n  }\n});\n\n/**\n * shopSettings autoform alerts\n */\n\nAutoForm.hooks({\n  shopEditForm: {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.alerts.shopGeneralSettingsSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.alerts.shopGeneralSettingsFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n\nAutoForm.hooks({\n  shopEditAddressForm: {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.alerts.shopAddressSettingsSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.alerts.shopAddressSettingsFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n\nAutoForm.hooks({\n  shopEditExternalServicesForm: {\n    onSuccess: function () {\n      return Alerts.toast(\n        i18next.t(\"admin.alerts.shopExternalServicesSettingsSaved\"), \"success\"\n      );\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.alerts.shopExternalServicesSettingsFailed\")} ${error}`,\n        \"error\"\n      );\n    }\n  }\n});\n\nAutoForm.hooks({\n  shopEditOptionsForm: {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.alerts.shopOptionsSettingsSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.alerts.shopOptionsSettingsFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport { Media, Products } from \"/lib/collections\";\n\nfunction uploadHandler(event) {\n  const shopId = Reaction.getShopId();\n  const userId = Meteor.userId();\n  const files = event.target.files.files;\n\n  for (let i = 0; i < files.length; i++) {\n    const parts = files[i].name.split(\".\");\n    let product;\n    if (parts[0]) {\n      product = Products.findOne({\n        \"variants.barcode\": parts[0]\n      }, {\n        variants: {\n          $elemMatch: {\n            barcode: parts[0]\n          }\n        }\n      });\n    }\n    if (product) {\n      const fileObj = new FS.File(files[i]);\n      fileObj.metadata = {\n        ownerId: userId,\n        productId: product._id,\n        variantId: product.variants[0]._id,\n        shopId: shopId,\n        priority: Number(parts[1]) || 0\n      };\n      Media.insert(fileObj);\n    }\n  }\n}\n\nTemplate.import.events({\n  \"submit form#form-import-images\": function (event) {\n    event.preventDefault();\n    uploadHandler(event);\n  }\n});\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\n\n/**\n * Helpers for Settings Header (actionView)\n */\nTemplate.settingsHeader.helpers({\n\n  /**\n   * Data pased to action view\n   * @return {Object} Registry entry for item\n   */\n  registry() {\n    return Reaction.getActionView() || {};\n  },\n\n  isActionViewAtRootView() {\n    return Reaction.isActionViewAtRootView();\n  },\n\n  /**\n   * thisApp\n   * @return {Object} Registry entry for item\n   */\n  thisApp() {\n    const reactionApp = Packages.findOne({\n      \"registry.provides\": \"settings\",\n      \"registry.route\": Reaction.Router.getRouteName()\n    }, {\n      enabled: 1,\n      registry: 1,\n      name: 1,\n      route: 1\n    });\n\n    if (reactionApp) {\n      const settingsData = _.find(reactionApp.registry, function (item) {\n        return item.route === Reaction.Router.getRouteName() && item.provides === \"settings\";\n      });\n\n      return settingsData;\n    }\n    return reactionApp;\n  }\n\n});\n\n/**\n * Events for Setting Header (actionView)\n */\nTemplate.settingsHeader.events({\n  \"click [data-event-action=closeSettings]\": () => {\n    Reaction.hideActionView();\n  },\n\n  \"click .js-back-button\"() {\n    Reaction.popActionView();\n  }\n});\n\n/**\n * Helpers for Settings Sidebar (actionView)\n */\nTemplate.settingsSidebar.helpers({\n\n  /**\n   * pkgPermissions Check package permissions\n   * @return {Boolean} user has permission to see settings for this package\n   */\n  pkgPermissions() {\n    if (Reaction.hasPermission(\"dashboard\")) {\n      if (this.name) {\n        return Reaction.hasPermission(this.name);\n      }\n\n      return Reaction.hasPermission(this.name);\n    }\n\n    return false;\n  }\n});\n\nTemplate.settingsSidebarItem.helpers({\n\n  /**\n   * label\n   * @return {String} Label for item\n   */\n  label() {\n    return Template.parentData(1).label || this.label;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { translateRegistry } from \"/lib/api\";\n\n//\n// registry helper for the dashboard, assembles i18n labels\n//\nTemplate.dashboardHeader.helpers({\n  registry() {\n    // just some handle little helpers for default package i18nKey/i18nLabel\n    const route = Reaction.Router.getRouteName();\n    const registry = Reaction.getRegistryForCurrentRoute() || {};\n    if (registry && route) {\n      return translateRegistry(registry);\n    }\n  }\n});\n\n//\n// dashboard events\n//\nTemplate.dashboardHeader.events({\n  \"click [data-event-action=showPackageSettings]\"() {\n    Reaction.showActionView();\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Admin } from \"/imports/plugins/core/ui/client/providers\";\nimport Radium from \"radium\";\nimport \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { VelocityTransitionGroup } from \"velocity-react\";\nimport debounce from \"lodash/debounce\";\nimport {\n  IconButton,\n  Translation,\n  Overlay\n} from \"/imports/plugins/core/ui/client/components\";\nimport { getComponent } from \"/imports/plugins/core/layout/lib/components\";\n\n\nconst getStyles = (props) => {\n  let viewSize = 400;\n  const actionView = props.actionView || {};\n  const isBigView = actionView.provides === \"dashboard\" || (actionView.provides === \"shortcut\" && actionView.container === \"dashboard\");\n\n  if (isBigView) {\n    viewSize = \"90vw\";\n  }\n\n  if (actionView.meta && actionView.meta.actionView) {\n    const isSmView = actionView.meta.actionView.dashboardSize === \"sm\";\n    const isMdView = actionView.meta.actionView.dashboardSize === \"md\";\n    const isLgView = actionView.meta.actionView.dashboardSize === \"lg\";\n\n    if (isSmView) {\n      viewSize = \"400px\";\n    }\n    if (isMdView) {\n      viewSize = \"50vw\";\n    }\n    if (isLgView) {\n      viewSize = \"90vw\";\n    }\n  }\n\n  if (props.actionViewIsOpen === false) {\n    viewSize = 400;\n  }\n\n  return {\n    base: {\n      \"display\": \"flex\",\n      \"flexDirection\": \"row\",\n      \"height\": \"100vh\",\n      \"position\": \"relative\",\n      \"width\": viewSize,\n      \"minWidth\": 400,\n      \"@media only screen and (max-width: 949px)\": {\n        width: \"100vw\"\n      },\n      \"boxShadow\": isBigView ? \"0 0 40px rgba(0,0,0,.1)\" : \"\",\n      \"flex\": \"0 0 auto\",\n      \"backgroundColor\": \"white\",\n      \"borderLeft\": \"1px solid @black10\",\n      \"overflow\": \"hidden\",\n      \"transition\": \"width 300ms cubic-bezier(0.455, 0.03, 0.515, 0.955))\",\n      \"zIndex\": 1050\n    },\n    header: {\n      display: \"flex\",\n      alignItems: \"center\",\n      position: \"relative\",\n      minHeight: \"56px\",\n      height: \"56px\",\n      padding: \"0 20px\"\n    },\n    heading: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flex: \"1 1 auto\",\n      position: \"relative\",\n      margin: \"0 0 0 1rem\",\n      height: \"100%\"\n    },\n    body: {\n      display: \"flex\",\n      flex: \"1 1 auto\",\n      overflow: \"auto\",\n      WebkitOverflowScrolling: \"touch\"\n    },\n    masterViewPanel: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      flex: \"1 1 auto\"\n      // height: \"100%\"\n    },\n    masterView: {\n      flex: \"1 1 auto\",\n      // height: \"100%\",\n      overflow: \"auto\"\n      // WebkitOverflowScrolling: \"touch\"\n    },\n    detailViewPanel: {\n      \"display\": \"flex\",\n      \"flexDirection\": \"column\",\n      \"flex\": \"1 1 auto\",\n      \"maxWidth\": \"400px\",\n      \"height\": \"100vh\",\n      \"backgroundColor\": \"white\",\n      \"borderRight\": \"1px solid #ccc\",\n      \"@media only screen and (max-width: 949px)\": {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        width: \"96vw\",\n        zIndex: 1050\n      }\n    },\n    detailView: {\n      width: \"100%\"\n    },\n    backButton: {\n      height: \"100%\"\n    },\n    backButtonContainers: {\n      display: \"flex\",\n      alignItems: \"center\",\n      height: \"100%\"\n    }\n  };\n};\n\nclass ActionView extends Component {\n  static propTypes = {\n    actionView: PropTypes.object,\n    actionViewIsOpen: PropTypes.bool,\n    buttons: PropTypes.array,\n    detailView: PropTypes.object,\n    detailViewIsOpen: PropTypes.bool,\n    handleActionViewBack: PropTypes.func,\n    handleActionViewClose: PropTypes.func,\n    handleActionViewDetailBack: PropTypes.func,\n    handleActionViewDetailClose: PropTypes.func,\n    isActionViewAtRootView: PropTypes.bool,\n    isDetailViewAtRootView: PropTypes.bool\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isMobile: this.isMobile,\n      enterAnimation: {\n        animation: { translateX: 0 },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      },\n      leaveAnimation: {\n        animation: { translateX: 400 },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      },\n      enterAnimationForDetailView: {\n        animation: { width: 400 },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      },\n      leaveAnimationForDetailView: {\n        animation: { width: 0 },\n        duration: 200,\n        easing: \"easeInOutQuad\"\n      }\n    };\n\n    this.handleResize = debounce(() => {\n      if (window) {\n        this.setState({\n          isMobile: this.isMobile\n        });\n      }\n    }, 66);\n  }\n\n  componentDidMount() {\n    if (window) {\n      window.addEventListener(\"resize\", this.handleResize, false);\n    }\n  }\n\n  componentWillUnmount() {\n    if (window) {\n      window.removeEventListener(\"resize\", this.handleResize);\n    }\n  }\n\n  renderControlComponent() {\n    if (this.props.actionView && typeof this.props.actionView.template === \"string\") {\n      // Render a react component if one has been registered by name\n      const component = getComponent(this.props.actionView.template);\n\n      if (component) {\n        return (\n          <div style={this.styles.masterView} className=\"master\">\n            {React.createElement(component, this.props.actionView.data)}\n          </div>\n        );\n      }\n\n      return (\n        <div style={this.styles.masterView} className=\"master\">\n          <Blaze\n            {...this.props.actionView.data}\n            template={this.props.actionView.template}\n          />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderDetailComponent() {\n    if (this.props.detailView && typeof this.props.detailView.template === \"string\") {\n      return (\n        <div style={this.styles.detailView} className=\"detail\">\n          <Blaze\n            {...this.props.detailView.data}\n            template={this.props.detailView.template}\n          />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderFooter() {\n    // if (this.props.footerTemplate) {\n    //   return (\n    //     <Blaze template={this.props.footerTemplate} />\n    //   );\n    // }\n  }\n\n  renderBackButton() {\n    let button;\n\n    if (this.props.isActionViewAtRootView === false) {\n      button = (\n        <IconButton\n          bezelStyle={\"flat\"}\n          icon=\"fa fa-arrow-left\"\n          onClick={this.props.handleActionViewBack}\n        />\n      );\n    } else {\n      button = (\n        <IconButton\n          bezelStyle={\"flat\"}\n          icon=\"fa fa-times\"\n          onClick={this.props.handleActionViewClose}\n        />\n      );\n    }\n\n    return (\n      <div style={this.styles.backButton}>\n        <div style={this.styles.backButtonContainers}>\n          {button}\n        </div>\n      </div>\n    );\n  }\n\n  get isMobile() {\n    return window.matchMedia(\"(max-width: 991px)\").matches;\n  }\n\n  get actionViewIsLargeSize() {\n    const { meta } = this.props.actionView;\n    const dashboardSize = meta && meta.actionView && meta.actionView.dashboardSize || \"sm\";\n\n    return this.props.actionView.provides === \"dashboard\" || dashboardSize !== \"sm\";\n  }\n\n  get showOverlay() {\n    if (this.props.actionViewIsOpen === false) {\n      return false;\n    }\n\n    return this.actionViewIsLargeSize || this.state.isMobile;\n  }\n\n  get showDetailViewOverlay() {\n    return this.props.detailViewIsOpen && this.state.isMobile;\n  }\n\n  renderDetailViewBackButton() {\n    if (this.props.isDetailViewAtRootView === false) {\n      return (\n        <div style={this.styles.backButton}>\n          <div style={this.styles.backButtonContainers}>\n            <IconButton\n              bezelStyle={\"flat\"}\n              icon=\"fa fa-arrow-left\"\n              onClick={this.props.handleActionViewDetailBack}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <IconButton\n        bezelStyle={\"flat\"}\n        icon=\"fa fa-times\"\n        onClick={this.props.handleActionViewDetailClose}\n      />\n    );\n  }\n\n  get styles() {\n    return getStyles(this.props);\n  }\n\n  get backButtonEnterAnimation() {\n    return {\n      animation: {\n        display: \"flex\",\n        position: \"absolute\",\n        left: 20,\n        opaticy: 1\n      },\n      duration: 200\n    };\n  }\n\n  get backButtonLeaveAnimaton() {\n    return {\n      animation: {\n        display: \"flex\",\n        position: \"absolute\",\n        left: -30,\n        opaticy: 0\n      },\n      duration: 200\n\n    };\n  }\n\n  renderMasterView() {\n    const { actionView } = this.props;\n\n    return (\n      <div style={this.styles.masterViewPanel}>\n        <div style={this.styles.header} className=\"header\">\n          {this.renderBackButton()}\n          <div style={this.styles.heading} className=\"heading\">\n            <h3 className=\"title\" style={this.styles.title}>\n              <Translation\n                defaultValue={actionView.label || \"Dashboard\"}\n                i18nKey={actionView.i18nKeyLabel || \"dashboard.coreTitle\"}\n              />\n            </h3>\n          </div>\n\n          <div className=\"controlsÂ»\">\n            {/* Controls */}\n          </div>\n        </div>\n        <div style={this.styles.body} className=\"admin-controls-content action-view-body\">\n\n          {this.renderControlComponent()}\n\n        </div>\n      </div>\n\n    );\n  }\n\n  renderDetailView() {\n    const { actionView } = this.props;\n\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"admin\": true,\n      \"action-view-pane\": true,\n      \"action-view-detail\": true\n    });\n\n    if (this.props.detailViewIsOpen) {\n      return (\n        <div className={baseClassName} style={this.styles.detailViewPanel}>\n          <div style={this.styles.header} className=\"header\">\n            <VelocityTransitionGroup\n              enter={this.backButtonEnterAnimation}\n              leave={this.backButtonLeaveAnimaton}\n            >\n              {this.renderDetailViewBackButton()}\n            </VelocityTransitionGroup>\n\n            <div style={this.styles.heading} className=\"heading\">\n              <h3 className=\"title\" style={this.styles.title}>\n                <Translation\n                  defaultValue={actionView.label}\n                  i18nKey={actionView.i18nKeyLabel}\n                />\n              </h3>\n            </div>\n\n            <div className=\"controls\">\n              {/* Controls */}\n            </div>\n          </div>\n          <div style={this.styles.body} className=\"admin-controls-content action-view-body\">\n\n            {/* this.renderControlComponent() */}\n            {this.renderDetailComponent()}\n          </div>\n        </div>\n\n      );\n    }\n  }\n\n  renderActionView() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"admin\": true,\n      \"action-view-pane\": true,\n      \"action-view\": true,\n      \"open\": this.props.actionViewIsOpen\n    });\n\n    if (this.props.actionViewIsOpen) {\n      return (\n        <div style={this.styles.base} className={baseClassName}>\n\n          {this.renderMasterView()}\n          <Overlay\n            isVisible={this.showDetailViewOverlay}\n            onClick={this.props.handleActionViewDetailClose}\n          />\n          <VelocityTransitionGroup\n            enter={this.state.enterAnimationForDetailView}\n            leave={this.state.leaveAnimationForDetailView}\n          >\n            {this.renderDetailView()}\n          </VelocityTransitionGroup>\n\n\n          <div className=\"admin-controls-footer\">\n            <div className=\"admin-controls-container\">\n              {this.renderFooter()}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <div>\n        <VelocityTransitionGroup\n          enter={this.state.enterAnimation}\n          leave={this.state.leaveAnimation}\n        >\n          {this.renderActionView()}\n        </VelocityTransitionGroup>\n\n        <Overlay\n          isVisible={this.showOverlay}\n          onClick={this.props.handleActionViewClose}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Admin()(Radium(ActionView));\n","export { default as ActionView } from \"./actionView\";\nexport { default as PackageList } from \"./packageList\";\nexport { default as Toolbar } from \"./toolbar\";\nexport { default as ShortcutBar } from \"./shortcutBar\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { map } from \"lodash\";\nimport { Card, CardHeader, CardBody, CardGroup, ListItem } from \"/imports/plugins/core/ui/client/components\";\nimport { getComponent } from \"/imports/plugins/core/layout/lib/components\";\n\nclass PackageList extends Component {\n  static propTypes = {\n    groupedPackages: PropTypes.object,\n    handleShowPackage: PropTypes.func,\n    onCardExpand: PropTypes.func\n  }\n\n  state = {}\n\n  isExpanded(cardName) {\n    if (this.state[`card_${cardName}`] && typeof this.state[`card_${cardName}`].isExpanded === \"boolean\") {\n      return this.state[`card_${cardName}`].isExpanded;\n    }\n\n    return true;\n  }\n\n  handleCardExpand(cardName) {\n    let isExpanded;\n\n    if (typeof this.state[`card_${cardName}`] === \"undefined\") {\n      isExpanded = false;\n    } else {\n      isExpanded = !this.state[`card_${cardName}`].isExpanded;\n    }\n\n    this.setState({\n      [`card_${cardName}`]: {\n        isExpanded\n      }\n    });\n\n    if (this.props.onCardExpand) {\n      this.props.onCardExpand(cardName);\n    }\n  }\n\n  renderSections() {\n    if (this.props.groupedPackages) {\n      // Loop through the groups of packages\n      return map(this.props.groupedPackages, (group, groupName) => {\n        // Loop through the individual cards of packages\n        if (Array.isArray(group.packages)) {\n          const items = group.packages.map((packageData, index) => {\n            const elements = [];\n\n            // Standard list element\n            elements.push(\n              <ListItem\n                key={index}\n                i18nKeyLabel={packageData.i18nKeyLabel}\n                icon={packageData.icon}\n                label={packageData.label}\n                onClick={this.props.handleShowPackage}\n                actionType=\"arrow\"\n                value={packageData}\n              />\n            );\n\n            // Look for a registered component_ActionDashboard component\n            const actionComponent = getComponent(`${packageData.template}_ActionDashboard`);\n\n            // If one exists, add it to the list of elements\n            if (actionComponent) {\n              elements.push(\n                <Card expandable={true} key={`action-${index}`}>\n                  <CardBody>\n                    {React.createElement(actionComponent)}\n                  </CardBody>\n                </Card>\n              );\n            }\n\n            return elements;\n          });\n\n          return (\n            <Card\n              key={groupName}\n              expanded={this.isExpanded(groupName)}\n              onExpand={this.handleCardExpand.bind(this, groupName)}\n            >\n              <CardHeader\n                actAsExpander={true}\n                title={group.title}\n                i18nKeyTitle={group.i18nKeyTitle}\n              />\n              <CardBody expandable={true} padded={false}>\n                {items}\n              </CardBody>\n            </Card>\n          );\n        }\n\n        return null;\n      });\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        {this.renderSections()}\n      </CardGroup>\n    );\n  }\n}\n\nexport default PackageList;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { map } from \"lodash\";\nimport { FlatButton, Icon } from \"/imports/plugins/core/ui/client/components\";\nimport { isEqual } from \"lodash\";\n\nclass ShortcutBar extends Component {\n  static propTypes = {\n    currentView: PropTypes.object,\n    groupedPackages: PropTypes.object,\n    handleOpenShortcut: PropTypes.func,\n    handleShowDashboard: PropTypes.func,\n    handleShowPackage: PropTypes.func\n  }\n\n  renderAdminButton() {\n    return (\n      <FlatButton onClick={this.props.handleShowDashboard}>\n        <Icon\n          icon=\"icon icon-reaction-logo\"\n          style={{\n            fontSize: 24\n          }}\n        />\n      </FlatButton>\n    );\n  }\n\n  renderSections() {\n    if (this.props.groupedPackages) {\n      // Loop through the groups of packages\n      return map(this.props.groupedPackages, (group, groupName) => {\n        // Loop through the individual cards of packages\n        if (Array.isArray(group.packages)) {\n          const items = group.packages.map((packageData, index) => {\n            const isActive = isEqual(this.props.currentView, packageData);\n\n            // Standard list element\n            return (\n              <FlatButton\n                active={isActive}\n                key={index}\n                i18nKeyTooltip={packageData.i18nKeyLabel}\n                icon={packageData.icon}\n                onClick={this.props.handleOpenShortcut}\n                tooltip={packageData.label}\n                value={packageData}\n                tooltipAttachment=\"middle left\"\n              />\n            );\n          });\n\n          return (\n            <nav\n              key={groupName}\n              className=\"rui toolbar-group admin-controls-quicklinks\"\n              style={{\n                marginBottom: 20\n              }}\n            >\n              {items}\n            </nav>\n          );\n        }\n\n        return null;\n      });\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <div className=\"rui toolbar toolbar-vertical admin-shortcut-bar\">\n        <nav\n          style={{\n            height: 54,\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          }}\n        >\n          {this.renderAdminButton()}\n        </nav>\n        {this.renderSections()}\n      </div>\n\n    );\n  }\n}\n\nexport default ShortcutBar;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport {\n  FlatButton,\n  Toolbar,\n  ToolbarGroup,\n  Switch,\n  Icon,\n  VerticalDivider\n} from \"/imports/plugins/core/ui/client/components\";\nimport { Translatable } from \"/imports/plugins/core/ui/client/providers\";\nimport { Reaction } from \"/client/api\";\n\nclass PublishControls extends Component {\n  static propTypes = {\n    dashboardHeaderTemplate: PropTypes.oneOfType([PropTypes.func, PropTypes.node, PropTypes.string]),\n    documentIds: PropTypes.arrayOf(PropTypes.string),\n    documents: PropTypes.arrayOf(PropTypes.object),\n    hasCreateProductAccess: PropTypes.bool,\n    isEnabled: PropTypes.bool,\n    isPreview: PropTypes.bool,\n    onAddProduct: PropTypes.func,\n    onViewContextChange: PropTypes.func,\n    onVisibilityChange: PropTypes.func,\n    packageButtons: PropTypes.arrayOf(PropTypes.object),\n    showViewAsControls: PropTypes.bool,\n    translation: PropTypes.shape({\n      lang: PropTypes.string\n    })\n  }\n\n  static defaultProps = {\n    showViewAsControls: true\n  }\n\n  onViewContextChange = (event, isChecked) => {\n    if (typeof this.props.onViewContextChange === \"function\") {\n      this.props.onViewContextChange(event, isChecked ? \"administrator\" : \"customer\");\n    }\n  }\n\n  renderViewControls() {\n    if (this.props.showViewAsControls) {\n      return (\n        <FlatButton\n          label=\"Private\"\n          i18nKeyLabel=\"app.private\"\n          i18nKeyToggleOnLabel=\"app.public\"\n          toggleOnLabel=\"Public\"\n          icon=\"fa fa-eye-slash\"\n          onIcon=\"fa fa-eye\"\n          toggle={true}\n          value=\"public\"\n          onValue=\"private\"\n          toggleOn={this.isVisible === \"public\"}\n          onToggle={this.handleVisibilityChange}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderVisibilitySwitch() {\n    if (this.props.hasCreateProductAccess) {\n      return (\n        <Switch\n          i18nKeyLabel=\"app.editMode\"\n          i18nKeyOnLabel=\"app.editMode\"\n          label={\"Edit Mode\"}\n          onLabel={\"Edit Mode\"}\n          checked={!this.props.isPreview}\n          onChange={this.onViewContextChange}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderAdminButton() {\n    return (\n      <ToolbarGroup visibleOnMobile={true}>\n        <VerticalDivider key={\"divder-2\"} />\n        <FlatButton\n          key=\"dashboard-button\"\n          onClick={() => {\n            Reaction.showActionView({\n              i18nKeyTitle: \"dashboard.coreTitle\",\n              title: \"Dashboard\",\n              template: \"dashboardPackages\"\n            });\n          }}\n        >\n          <Icon style={{ fontSize: 24 }} icon=\"icon icon-reaction-logo\" />\n        </FlatButton>\n      </ToolbarGroup>\n    );\n  }\n\n  renderAddButton() {\n    if (this.props.hasCreateProductAccess) {\n      return (\n        <FlatButton\n          i18nKeyTooltip=\"app.shortcut.addProductLabel\"\n          icon={\"fa fa-plus\"}\n          tooltip={\"Add Product\"}\n          onClick={this.props.onAddProduct}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderPackageButons() {\n    if (Array.isArray(this.props.packageButtons)) {\n      return this.props.packageButtons.map((packageButton, index) => {\n        return (\n          <FlatButton {...packageButton} key={index} />\n        );\n      });\n    }\n\n    return null;\n  }\n\n  renderCustomControls() {\n    if (this.props.dashboardHeaderTemplate && this.props.hasCreateProductAccess) {\n      if (this.props.isEnabled) {\n        return [\n          <VerticalDivider key=\"customControlsVerticaldivider\" />,\n          <Blaze key=\"customControls\" template={this.props.dashboardHeaderTemplate} />\n        ];\n      }\n      return [\n        <Blaze key=\"customControls\" template={this.props.dashboardHeaderTemplate} />\n      ];\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <Toolbar>\n        <ToolbarGroup firstChild={true}>\n          {this.renderVisibilitySwitch()}\n        </ToolbarGroup>\n        <ToolbarGroup lastChild={true}>\n          {this.renderAddButton()}\n          {this.renderPackageButons()}\n          {this.renderCustomControls()}\n        </ToolbarGroup>\n        {this.renderAdminButton()}\n      </Toolbar>\n    );\n  }\n}\n\nexport default Translatable()(PublishControls);\n","import React from \"react\";\nimport { StyleRoot } from \"radium\";\nimport _ from \"lodash\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction } from \"/client/api\";\nimport { TranslationProvider, AdminContextProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\n\n\nfunction handleActionViewBack() {\n  Reaction.popActionView();\n}\n\nfunction handleActionViewDetailBack() {\n  Reaction.popActionViewDetail();\n}\n\nfunction handleActionViewClose() {\n  Reaction.hideActionView();\n}\n\nfunction handleActionViewDetailClose() {\n  Reaction.hideActionViewDetail();\n}\n\nfunction composer(props, onData) {\n  const shortcuts = Reaction.Apps({ provides: \"shortcut\", enabled: true });\n  const items = [];\n\n  if (_.isArray(shortcuts)) {\n    for (const shortcut of shortcuts) {\n      if (!shortcut.container) {\n        items.push({\n          type: \"link\",\n          href: Reaction.Router.pathFor(shortcut.name),\n          className: Reaction.Router.isActiveClassName(shortcut.name),\n          icon: shortcut.icon,\n          tooltip: shortcut.label || \"\",\n          i18nKeyTooltip: shortcut.i18nKeyLabel,\n          tooltipPosition: \"left middle\"\n        });\n      }\n    }\n  }\n\n  items.push({ type: \"seperator\" });\n\n  items.push({\n    icon: \"plus\",\n    tooltip: \"Create Content\",\n    i18nKeyTooltip: \"app.createContent\",\n    tooltipPosition: \"left middle\"\n  });\n\n\n  onData(null, {\n    isAdminArea: true,\n    actionView: Reaction.getActionView(),\n    detailView: Reaction.getActionViewDetail(),\n    data: props.data,\n    buttons: items,\n    isActionViewAtRootView: Reaction.isActionViewAtRootView(),\n    isDetailViewAtRootView: Reaction.isActionViewDetailAtRootView(),\n\n    actionViewIsOpen: Reaction.isActionViewOpen(),\n    detailViewIsOpen: Reaction.isActionViewDetailOpen(),\n\n    // Callbacks\n    handleActionViewBack,\n    handleActionViewDetailBack,\n    handleActionViewClose,\n    handleActionViewDetailClose\n  });\n}\n\nexport default function ActionViewContainer(Comp) {\n  function CompositeComponent(props) {\n    return (\n      <TranslationProvider>\n        <AdminContextProvider>\n          <StyleRoot>\n            <Comp {...props} />\n          </StyleRoot>\n        </AdminContextProvider>\n      </TranslationProvider>\n    );\n  }\n\n  return composeWithTracker(composer, Loading)(CompositeComponent);\n}\n","export { default as PackageListContainer } from \"./packageListContainer\";\nexport { default as ActionViewContainer } from \"./actionViewContainer\";\nexport { default as ToolbarContainer } from \"./toolbarContainer\";\n","import React from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction } from \"/client/api\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\n\n/**\n * handleShowPackage - Push package into action view navigation stack\n * @param  {SyntheticEvent} event Original event\n * @param  {Object} app Package data\n * @return {undefined} No return value\n */\nfunction handleShowPackage(event, app) {\n  Reaction.pushActionView(app);\n}\n\n/**\n * handleShowDashboard - Open full dashbaord menu\n * @return {undefined} No return value\n */\nfunction handleShowDashboard() {\n  Reaction.showActionView({\n    i18nKeyTitle: \"dashboard.coreTitle\",\n    title: \"Dashboard\",\n    template: \"dashboardPackages\"\n  });\n}\n\n/**\n * handleOpenShortcut - Push dashbaord & package into action view navigation stack\n * @param  {SyntheticEvent} event Original event\n * @param  {Object} app Package data\n * @return {undefined} No return value\n */\nfunction handleOpenShortcut(event, app) {\n  Reaction.hideActionViewDetail();\n  Reaction.showActionView(app);\n}\n\nfunction composer(props, onData) {\n  const audience = Roles.getRolesForUser(Meteor.userId(), Reaction.getShopId());\n  const settings = Reaction.Apps({ provides: \"settings\", enabled: true, audience }) || [];\n\n  const dashboard = Reaction.Apps({ provides: \"dashboard\", enabled: true, audience })\n    .filter((d) => typeof Template[d.template] !== \"undefined\") || [];\n\n  onData(null, {\n    currentView: Reaction.getActionView(),\n    groupedPackages: {\n      actions: {\n        title: \"Actions\",\n        i18nKeyTitle: \"admin.dashboard.packageGroupActionsLabel\",\n        packages: dashboard\n      },\n      settings: {\n        title: \"Settings\",\n        i18nKeyTitle: \"admin.dashboard.packageGroupSettingsLabel\",\n        packages: settings\n      }\n    },\n\n    // Callbacks\n    handleShowPackage,\n    handleShowDashboard,\n    handleOpenShortcut\n  });\n}\n\nexport default function PackageListContainer(Comp) {\n  function CompositeComponent(props) {\n    return (\n      <TranslationProvider>\n        <Comp {...props} />\n      </TranslationProvider>\n    );\n  }\n\n  return composeWithTracker(composer, Loading)(CompositeComponent);\n}\n","import React from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { TranslationProvider, AdminContextProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport { isRevisionControlEnabled } from \"/imports/plugins/core/revisions/lib/api\";\n\nconst handleAddProduct = () => {\n  Reaction.setUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n  Meteor.call(\"products/createProduct\", (error, productId) => {\n    if (Meteor.isClient) {\n      let currentTag;\n      let currentTagId;\n\n      if (error) {\n        throw new Meteor.Error(\"createProduct error\", error);\n      } else if (productId) {\n        currentTagId = Session.get(\"currentTag\");\n        currentTag = Tags.findOne(currentTagId);\n        if (currentTag) {\n          Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n        }\n        // go to new product\n        Reaction.Router.go(\"product\", {\n          handle: productId\n        });\n      }\n    }\n  });\n};\n\nconst handleViewContextChange = (event, value) => {\n  Reaction.setUserPreferences(\"reaction-dashboard\", \"viewAs\", value);\n\n  if (Reaction.isPreview() === true) {\n    // Save last action view state\n    const saveActionViewState = Reaction.getActionView();\n    Reaction.setUserPreferences(\"reaction-dashboard\", \"savedActionViewState\", saveActionViewState);\n\n    // hideActionView during isPreview === true\n    Reaction.hideActionView();\n  } else {\n    // // Reload previous actionView, if saved. Otherwise, don't show.\n    // const savedActionViewState = Reaction.getUserPreferences(\"reaction-dashboard\", \"savedActionViewState\");\n    //\n    // if (savedActionViewState) {\n    //   Reaction.showActionView(savedActionViewState);\n    // }\n  }\n};\n\nfunction composer(props, onData) {\n  // Reactive data sources\n  const routeName = Reaction.Router.getRouteName();\n\n  // Standard variables\n  const packageButtons = [];\n\n  if (routeName !== \"dashboard\" && props.showPackageShortcuts) {\n    const registryItems = Reaction.Apps({ provides: \"settings\", container: \"dashboard\" });\n\n    for (const item of registryItems) {\n      if (Reaction.hasPermission(item.route, Meteor.userId())) {\n        let icon = item.icon;\n\n        if (!item.icon && item.provides === \"settings\") {\n          icon = \"gear\";\n        }\n\n        packageButtons.push({\n          href: item.route,\n          icon: icon,\n          tooltip: i18next.t(item.i18nKeyLabel, item.i18n),\n          tooltipPosition: \"left middle\",\n          onClick() {\n            Reaction.showActionView(item);\n          }\n        });\n      }\n    }\n  }\n\n  onData(null, {\n    packageButtons,\n    dashboardHeaderTemplate: props.data.dashboardHeader,\n    isPreview: Reaction.isPreview(),\n    isEnabled: isRevisionControlEnabled(),\n    isActionViewAtRootView: Reaction.isActionViewAtRootView(),\n    actionViewIsOpen: Reaction.isActionViewOpen(),\n    hasCreateProductAccess: Reaction.hasPermission(\"createProduct\", Meteor.userId(), Reaction.shopId),\n\n    // Callbacks\n    onAddProduct: handleAddProduct,\n    onViewContextChange: handleViewContextChange\n  });\n}\n\nexport default function ToolbarContainer(Comp) {\n  function CompositeComponent(props) {\n    return (\n      <TranslationProvider>\n        <AdminContextProvider>\n          <Comp {...props} />\n        </AdminContextProvider>\n      </TranslationProvider>\n    );\n  }\n\n  return composeWithTracker(composer, null)(CompositeComponent);\n}\n","import \"./templates/import/import.html\";\nimport \"./templates/import/import.js\";\n\nimport \"./templates/packages/grid/grid.html\";\nimport \"./templates/packages/grid/grid.js\";\nimport \"./templates/packages/grid/package.html\";\nimport \"./templates/packages/grid/package.js\";\nimport \"./templates/packages/packages.html\";\nimport \"./templates/packages/packages.js\";\n\nimport \"./templates/settings/settings.html\";\nimport \"./templates/settings/settings.js\";\n\nimport \"./templates/shop/settings/settings.html\";\nimport \"./templates/shop/settings/settings.js\";\n\nimport \"./templates/dashboard.html\";\nimport \"./templates/dashboard.js\";\n","import _ from \"lodash\";\nimport Drop from \"tether-drop\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Blaze } from \"meteor/blaze\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport ToolbarContainer from \"/imports/plugins/core/dashboard/client/containers/toolbarContainer\";\nimport Toolbar from \"/imports/plugins/core/dashboard/client/components/toolbar\";\nimport { ActionViewContainer } from \"/imports/plugins/core/dashboard/client/containers\";\nimport { ActionView } from \"/imports/plugins/core/dashboard/client/components\";\n\nTemplate.coreAdminLayout.onRendered(function () {\n  $(\"body\").addClass(\"admin\");\n});\n\nTemplate.coreAdminLayout.onDestroyed(() => {\n  $(\"body\").removeClass(\"admin\");\n});\n\nTemplate.coreAdminLayout.helpers({\n  PublishContainerComponent() {\n    return {\n      component: ToolbarContainer(Toolbar),\n      data: Template.currentData()\n    };\n  },\n  ActionViewComponent() {\n    return {\n      component: ActionViewContainer(ActionView),\n      data: Template.currentData()\n    };\n  },\n  shortcutButtons() {\n    const instance = Template.instance();\n    const shortcuts = Reaction.Apps({ provides: \"shortcut\", enabled: true });\n    const items = [];\n\n    if (_.isArray(shortcuts)) {\n      for (const shortcut of shortcuts) {\n        if (!shortcut.container) {\n          items.push({\n            type: \"link\",\n            href: Reaction.Router.pathFor(shortcut.name),\n            className: Reaction.Router.isActiveClassName(shortcut.name),\n            icon: shortcut.icon,\n            tooltip: shortcut.label || \"\",\n            i18nKeyTooltip: shortcut.i18nKeyLabel,\n            tooltipPosition: \"left middle\"\n          });\n        }\n      }\n    }\n\n    items.push({ type: \"seperator\" });\n\n    items.push({\n      icon: \"plus\",\n      tooltip: \"Create Content\",\n      i18nKeyTooltip: \"app.createContent\",\n      tooltipPosition: \"left middle\",\n      onClick(event) {\n        if (!instance.dropInstance) {\n          instance.dropInstance = new Drop({\n            target: event.currentTarget,\n            content: \"\",\n            constrainToWindow: true,\n            classes: \"drop-theme-arrows\",\n            position: \"right center\"\n          });\n\n          Blaze.renderWithData(Template.createContentMenu, {}, instance.dropInstance.content);\n        }\n\n        instance.dropInstance.open();\n      }\n    });\n\n    return items;\n  },\n\n  isSeperator(props) {\n    if (props.type === \"seperator\") {\n      return true;\n    }\n    return false;\n  },\n\n  packageButtons() {\n    const routeName = Reaction.Router.getRouteName();\n\n    if (routeName !== \"dashboard\") {\n      const registryItems = Reaction.Apps({ provides: \"settings\", container: routeName });\n      const buttons = [];\n\n      for (const item of registryItems) {\n        if (Reaction.hasPermission(item.route, Meteor.userId())) {\n          let icon = item.icon;\n\n          if (!item.icon && item.provides === \"settings\") {\n            icon = \"gear\";\n          }\n\n          buttons.push({\n            href: item.route,\n            icon: icon,\n            tooltip: i18next.t(item.i18nKeyLabel, item.i18n),\n            tooltipPosition: \"left middle\",\n            onClick() {\n              Reaction.showActionView(item);\n            }\n          });\n        }\n      }\n\n      return buttons;\n    }\n    return [];\n  },\n\n  control: function () {\n    return Reaction.getActionView();\n  },\n\n  adminControlsClassname: function () {\n    if (Reaction.isActionViewOpen()) {\n      return \"show-settings\";\n    }\n    return \"\";\n  },\n\n  /**\n   * thisApp\n   * @return {Object} Registry entry for item\n   */\n  thisApp() {\n    const reactionApp = Packages.findOne({\n      \"registry.provides\": \"settings\",\n      \"registry.route\": Reaction.Router.getRouteName()\n    }, {\n      enabled: 1,\n      registry: 1,\n      name: 1,\n      route: 1\n    });\n\n    if (reactionApp) {\n      const settingsData = _.find(reactionApp.registry, function (item) {\n        return item.route === Reaction.Router.getRouteName() && item.provides === \"settings\";\n      });\n\n      return settingsData;\n    }\n    return reactionApp;\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport Alerts from \"./inlineAlerts\";\n\n/**\n * inlineAlert helpers\n */\n\nTemplate.inlineAlert.onCreated(function () {\n  this.isFirstRender = true;\n  return this.isFirstRender;\n});\n\nTemplate.inlineAlert.onRendered(function () {\n  const alert = this.data;\n  const $node = $(this.firstNode);\n\n  Meteor.defer(function () {\n    Alerts.collection_.update(alert._id, {\n      $set: {\n        seen: true\n      }\n    });\n  });\n\n  $node.removeClass(\"hide\").hide().fadeIn(alert.options.fadeIn, function () {\n    if (alert.options.autoHide) {\n      Meteor.setTimeout(function () {\n        $node.fadeOut(alert.options.fadeOut, function () {\n          return Alerts.collection_.remove(alert._id);\n        });\n      }, alert.options.autoHide);\n    }\n  });\n});\n\nTemplate.inlineAlerts.helpers({\n  alerts: function (alertPlacement, alertId) {\n    let id = alertId;\n    let placement = alertPlacement;\n    if (!placement) {\n      placement = \"\";\n    }\n    if (!id) {\n      id = \"\";\n    }\n    return Alerts.collection_.find({\n      \"options.placement\": placement,\n      \"options.id\": id\n    });\n  }\n});\n\nTemplate.inlineAlert.events({\n  \"click button.close\": function () {\n    return Alerts.collection_.remove(this._id);\n  }\n});\n","import _ from \"lodash\";\nimport { i18next } from \"/client/api\";\nimport { Mongo } from \"meteor/mongo\";\n\n/*\n * Forked and modifed from https://github.com/asktomsk/bootstrap-alerts/\n */\nconst Alerts = {\n\n  /*\n  Default options. Can be overridden for application\n   */\n  defaultOptions: {\n\n    /*\n    Button with cross icon to hide (close) alert\n     */\n    dismissable: true,\n\n    /*\n    CSS classes to be appended on each alert DIV (use space for separator)\n     */\n    classes: \"\",\n\n    /*\n    Hide alert after delay in ms or false to infinity\n     */\n    autoHide: false,\n\n    /*\n    Time in ms before alert fully appears\n     */\n    fadeIn: 200,\n\n    /*\n    If autoHide enabled then fadeOut is time in ms before alert disappears\n     */\n    fadeOut: 3000,\n\n    /*\n    Amount of alerts to be displayed\n     */\n    alertsLimit: 3,\n\n    /*\n    Allows use HTML in messages\n     */\n    html: false,\n\n    /*\n     * define placement to only show where matches\n     * use: {{inlineAlerts placement=\"cart\"}}\n     * Alerts.add \"message\",\"danger\", placement:\"cart\"\n     */\n    placement: \"\",\n\n    /*\n    Translation key for i18n (translations collection)\n     */\n    i18nKey: \"\",\n\n    /*\n    unique id (for multiple message placements)\n     */\n    id: \"\"\n  },\n\n  /*\n  Add an alert\n\n  @param message (String) Text to display.\n  @param mode (String) One of bootstrap alerts types: success, info, warning, danger\n  @param options (Object) Options if required to override some of default ones.\n  See Alerts.defaultOptions for all values.\n   */\n  add: function (alertMessage, mode, alertOptions) {\n    let a;\n    let message = alertMessage;\n    let options = alertOptions;\n    // check options to see if we have translation\n    if (options && options.i18nKey && options.i18nKey !== i18next.t(options.i18nKey)) {\n      message = i18next.t(options.i18nKey);\n    }\n    // get default options\n    options = _.defaults(alertOptions || {}, Alerts.defaultOptions);\n\n    if (options.type) {\n      a = Alerts.collection_.findOne({\n        \"options.type\": options.type\n      });\n      if (a) {\n        Alerts.collection_.update(a._id, {\n          $set: {\n            message: message,\n            mode: mode,\n            options: options\n          }\n        });\n        return;\n      }\n    }\n\n    const count = Alerts.collection_.find({}).count();\n    if (count >= options.alertsLimit) {\n      Alerts.collection_.find({}, {\n        sort: {\n          created: -1\n        },\n        skip: options.alertsLimit - 1\n      }).forEach(function (row) {\n        Alerts.collection_.remove(row._id);\n      });\n    }\n    Alerts.collection_.insert({\n      message: message,\n      mode: mode,\n      options: options,\n      seen: false,\n      created: +new Date()\n    });\n  },\n\n  /*\n  Call this function before loading a new page to clear errors from previous page\n  Best way is using Router filtering feature to call this function\n   */\n  removeSeen: function () {\n    Alerts.collection_.remove({\n      \"seen\": true,\n      \"options.sticky\": {\n        $ne: true\n      }\n    });\n  },\n\n  /*\n  If you provide a `type` option when adding an alert, you can call this function\n  to later remove that alert.\n   */\n  removeType: function (type) {\n    Alerts.collection_.remove({\n      \"options.type\": type\n    });\n  },\n  collection_: new Mongo.Collection(null)\n};\n\nwindow.Alerts = Alerts;\nexport default Alerts;\n","/* global sAlert */\nimport _ from \"lodash\";\nimport swal from \"sweetalert2\";\nimport { Meteor } from \"meteor/meteor\";\nimport \"sweetalert2/dist/sweetalert2.css\";\nimport Alerts from \"./inlineAlerts\";\n\n// Extends Bootstaps alerts and add more alert types\nMeteor.startup(function () {\n  sAlert.config({\n    effect: \"stackslide\",\n    position: \"bottom-left\",\n    timeout: 5000,\n    html: false,\n    onRouteClose: true,\n    stack: true,\n    // or you can pass an object:\n    // stack: {\n    //     spacing: 10 // in px\n    //     limit: 3 // when fourth alert appears all previous ones are cleared\n    // }\n    offset: 0, // in px - will be added to first alert (bottom or top - depends of the position in config)\n    beep: false\n    // examples:\n    // beep: '/beep.mp3'  // or you can pass an object:\n    // beep: {\n    //     info: '/beep-info.mp3',\n    //     error: '/beep-error.mp3',\n    //     success: '/beep-success.mp3',\n    //     warning: '/beep-warning.mp3'\n    // }\n    // onClose: _.noop //\n    // examples:\n    // onClose: function() {\n    //     /* Code here will be executed once the alert closes. */\n    // }\n  });\n});\n\nObject.assign(Alerts, {\n\n  inline(alertMessage, type, alertOptions) {\n    // Convert error to danger, for inlineAlerts\n    const mode = type === \"error\" ? \"danger\" : type;\n    return this.add(alertMessage, mode, alertOptions);\n  },\n\n  /**\n   * Show a popup alert\n   * @example\n   * // Simple\n   * Alerts.alert(\"title\", \"message\", {}, callbackFunction);\n   * // - OR, for more control -\n   * Alerts.alert({\n   * \ttitle: \"Title\",\n   * \ttext: \"Message Text\",\n   * \ttype: \"success|info|warning|error|\"\n   * }, callbackFunction);\n   *\n   * @param  {String|Object} titleOrOptions Pass a string or an object containing options\n   * @param  {[type]}   messageOrCallback [description]\n   * @param  {[type]}   options           [description]\n   * @param  {Function} callback          [description]\n   * @return {[type]}                     [description]\n   */\n  alert(titleOrOptions, messageOrCallback, options, callback) {\n    if (_.isObject(titleOrOptions)) {\n      return swal({\n        type: \"info\",\n        ...titleOrOptions\n      }).then((isConfirm) => {\n        if (isConfirm === true && typeof messageOrCallback === \"function\") {\n          messageOrCallback(isConfirm, false);\n        }\n      }, dismiss => {\n        if (dismiss === \"cancel\" || dismiss === \"esc\" || dismiss === \"overlay\") {\n          messageOrCallback(false, dismiss);\n        }\n      }).catch(function (err) {\n        if (err === \"cancel\" || err === \"overlay\" || err === \"timer\") {\n          return undefined; // Silence error\n        }\n        throw err;\n      });\n    }\n\n    const title = titleOrOptions;\n    const message = messageOrCallback;\n\n    return swal({\n      title,\n      text: message,\n      type: \"info\",\n      ...options\n    }).then((isConfirm) => {\n      if (isConfirm === true && typeof callback === \"function\") {\n        callback(isConfirm);\n      }\n    }).catch(function (err) {\n      if (err === \"cancel\" || err === \"overlay\" || err === \"timer\") {\n        return undefined; // Silence error\n      }\n      throw err;\n    });\n  },\n\n  toast(message, type, options) {\n    switch (type) {\n      case \"error\":\n      case \"warning\":\n      case \"success\":\n      case \"info\":\n        return sAlert[type](message, options);\n      default:\n        return sAlert.success(message, options);\n    }\n  }\n});\n","import { Reaction } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.createContentMenu.helpers({\n  buttonProps(item) {\n    return {\n      label: item.label,\n      i18nKeyLabel: item.i18nKeyLabel,\n      status: \"default\",\n      onClick() {\n        // TODO: Move this to somewhere better, like, core or product package\n        if (item.route === \"/products/createProduct\") {\n          Meteor.call(\"products/createProduct\", (error, productId) => {\n            if (Meteor.isClient) {\n              let currentTag;\n              let currentTagId;\n\n              if (error) {\n                throw new Meteor.Error(\"createProduct error\", error);\n              } else if (productId) {\n                currentTagId = Session.get(\"currentTag\");\n                currentTag = Tags.findOne(currentTagId);\n                if (currentTag) {\n                  Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n                }\n                // go to new product\n                Reaction.Router.go(\"product\", {\n                  handle: productId\n                });\n              }\n            }\n          });\n        }\n      }\n    };\n  },\n\n  items() {\n    const apps = Reaction.Apps({ provides: \"shortcut\", container: \"addItem\" }) || [];\n    return apps;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\n\n/**\n * layoutHeader events\n */\nTemplate.layoutHeader.events({\n  \"click .navbar-accounts .dropdown-toggle\": function () {\n    return setTimeout(function () {\n      return $(\"#login-email\").focus();\n    }, 100);\n  },\n  \"click .header-tag, click .navbar-brand\": function () {\n    return $(\".dashboard-navbar-packages ul li\").removeClass(\"active\");\n  }\n});\n\nTemplate.layoutHeader.helpers({\n  coreNavProps() {\n    const instance = Template.instance();\n    return {\n      onMenuButtonClick() {\n        instance.toggleMenuCallback();\n      }\n    };\n  }\n});\n","import { Template } from \"meteor/templating\";\n\nTemplate.notFound.onCreated(function () {\n  document.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", \"<meta name='prerender-status-code' content='404'>\");\n  // todo report not found source\n});\n","import { Template } from \"meteor/templating\";\n\nTemplate.unauthorized.onCreated(function () {\n  document.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", \"<meta name='prerender-status-code' content='403'>\");\n  // todo report not found source\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Session } from \"meteor/session\";\nimport { $ } from \"meteor/jquery\";\nimport { Reaction, Router } from \"/client/api\";\nimport { Packages, Shops } from \"/lib/collections\";\n\n/**\n * getRouteLayout\n * Gets layout combo based on current route context\n * @param  {Object} context - route context\n * @returns {Object|null} The layout hash\n */\nfunction getRouteLayout(context) {\n  const pkg = Packages.findOne({ \"registry.name\": context.route.name, \"enabled\": true });\n\n  if (pkg) {\n    const registryRoute = pkg.registry.find((x) => {\n      return x.name === context.route.name;\n    });\n\n    if (registryRoute) {\n      // set a default layout if none is given\n      if (!registryRoute.layout) {\n        registryRoute.layout = Session.get(\"DEFAULT_LAYOUT\") || \"coreLayout\";\n      }\n\n      const shop = Shops.findOne(Reaction.getShopId());\n      const currentLayout = shop.layout.find((x) => {\n        if (x.layout === registryRoute.layout && x.workflow === registryRoute.workflow && x.enabled === true) {\n          return true;\n        }\n      });\n\n      return currentLayout;\n    }\n  }\n\n  return null;\n}\n\n/**\n * addBodyClasses\n * Adds body classes to help themes distinguish pages and components based on the current route name and layout theme\n * @param  {Object} context - route context\n * @returns {undefined}\n */\nfunction addBodyClasses(context) {\n  let classes;\n\n  if (context.route.name === undefined) {\n    classes = [\n      \"app-not-found\"\n    ];\n  } else {\n    classes = [\n      // push clean route-name\n      \"app-\" + context.route.name.replace(/[\\/_]/i, \"-\")\n    ];\n  }\n\n  // find the layout combo for this route\n  const currentLayout = getRouteLayout(context);\n\n  // add theme class for route layout or default\n  if (currentLayout && currentLayout.theme) {\n    classes.push(currentLayout.theme);\n  } else {\n    classes.push(\"default\");\n  }\n\n  classes = classes.join(\" \");\n\n  $(\"body\").removeClass(Session.get(\"BODY_CLASS\")).addClass(classes);\n\n  // save for removal on next enter\n  Session.set(\"BODY_CLASS\", classes);\n}\n\nRouter.Hooks.onEnter(addBodyClasses);\n\nMeteor.startup(() => {\n  Tracker.autorun(() => {\n    const subscription = Reaction.Subscriptions.Shops;\n    if (subscription.ready()) {\n      const shop = Shops.findOne({});\n\n      if (shop) {\n        if (shop.theme) {\n          $(\"#reactionLayoutStyles\").text(shop.theme.styles || \"\");\n        } else {\n          $(\"#reactionLayoutStyles\").text(\"\");\n        }\n      }\n    }\n  });\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Template } from \"meteor/templating\";\n\nclass CoreLayout extends Component {\n  static propTypes = {\n    actionViewIsOpen: PropTypes.bool,\n    data: PropTypes.object,\n    structure: PropTypes.object\n  }\n\n  render() {\n    const { layoutHeader, layoutFooter, template } = this.props.structure || {};\n    const pageClassName = classnames({\n      \"page\": true,\n      \"show-settings\": this.props.actionViewIsOpen\n    });\n\n    return (\n      <div className={pageClassName} id=\"reactionAppContainer\">\n        { Template[layoutHeader] &&\n          <Blaze template={layoutHeader} className=\"reaction-navigation-header\" />\n        }\n\n        <Blaze template=\"cartDrawer\" className=\"reaction-cart-drawer\" />\n\n        { Template[template] &&\n          <main>\n            <Blaze template={template} />\n          </main>\n        }\n\n        { Template[layoutFooter] &&\n          <Blaze template={layoutFooter} className=\"reaction-navigation-footer footer-default\" />\n        }\n      </div>\n    );\n  }\n}\n\nexport default CoreLayout;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\n\nclass PrintLayout extends Component {\n  static propTypes = {\n    structure: PropTypes.object\n  }\n\n  render() {\n    return (\n      <Blaze template={this.props.structure.template} className=\"reaction-print-layout\" />\n    );\n  }\n}\n\nexport default PrintLayout;\n","import \"./templates/layout/admin/admin.html\";\nimport \"./templates/layout/admin/admin.js\";\nimport \"./templates/layout/alerts/alerts.html\";\nimport \"./templates/layout/alerts/alerts.js\";\nimport \"./templates/layout/alerts/inlineAlerts.js\";\nimport \"./templates/layout/alerts/reactionAlerts.js\";\nimport \"./templates/layout/createContentMenu/createContentMenu.html\";\nimport \"./templates/layout/createContentMenu/createContentMenu.js\";\nimport \"./templates/layout/footer/footer.html\";\nimport \"./templates/layout/header/brand.html\";\nimport \"./templates/layout/header/button.html\";\nimport \"./templates/layout/header/header.html\";\nimport \"./templates/layout/header/header.js\";\nimport \"./templates/layout/header/tags.html\";\nimport \"./templates/layout/notFound/notFound.html\";\nimport \"./templates/layout/notFound/notFound.js\";\nimport \"./templates/layout/notice/unauthorized.html\";\nimport \"./templates/layout/notice/unauthorized.js\";\nimport \"./templates/layout/layout.html\";\n\nimport \"./templates/theme/theme.html\";\nimport \"./templates/theme/theme.js\";\n\n\nimport CoreLayout from \"./components/coreLayout\";\nimport PrintLayout from \"./components/printLayout\";\nimport { registerComponent } from \"../lib/components\";\n\n\nregisterComponent({\n  name: \"coreLayout\", // lowercased to match the legacy blaze \"coreLayout\"\n  component: CoreLayout\n});\n\n\nregisterComponent({\n  name: \"printLayout\", // lowercased to match the legacy blaze \"printLayout\"\n  component: PrintLayout\n});\n","import ReactDOM from \"react-dom\";\nimport _ from \"lodash\";\nimport { Blaze } from \"meteor/blaze\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Template } from \"meteor/templating\";\nimport BlazeComponent from \"meteor/gadicc:blaze-react-component\";\nimport PropTypes from \"prop-types\";\n\nclass BlazeLayout extends BlazeComponent {\n  static propTypes = {\n    blazeLayout: PropTypes.any\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.blazeTemplate !== this.props.blazeTemplate) {\n      Blaze.remove(this._blazeView);\n      this.renderBlazeView();\n    }\n  }\n\n  renderBlazeView() {\n    this._blazeData = new ReactiveVar(_.omit(this.props, \"blazeTemplate\"));\n\n    let template;\n    const tArg = this.props.blazeTemplate;\n\n    if (typeof tArg === \"string\") {\n      template = Template[tArg];\n      if (!template) {\n        throw new Error(`No Template[\"${tArg}\"] exists.  If this template `\n          + \"originates in your app, make sure you have the `templating` \"\n          + \"package installed (and not, for e.g. `static-html`)\");\n      }\n    } else if (tArg instanceof Blaze.Template) {\n      template = tArg;\n    } else {\n      throw new Error(\"Invalid blazeTemplate= argument specified.  Expected \"\n        + \"the string name of an existing Template, or the template \"\n        + \"itself, instead got ''\" + typeof tArg + \": \"\n        + JSON.stringify(tArg));\n    }\n\n    this._blazeView = Blaze.renderWithData(\n      template,\n      () => this._blazeData.get(),\n      ReactDOM.findDOMNode(this._blazeRef)\n    );\n  }\n\n  shouldComponentUpdate(nextProps) {\n    // Never call render() for props except template again; Blaze will do what's necessary.\n    return nextProps.blazeTemplate !== this.props.blazeTemplate;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this._blazeData.set(_.omit(nextProps, \"blazeTemplate\"));\n  }\n}\n\nexport default BlazeLayout;\n","import Immutable from \"immutable\";\n\nlet registeredComponents = Immutable.Map();\n\nexport function registerComponent(componentInfo) {\n  registeredComponents = registeredComponents.set(\n    componentInfo.name,\n    componentInfo\n  );\n}\n\nexport function getComponent(name) {\n  const componentInfo = registeredComponents.get(name);\n  return componentInfo && componentInfo.component || null;\n}\n\nexport function getAllComponents() {\n  return registeredComponents.toObject();\n}\n","export { default as ReactionLayout } from \"./reactionLayout\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Radium from \"radium\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction } from \"/client/api\";\nimport classnames from \"classnames\";\nimport { getComponent } from \"/imports/plugins/core/layout/lib/components\";\nimport { Templates } from \"/lib/collections\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\n\nclass ReactionLayout extends Component {\n  get layout() {\n    return this.props.layout;\n  }\n\n  checkElementPermissions(block) {\n    let permissions;\n    const hasAdminAccess = Reaction.hasAdminAccess();\n\n    if (hasAdminAccess === false) {\n      permissions = block.audience || this.props.defaultAudience;\n    } else {\n      permissions = block.permissions || this.props.defaultPermissions;\n    }\n\n    return Reaction.hasPermission(permissions || []);\n  }\n\n  renderLayout(children) {\n    if (!Array.isArray(children)) {\n      return null;\n    }\n\n    const elements = children.map((block, index) => {\n      let childElements;\n\n      if (Array.isArray(block.children)) {\n        childElements = block.children.map((child, childIndex) => {\n          if (child.type === \"block\") {\n            return this.renderLayout([child]);\n          }\n\n          if (this.checkElementPermissions(child)) {\n            let component = child.component;\n\n            if (typeof child.component === \"string\") {\n              component = getComponent(child.component);\n            }\n\n            return React.createElement(component, {\n              key: childIndex,\n              ...(child.props || {}),\n              ...this.props.layoutProps\n            });\n          }\n\n          return null;\n        });\n      }\n\n\n      if (this.checkElementPermissions(block)) {\n        return React.createElement(block.element || \"div\", {\n          key: index,\n          // className: classnames(`rui col-xs-${block.columns || 12}`, block.className),\n          className: classnames({\n            rui: true,\n            item: true,\n            [block.size || \"full\"]: true,\n            align: typeof block.align === \"string\",\n            [block.align || \"start\"]: true,\n            justify: typeof block.align === \"string\",\n            [block.justify || \"start\"]: true,\n            axis: true, // typeof block.axis === \"string\",\n            horizontal: block.axis === \"horizontal\",\n            vertical: block.axis !== \"horizontal\"\n          }, block.className),\n          style: block.style,\n          children: childElements\n        });\n      }\n\n      return null;\n    });\n\n    return elements;\n  }\n\n  render() {\n    return (\n      <div className=\"rui layout-base items flex\">\n        {this.renderLayout(this.layout)}\n      </div>\n    );\n  }\n}\n\nReactionLayout.propTypes = {\n  defaultAudience: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string)\n  ]),\n  defaultPermissions: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string)\n  ]),\n  layout: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  layoutProps: PropTypes.object\n};\n\nfunction composer(props, onData) {\n  const sub = Meteor.subscribe(\"Templates\");\n\n  if (sub.ready()) {\n    const templateInfo = Templates.findOne({\n      name: props.layoutName\n    });\n\n    if (templateInfo) {\n      const templateData = templateInfo.template;\n\n      onData(null, {\n        defaultPermissions: [\"admin\"],\n        defaultAudience: [\"guest\", \"anonymous\"],\n        layout: templateData\n      });\n    }\n  }\n}\n\nexport default composeWithTracker(composer, Loading)(Radium(ReactionLayout));\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Media } from \"/lib/collections\";\n\n/**\n * ordersListItems helpers\n *\n */\nTemplate.ordersListItems.helpers({\n  media: function () {\n    const cartImagesSub = Meteor.subscribe(\"CartItemImage\", this);\n    if (cartImagesSub.ready()) {\n      const variantImage = Media.findOne({\n        \"metadata.productId\": this.productId,\n        \"metadata.variantId\": this.variants._id\n      });\n      // variant image\n      if (variantImage) {\n        return variantImage;\n      }\n      // find a default image\n      const productImage = Media.findOne({\n        \"metadata.productId\": this.productId\n      });\n      if (productImage) {\n        return productImage;\n      }\n      return false;\n    }\n    return false;\n  },\n\n  items() {\n    const { order } = Template.instance().data;\n    const combinedItems = [];\n\n\n    if (order) {\n      // Lopp through all items in the order. The items are split into indivital items\n      for (const orderItem of order.items) {\n        // Find an exising item in the combinedItems array\n        const foundItem = combinedItems.find((combinedItem) => {\n          // If and item variant exists, then we return true\n          if (combinedItem.variants) {\n            return combinedItem.variants._id === orderItem.variants._id;\n          }\n\n          return false;\n        });\n\n        // Increment the quantity count for the duplicate product variants\n        if (foundItem) {\n          foundItem.quantity++;\n        } else {\n          // Otherwise push the unique item into the combinedItems array\n          combinedItems.push(orderItem);\n        }\n      }\n\n      return combinedItems;\n    }\n\n    return false;\n  }\n});\n","import moment from \"moment\";\nimport { Template } from \"meteor/templating\";\nimport { Orders, Shops } from \"/lib/collections\";\n\n/**\n * dashboardOrdersList helpers\n *\n */\nTemplate.dashboardOrdersList.helpers({\n  orderStatus() {\n    if (this.workflow.status === \"coreOrderCompleted\") {\n      return true;\n    }\n  },\n  orders(data) {\n    if (data.hash.data) {\n      return data.hash.data;\n    }\n    return Orders.find({}, {\n      sort: {\n        createdAt: -1\n      },\n      limit: 25\n    });\n  },\n  orderAge() {\n    return moment(this.createdAt).fromNow();\n  },\n  shipmentTracking() {\n    return this.shipping[0].shipmentMethod.tracking;\n  },\n  shopName() {\n    const shop = Shops.findOne(this.shopId);\n    return shop !== null ? shop.name : void 0;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Router } from \"/client/api\";\nimport { Orders } from \"/lib/collections\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\n\n/**\n* completedPDFLayout\n* inheritsHelpersFrom dashboardOrdersList\n* Uses the browser print function.\n*/\nTemplate.completedPDFLayout.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    order: {}\n  });\n\n  const currentRoute = Router.current();\n\n  this.autorun(() => {\n    this.subscribe(\"Orders\");\n\n    const order = Orders.findOne({\n      _id: currentRoute.params.id\n    });\n\n    this.state.set({\n      order\n    });\n  });\n});\n\n\nTemplate.completedPDFLayout.helpers({\n  order() {\n    return Template.instance().state.get(\"order\");\n  },\n  billing() {\n    const order = Template.instance().state.get(\"order\");\n    if (order) {\n      return order.billing[0];\n    }\n\n    return null;\n  }\n});\n","import { Template } from \"meteor/templating\";\n\n/**\n * ordersListSummary helpers\n *\n * @returns paymentInvoice\n */\nTemplate.ordersListSummary.helpers({\n  invoice() {\n    return this.invoice;\n  }\n});\n","import moment from \"moment\";\nimport { Template } from \"meteor/templating\";\nimport { Accounts } from \"/lib/collections\";\n\n/**\n* pageOrderDetail helpers\n*\n*/\nTemplate.pageOrderDetail.helpers({\n  userProfile: function () {\n    if (typeof this.userId === \"string\") {\n      const userProfile = Accounts.findOne(this.userId);\n      return userProfile.profile;\n    }\n  },\n  orderAge: function () {\n    return moment(this.createdAt).fromNow();\n  },\n  shipmentTracking: function () {\n    return this.shipping.shipmentMethod.tracking;\n  },\n  paymentMethod: function () {\n    return this.payment.paymentMethod[0].processor;\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Orders } from \"/lib/collections\";\n\n/**\n * orderPage helpers\n *\n */\n\nTemplate.orderPage.helpers({\n  getNote: function () {\n    let latestNote;\n    if (this.notes) {\n      latestNote = this.notes.length - 1;\n      return this.notes[latestNote].content;\n    }\n  }\n});\n\n/**\n * orderPage events\n *\n */\n\nTemplate.orderPage.events({\n  \"click .save-label-pdf\": function () {},\n  \"click .btn-add-note\": function (event, template) {\n    const date = new Date();\n    const content = template.find(\"textarea[name=note]\").value;\n    const note = {\n      content: content,\n      userId: Meteor.userId(),\n      updatedAt: date\n    };\n    if (this.notes) {\n      if (note.content && note.content !== this.notes[this.notes.length - 1].content) {\n        Orders.update(this._id, {\n          $addToSet: {\n            notes: note\n          }\n        });\n      }\n    } else if (note.content) {\n      Orders.update(this._id, {\n        $addToSet: {\n          notes: note\n        }\n      });\n    }\n  }\n});\n","import accounting from \"accounting-js\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport $ from \"jquery\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { i18next, Logger, formatNumber, Reaction } from \"/client/api\";\nimport { NumericInput } from \"/imports/plugins/core/ui/client/components\";\nimport { Orders, Shops, Packages } from \"/lib/collections\";\nimport { ButtonSelect } from \"../../../../ui/client/components/button\";\nimport DiscountList from \"/imports/plugins/core/discounts/client/components/list\";\nimport InvoiceContainer from \"../../containers/invoiceContainer.js\";\nimport InvoiceActionsContainer from \"../../containers/invoiceActionsContainer.js\";\nimport LineItemsContainer from \"../../containers/lineItemsContainer.js\";\nimport TotalActionsContainer from \"../../containers/totalActionsContainer.js\";\n\n\n// helper to return the order payment object\n// the first credit paymentMethod on the order\n// returns entire payment method\nfunction orderCreditMethod(order) {\n  return order.billing.filter(value => value.paymentMethod.method ===  \"credit\")[0];\n}\n\n//\n// core order shipping invoice templates\n//\nTemplate.coreOrderShippingInvoice.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.refunds = new ReactiveVar([]);\n  this.refundAmount = new ReactiveVar(0.00);\n  this.state.setDefault({\n    isCapturing: false,\n    isRefunding: false,\n    isFetching: true\n  });\n\n  this.autorun(() => {\n    const currentData = Template.currentData();\n    const order = Orders.findOne(currentData.orderId);\n    const shop = Shops.findOne({});\n\n    this.state.set(\"order\", order);\n    this.state.set(\"currency\", shop.currencies[shop.currency]);\n\n    if (order) {\n      Meteor.call(\"orders/refunds/list\", order, (error, result) => {\n        if (error) Logger.warn(error);\n        this.refunds.set(result);\n        this.state.set(\"isFetching\", false);\n      });\n    }\n  });\n});\n\nTemplate.coreOrderShippingInvoice.helpers({\n  isCapturing() {\n    const instance = Template.instance();\n    if (instance.state.get(\"isCapturing\")) {\n      instance.$(\":input\").attr(\"disabled\", true);\n      instance.$(\"#btn-capture-payment\").text(\"Capturing\");\n      return true;\n    }\n    return false;\n  },\n  isRefunding() {\n    const instance = Template.instance();\n    if (instance.state.get(\"isRefunding\")) {\n      instance.$(\"#btn-refund-payment\").text(i18next.t(\"order.refunding\"));\n      return true;\n    }\n    return false;\n  },\n  isFetching() {\n    const instance = Template.instance();\n    if (instance.state.get(\"isFetching\")) {\n      return true;\n    }\n    return false;\n  },\n  DiscountList() {\n    return DiscountList;\n  },\n  InvoiceContainer() {\n    return InvoiceContainer;\n  },\n  InvoiceActionsContainer() {\n    return InvoiceActionsContainer;\n  },\n  buttonSelectComponent() {\n    return {\n      component: ButtonSelect,\n      buttons: [\n        {\n          name: \"Approve\",\n          i18nKeyLabel: \"order.approveInvoice\",\n          active: true,\n          status: \"success\",\n          eventAction: \"approveInvoice\",\n          bgColor: \"bg-success\",\n          buttonType: \"submit\"\n        }, {\n          name: \"Cancel\",\n          i18nKeyLabel: \"order.cancelInvoice\",\n          active: false,\n          status: \"danger\",\n          eventAction: \"cancelOrder\",\n          bgColor: \"bg-danger\",\n          buttonType: \"button\"\n        }\n      ]\n    };\n  },\n  LineItemsContainer() {\n    return LineItemsContainer;\n  },\n  TotalActionsContainer() {\n    return TotalActionsContainer;\n  },\n  orderId() {\n    const instance = Template.instance();\n    const state = instance.state;\n    const order = state.get(\"order\");\n    return order._id;\n  }\n});\n\n/**\n * coreOrderAdjustments events\n */\nTemplate.coreOrderShippingInvoice.events({\n  /**\n   * Click Start Cancel Order\n   * @param {Event} event - Event Object\n   * @param {Template} instance - Blaze Template\n   * @return {void}\n   */\n  \"click [data-event-action=cancelOrder]\": (event, instance) => {\n    event.preventDefault();\n    const order = instance.state.get(\"order\");\n    const invoiceTotal = order.billing[0].invoice.total;\n    const currencySymbol = instance.state.get(\"currency\").symbol;\n\n    Meteor.subscribe(\"Packages\");\n    const packageId = order.billing[0].paymentMethod.paymentPackageId;\n    const settingsKey = order.billing[0].paymentMethod.paymentSettingsKey;\n    // check if payment provider supports de-authorize\n    const checkSupportedMethods = Packages.findOne({\n      _id: packageId,\n      shopId: Reaction.getShopId()\n    }).settings[settingsKey].support;\n\n    const orderStatus = order.billing[0].paymentMethod.status;\n    const orderMode = order.billing[0].paymentMethod.mode;\n\n    let alertText;\n    if (_.includes(checkSupportedMethods, \"de-authorize\") ||\n      (orderStatus === \"completed\" && orderMode === \"capture\")) {\n      alertText = i18next.t(\"order.applyRefundDuringCancelOrder\", { currencySymbol, invoiceTotal });\n    }\n\n    Alerts.alert({\n      title: i18next.t(\"order.cancelOrder\"),\n      text: alertText,\n      type: \"warning\",\n      showCancelButton: true,\n      showCloseButton: true,\n      confirmButtonColor: \"#98afbc\",\n      cancelButtonColor: \"#98afbc\",\n      confirmButtonText: i18next.t(\"order.cancelOrderNoRestock\"),\n      cancelButtonText: i18next.t(\"order.cancelOrderThenRestock\")\n    }, (isConfirm, cancel)=> {\n      let returnToStock;\n      if (isConfirm) {\n        returnToStock = false;\n        return Meteor.call(\"orders/cancelOrder\", order, returnToStock, err => {\n          if (err) {\n            $(\".alert\").removeClass(\"hidden\").text(err.message);\n          }\n        });\n      }\n      if (cancel === \"cancel\") {\n        returnToStock = true;\n        return Meteor.call(\"orders/cancelOrder\", order, returnToStock, err => {\n          if (err) {\n            $(\".alert\").removeClass(\"hidden\").text(err.message);\n          }\n        });\n      }\n    });\n  },\n  /**\n   * Submit form\n   * @param  {Event} event - Event object\n   * @param  {Template} instance - Blaze Template\n   * @return {void}\n   */\n  \"submit form[name=capture]\": (event, instance) => {\n    event.preventDefault();\n    const state = instance.state;\n    const order = state.get(\"order\");\n\n    const paymentMethod = orderCreditMethod(order);\n    const orderTotal = accounting.toFixed(\n      paymentMethod.invoice.subtotal\n      + paymentMethod.invoice.shipping\n      + paymentMethod.invoice.taxes\n      , 2);\n\n    const discount = state.get(\"field-discount\") || order.discount;\n    // TODO: review Discount cannot be greater than original total price\n    // logic is probably not valid any more. Discounts aren't valid below 0 order.\n    if (discount > orderTotal) {\n      Alerts.inline(\"Discount cannot be greater than original total price\", \"error\", {\n        placement: \"coreOrderShippingInvoice\",\n        i18nKey: \"order.invalidDiscount\",\n        autoHide: 10000\n      });\n    } else if (orderTotal === accounting.toFixed(discount, 2)) {\n      Alerts.alert({\n        title: i18next.t(\"order.fullDiscountWarning\"),\n        showCancelButton: true,\n        confirmButtonText: i18next.t(\"order.applyDiscount\")\n      }, (isConfirm) => {\n        if (isConfirm) {\n          Meteor.call(\"orders/approvePayment\", order, (error) => {\n            if (error) {\n              Logger.warn(error);\n            }\n          });\n        }\n      });\n    } else {\n      Meteor.call(\"orders/approvePayment\", order, (error) => {\n        if (error) {\n          Logger.warn(error);\n          if (error.error === \"orders/approvePayment.discount-amount\") {\n            Alerts.inline(\"Discount cannot be greater than original total price\", \"error\", {\n              placement: \"coreOrderShippingInvoice\",\n              i18nKey: \"order.invalidDiscount\",\n              autoHide: 10000\n            });\n          }\n        }\n      });\n    }\n  },\n\n  /**\n   * Submit form\n   * @param  {Event} event - Event object\n   * @param  {Template} instance - Blaze Template\n   * @return {void}\n   */\n  \"click [data-event-action=applyRefund]\": (event, instance) => {\n    event.preventDefault();\n\n    const { state } = Template.instance();\n    const currencySymbol = state.get(\"currency\").symbol;\n    const order = instance.state.get(\"order\");\n    const paymentMethod = orderCreditMethod(order).paymentMethod;\n    const orderTotal = paymentMethod.amount;\n    const discounts = paymentMethod.discounts;\n    const refund = state.get(\"field-refund\") || 0;\n    const refunds = Template.instance().refunds.get();\n    let refundTotal = 0;\n    _.each(refunds, function (item) {\n      refundTotal += parseFloat(item.amount);\n    });\n\n    let adjustedTotal;\n\n    // TODO extract Stripe specific fullfilment payment handling out of core.\n    // Stripe counts discounts as refunds, so we need to re-add the discount to not \"double discount\" in the adjustedTotal\n    if (paymentMethod.processor === \"Stripe\") {\n      adjustedTotal = accounting.toFixed(orderTotal + discounts - refundTotal, 2);\n    } else {\n      adjustedTotal = accounting.toFixed(orderTotal - refundTotal, 2);\n    }\n\n    if (refund > adjustedTotal) {\n      Alerts.inline(\"Refund(s) total cannot be greater than adjusted total\", \"error\", {\n        placement: \"coreOrderRefund\",\n        i18nKey: \"order.invalidRefund\",\n        autoHide: 10000\n      });\n    } else {\n      Alerts.alert({\n        title: i18next.t(\"order.applyRefundToThisOrder\", { refund: refund, currencySymbol: currencySymbol }),\n        showCancelButton: true,\n        confirmButtonText: i18next.t(\"order.applyRefund\")\n      }, (isConfirm) => {\n        if (isConfirm) {\n          state.set(\"isRefunding\", true);\n          Meteor.call(\"orders/refunds/create\", order._id, paymentMethod, refund, (error, result) => {\n            if (error) {\n              Alerts.alert(error.reason);\n            }\n            if (result) {\n              Alerts.toast(i18next.t(\"mail.alerts.emailSent\"), \"success\");\n            }\n            $(\"#btn-refund-payment\").text(i18next.t(\"order.applyRefund\"));\n            state.set(\"field-refund\", 0);\n            state.set(\"isRefunding\", false);\n          });\n        }\n      });\n    }\n  },\n\n  \"click [data-event-action=makeAdjustments]\": (event, instance) => {\n    event.preventDefault();\n    Meteor.call(\"orders/makeAdjustmentsToInvoice\", instance.state.get(\"order\"));\n  },\n\n  \"click [data-event-action=capturePayment]\": (event, instance) => {\n    event.preventDefault();\n\n    instance.state.set(\"isCapturing\", true);\n\n    const order = instance.state.get(\"order\");\n    Meteor.call(\"orders/capturePayments\", order._id);\n\n    if (order.workflow.status === \"new\") {\n      Meteor.call(\"workflow/pushOrderWorkflow\", \"coreOrderWorkflow\", \"processing\", order);\n\n      Reaction.Router.setQueryParams({\n        filter: \"processing\",\n        _id: order._id\n      });\n    }\n  },\n\n  \"change input[name=refund_amount], keyup input[name=refund_amount]\": (event, instance) => {\n    instance.refundAmount.set(accounting.unformat(event.target.value));\n  }\n});\n\n\n/**\n * coreOrderShippingInvoice helpers\n */\nTemplate.coreOrderShippingInvoice.helpers({\n  NumericInput() {\n    return NumericInput;\n  },\n\n  numericInputProps(fieldName, value = 0, enabled = true) {\n    const { state } = Template.instance();\n    const order = state.get(\"order\");\n    const paymentMethod = orderCreditMethod(order);\n    const status = paymentMethod.status;\n    const isApprovedAmount = (status === \"approved\" || status === \"completed\");\n\n    return {\n      component: NumericInput,\n      numericType: \"currency\",\n      value: value,\n      disabled: !enabled,\n      isEditing: !isApprovedAmount, // Dont allow editing if its approved\n      format: state.get(\"currency\"),\n      classNames: {\n        input: { amount: true },\n        text: {\n          \"text-success\": status === \"completed\"\n        }\n      },\n      onChange(event, data) {\n        state.set(`field-${fieldName}`, data.numberValue);\n      }\n    };\n  },\n\n  refundInputProps() {\n    const { state } = Template.instance();\n    const order = state.get(\"order\");\n    const paymentMethod = orderCreditMethod(order).paymentMethod;\n    const refunds = Template.instance().refunds.get();\n\n    let refundTotal = 0;\n    _.each(refunds, function (item) {\n      refundTotal += parseFloat(item.amount);\n    });\n    const adjustedTotal = paymentMethod.amount - refundTotal;\n\n    return {\n      component: NumericInput,\n      numericType: \"currency\",\n      value: state.get(\"field-refund\") || 0,\n      maxValue: adjustedTotal,\n      format: state.get(\"currency\"),\n      classNames: {\n        input: { amount: true }\n      },\n      onChange(event, data) {\n        state.set(\"field-refund\", data.numberValue);\n      }\n    };\n  },\n\n  refundAmount() {\n    return Template.instance().refundAmount;\n  },\n\n  invoice() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n\n    const invoice = Object.assign({}, order.billing[0].invoice, {\n      totalItems: _.sumBy(order.items, (o) => o.quantity)\n    });\n    return invoice;\n  },\n\n  money(amount) {\n    return formatNumber(amount);\n  },\n\n  disabled() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const status = orderCreditMethod(order).paymentMethod.status;\n\n    if (status === \"approved\" || status === \"completed\") {\n      return \"disabled\";\n    }\n\n    return \"\";\n  },\n\n  paymentPendingApproval() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const status = orderCreditMethod(order).paymentMethod.status;\n\n    return status === \"created\" || status === \"adjustments\" || status === \"error\";\n  },\n\n  canMakeAdjustments() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const status = orderCreditMethod(order).paymentMethod.status;\n\n    if (status === \"approved\" || status === \"completed\" || status === \"refunded\") {\n      return false;\n    }\n    return true;\n  },\n\n  showAfterPaymentCaptured() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const orderStatus = orderCreditMethod(order).paymentMethod.status;\n    return orderStatus === \"completed\";\n  },\n\n  paymentApproved() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n\n    return order.billing[0].paymentMethod.status === \"approved\";\n  },\n\n  paymentCaptured() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const orderStatus = orderCreditMethod(order).paymentMethod.status;\n    const orderMode = orderCreditMethod(order).paymentMethod.mode;\n    return orderStatus === \"completed\" || (orderStatus === \"refunded\" && orderMode === \"capture\");\n  },\n\n  refundTransactions() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const transactions = orderCreditMethod(order).paymentMethod.transactions;\n\n    return _.filter(transactions, (transaction) => {\n      return transaction.type === \"refund\";\n    });\n  },\n\n  refunds() {\n    const refunds = Template.instance().refunds.get();\n    if (_.isArray(refunds)) {\n      return refunds.reverse();\n    }\n\n    return refunds;\n  },\n\n  /**\n   * Get the total after all refunds\n   * @return {Number} the amount after all refunds\n   */\n  adjustedTotal() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const paymentMethod = orderCreditMethod(order).paymentMethod;\n    const discounts = orderCreditMethod(order).invoice.discounts;\n    const refunds = Template.instance().refunds.get();\n    let refundTotal = 0;\n\n    _.each(refunds, function (item) {\n      refundTotal += parseFloat(item.amount);\n    });\n\n    if (paymentMethod.processor === \"Stripe\") {\n      return Math.abs(paymentMethod.amount + discounts - refundTotal);\n    }\n    return Math.abs(paymentMethod.amount - refundTotal);\n  },\n\n  capturedDisabled() {\n    const isLoading = Template.instance().state.get(\"isCapturing\");\n    if (isLoading) {\n      return \"disabled\";\n    }\n    return null;\n  },\n\n  refundSubmitDisabled() {\n    const amount = Template.instance().state.get(\"field-refund\") || 0;\n    const isLoading = Template.instance().state.get(\"isRefunding\");\n    if (amount === 0 || isLoading) {\n      return \"disabled\";\n    }\n\n    return null;\n  },\n\n  /**\n   * Order\n   * @summary find a single order using the order id spplied with the template\n   * data context\n   * @return {Object} A single order\n   */\n  order() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n\n    return order;\n  },\n\n  shipment() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const currentData = Template.currentData();\n    const shipment = _.filter(order.shipping, { _id: currentData.fulfillment._id })[0];\n\n    return shipment;\n  },\n\n  discounts() {\n    const enabledPaymentsArr = [];\n    const apps = Reaction.Apps({\n      provides: \"paymentMethod\",\n      enabled: true\n    });\n    for (const app of apps) {\n      if (app.enabled === true) enabledPaymentsArr.push(app);\n    }\n    let discount = false;\n\n    for (const enabled of enabledPaymentsArr) {\n      if (enabled.packageName === \"discount-codes\") {\n        discount = true;\n        break;\n      }\n    }\n    return discount;\n  },\n\n  items() {\n    const instance = Template.instance();\n    const order = instance.state.get(\"order\");\n    const currentData = Template.currentData();\n    const shipment = currentData.fulfillment;\n\n    // returns order items with shipping detail\n    const returnItems = _.map(order.items, (item) => {\n      const shipping = shipment.shipmentMethod;\n      return _.extend(item, { shipping });\n    });\n\n    let items;\n\n\n    // if avalara tax has been enabled it adds a \"taxDetail\" field for every item\n    if (order.taxes !== undefined) {\n      const taxes = order.taxes.slice(0, -1);\n\n      items = _.map(returnItems, (item) => {\n        const taxDetail = _.find(taxes, {\n          lineNumber: item._id\n        });\n        return _.extend(item, { taxDetail });\n      });\n    } else {\n      items = returnItems;\n    }\n    return items;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport OrderSummaryContainer from \"../../containers/orderSummaryContainer\";\n\nTemplate.coreOrderShippingSummary.helpers({\n  orderSummary() {\n    return {\n      component: OrderSummaryContainer,\n      ...Template.currentData()\n    };\n  }\n});\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Template } from \"meteor/templating\";\nimport { i18next, Reaction } from \"/client/api\";\nimport { Orders } from \"/lib/collections\";\n\nTemplate.coreOrderShippingTracking.onCreated(() => {\n  const template = Template.instance();\n  const currentData = Template.currentData();\n\n  template.orderDep = new Tracker.Dependency;\n  template.showTrackingEditForm = ReactiveVar(false);\n\n  function getOrder(orderId, shipmentId) {\n    template.orderDep.depend();\n    return Orders.findOne({\n      \"_id\": orderId,\n      \"shipping._id\": shipmentId\n    });\n  }\n\n  Tracker.autorun(() => {\n    template.order = getOrder(currentData.orderId, currentData.fulfillment._id);\n  });\n});\n\n/**\n * coreShipmentShipped events\n *\n */\nTemplate.coreOrderShippingTracking.events({\n  \"click [data-event-action=refresh-shipping]\": function () {\n    const instance = Template.instance();\n    instance.$(\"#btn-processing\").removeClass(\"hidden\");\n    const orderId = Template.instance().order._id;\n    Meteor.call(\"shipping/status/refresh\", orderId, (result) => {\n      if (result && result.error) {\n        instance.$(\"#btn-processing\").addClass(\"hidden\");\n        Alerts.toast(i18next.t(\"orderShipping.labelError\", { err: result.error }), \"error\", { timeout: 7000 });\n      }\n    });\n  },\n  \"click [data-event-action=shipmentShipped]\": function () {\n    const template = Template.instance();\n    Meteor.call(\"orders/shipmentShipped\", template.order, template.order.shipping[0], (err) => {\n      if (err) {\n        Alerts.toast(i18next.t(\"mail.alerts.cantSendEmail\"), \"error\");\n      } else {\n        Alerts.toast(i18next.t(\"mail.alerts.emailSent\"), \"success\");\n      }\n    });\n\n    // send notification to order owner\n    const userId = template.order.userId;\n    const type = \"orderShipped\";\n    const prefix = Reaction.getShopPrefix();\n    const url = `${prefix}/notifications`;\n    const sms = true;\n    Meteor.call(\"notification/send\", userId, type, url, sms);\n\n    // Meteor.call(\"workflow/pushOrderShipmentWorkflow\", \"coreOrderShipmentWorkflow\", \"orderShipped\", this._id);\n  },\n\n  \"click [data-event-action=resendNotification]\": function () {\n    const template = Template.instance();\n    Meteor.call(\"orders/sendNotification\", template.order, \"shipped\", (err) => {\n      if (err) {\n        Alerts.toast(i18next.t(\"mail.alerts.cantSendEmail\"), \"error\");\n      } else {\n        Alerts.toast(i18next.t(\"mail.alerts.emailSent\"), \"success\");\n      }\n    });\n  },\n\n  \"click [data-event-action=shipmentPacked]\": () => {\n    const template = Template.instance();\n\n    Meteor.call(\"orders/shipmentPacked\", template.order, template.order.shipping[0], true);\n  },\n\n  \"submit form[name=addTrackingForm]\": (event, template) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const currentData = Template.currentData();\n    const order = template.order;\n    const shipment = currentData.fulfillment;\n    const tracking = event.target.trackingNumber.value;\n\n    Meteor.call(\"orders/updateShipmentTracking\", order, shipment, tracking,\n      (error) => {\n        if (!error) {\n          template.orderDep.changed();\n          template.showTrackingEditForm.set(false);\n        }\n      });\n  },\n  \"click [data-event-action=editTracking]\": (event, template) => {\n    template.showTrackingEditForm.set(true);\n  }\n});\n\nTemplate.coreOrderShippingTracking.helpers({\n  printableLabels() {\n    const { shippingLabelUrl, customsLabelUrl } = Template.instance().order.shipping[0];\n    if (shippingLabelUrl || customsLabelUrl) {\n      return { shippingLabelUrl, customsLabelUrl };\n    }\n\n    return false;\n  },\n  isShipped() {\n    const currentData = Template.currentData();\n    const order = Template.instance().order;\n\n    const shippedItems = _.every(currentData.fulfillment.items, (shipmentItem) => {\n      const fullItem = _.find(order.items, (orderItem) => {\n        if (orderItem._id === shipmentItem._id) {\n          return true;\n        }\n      });\n\n      return !_.includes(fullItem.workflow.workflow, \"coreOrderItemWorkflow/shipped\");\n    });\n\n    return shippedItems;\n  },\n\n  isNotCanceled() {\n    const currentData = Template.currentData();\n    const order = Template.instance().order;\n\n    const canceledItems = _.every(currentData.fulfillment.items, (shipmentItem) => {\n      const fullItem = _.find(order.items, (orderItem) => {\n        if (orderItem._id === shipmentItem._id) {\n          return true;\n        }\n      });\n\n      return fullItem.workflow.status !== \"coreOrderItemWorkflow/canceled\";\n    });\n\n    return canceledItems;\n  },\n\n  isCompleted() {\n    const currentData = Template.currentData();\n    const order = Template.instance().order;\n\n    const completedItems = _.every(currentData.fulfillment.items, (shipmentItem) => {\n      const fullItem = _.find(order.items, (orderItem) => {\n        if (orderItem._id === shipmentItem._id) {\n          return true;\n        }\n      });\n\n      return _.includes(fullItem.workflow.workflow, \"coreOrderItemWorkflow/completed\");\n    });\n\n    return completedItems;\n  },\n\n  editTracking() {\n    // TODO move to a method where we loop package settings\n    // to determine if this feature is enabled.\n    // somewhere in here is where I wish this was converted to React!\n    const { settings } = Reaction.getPackageSettings(\"reaction-shipping-rates\");\n    // TODO: future proof by not using flatRates, but rather look for editable:true\n    if (settings && settings.flatRates.enabled === true) {\n      const template = Template.instance();\n      const shipment = template.order.shipping[0];\n      const editing = template.showTrackingEditForm.get();\n      let view = false;\n      if (editing === true || !shipment.tracking && editing === false) {\n        view = true;\n      }\n      // TODO modularize tracking more, editable to settings\n      if (view && shipment.shipmentMethod.carrier === \"Flat Rate\") {\n        return true;\n      }\n    }\n    return false;\n  },\n  order() {\n    return Template.instance().order;\n  },\n  shipment() {\n    return Template.instance().order.shipping[0];\n  },\n  shipmentReady() {\n    const order = Template.instance().order;\n    const shipment = order.shipping[0];\n\n    return shipment.packed && shipment.tracking;\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { Orders } from \"/lib/collections\";\n\n/**\n * coreOrderWorkflowHelpers\n */\nTemplate.coreOrderWorkflow.helpers({\n  /**\n   * orderFulfillmentData\n   * @summary Creates an Object with order id and a fulfillment object\n   * @param  {String} orderId - An order id\n   * @param  {Object} fulfillment - An order fulfillment. e.g. a shipment\n   * @return {Object} An object witht the order id and fulfillment\n   */\n  orderFulfillmentData(orderId, fulfillment) {\n    return {\n      orderId: orderId,\n      fulfillment: fulfillment\n    };\n  },\n\n  /**\n   * baseOrder\n   * @todo may be unnecessary\n   * @return {Object} contents of Template.currentData(), non-reactive\n   */\n  baseOrder() {\n    return Template.currentData();\n  },\n\n  /**\n   * order\n   * @return {Object|Boolean} An order or false\n   */\n  order() {\n    const id = this.order._id || Reaction.Router.getQueryParam(\"_id\");\n    if (id) {\n      return Orders.findOne(id);\n    }\n    return false;\n  },\n\n  /**\n   * fulfillmentNumber\n   * @param  {Number} index - A number\n   * @return {Number} index + 1\n   */\n  fulfillmentNumber(index) {\n    return index + 1;\n  },\n\n  /**\n   * isCompleted\n   * @todo may need to be refactored\n   * @return {String|Boolean} order completion status or false\n   */\n  isCompleted() {\n    const order = Template.parentData(1);\n    if (this.status === true) {\n      return order.workflow.status;\n    }\n    return false;\n  },\n\n  /**\n   * isPending\n   * @todo may need to be refactored\n   * @return {String|Boolean} status or false\n   */\n  isPending() {\n    if (this.status === this.template) {\n      return this.status;\n    }\n    return false;\n  }\n});\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Counts } from \"meteor/tmeasday:publish-counts\";\nimport { Reaction } from \"/client/api\";\nimport { Orders, Shops } from \"/lib/collections\";\nimport OrdersActionContainer from \"../containers/ordersActionContainer\";\nimport OrdersListContainer from \"../containers/ordersListContainer\";\nimport {\n  PACKAGE_NAME,\n  ORDER_LIST_FILTERS_PREFERENCE_NAME,\n  ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME,\n  DEFAULT_FILTER_NAME,\n  orderFilters\n} from \"../../lib/constants\";\n\nconst OrderHelper =  {\n  makeQuery(filter) {\n    let query = {};\n\n    switch (filter) {\n      // New orders\n      case \"new\":\n        query = {\n          \"workflow.status\": \"new\"\n        };\n        break;\n\n      // Orders that have yet to be captured & shipped\n      case \"processing\":\n        query = {\n          \"workflow.status\": \"coreOrderWorkflow/processing\"\n        };\n        break;\n\n      // Orders that have been shipped, based on if the items have been shipped\n      case \"shipped\":\n        query = {\n          \"items.workflow.status\": \"coreOrderItemWorkflow/shipped\"\n        };\n        break;\n\n      // Orders that are complete, including all items with complete status\n      case \"completed\":\n        query = {\n          \"workflow.status\": {\n            $in: [\"coreOrderWorkflow/completed\", \"coreOrderWorkflow/canceled\"]\n          },\n          \"items.workflow.status\": {\n            $in: [\"coreOrderItemWorkflow/completed\", \"coreOrderItemWorkflow/canceled\"]\n          }\n        };\n        break;\n\n      // Orders that have been captured, but not yet shipped\n      case \"captured\":\n        query = {\n          \"billing.paymentMethod.status\": \"completed\",\n          \"shipping.shipped\": false\n        };\n        break;\n\n      case \"canceled\":\n        query = {\n          \"workflow.status\": \"coreOrderWorkflow/canceled\"\n        };\n        break;\n\n      // Orders that have been refunded partially or fully\n      case \"refunded\":\n        query = {\n          \"billing.paymentMethod.status\": \"captured\",\n          \"shipping.shipped\": true\n        };\n        break;\n      default:\n    }\n\n    return query;\n  }\n};\n\nTemplate.orders.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.orderLimits = new ReactiveDict();\n  this.state.setDefault({\n    orders: []\n  });\n  this.orderLimits.setDefault({\n    new: 10,\n    processing: 10,\n    completed: 10\n  });\n  this.state.set(\"count\", 0);\n\n  const filterName = this.data && this.data.filter && this.data.filter.name || \"new\";\n  Reaction.setUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, filterName);\n\n  this.autorun(() => {\n    const filter = Reaction.getUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, DEFAULT_FILTER_NAME);\n    const limit = this.orderLimits.get(filter);\n    const query = OrderHelper.makeQuery(filter);\n    this.subscription = this.subscribe(\"PaginatedOrders\", filter, limit);\n\n    if (this.subscription.ready()) {\n      const orders = Orders.find(query, { limit: limit }).fetch();\n      this.state.set(\"orders\", orders);\n    }\n  });\n\n  // Watch for updates to shop collection\n  this.autorun(() => {\n    const shop = Shops.findOne({});\n\n    // Update currency information, this is passed to child components containing\n    // Numeric inputs\n    this.state.set(\"currency\", shop.currencies[shop.currency]);\n  });\n});\n\n/**\n * orders helpers\n */\nTemplate.orders.helpers({\n  orderSubscription() {\n    return Template.instance().subscription.ready();\n  },\n  FilterComponent() {\n    const orderFilter = Reaction.getUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, DEFAULT_FILTER_NAME);\n    return {\n      component: OrdersActionContainer,\n      limit: Template.instance().orderLimits.get(orderFilter),\n      onActionClick(filter) {\n        Reaction.setUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, filter.name);\n        Reaction.setUserPreferences(PACKAGE_NAME, ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME, null);\n      }\n    };\n  },\n  OrdersListComponent() {\n    const orderFilter = Reaction.getUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, DEFAULT_FILTER_NAME);\n    return {\n      component: OrdersListContainer,\n      limit: Template.instance().orderLimits.get(orderFilter),\n      orders: Template.instance().state.get(\"orders\") || false,\n      onActionClick(filter) {\n        Reaction.setUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, filter.name);\n        Reaction.setUserPreferences(PACKAGE_NAME, ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME, null);\n      }\n    };\n  },\n  itemProps(order) {\n    return {\n      order,\n      currencyFormat: Template.instance().state.get(\"currency\")\n    };\n  },\n\n  orders() {\n    return Template.instance().state.get(\"orders\") || false;\n  },\n\n  hasMoreOrders() {\n    const filter = Reaction.getUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, DEFAULT_FILTER_NAME);\n    const instance = Template.instance();\n\n    if (filter === \"new\") {\n      instance.state.set(\"count\", Counts.get(\"newOrder-count\"));\n    } else if (filter === \"processing\") {\n      instance.state.set(\"count\", Counts.get(\"processingOrder-count\"));\n    } else if (filter === \"completed\") {\n      instance.state.set(\"count\", Counts.get(\"completedOrder-count\"));\n    }\n\n    return instance.state.get(\"count\") > instance.orderLimits.get(filter);\n  },\n\n  currentFilterLabel() {\n    const foundFilter = _.find(orderFilters, (filter) => {\n      return filter.name === Reaction.Router.getQueryParam(\"filter\");\n    });\n\n    if (foundFilter) {\n      return foundFilter.label;\n    }\n\n    return \"\";\n  },\n  activeClassname(orderId) {\n    if (Reaction.Router.getQueryParam(\"_id\") === orderId) {\n      return \"panel-info\";\n    }\n    return \"panel-default\";\n  }\n});\n\n/**\n * orders events\n */\nTemplate.orders.events({\n  \"click .show-more-orders\": function (event, instance) {\n    event.preventDefault();\n    const filter = Reaction.getUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, DEFAULT_FILTER_NAME);\n    let limit = instance.orderLimits.get(filter);\n    limit += 10;\n    instance.orderLimits.set(filter, limit);\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatPriceString } from \"/client/api\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\nimport DiscountList from \"/imports/plugins/core/discounts/client/components/list\";\n\nclass Invoice extends Component {\n  static propTypes = {\n    canMakeAdjustments: PropTypes.bool,\n    collection: PropTypes.string,\n    dateFormat: PropTypes.func,\n    discounts: PropTypes.bool,\n    handleClick: PropTypes.func,\n    invoice: PropTypes.object,\n    isFetching: PropTypes.bool,\n    isOpen: PropTypes.bool,\n    orderId: PropTypes.string,\n    paymentCaptured: PropTypes.bool,\n    refunds: PropTypes.array\n  }\n\n  renderDiscountForm() {\n    const { isOpen, orderId, collection } = this.props;\n\n    return (\n      <div>\n        {isOpen &&\n          <div>\n            <hr/>\n            <DiscountList\n              id={orderId}\n              collection={collection}\n              validatedInput={true}\n            />\n            <hr/>\n          </div>\n        }\n      </div>\n    );\n  }\n\n  renderRefundsInfo() {\n    const { isFetching, refunds, dateFormat } = this.props;\n\n    return (\n      <div>\n        {isFetching &&\n          <div className=\"form-group order-summary-form-group\">\n            <strong>Loading Refunds</strong>\n            <div className=\"invoice-details\">\n              <i className=\"fa fa-spinner fa-spin\" />\n            </div>\n          </div>\n        }\n\n        {refunds && refunds.map((refund) => (\n          <div className=\"order-summary-form-group text-danger\" key={refund.created} style={{ marginBottom: 15 }}>\n            <strong>Refunded on: {dateFormat(refund.created, \"MM/D/YYYY\")}</strong>\n            <div className=\"invoice-details\"><strong>{formatPriceString(refund.amount)}</strong></div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  renderTotal() {\n    const { invoice } = this.props;\n\n    return (\n      <div className=\"order-summary-form-group\">\n        <hr/>\n        <strong>TOTAL</strong>\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(invoice.total)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  renderConditionalDisplay() {\n    const { canMakeAdjustments, paymentCaptured } = this.props;\n\n    return (\n      <div>\n        {canMakeAdjustments ?\n          <div> {this.renderTotal()} </div> :\n          <span>\n            {paymentCaptured ?\n              <div>\n                {this.renderRefundsInfo()}\n              </div>\n              :\n              <div> {this.renderTotal()} </div>\n            }\n          </span>\n        }\n      </div>\n    );\n  }\n\n  render() {\n    const { invoice, discounts, handleClick } = this.props;\n\n    return (\n      <div>\n        <div className=\"order-summary-form-group\">\n          <strong>Quantity Total</strong>\n          <div className=\"invoice-details\">\n            {invoice.totalItems}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Subtotal\" i18nKey=\"cartSubTotals.subtotal\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.subtotal)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.shipping)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Tax\" i18nKey=\"cartSubTotals.tax\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.taxes)}\n          </div>\n        </div>\n\n        {discounts &&\n          <div>\n            <div className=\"order-summary-form-group\">\n              <strong><Translation defaultValue=\"Discount\" i18nKey=\"cartSubTotals.discount\"/></strong>\n              <div className=\"invoice-details\">\n                <i className=\"fa fa-tag fa-lg\" style={{ marginRight: 2 }}/>\n                <a className=\"btn-link\" onClick={handleClick}>Add Discount</a>\n              </div>\n            </div>\n            {this.renderDiscountForm()}\n          </div>\n        }\n        {this.renderConditionalDisplay()}\n      </div>\n    );\n  }\n}\n\nexport default Invoice;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatPriceString } from \"/client/api\";\nimport { IconButton, NumericInput, Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass InvoiceActions extends Component {\n  static propTypes = {\n    adjustedTotal: PropTypes.number,\n    handleActionViewBack: PropTypes.func,\n    invoice: PropTypes.object,\n    isAdjusted: PropTypes.func\n  }\n\n  renderCapturedTotal() {\n    const { invoice } = this.props;\n\n    return (\n      <div className=\"invoice-summary\">\n        <span  className=\"invoice-label captured-total\">\n          <strong><Translation defaultValue=\"Captured Total\" i18nKey=\"admin.invoice.capturedTotal\"/></strong>\n        </span>\n\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(invoice.total)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  renderAdjustedTotal() {\n    const { adjustedTotal } = this.props;\n\n    return (\n      <div className=\"invoice-summary\">\n        <span className=\"invoice-label adjusted-total\">\n          <strong><Translation defaultValue=\"Adjusted Total\" i18nKey=\"admin.invoice.adjustedTotal\"/></strong>\n        </span>\n\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(adjustedTotal)}</strong>\n        </div>\n      </div>\n    );\n  }\n  renderRefundForm() {\n    const { adjustedTotal } = this.props;\n\n    return (\n      <div className=\"invoice-summary\">\n        <span  className=\"invoice-label refund\">\n          <strong><Translation defaultValue=\"Refund\" i18nKey=\"admin.invoice.refund\"/></strong>\n        </span>\n\n        <div className=\"invoice-details\">\n          <span className=\"refundAmount\">\n            <NumericInput\n              numericType=\"currency\"\n              value=\"0\"\n              maxValue={adjustedTotal}\n              classNames=\"amount\"\n            />\n          </span>\n          <span className=\"refundSubmit\">\n            <IconButton\n              bezelStyle={\"flat\"}\n              icon=\"fa fa-arrow-circle-o-right\"\n              onClick={this.props.handleActionViewBack}\n            />\n            <span id=\"btn-refund-payment\">-></span>\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { isAdjusted } = this.props;\n\n    return (\n      <div>\n        {this.renderCapturedTotal()}\n        {isAdjusted() && this.renderAdjustedTotal()}\n        {/* {this.renderRefundForm()} */}\n      </div>\n    );\n  }\n}\n\nexport default InvoiceActions;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatPriceString } from \"/client/api\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass LineItems extends Component {\n  static propTypes = {\n    displayMedia: PropTypes.func,\n    handleClick: PropTypes.func,\n    isExpanded: PropTypes.func,\n    onClose: PropTypes.func,\n    uniqueItems: PropTypes.array\n  }\n\n  calculateTotal(price, shipping, taxes) {\n    return formatPriceString(price + shipping + taxes);\n  }\n\n  renderLineItem(uniqueItem, quantity) {\n    const { handleClick, displayMedia } = this.props;\n\n    return (\n      <div className=\"order-items\">\n        <div\n          className=\"invoice order-item form-group order-summary-form-group\"\n          onClick={() => handleClick(uniqueItem._id)}\n          style={{ height: 70 }}\n        >\n\n          <div className=\"order-item-media\" style={{ marginLeft: 15 }}>\n            { !displayMedia(uniqueItem) ?\n              <img src= \"/resources/placeholder.gif\" /> :\n              <img\n                src={displayMedia(uniqueItem).url()}\n              />\n            }\n          </div>\n\n          <div className=\"order-item-details\">\n            <div className=\"order-detail-title\">\n              {uniqueItem.title} <br/><small>{uniqueItem.variants.title}</small>\n            </div>\n          </div>\n\n          <div className=\"order-detail-quantity\">\n            {quantity || uniqueItem.quantity}\n          </div>\n\n          <div className=\"order-detail-price\">\n            <div className=\"invoice-details\" style={{ marginRight: 15 }}>\n              <strong>{formatPriceString(uniqueItem.variants.price)}</strong>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    );\n  }\n\n  renderLineItemInvoice(uniqueItem) {\n    return (\n      <div>\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Subtotal\" i18nKey=\"cartSubTotals.subtotal\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(uniqueItem.variants.price)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(uniqueItem.shipping.rate)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong>Item tax</strong>\n          <div className=\"invoice-details\">\n            {uniqueItem.taxDetail ? formatPriceString(uniqueItem.taxDetail.tax / uniqueItem.quantity) : formatPriceString(0)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong>Tax code</strong>\n          <div className=\"invoice-details\">\n            {uniqueItem.taxDetail ? uniqueItem.taxDetail.taxCode : uniqueItem.variants.taxCode}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong>TOTAL</strong>\n          <div className=\"invoice-details\">\n            {uniqueItem.taxDetail ?\n              <strong>\n                {this.calculateTotal(uniqueItem.variants.price, uniqueItem.shipping.rate, uniqueItem.taxDetail.tax)}\n              </strong> :\n              <strong>\n                {this.calculateTotal(uniqueItem.variants.price, uniqueItem.shipping.rate, 0)}\n              </strong>\n            }\n          </div>\n        </div>\n        <br/>\n      </div>\n    );\n  }\n\n  render() {\n    const { uniqueItems, isExpanded, onClose } = this.props;\n    return (\n      <div>\n        {uniqueItems.map((uniqueItem) => {\n          if (!isExpanded(uniqueItem._id)) {\n            return (\n              <div key={uniqueItem._id}> { this.renderLineItem(uniqueItem) } </div>\n            );\n          }\n\n          return (\n            <div className=\"roll-up-invoice-list\" key={uniqueItem._id}>\n              <div className=\"roll-up-content\">\n\n                <div style={{ float: \"right\" }}>\n                  <button className=\"rui btn btn-default flat icon-only\" onClick={() => onClose(uniqueItem._id)}>\n                    <i\n                      className=\"rui font-icon fa-lg fa fa-times\"\n                    />\n                  </button>\n                </div>\n\n                <br/><br/>\n\n                {[...Array(uniqueItem.quantity)].map((v, i) =>\n                  <div key={i}>\n                    { this.renderLineItem(uniqueItem, 1) }\n                    { this.renderLineItemInvoice(uniqueItem) }\n                  </div>\n                )}\n\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default LineItems;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Radium from \"radium\";\nimport { TabList, TabItem } from \"/imports/plugins/core/ui/client/components\";\n\nconst styles = {\n  list: {\n    display: \"flex\",\n    height: 100\n  },\n  item: {\n    display: \"flex\",\n    flex: \"1 1 auto\",\n    width: \"33%\",\n    height: \"100%\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  title: {\n    fontSize: 24,\n    display: \"block\"\n  },\n  stat: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    height: \"100%\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  }\n};\n\nclass OrderActions extends Component {\n  static propTypes = {\n    filters: PropTypes.arrayOf(PropTypes.object),\n    onActionClick: PropTypes.func,\n    selectedIndex: PropTypes.number\n  }\n\n  handleActionClick = (event, value) => {\n    if (typeof this.props.onActionClick === \"function\") {\n      this.props.onActionClick(value);\n    }\n  }\n\n  renderAction() {\n    if (Array.isArray(this.props.filters)) {\n      return this.props.filters.map((filter, index) => {\n        return (\n          <TabItem\n            className=\"admin\"\n            key={index}\n            style={styles.item}\n            onClick={this.handleActionClick}\n            value={filter}\n          >\n            <div style={styles.stat}>\n              <strong style={styles.title}>{filter.count}</strong>\n              <span>{filter.label}</span>\n            </div>\n          </TabItem>\n        );\n      });\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <TabList style={styles.list} className=\"admin\" selectedTab={this.props.selectedIndex}>\n        {this.renderAction()}\n      </TabList>\n    );\n  }\n}\n\nexport default Radium(OrderActions);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { Badge, ClickToCopy } from \"/imports/plugins/core/ui/client/components\";\n\nclass OrderSummary extends Component {\n  static propTypes = {\n    dateFormat: PropTypes.func,\n    order: PropTypes.object,\n    printableLabels: PropTypes.func,\n    profileShippingAddress: PropTypes.object,\n    shipmentStatus: PropTypes.func,\n    tracking: PropTypes.func\n  }\n\n  badgeStatus() {\n    const orderStatus = this.props.order.workflow.status;\n\n    if (orderStatus === \"new\") {\n      return \"info\";\n    } else if (orderStatus === \"coreOrderWorkflow/processing\") {\n      return \"success\";\n    } else if (orderStatus === \"coreOrderWorkflow/canceled\") {\n      return \"danger\";\n    } else if (orderStatus === \"coreOrderWorkflow/completed\") {\n      return \"primary\";\n    }\n\n    return \"default\";\n  }\n\n  orderLink() {\n    const orderId = this.props.order._id;\n    return orderId;\n  }\n\n  truncateId() {\n    const orderId = this.props.order._id;\n    const shortId = orderId.slice(-5);\n\n    return shortId;\n  }\n\n  render() {\n    const { dateFormat, tracking, order, profileShippingAddress, printableLabels } = this.props;\n\n    return (\n      <div>\n        <div className=\"order-summary-form-group bg-info\" style={{ lineHeight: 3, marginTop: -15, marginRight: -15, marginLeft: -15 }}>\n          <strong style={{ marginLeft: 15 }}>{profileShippingAddress.fullName}</strong>\n          <div className=\"invoice-details\" style={{ marginRight: 15, position: \"relative\" }}>\n            {order.email}\n          </div>\n        </div>\n\n        <div className=\"roll-up-invoice-list\">\n          <div className=\"roll-up-content\">\n            <div style={{ marginBottom: 4 }}>\n              <Badge\n                badgeSize=\"large\"\n                i18nKeyLabel={`cartDrawer.${order.workflow.status}`}\n                label={order.workflow.status}\n                status={this.badgeStatus()}\n              />\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.orderId\">Order ID</strong>\n              <div className=\"invoice-details\" style={{ cursor: \"pointer\" }}>\n                <ClickToCopy\n                  copyToClipboard={this.orderLink()}\n                  displayText={order._id}\n                  i18nKeyTooltip=\"admin.orderWorkflow.summary.copyOrderLink\"\n                  tooltip=\"Copy Order Link\"\n                />\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.created\">Created</strong>\n              <div className=\"invoice-details\">\n                {moment(order.createdAt).fromNow()} | {dateFormat(order.createdAt, \"MM/D/YYYY\")}\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.processor\">Processor</strong>\n              <div className=\"invoice-details\">\n                {order.billing[0].paymentMethod.processor}\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.payment\">Payment</strong>\n              <div className=\"invoice-details\">\n                {order.billing[0].paymentMethod.storedCard} ({order.billing[0].invoice.total})\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"order.transaction\">Transaction</strong>\n              <div className=\"invoice-details\">\n                {order.billing[0].paymentMethod.transactionId}\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"orderShipping.carrier\">Carrier</strong>\n              <div className=\"invoice-details\">\n                {order.shipping[0].shipmentMethod.carrier} - {order.shipping[0].shipmentMethod.label}\n              </div>\n            </div>\n\n            <div className=\"order-summary-form-group\">\n              <strong data-i18n=\"orderShipping.tracking\">Tracking</strong>\n              <div className=\"invoice-details\">\n                {tracking()}\n              </div>\n            </div>\n\n            {printableLabels() &&\n              <div className=\"order-summary-form-group\">\n                <strong data-i18n=\"orderShipping.printLabels\">Labels</strong>\n                {printableLabels().shippingLabelUrl ?\n                  <a className=\"invoice-details\" href={printableLabels().shippingLabelUrl} target=\"_blank\">\n                    <span data-i18n=\"orderShipping.printShippingLabel\">Print Shipping</span>\n                  </a> :\n                  <a className=\"invoice-details\" href={printableLabels().customsLabelUrl} target=\"_blank\">\n                    <span data-i18n=\"orderShipping.printCustomsLabel\">Print Customs</span>\n                  </a>\n                }\n              </div>\n            }\n          </div>\n        </div>\n\n        <br/>\n        <div className=\"order-summary-form-group\">\n          <strong data-i18n=\"orderShipping.shipTo\">Ship to</strong>\n          <div className=\"invoice-details\">\n            <strong>Phone: </strong>{profileShippingAddress.phone}\n          </div>\n        </div>\n\n        <div style={{ marginTop: 4 }}>\n          <span>{profileShippingAddress.fullName}</span>\n          <br/><span>{profileShippingAddress.address1}</span>\n          {profileShippingAddress.address2 && <span><br/>{profileShippingAddress.address2}</span>}\n          <br/><span>{profileShippingAddress.city}, {profileShippingAddress.region}, {profileShippingAddress.country} {profileShippingAddress.postal}</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default OrderSummary;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\nimport Avatar from \"react-avatar\";\nimport moment from \"moment\";\nimport { formatPriceString } from \"/client/api\";\nimport { Badge, ClickToCopy, Icon, Translation } from \"@reactioncommerce/reaction-ui\";\nimport ProductImage from \"./productImage\";\n\nclass OrdersList extends Component {\n  static propTypes = {\n    displayMedia: PropTypes.func,\n    handleClick: PropTypes.func,\n    orders: PropTypes.array\n  }\n\n  /**\n   * Fullfilment Badge\n   * @param  {Object} order object containing info for order and coreOrderWorkflow\n   * @return {string} A string containing the type of Badge\n   */\n  fulfillmentBadgeStatus(order) {\n    const orderStatus = order.workflow.status;\n\n    if (orderStatus === \"new\") {\n      return \"info\";\n    } else if (orderStatus === \"coreOrderWorkflow/processing\") {\n      return \"success\";\n    } else if (orderStatus === \"coreOrderWorkflow/canceled\") {\n      return \"danger\";\n    } else if (orderStatus === \"coreOrderWorkflow/completed\") {\n      return \"primary\";\n    }\n\n    return \"default\";\n  }\n\n  /**\n   * Shipping Badge\n   * TODO: any logic here, we don't have shipping status changes at the moment\n   * @return {string} A string containing the type of Badge\n   */\n  shippingBadgeStatus() {\n    return \"basic\";\n  }\n\n  renderOrderButton(order) {\n    const startWorkflow = order.workflow.status === \"new\";\n    const classes = classnames({\n      \"rui\": true,\n      \"btn\": true,\n      \"btn-success\": startWorkflow\n    });\n\n    return (\n      <button className={classes} onClick={() => this.props.handleClick(order, startWorkflow)}>\n        <Icon icon=\"fa fa-chevron-right\" />\n      </button>\n    );\n  }\n\n  renderOrderInfo(order) {\n    const { displayMedia } = this.props;\n\n    return (\n      <div className=\"order-info\">\n        <div className=\"order-totals\">\n          <span className=\"order-data order-data-date\">\n            <strong>Date: </strong>\n            {moment(order.createdAt).fromNow()} | {moment(order.createdAt).format(\"MM/D/YYYY\")}\n          </span>\n\n          <span className=\"order-data order-data-id\">\n            <strong>Order ID: </strong>\n            <ClickToCopy\n              copyToClipboard={order._id}\n              displayText={order._id}\n              i18nKeyTooltip=\"admin.orderWorkflow.summary.copyOrderLink\"\n              tooltip=\"Copy Order Link\"\n            />\n          </span>\n\n          <span className=\"order-data order-data-total\">\n            <strong>Total: {formatPriceString(order.billing[0].invoice.total)}</strong>\n          </span>\n        </div>\n\n        <div className=\"order-items\">\n          {order.items.map((item, i) => {\n            return (\n              <div className=\"order-item\" key={i}>\n                <div className=\"order-item-media\">\n                  <ProductImage\n                    item={item}\n                    displayMedia={displayMedia}\n                    size=\"small\"\n                    badge={true}\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  renderShipmentInfo(order) {\n    const emailAddress = order.email || <Translation defaultValue={\"Email not availabe\"} i18nKey={\"admin.orderWorkflow.ordersList.emailNotFound\"} />;\n    return (\n      <div className=\"shipment-info\">\n        <div className=\"customer-info\">\n          <Avatar\n            email={order.email}\n            round={true}\n            name={order.shipping[0].address.fullName}\n            size={30}\n            className=\"rui-order-avatar\"\n          />\n          <strong>{order.shipping[0].address.fullName}</strong> | {emailAddress}\n        </div>\n        <div className=\"workflow-info\">\n          <Badge\n            badgeSize=\"large\"\n            i18nKeyLabel={`cartDrawer.${order.shipping[0].workflow.status}`}\n            label={order.shipping[0].workflow.status}\n            status={this.shippingBadgeStatus(order)}\n          />\n          <Badge\n            badgeSize=\"large\"\n            i18nKeyLabel={`cartDrawer.${order.workflow.status}`}\n            label={order.workflow.status}\n            status={this.fulfillmentBadgeStatus(order)}\n          />\n        </div>\n      </div>\n    );\n  }\n\n\n  renderOrderCard(order) {\n    const { handleClick } = this.props;\n\n    return (\n      <div className=\"rui card order\">\n        <div className=\"content\" onClick={() => handleClick(order, false)}>\n          {this.renderShipmentInfo(order)}\n          {this.renderOrderInfo(order)}\n        </div>\n        <div className=\"controls\" onClick={() => handleClick(order)}>\n          {this.renderOrderButton(order)}\n        </div>\n      </div>\n    );\n  }\n\n\n  render() {\n    const { orders } = this.props;\n\n    if (orders.length) {\n      return (\n        <div className=\"container-fluid-sm\">\n          {orders.map((order, i) => {\n            return (\n              <div key={i}>\n                {this.renderOrderCard(order)}\n              </div>\n            );\n          })}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"container-fluid-sm\">\n        <div className=\"empty-view-message\">\n          <Icon icon=\"fa fa-sun-o\" />\n          <Translation defaultValue={\"No orders found\"} i18nKey={\"order.ordersNotFound\"} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default OrdersList;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Badge } from \"/imports/plugins/core/ui/client/components\";\n\n\nclass ProductImage extends Component {\n  static propTypes = {\n    badge: PropTypes.bool,\n    displayMedia: PropTypes.func,\n    item: PropTypes.object,\n    size: PropTypes.string\n  }\n\n  renderBadge() {\n    const { badge, item } = this.props;\n\n    if (badge === true) {\n      return (\n        <Badge\n          badgeSize=\"small\"\n          label={item.quantity}\n          status=\"success\"\n        />\n      );\n    }\n    return false;\n  }\n\n  renderMedia() {\n    const { displayMedia, item, size } = this.props;\n    let mediaUrl;\n\n    if (displayMedia(item)) {\n      mediaUrl = displayMedia(item).url();\n    } else {\n      mediaUrl = \"/resources/placeholder.gif\";\n    }\n\n    return (\n      <div>\n        <img\n          alt={item.title}\n          className={`procuct-image product-image-${size}`}\n          src={mediaUrl}\n        />\n        {this.renderBadge()}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderMedia()}\n      </div>\n    );\n  }\n}\n\nexport default ProductImage;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { formatPriceString } from \"/client/api\";\n\nclass TotalActions extends Component {\n  static propTypes = {\n    adjustedTotal: PropTypes.number,\n    invoice: PropTypes.object,\n    isAdjusted: PropTypes.func\n  }\n\n  renderCapturedTotal() {\n    const { invoice } = this.props;\n\n    return (\n      <div className=\"order-summary-form-group bg-success\" style={{ lineHeight: 3, marginRight: -15, marginLeft: -15 }}>\n        <span style={{ marginLeft: 15 }}>\n          <strong className=\"text-success\">CAPTURED TOTAL</strong>\n        </span>\n\n        <div className=\"invoice-details\" style={{ marginRight: 15 }}>\n          <strong>{formatPriceString(invoice.total)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  renderAdjustedTotal() {\n    const { adjustedTotal } = this.props;\n\n    return (\n      <div className=\"order-summary-form-group bg-danger\" style={{ marginTop: 2, lineHeight: 3, marginRight: -15, marginLeft: -15 }}>\n        <span className=\"text-danger\" style={{ marginLeft: 15 }}>\n          <strong>ADJUSTED TOTAL</strong>\n        </span>\n\n        <div className=\"invoice-details\" style={{ marginRight: 15 }}>\n          <strong>{formatPriceString(adjustedTotal)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { isAdjusted } = this.props;\n\n    return (\n      <div>\n        {this.renderCapturedTotal()}\n        {isAdjusted() && this.renderAdjustedTotal()}\n      </div>\n    );\n  }\n}\n\nexport default TotalActions;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport InvoiceActions from \"../components/invoiceActions\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\n\nclass InvoiceActionsContainer extends Component {\n  static propTypes = {\n    adjustedTotal: PropTypes.number,\n    invoice: PropTypes.object,\n    paymentCaptured: PropTypes.bool\n  }\n\n  constructor(props) {\n    super(props);\n    this.isAdjusted = this.isAdjusted.bind(this);\n  }\n\n  isAdjusted = () => {\n    const { adjustedTotal, invoice } = this.props;\n\n    if (invoice.total === adjustedTotal) {\n      return false;\n    }\n    return true;\n  }\n\n  render() {\n    const  { paymentCaptured, adjustedTotal, invoice } =  this.props;\n    return (\n      <div>\n        <InvoiceActions\n          isAdjusted={this.isAdjusted}\n          paymentCaptured={paymentCaptured}\n          adjustedTotal={adjustedTotal}\n          invoice={invoice}\n        />\n      </div>\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  onData(null, {\n    paymentCaptured: props.paymentCaptured,\n    adjustedTotal: props.adjustedTotal,\n    invoice: props.invoice\n  });\n};\n\nexport default composeWithTracker(composer, Loading)(InvoiceActionsContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport Invoice from \"../components/invoice.js\";\n\nclass InvoiceContainer extends Component {\n  static propTypes = {\n    canMakeAdjustments: PropTypes.bool,\n    collection: PropTypes.string,\n    discounts: PropTypes.bool,\n    invoice: PropTypes.object,\n    isFetching: PropTypes.bool,\n    orderId: PropTypes.string,\n    paymentCaptured: PropTypes.bool,\n    refunds: PropTypes.array\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.dateFormat = this.dateFormat.bind(this);\n  }\n\n  dateFormat = (context, block) => {\n    const f = block || \"MMM DD, YYYY hh:mm:ss A\";\n    return moment(context).format(f);\n  }\n\n  handleClick = (event) => {\n    event.preventDefault();\n    this.setState({\n      isOpen: true\n    });\n  }\n\n  render() {\n    const {\n      canMakeAdjustments, paymentCaptured,\n      discounts, invoice, orderId, refunds,\n      isFetching, collection\n    } = this.props;\n\n    return (\n      <TranslationProvider>\n        <Invoice\n          canMakeAdjustments={canMakeAdjustments}\n          paymentCaptured={paymentCaptured}\n          isOpen={this.state.isOpen}\n          discounts={discounts}\n          handleClick={this.handleClick}\n          invoice={invoice}\n          orderId={orderId}\n          refunds={refunds}\n          dateFormat={this.dateFormat}\n          isFetching={isFetching}\n          collection={collection}\n        />\n      </TranslationProvider>\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  onData(null, {\n    canMakeAdjustments: props.canMakeAdjustments,\n    paymentCaptured: props.paymentCaptured,\n    discounts: props.discounts,\n    invoice: props.invoice,\n    orderId: props.orderId,\n    refunds: props.refunds,\n    isFetching: props.isFetching,\n    collection: props.collection\n  });\n};\n\nexport default composeWithTracker(composer, Loading)(InvoiceContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Media } from \"/lib/collections\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport LineItems from \"../components/lineItems.js\";\n\nclass LineItemsContainer extends Component {\n  static propTypes = {\n    invoice: PropTypes.object,\n    uniqueItems: PropTypes.array\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.isExpanded = this.isExpanded.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleDisplayMedia = this.handleDisplayMedia.bind(this);\n  }\n\n  isExpanded = (itemId) => {\n    if (this.state[`item_${itemId}`]) {\n      return true;\n    }\n    return false;\n  }\n\n  handleClose = (itemId) => {\n    this.setState({\n      [`item_${itemId}`]: false\n    });\n  }\n\n  handleClick = (itemId) => {\n    this.setState({\n      [`item_${itemId}`]: true\n    });\n  }\n\n  /**\n   * Media - find media based on a product/variant\n   * @param  {Object} item object containing a product and variant id\n   * @return {Object|false} An object contianing the media or false\n   */\n  handleDisplayMedia = (item) => {\n    const variantId = item.variants._id;\n    const productId = item.productId;\n\n    const variantImage = Media.findOne({\n      \"metadata.variantId\": variantId,\n      \"metadata.productId\": productId\n    });\n\n    if (variantImage) {\n      return variantImage;\n    }\n\n    const defaultImage = Media.findOne({\n      \"metadata.productId\": productId,\n      \"metadata.priority\": 0\n    });\n\n    if (defaultImage) {\n      return defaultImage;\n    }\n    return false;\n  }\n\n  render() {\n    const { invoice, uniqueItems } = this.props;\n    return (\n      <TranslationProvider>\n        <LineItems\n          onClose={this.handleClose}\n          invoice={invoice}\n          isClosed={this.state.isClosed}\n          isExpanded={this.isExpanded}\n          displayMedia={this.handleDisplayMedia}\n          handleClick={this.handleClick}\n          uniqueItems={uniqueItems}\n        />\n      </TranslationProvider>\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  const subscription = Meteor.subscribe(\"Media\");\n  if (subscription.ready()) {\n    onData(null, {\n      uniqueItems: props.items,\n      invoice: props.invoice\n    });\n  }\n};\n\nexport default composeWithTracker(composer, Loading)(LineItemsContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Orders } from \"/lib/collections\";\nimport { Card, CardHeader, CardBody, CardGroup, Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { i18next } from \"/client/api\";\nimport OrderSummary from \"../components/orderSummary\";\n\nclass OrderSummaryContainer extends Component {\n  static propTypes = {\n    order: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n    this.dateFormat = this.dateFormat.bind(this);\n    this.tracking = this.tracking.bind(this);\n    this.shipmentStatus = this.shipmentStatus.bind(this);\n  }\n\n  dateFormat = (context, block) => {\n    const f = block || \"MMM DD, YYYY hh:mm:ss A\";\n    return moment(context).format(f);\n  }\n\n  tracking = () => {\n    if (this.props.order.shipping[0].tracking) {\n      return this.props.order.shipping[0].tracking;\n    }\n    return i18next.t(\"orderShipping.noTracking\");\n  }\n\n  shipmentStatus = () => {\n    const order = this.props.order;\n    const shipment = order.shipping[0];\n\n    if (shipment.delivered) {\n      return {\n        delivered: true,\n        shipped: true,\n        status: \"success\",\n        label: i18next.t(\"orderShipping.delivered\")\n      };\n    }\n\n    const shipped = _.every(shipment.items, (shipmentItem) => {\n      for (const fullItem of order.items) {\n        if (fullItem._id === shipmentItem._id) {\n          if (fullItem.workflow) {\n            if (_.isArray(fullItem.workflow.workflow)) {\n              return _.includes(fullItem.workflow.workflow, \"coreOrderItemWorkflow/completed\");\n            }\n          }\n        }\n      }\n    });\n\n    const canceled = _.every(shipment.items, (shipmentItem) => {\n      for (const fullItem of order.items) {\n        if (fullItem._id === shipmentItem._id) {\n          if (fullItem.workflow) {\n            return fullItem.workflow.status === \"coreOrderItemWorkflow/canceled\";\n          }\n        }\n      }\n    });\n\n    if (shipped) {\n      return {\n        delivered: false,\n        shipped: true,\n        status: \"success\",\n        label: i18next.t(\"orderShipping.shipped\")\n      };\n    }\n\n    if (canceled) {\n      return {\n        delivered: false,\n        shipped: false,\n        status: \"danger\",\n        label: i18next.t(\"order.canceledLabel\")\n      };\n    }\n\n    return {\n      delivered: false,\n      shipped: false,\n      status: \"info\",\n      label: i18next.t(\"orderShipping.notShipped\")\n    };\n  }\n\n  printableLabels = () => {\n    const { shippingLabelUrl, customsLabelUrl } = this.props.order.shipping[0];\n    if (shippingLabelUrl || customsLabelUrl) {\n      return { shippingLabelUrl, customsLabelUrl };\n    }\n\n    return false;\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        <Card\n          expanded={true}\n        >\n          <CardHeader\n            actAsExpander={false}\n            i18nKeyTitle=\"admin.orderWorkflow.summary.cardTitle\"\n            title=\"Summary\"\n          />\n          <CardBody expandable={false}>\n            <OrderSummary\n              {...this.props}\n              dateFormat={this.dateFormat}\n              tracking={this.tracking}\n              shipmentStatus={this.shipmentStatus}\n              printableLabels={this.printableLabels}\n            />\n          </CardBody>\n        </Card>\n      </CardGroup>\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  const orderSub = Meteor.subscribe(\"Orders\");\n\n  if (orderSub.ready()) {\n    // Find current order\n    const order = Orders.findOne({\n      \"_id\": props.orderId,\n      \"shipping._id\": props.fulfillment._id\n    });\n\n    const profileShippingAddress = order.shipping[0].address;\n\n    if (order.workflow) {\n      if (order.workflow.status === \"coreOrderCreated\") {\n        order.workflow.status = \"coreOrderCreated\";\n        Meteor.call(\"workflow/pushOrderWorkflow\", \"coreOrderWorkflow\", \"coreOrderCreated\", order);\n      }\n    }\n\n    onData(null, {\n      order: order,\n      profileShippingAddress: profileShippingAddress\n    });\n  }\n};\n\nexport default composeWithTracker(composer, Loading)(OrderSummaryContainer);\n","import React from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Counts } from \"meteor/tmeasday:publish-counts\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport OrderActions from \"../components/orderActions\";\nimport * as Constants from \"../../lib/constants\";\n\nfunction handleActionClick(filter) {\n  Reaction.pushActionView({\n    provides: \"dashboard\",\n    template: \"orders\",\n    data: {\n      filter\n    }\n  });\n}\n\nfunction composer(props, onData) {\n  const selectedFilterName = Reaction.getUserPreferences(Constants.PACKAGE_NAME, Constants.ORDER_LIST_FILTERS_PREFERENCE_NAME);\n  let selectedIndex;\n\n  Meteor.subscribe(\"PaginatedOrders\", selectedFilterName, (props.limit || 0));\n\n  const filters = Constants.orderFilters.map((filter, index) => {\n    if (filter.name === selectedFilterName) {\n      selectedIndex = index;\n    }\n\n    filter.label = i18next.t(`order.filter.${filter.name}`, { defaultValue: filter.label });\n    filter.i18nKeyLabel = `order.filter.${filter.name}`;\n\n    if (filter.name === \"new\") {\n      filter.count = Counts.get(\"newOrder-count\");\n    } else if (filter.name === \"processing\") {\n      filter.count = Counts.get(\"processingOrder-count\");\n    } else if (filter.name === \"completed\") {\n      filter.count = Counts.get(\"completedOrder-count\");\n    }\n\n    return filter;\n  });\n\n  onData(null, {\n    filters,\n    selectedIndex,\n\n    onActionClick: props.onActionClick || handleActionClick\n  });\n}\n\nfunction OrdersActionContainer(props) {\n  return (\n    <OrderActions {...props} />\n  );\n}\n\nexport default composeWithTracker(composer, null)(OrdersActionContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Media } from \"/lib/collections\";\nimport { Reaction } from \"/client/api\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport OrdersList from \"../components/ordersList.js\";\nimport {\n  PACKAGE_NAME,\n  ORDER_LIST_FILTERS_PREFERENCE_NAME,\n  ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME\n} from \"../../lib/constants\";\n\n\nclass OrdersListContainer extends Component {\n  static propTypes = {\n    invoice: PropTypes.object,\n    orders: PropTypes.array,\n    uniqueItems: PropTypes.array\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleClick = this.handleClick.bind(this);\n    this.handleDisplayMedia = this.handleDisplayMedia.bind(this);\n  }\n\n  handleClick = (order, startWorkflow = false) => {\n    Reaction.setActionViewDetail({\n      label: \"Order Details\",\n      i18nKeyLabel: \"orderWorkflow.orderDetails\",\n      data: {\n        order: order\n      },\n      props: {\n        size: \"large\"\n      },\n      template: \"coreOrderWorkflow\"\n    });\n\n    if (startWorkflow === true) {\n      Meteor.call(\"workflow/pushOrderWorkflow\", \"coreOrderWorkflow\", \"processing\", order);\n      Reaction.setUserPreferences(PACKAGE_NAME, ORDER_LIST_FILTERS_PREFERENCE_NAME, \"processing\");\n    }\n\n    Reaction.setUserPreferences(PACKAGE_NAME, ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME, order._id);\n  }\n\n  /**\n   * Media - find media based on a product/variant\n   * @param  {Object} item object containing a product and variant id\n   * @return {Object|false} An object contianing the media or false\n   */\n  handleDisplayMedia = (item) => {\n    const variantId = item.variants._id;\n    const productId = item.productId;\n\n    const variantImage = Media.findOne({\n      \"metadata.variantId\": variantId,\n      \"metadata.productId\": productId\n    });\n\n    if (variantImage) {\n      return variantImage;\n    }\n\n    const defaultImage = Media.findOne({\n      \"metadata.productId\": productId,\n      \"metadata.priority\": 0\n    });\n\n    if (defaultImage) {\n      return defaultImage;\n    }\n    return false;\n  }\n\n  render() {\n    const { orders } = this.props;\n\n    return (\n      <OrdersList\n        orders={orders}\n        handleClick={this.handleClick}\n        displayMedia={this.handleDisplayMedia}\n      />\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  const subscription = Meteor.subscribe(\"Media\");\n  if (subscription.ready()) {\n    onData(null, {\n      uniqueItems: props.items,\n      invoice: props.invoice\n    });\n  }\n};\n\nexport default composeWithTracker(composer, Loading)(OrdersListContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport TotalActions from \"../components/totalActions\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\n\nclass TotalActionsContaner extends Component {\n  static propTypes = {\n    adjustedTotal: PropTypes.number,\n    invoice: PropTypes.object,\n    paymentCaptured: PropTypes.bool\n  }\n\n  constructor(props) {\n    super(props);\n    this.isAdjusted = this.isAdjusted.bind(this);\n  }\n\n  isAdjusted = () => {\n    const { adjustedTotal, invoice } = this.props;\n\n    if (invoice.total === adjustedTotal) {\n      return false;\n    }\n    return true;\n  }\n\n  render() {\n    const  { paymentCaptured, adjustedTotal, invoice } =  this.props;\n    return (\n      <div>\n        <TotalActions\n          isAdjusted={this.isAdjusted}\n          paymentCaptured={paymentCaptured}\n          adjustedTotal={adjustedTotal}\n          invoice={invoice}\n        />\n      </div>\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  onData(null, {\n    paymentCaptured: props.paymentCaptured,\n    adjustedTotal: props.adjustedTotal,\n    invoice: props.invoice\n  });\n};\n\nexport default composeWithTracker(composer, Loading)(TotalActionsContaner);\n","import { registerComponent } from \"/imports/plugins/core/layout/lib/components\";\n\n\nimport \"./templates/list/items.html\";\nimport \"./templates/list/items.js\";\nimport \"./templates/list/ordersList.html\";\nimport \"./templates/list/ordersList.js\";\nimport \"./templates/list/pdf.html\";\nimport \"./templates/list/pdf.js\";\nimport \"./templates/list/summary.html\";\nimport \"./templates/list/summary.js\";\n\nimport \"./templates/orderPage/details.html\";\nimport \"./templates/orderPage/details.js\";\nimport \"./templates/orderPage/orderPage.html\";\nimport \"./templates/orderPage/orderPage.js\";\n\n\nimport \"./templates/workflow/shippingInvoice.html\";\nimport \"./templates/workflow/shippingInvoice.js\";\nimport \"./templates/workflow/shippingSummary.html\";\nimport \"./templates/workflow/shippingSummary.js\";\nimport \"./templates/workflow/shippingTracking.html\";\nimport \"./templates/workflow/shippingTracking.js\";\nimport \"./templates/workflow/workflow.html\";\nimport \"./templates/workflow/workflow.js\";\n\nimport \"./templates/orders.html\";\nimport \"./templates/orders.js\";\n\nimport OrdersActionContainer from \"./containers/ordersActionContainer\";\n\n// Register PDP components and some others\nregisterComponent({\n  name: \"orders_ActionDashboard\",\n  component: OrdersActionContainer\n});\n","/**\n * Package name\n * @type {String}\n */\nexport const PACKAGE_NAME = \"reaction-orders\";\n\n/**\n * Preference name for orderList filters when using using Reaction.[get|set]UserPreferences()\n * @type {String}\n */\nexport const ORDER_LIST_FILTERS_PREFERENCE_NAME = \"orderListFilters\";\n\n/**\n * Preference name for selected order _id when using Reaction.[get|set]UserPreferences()\n * @type {String}\n */\nexport const ORDER_LIST_SELECTED_ORDER_PREFERENCE_NAME = \"orderListSelectedOrder\";\n\n/**\n * Default filter name\n * @type {String}\n */\nexport const DEFAULT_FILTER_NAME = \"new\";\n\n\n/**\n * Order filters\n * @type {String}\n */\nexport const orderFilters = [{\n  name: \"new\",\n  label: \"New\"\n}, {\n  name: \"processing\",\n  label: \"Processing\"\n}, {\n  name: \"completed\",\n  label: \"Completed\"\n}];\n","import \"./methods.js\";\nimport \"./payment.html\";\n","import { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport \"./methods.html\";\n\nTemplate.corePaymentMethods.helpers({\n  enabledPayments,\n  isAdmin() {\n    return Reaction.hasAdminAccess();\n  }\n});\n\nTemplate.corePaymentMethods.onCreated(function () {\n  const payments = enabledPayments();\n  const paymentsEnabled = payments.length;\n  // If no payments enabled, show payments settings dashboard\n  if (!paymentsEnabled) {\n    openActionView();\n  }\n});\n\nTemplate.corePaymentMethods.events({\n  \"click [data-event-action=configure-payment-methods]\"(event) {\n    event.preventDefault();\n    openActionView();\n  }\n});\n\nfunction enabledPayments() {\n  const enabledPaymentsArr = [];\n  const apps = Reaction.Apps({\n    provides: \"paymentMethod\",\n    enabled: true\n  });\n  for (const app of apps) {\n    if (app.enabled === true) enabledPaymentsArr.push(app);\n  }\n  return enabledPaymentsArr;\n}\n\nfunction openActionView() {\n  const dashboardRegistryEntry = Reaction.Apps({ name: \"reaction-dashboard\", provides: \"shortcut\" });\n  const paymentRegistryEntry = Reaction.Apps({ name: \"reaction-payments\", provides: \"settings\" });\n\n  Reaction.showActionView([\n    dashboardRegistryEntry[0],\n    paymentRegistryEntry[0]\n  ]);\n}\n","import \"./payment\";\n","import \"./settings.html\";\nimport \"./settings.js\";\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Shops } from \"/lib/collections\";\n\nTemplate.paymentSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  },\n  paymentMethodOptions() {\n    const paymentMethods = Reaction.Apps({ provides: \"paymentMethod\" });\n    const options = [{\n      label: i18next.t(\"app.auto\"),\n      value: \"none\"\n    }];\n\n    if (paymentMethods && _.isArray(paymentMethods)) {\n      for (const method of paymentMethods) {\n        if (method.enabled === true) {\n          options.push({\n            label: i18next.t(method.i18nKeyLabel),\n            value: method.settingsKey\n          });\n        }\n      }\n    }\n    return options;\n  },\n  shop() {\n    return Shops.findOne(Reaction.getShopId());\n  }\n});\n\n// toggle payment methods visibility\nTemplate.paymentSettings.events({\n  \"change input[name=enabled]\": (event) => {\n    event.preventDefault();\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n    // update package registry\n    if (packageId) {\n      Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n      Meteor.call(\"shop/togglePackage\", packageId, !event.target.checked);\n    }\n  }\n});\n\nAutoForm.hooks({\n  shopEditPaymentMethodsForm: {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"shopSettings.shopPaymentMethodsSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"shopSettings.shopPaymentMethodsFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import \"./checkout\";\nimport \"./settings\";\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction } from \"/client/api\";\nimport { Cart } from \"/lib/collections\";\n\n// cartShippingQuotes\n// returns multiple methods\nfunction cartShippingQuotes(currentCart) {\n  const cart = currentCart || Cart.findOne();\n  const shipmentQuotes = [];\n\n  if (cart) {\n    if (cart.shipping) {\n      for (const shipping of cart.shipping) {\n        if (shipping.shipmentQuotes) {\n          for (const quote of shipping.shipmentQuotes) {\n            shipmentQuotes.push(quote);\n          }\n        }\n      }\n    }\n  }\n  return shipmentQuotes;\n}\n// cartShipmentMethods to get current shipment method\n// this returns multiple methods, if more than one carrier\n// has been chosen\nfunction cartShipmentMethods(currentCart) {\n  const cart = currentCart || Cart.findOne();\n  const shipmentMethods = [];\n\n  if (cart) {\n    if (cart.shipping) {\n      for (const shipping of cart.shipping) {\n        if (shipping.shipmentMethod) {\n          shipmentMethods.push(shipping.shipmentMethod);\n        }\n      }\n    }\n  }\n  return shipmentMethods;\n}\n\nfunction enabledShipping() {\n  const enabledShippingArr = [];\n  const apps = Reaction.Apps({\n    provides: \"shippingSettings\",\n    enabled: true\n  });\n  for (const app of apps) {\n    if (app.enabled === true) enabledShippingArr.push(app);\n  }\n  return enabledShippingArr;\n}\n\n// ensure new quotes are\nTemplate.coreCheckoutShipping.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Shipping\");\n  });\n\n  const enabled = enabledShipping();\n  const isEnabled = enabled.length;\n  const shippingOpts = {\n    provides: \"settings\",\n    name: \"settings/shipping\",\n    template: \"shippingSettings\"\n  };\n\n  // If shipping not set, show shipping settings dashboard\n  if (!isEnabled) {\n    Reaction.showActionView(shippingOpts);\n  }\n});\n\nTemplate.coreCheckoutShipping.helpers({\n  // retrieves current rates and updates shipping rates\n  // in the users cart collection (historical, and prevents repeated rate lookup)\n  shipmentQuotes: function () {\n    const instance = Template.instance();\n    if (instance.subscriptionsReady()) {\n      const cart = Cart.findOne();\n      return cartShippingQuotes(cart);\n    }\n  },\n  // helper to display currently selected shipmentMethod\n  isSelected: function () {\n    const self = this;\n    const shipmentMethods = cartShipmentMethods();\n\n    for (const method of shipmentMethods) {\n      // if there is already a selected method, set active\n      if (_.isEqual(self.method, method)) {\n        return \"active\";\n      }\n    }\n    return null;\n  },\n\n  isReady() {\n    const instance = Template.instance();\n    const isReady = instance.subscriptionsReady();\n\n    if (Reaction.Subscriptions.Cart.ready()) {\n      if (isReady) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  isAdmin() {\n    return Reaction.hasAdminAccess();\n  }\n});\n\n//\n// Set and store cart shipmentMethod\n// this copies from shipmentMethods (retrieved rates)\n// to shipmentMethod (selected rate)\n//\nTemplate.coreCheckoutShipping.events({\n  \"click .list-group-item\": function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const self = this;\n    const cart = Cart.findOne();\n\n    try {\n      Meteor.call(\"cart/setShipmentMethod\", cart._id, self.method);\n    } catch (error) {\n      throw new Meteor.Error(error,\n        \"Cannot change methods while processing.\");\n    }\n  },\n  \"click [data-event-action=configure-shipping]\"(event) {\n    event.preventDefault();\n\n    const dashboardRegistryEntry = Reaction.Apps({ name: \"reaction-dashboard\", provides: \"shortcut\" });\n    const shippingRegistryEntry = Reaction.Apps({ name: \"reaction-shipping\", provides: \"settings\" });\n\n    Reaction.showActionView([\n      dashboardRegistryEntry[0],\n      shippingRegistryEntry[0]\n    ]);\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\n/*\n * Template shippinges Helpers\n */\nTemplate.shippingSettings.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Shipping\");\n  });\n});\n\nTemplate.shippingSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  }\n});\n\n// toggle shipping methods visibility\n// also toggles shipping method settings\nTemplate.shippingSettings.events({\n  /**\n   * shippingSettings settings update enabled status for shipping service on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input.checkbox-switch.shipping-settings[name=enabled]\": (event) => {\n    event.preventDefault();\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n    // save shipping registry updates\n    if (packageId) {\n      // update package registry\n      Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n      // also update shipping provider status\n      Meteor.call(\"shipping/provider/toggle\", packageId, settingsKey);\n    }\n  }\n});\n","import \"./checkout/shipping.html\";\nimport \"./checkout/shipping.js\";\n\nimport \"./settings/shipping.html\";\nimport \"./settings/shipping.js\";\n","import \"./templates\";\n","import _ from \"lodash\";\nimport Tooltip from \"tether-tooltip\";\nimport { Template }  from \"meteor/templating\";\nimport { i18next, i18nextDep } from \"/client/api\";\nimport { Icon } from \"/imports/plugins/core/ui/client/components\";\n\nTemplate.button.onRendered(function () {\n  const buttonElement = this.$(\"button, a\")[0];\n\n  this.createTooltip = () => {\n    if (this.data.tooltip) {\n      if (this.tooltip) {\n        this.tooltip.destroy();\n      }\n      this.tooltip = new Tooltip({\n        target: buttonElement,\n        position: this.data.tooltipPosition || \"top left\",\n        content: i18next.t(this.data.i18nKeyTooltip, this.data.tooltip) || this.data.tooltip\n      });\n    }\n  };\n\n  this.autorun(() => {\n    i18nextDep.depend();\n    this.createTooltip();\n  });\n});\n\n/* eslint no-unused-vars: 1 */\n//\n// TODO review Template.button helpers for unused elementProps\n//\nTemplate.button.helpers({\n  iconComponent() {\n    return Icon;\n  },\n\n  elementProps() {\n    const data = Template.currentData();\n    const {\n      // Remove unneeded attributes\n      className, status, type, href,\n\n      // Pull out invalid HTML attributes / unuesed attributes\n      /* eslint-disable */\n      title, label, i18nKeyTitle, i18nKeyLabel, i18nKeyTooltip,\n      tooltip,  icon, toggle, onIcon, toggleOn, onClick,\n      /* eslint-enable */\n\n      // Get the rest of the properties and put them in attrs\n      // these will most likely be HTML attributes\n      ...attrs\n    } = data;\n\n    return {\n      buttonAttributes: {\n        ...attrs, // Spread the attrs into this object\n        // Then override any props from attrs with some better defaults\n        class: `rui button btn btn-${status} ${className}`,\n        href: href,\n        type: () => {\n          if (!href) {\n            return type || \"button\";\n          }\n        }\n      }\n    };\n  },\n  element() {\n    const data = Template.currentData();\n    if (data.type === \"link\") {\n      return \"uiLinkElement\";\n    }\n    return \"uiButtonElement\";\n  },\n  i18nKeyTitle() {\n    const data = Template.instance().data;\n    return data.itemKeyTitle || data.i18nKeyLabel;\n  },\n  title() {\n    const data = Template.instance().data;\n    return data.title || data.label;\n  },\n  toggleOn() {\n    const instance = Template.instance();\n    const toggleOn = instance.data.toggleOn;\n\n    if (toggleOn) {\n      if (_.isFunction(toggleOn)) {\n        return toggleOn(instance.data);\n      }\n\n      return toggleOn;\n    }\n  }\n});\n\nTemplate.button.events({\n  \"click .rui.button\"(event, instance) {\n    if (instance.data.onClick) {\n      instance.data.onClick(event);\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport createFragment from \"react-addons-create-fragment\";\nimport classnames from \"classnames/dedupe\";\nimport Icon from \"../icon/icon.jsx\";\nimport { Tooltip, Translation } from \"../\";\n\nclass Button extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltipOpen: false\n    };\n\n    this.handleButtonMouseOver = this.handleButtonMouseOver.bind(this);\n    this.handleButtonMouseOut = this.handleButtonMouseOut.bind(this);\n  }\n\n  get isTooltipOpen() {\n    return this.state.tooltipOpen;\n  }\n\n  handleButtonMouseOver() {\n    this.setState({\n      tooltipOpen: this.props.tooltip ? true : false\n    });\n  }\n\n  handleButtonMouseOut() {\n    this.setState({\n      tooltipOpen: false\n    });\n  }\n\n  handleClick = (event) => {\n    if (this.props.tagName === \"a\") {\n      event.preventDefault();\n    }\n\n    // If this is a toogle button, and has a onToggle callback function\n    if (this.props.toggle && this.props.onToggle) {\n      if (this.props.toggleOn) {\n        // If toggleOn is true, return the toggleOn value, or true\n        this.props.onToggle(event, this.props.onValue || true);\n      } else {\n        // Otherwise return the value prop, or false\n        this.props.onToggle(event, this.props.value || false);\n      }\n    } else if (this.props.onClick) {\n      this.props.onClick(event, this.props.value);\n    }\n  }\n\n  renderOnStateIcon() {\n    if (this.props.onIcon) {\n      return (\n        <Icon icon={this.props.onIcon} />\n      );\n    }\n    return null;\n  }\n\n  renderNormalStateIcon() {\n    if (this.props.icon) {\n      return (\n        <Icon icon={this.props.icon} />\n      );\n    }\n    return null;\n  }\n\n  renderIcon() {\n    if (this.props.toggle) {\n      if (this.props.toggleOn) {\n        return this.renderOnStateIcon();\n      }\n    }\n\n    return this.renderNormalStateIcon();\n  }\n\n  renderTooltipContent() {\n    if (this.isTooltipOpen && this.props.disabled === false) {\n      if (typeof this.props.tooltip === \"string\") {\n        return (\n          <Translation defaultValue={this.props.tooltip} i18nKey={this.props.i18nKeyTooltip} />\n        );\n      }\n\n      return (\n        <div>\n          {this.props.tooltip}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderLabel() {\n    if (this.props.label) {\n      if (this.props.toggle) {\n        if (this.props.toggleOn && this.props.toggleOnLabel) {\n          return (\n            <Translation\n              defaultValue={this.props.toggleOnLabel}\n              i18nKey={this.props.i18nKeyToggleOnLabel}\n            />\n          );\n        }\n      }\n\n      return (\n        <Translation\n          defaultValue={this.props.label}\n          i18nKey={this.props.i18nKeyLabel}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      active, status, toggleOn, primary, bezelStyle, className, containerStyle,\n\n      // Destructure these vars as they aren't valid as attributes on the HTML element button\n      iconAfter, label, i18nKeyTitle, i18nKeyLabel, i18nKeyTooltip, tabIndex, // eslint-disable-line no-unused-vars\n      tooltip, icon, toggle, onIcon, eventAction, buttonType, // eslint-disable-line no-unused-vars\n      toggleOnLabel, i18nKeyToggleOnLabel, tagName, onClick, onToggle, onValue, tooltipAttachment, // eslint-disable-line no-unused-vars\n\n      // Get the rest of the properties and put them in attrs\n      // these will most likely be HTML attributes\n      ...attrs\n    } = this.props;\n\n    const classes = classnames({\n      \"rui\": true,\n      \"btn\": true,\n      \"btn-default\": !primary &&  (status === null || status === undefined || status === \"default\"),\n      \"active\": active || toggleOn,\n      \"btn-success\": status === \"success\",\n      \"btn-danger\": status === \"danger\",\n      \"btn-info\": status === \"info\",\n      \"btn-warning\": status === \"warning\",\n      \"btn-link\": status === \"link\",\n      \"btn-cta\": status === \"cta\",\n      \"btn-primary\": primary === true || status === \"primary\",\n      [bezelStyle || \"flat\"]: true\n    }, className);\n\n    const extraProps = {};\n\n    if (tagName === \"a\") {\n      extraProps.href = \"#\";\n    }\n\n    const buttonProps = Object.assign({\n      \"className\": classes,\n      \"data-event-action\": eventAction,\n      \"onMouseOut\": this.handleButtonMouseOut,\n      \"onMouseOver\": this.handleButtonMouseOver,\n      \"onClick\": this.handleClick,\n      \"type\": buttonType || \"button\"\n    }, attrs, extraProps);\n\n\n    // Create a react fragment for all the button children\n    let buttonChildren;\n\n    if (iconAfter) {\n      buttonChildren = createFragment({\n        label: this.renderLabel(),\n        icon: this.renderIcon(),\n        children: this.props.children\n      });\n    } else {\n      buttonChildren = createFragment({\n        icon: this.renderIcon(),\n        label: this.renderLabel(),\n        children: this.props.children\n      });\n    }\n\n    // Button with tooltip gets some special treatment\n    if (tooltip) {\n      return React.createElement(tagName, buttonProps,\n        <span className=\"rui btn-tooltip\" style={{ display: \"inline-flex\", ...containerStyle }}>\n          <Tooltip attachment={tooltipAttachment} tooltipContent={this.renderTooltipContent()}>\n            {buttonChildren}\n          </Tooltip>\n        </span>\n      );\n    }\n\n    // Add a wrapped container with styles for standard button\n    if (containerStyle) {\n      buttonChildren = (\n        <div style={containerStyle}>\n          {buttonChildren}\n        </div>\n      );\n    }\n\n    // Normal button, without tooltip\n    return React.createElement(tagName, buttonProps, buttonChildren);\n  }\n}\n\nButton.propTypes = {\n  active: PropTypes.bool,\n  bezelStyle: PropTypes.oneOf([\"flat\", \"solid\", \"outline\"]),\n  buttonType: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  containerStyle: PropTypes.object,\n  disabled: PropTypes.bool,\n  eventAction: PropTypes.string,\n  i18nKeyLabel: PropTypes.string,\n  i18nKeyTitle: PropTypes.string,\n  i18nKeyToggleOnLabel: PropTypes.string,\n  i18nKeyTooltip: PropTypes.string,\n  icon: PropTypes.string,\n  iconAfter: PropTypes.bool,\n  label: PropTypes.string,\n  onClick: PropTypes.func,\n  onIcon: PropTypes.string,\n  onToggle: PropTypes.func,\n  onValue: PropTypes.any,\n  primary: PropTypes.bool,\n  status: PropTypes.string,\n  tabIndex: PropTypes.string,\n  tagName: PropTypes.string,\n  title: PropTypes.string,\n  toggle: PropTypes.bool,\n  toggleOn: PropTypes.bool,\n  toggleOnLabel: PropTypes.string,\n  tooltip: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.node]),\n  tooltipAttachment: PropTypes.string,\n  value: PropTypes.any\n};\n\nButton.defaultProps = {\n  active: false,\n  disabled: false,\n  iconAfter: false,\n  tagName: \"button\",\n  toggle: false,\n  bezelStyle: \"flat\",\n  tooltipAttachment: \"bottom center\"\n};\n\nexport default Button;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Button from \"./button.jsx\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass ButtonSelect extends Component {\n  static PropTypes = {\n    buttons: PropTypes.array,\n    currentButton: PropTypes.node,\n    defaultButton: PropTypes.object,\n    defaultNonActiveButtons: PropTypes.array,\n    nonActiveButtons: PropTypes.array\n  }\n\n  state = {\n    toggle: \"hidden\",\n    currentButton: {},\n    buttons: [],\n    activeButton: \"\",\n    nonActiveButtons: [],\n    defaultBgClassNames: \"\",\n    toggleIcon: classnames({ \"fa\": true, \"fa-chevron-down\": true, \"text-center\": true, \"fa-icon\": true }),\n    toggleClassNames: classnames({ \"button-dropdown\": true, \"hidden\": true })\n  }\n\n  componentWillMount() {\n    this.handleDefaultState();\n  }\n\n  handleDefaultState = () => {\n    const props = this.props;\n    let defaultButton = props.buttons.filter(button => {\n      if (button.active === true) {\n        return button;\n      }\n    });\n    defaultButton = defaultButton[0];\n\n    const defaultBgClassNames = classnames({ \"button-select\": true, [defaultButton.bgColor]: true });\n\n    const defaultNonActiveButtons = props.buttons.filter(button => {\n      if (button.active === false || button.active === undefined) {\n        return button;\n      }\n    });\n    const currentButton = (\n      <Button\n        eventAction={defaultButton.eventAction}\n        status={defaultButton.status}\n        bezelStyle=\"solid\"\n        label={defaultButton.name}\n        i18nKeyLabel={defaultButton.i18nKeyLabel}\n        buttonType={defaultButton.buttonType}\n      />\n    );\n\n    return this.setState({\n      currentButton,\n      defaultBgClassNames,\n      buttons: props.buttons,\n      nonActiveButtons: defaultNonActiveButtons\n    });\n  }\n\n  filterButtons = () => {\n    const { activeButton, buttons } = this.state;\n\n    const nonActiveButtons = buttons.filter(button => {\n      if (button.name !== activeButton) {\n        return button;\n      }\n    });\n    return this.setState({ nonActiveButtons });\n  }\n\n  handleToggle = () => {\n    const { toggle } = this.state;\n    let className;\n\n    if (toggle === \"hidden\") {\n      className = classnames({ \"button-dropdown\": true, \"hidden\": false });\n      return this.setState({ toggle: \"show\",\n        toggleClassNames: className,\n        toggleIcon: classnames({ \"fa\": true, \"fa-chevron-up\": true, \"text-center\": true, \"fa-icon\": true })\n      });\n    }\n\n    className = classnames({ \"button-dropdown\": true, \"hidden\": true });\n    return this.setState({ toggle: \"hidden\",\n      toggleClassNames: className,\n      toggleIcon: classnames({ \"fa\": true, \"fa-chevron-down\": true, \"text-center\": true, \"fa-icon\": true })\n    });\n  }\n\n  handleButtonChange = (button) => {\n    const currentButton = (\n      <Button\n        eventAction={button.eventAction}\n        status={button.status}\n        bezelStyle=\"solid\"\n        label={button.name}\n        i18nKeyLabel={button.i18nKeyLabel}\n        buttonType={button.buttonType}\n      />\n    );\n\n    this.handleToggle();\n\n    return this.setState({\n      currentButton: currentButton,\n      defaultBgClassNames: classnames({ \"button-select\": true, [button.bgColor]: true }),\n      activeButton: button.name\n    }, () => {\n      this.filterButtons();\n    });\n  }\n\n  render() {\n    const { toggleClassNames, nonActiveButtons, defaultBgClassNames, toggleIcon, currentButton } = this.state;\n    return (\n      <div className={defaultBgClassNames}>\n        <div className=\"button-group\">\n          {currentButton}\n          <div className=\"button-toggle\" onClick={this.handleToggle}>\n            <i className={toggleIcon} aria-hidden=\"true\" />\n          </div>\n        </div>\n        <div className={toggleClassNames}>\n          {nonActiveButtons.map((button, key) => {\n            return (\n              <button\n                className=\"btn button-item\" key={key}\n                type=\"button\"\n                onClick={() => this.handleButtonChange(button)}\n              >\n                <Translation defaultValue={button.name} i18nKey={button.i18nKeyLabel} />\n              </button>);\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ButtonSelect;\n","import React from \"react\";\nimport IconButton from \"./iconButton\";\n\n/**\n * Edit button is a special type of Icon Button that is toggable by default\n * and presents a pencil ( or edit icon ) in its of state, and a check ( or success icon)\n * when it is on.\n *\n * Use this button in places where you need a pre-styled button for toggling editing\n * states of components.\n *\n * @param {Object} props Props passed into component\n * @returns {IconButton} Retruns an IconButton component with pre-configured icons for editing\n */\nconst EditButton = (props) => {\n  return (\n    <IconButton\n      icon=\"fa fa-pencil\"\n      onIcon=\"fa fa-check\"\n      toggle={true}\n      primary={true}\n      bezelStyle=\"solid\"\n      kind=\"round\"\n      {...props}\n    />\n  );\n};\n\nexport default EditButton;\n","/* eslint no-unused-vars: 1 */\n\nimport React, { Component } from \"react\";\nimport classnames from \"classnames\";\nimport Button from \"./button.jsx\";\n\nclass FlatButton extends Component {\n  static defaultProps = {\n    bezelStyle: \"flat\"\n  }\n  render() {\n    const {\n      icon,\n      onIcon,\n      ...otherProps\n    } = this.props;\n\n    const buttonClassName = classnames({\n      rui: true,\n      button: true\n    });\n\n    let iconClassName;\n    let onIconClassName;\n\n    if (icon) {\n      iconClassName = classnames({\n        [icon]: true\n      });\n    }\n\n    if (onIcon) {\n      onIconClassName = classnames({\n        [onIcon]: true\n      });\n    }\n\n    return (\n      <Button\n        className={buttonClassName}\n        icon={iconClassName}\n        onIcon={onIconClassName}\n        {...otherProps}\n      />\n    );\n  }\n}\n\nFlatButton.propTypes = Object.assign({}, Button.propTypes);\n\nexport default FlatButton;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Icon } from \"../icon\";\n\n/**\n * Handle is a special type of button used for drag handles.\n * It uses the fa-bars icon by default, and does not have click or hover states\n *\n * Use this button in places where you need a pre-styled button for drag handles\n *\n * @param {Object} props Props passed into component\n * @returns {node} component with pre-configured icon for dragging\n */\nconst Handle = (props) => {\n  const handle = (\n    <div className=\"rui drag-handle btn btn-drag-handle\">\n      <Icon\n        icon=\"fa fa-bars\"\n        {...props}\n      />\n    </div>\n  );\n\n  if (props.connectDragSource) {\n    return props.connectDragSource(handle);\n  }\n\n  return handle;\n};\n\nHandle.propTypes = {\n  connectDragSource: PropTypes.func\n};\n\nexport default Handle;\n","import React, { Component } from \"react\";\nimport classnames from \"classnames\";\nimport Button from \"./button.jsx\";\n\nclass IconButton extends Component {\n  static defaultProps = {\n    bezelStyle: \"solid\"\n  }\n\n  render() {\n    const {\n      icon,\n      onIcon,\n      ...otherProps\n    } = this.props;\n\n\n    // this.props.buttonKind === 'flat'\n    // default should be default, flat is new css that makes the bakcground tarnsparent\n    let buttonClassName;\n\n    if (this.props.kind === \"flat\") {\n      buttonClassName = classnames({\n        \"icon\": true,\n        \"icon-only\": true\n      });\n    } else if (this.props.kind === \"mediaGalleryStatus\") {\n      buttonClassName = classnames({\n        \"icon\": true,\n        \"icon-only\": true,\n        \"status-badge\": true\n      });\n    } else {\n      buttonClassName = classnames({\n        \"icon-only\": true,\n        \"variant-edit\": true\n      });\n    }\n\n    const iconClassName = classnames({\n      \"fa-lg\": true,\n      [icon]: true\n    });\n\n    let onIconClassName;\n\n    if (onIcon) {\n      onIconClassName = classnames({\n        \"fa-lg\": true,\n        [onIcon]: true\n      });\n    }\n\n    return (\n      <Button\n        className={buttonClassName}\n        icon={iconClassName}\n        onIcon={onIconClassName}\n        containerStyle={{ display: \"flex\", width: \"100%\", justifyContent: \"center\" }}\n        {...otherProps}\n      />\n    );\n  }\n}\n\nIconButton.propTypes = Object.assign({}, Button.propTypes);\n\nexport default IconButton;\n","export { default as Button } from \"./button.jsx\";\nexport { default as IconButton } from \"./iconButton\";\nexport { default as EditButton } from \"./editButton\";\nexport { default as VisibilityButton } from \"./visibilityButton\";\nexport { default as Handle } from \"./handle\";\nexport { default as ButtonSelect } from \"./buttonSelect\";\n","import React from \"react\";\nimport IconButton from \"./iconButton\";\n\n/**\n * Visibility button is a special type of Icon Button that is toggable by default\n * and presents a eye icon in its on state, and a eye-slash icon when it is off.\n *\n * Use this button in places where you need a pre-styled button for toggling visibility\n * states of components.\n *\n * @param {Object} props Props passed into component\n * @returns {IconButton} Retruns an IconButton component with pre-configured icons for visibility\n */\nconst VisibilityButton = (props) => {\n  return (\n    <IconButton\n      icon=\"fa fa-eye-slash\"\n      onIcon=\"fa fa-eye\"\n      bezelStyle=\"solid\"\n      primary={true}\n      toggle={true}\n      {...props}\n    />\n  );\n};\n\nexport default VisibilityButton;\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\n\nclass Card extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: props.expanded\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      expanded: nextProps.expanded\n    });\n  }\n\n  handleExpanderClick = (event) => {\n    this.setState({\n      expanded: !this.state.expanded\n    }, () => {\n      if (typeof this.props.onExpand === \"function\") {\n        this.props.onExpand(event, this, this.props.name, this.state.expanded);\n      }\n    });\n  }\n\n  render() {\n    const elements = Children.map(this.props.children, (child) => {\n      const newProps = {};\n\n      if (child.props.actAsExpander) {\n        newProps.actAsExpander = true;\n        newProps.onClick = this.handleExpanderClick;\n      }\n\n      if (child.props.expandable || child.props.actAsExpander) {\n        newProps.expanded = this.state.expanded;\n      }\n\n      return React.cloneElement(child, newProps);\n    });\n\n    const baseClassName = classnames({\n      \"panel\": true,\n      \"panel-default\": true,\n      \"panel-active\": this.state.expanded,\n      \"closed\": this.state.expanded === false\n    });\n\n    return (\n      <div className={baseClassName} style={this.props.style}>\n        {elements}\n      </div>\n    );\n  }\n}\n\nCard.defaultProps = {\n  expandable: false,\n  expanded: true\n};\n\nCard.propTypes = {\n  children: PropTypes.node,\n  expandable: PropTypes.bool,\n  expanded: PropTypes.bool,\n  name: PropTypes.string,\n  onExpand: PropTypes.func,\n  style: PropTypes.object\n};\n\nexport default Card;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { VelocityTransitionGroup } from \"velocity-react\";\nimport Radium from \"radium\";\nimport classnames from \"classnames\";\n\nconst styles = {\n  noPadding: {\n    padding: 0\n  }\n};\n\nclass CardBody extends Component {\n  static defaultProps = {\n    expandable: false,\n    expanded: true\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    expanded: PropTypes.bool,\n    padded: PropTypes.bool\n  };\n\n  renderCard() {\n    if (this.props.expanded) {\n      const baseClassName = classnames({\n        \"rui\": true,\n        \"panel-body\": true,\n        \"no-padding\": this.props.padded === false\n      });\n\n      return (\n        <div\n          className={baseClassName}\n          style={[\n            this.props.padded === false ? styles.noPadding : void 0\n          ]}\n        >\n          {this.props.children}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <VelocityTransitionGroup\n        enter={{ animation: \"slideDown\" }}\n        leave={{ animation: \"slideUp\" }}\n      >\n        {this.renderCard()}\n      </VelocityTransitionGroup>\n    );\n  }\n}\n\nexport default Radium(CardBody);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass CardGroup extends Component {\n  render() {\n    return (\n      <div className=\"panel-group\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nCardGroup.propTypes = {\n  children: PropTypes.node\n};\n\nexport default CardGroup;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport CardTitle from \"./cardTitle\";\nimport IconButton from \"../button/iconButton\";\nimport Icon from \"../icon/icon\";\nimport Switch from \"../switch/switch\";\n\nclass CardHeader extends Component {\n  static defaultProps = {\n    actAsExpander: false,\n    expandable: false\n  };\n\n  static propTypes = {\n    actAsExpander: PropTypes.bool,\n    children: PropTypes.node,\n    expandOnSwitchOn: PropTypes.bool,\n    expanded: PropTypes.bool,\n    i18nKeyTitle: PropTypes.string,\n    icon: PropTypes.string,\n    imageView: PropTypes.node,\n    onClick: PropTypes.func,\n    onSwitchChange: PropTypes.func,\n    showSwitch: PropTypes.bool,\n    switchName: PropTypes.string,\n    switchOn: PropTypes.bool,\n    title: PropTypes.string\n  };\n\n  handleClick = (event) => {\n    event.preventDefault();\n\n    if (typeof this.props.onClick === \"function\") {\n      this.props.onClick(event);\n    }\n  }\n\n  handleSwitchChange = (event, isChecked, name) => {\n    if (this.props.expandOnSwitchOn && this.props.actAsExpander && this.props.expanded === false && isChecked === true) {\n      this.handleClick(event);\n    }\n\n    if (typeof this.props.onSwitchChange === \"function\") {\n      this.props.onSwitchChange(event, isChecked, name);\n    }\n  }\n\n  renderTitle() {\n    if (this.props.title) {\n      return (\n        <CardTitle\n          i18nKeyTitle={this.props.i18nKeyTitle}\n          title={this.props.title}\n        />\n      );\n    }\n    return null;\n  }\n\n  renderImage() {\n    if (this.props.icon) {\n      return (\n        <div className=\"image\">\n          <Icon icon={this.props.icon} />\n        </div>\n      );\n    }\n\n    if (this.props.imageView) {\n      return (\n        <div className=\"image\">\n          {this.props.imageView}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderDisclsoureArrow() {\n    const expanderClassName = classnames({\n      rui: true,\n      expander: true,\n      open: this.props.expanded\n    });\n\n    return (\n      <div className={expanderClassName}>\n        <IconButton\n          icon=\"fa fa-angle-down\"\n          bezelStyle=\"outline\"\n          style={{ borderColor: \"#dddddd\" }}\n          onClick={this.handleClick}\n        />\n      </div>\n    );\n  }\n\n  renderChildren() {\n    if (this.props.showSwitch) {\n      return (\n        <Switch\n          checked={this.props.switchOn}\n          name={this.props.switchName}\n          onChange={this.handleSwitchChange}\n        />\n      );\n    }\n\n    return this.props.children;\n  }\n\n  render() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"panel-heading\": true,\n      \"card-header\": true,\n      \"expandable\": this.props.actAsExpander\n    });\n\n    if (this.props.actAsExpander) {\n      return (\n        <div className={baseClassName}>\n          <div className=\"content-view\" onClick={this.handleClick}>\n            {this.renderImage()}\n            {this.renderTitle()}\n          </div>\n          <div className=\"action-view\">\n            {this.renderChildren()}\n          </div>\n          {this.renderDisclsoureArrow()}\n        </div>\n      );\n    }\n\n    return (\n      <div className={baseClassName}>\n        <div className=\"content-view\">\n          {this.renderTitle()}\n        </div>\n        <div className=\"action-view\">\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CardHeader;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Translation } from \"../translation\";\n\nclass CardTitle extends Component {\n  render() {\n    const { element, ...props } = this.props;\n\n    if (element) {\n      return React.cloneElement(element, props);\n    }\n\n    return (\n      <h3 className=\"panel-title\">\n        <Translation defaultValue={this.props.title} i18nKey={this.props.i18nKeyTitle} />\n        {this.props.children}\n      </h3>\n    );\n  }\n}\n\nCardTitle.propTypes = {\n  children: PropTypes.node,\n  element: PropTypes.node,\n  i18nKeyTitle: PropTypes.string,\n  title: PropTypes.string\n};\n\nexport default CardTitle;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass CardToobar extends Component {\n  static propTypes = {\n    children: PropTypes.node\n  }\n\n  render() {\n    return (\n      <div className=\"rui card-toolbar\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default CardToobar;\n","import { Template } from \"meteor/templating\";\n/**\n* @typedef CardProps\n* @type Object\n* @property {[Object]} controls Reaction UI Button or other control props\n* @property {function} onContentClick y The Y\n*/\n\nTemplate.card.events({\n  \"click .content\"(event, instance) {\n    if (instance.data.onContentClick) {\n      instance.data.onContentClick(event);\n    }\n  }\n});\n","export { default as Card } from \"./card\";\nexport { default as CardHeader } from \"./cardHeader\";\nexport { default as CardTitle } from \"./cardTitle\";\nexport { default as CardBody } from \"./cardBody\";\nexport { default as CardGroup } from \"./cardGroup\";\nexport { default as CardToolbar } from \"./cardToolbar\";\nexport { default as SettingsCard } from \"./settingsCard\";\n","/**\n * Settings Card is a composite component to standardize the\n * creation settings cards (panels) in the dashboard.\n */\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Reaction } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Card, CardHeader, CardBody } from \"/imports/plugins/core/ui/client/components\";\n\nclass SettingsCard extends Component {\n  static defaultProps = {\n    showSwitch: true\n  }\n\n  static propTypes = {\n    children: PropTypes.node,\n    enabled: PropTypes.bool,\n    expanded: PropTypes.bool,\n    i18nKeyTitle: PropTypes.string,\n    icon: PropTypes.string,\n    name: PropTypes.string,\n    onExpand: PropTypes.func,\n    onSwitchChange: PropTypes.func,\n    packageName: PropTypes.string,\n    padded: PropTypes.bool,\n    preferences: PropTypes.object,\n    saveOpenStateToPreferences: PropTypes.bool,\n    showSwitch: PropTypes.bool,\n    template: PropTypes.any,\n    title: PropTypes.string\n  }\n\n  handleSwitchChange = (event, isChecked) => {\n    if (typeof this.props.onSwitchChange === \"function\") {\n      this.props.onSwitchChange(event, isChecked, this.props.name, this);\n    }\n  }\n\n  handleExpand = (event, card, name, isExpanded) => {\n    if (this.props.onExpand) {\n      this.props.onExpand(event, card, name, isExpanded);\n    }\n\n    if (this.props.packageName && this.props.saveOpenStateToPreferences) {\n      Reaction.updateUserPreferences(this.props.packageName, \"settingsCards\", {\n        [this.props.name]: isExpanded\n      });\n    }\n  }\n\n  get isExpanded() {\n    if (this.props.packageName && this.props.saveOpenStateToPreferences) {\n      return this.props.preferences[this.props.name];\n    }\n\n    return this.props.expanded;\n  }\n\n  renderCardBody() {\n    if (this.props.template) {\n      return (\n        <Blaze template={this.props.template} />\n      );\n    }\n\n    return this.props.children;\n  }\n\n  render() {\n    return (\n      <Card\n        expandable={true}\n        onExpand={this.handleExpand}\n        expanded={this.isExpanded}\n        name={this.props.name}\n      >\n        <CardHeader\n          i18nKeyTitle={this.props.i18nKeyTitle}\n          icon={this.props.icon}\n          title={this.props.title}\n          showSwitch={this.props.showSwitch}\n          actAsExpander={true}\n          switchOn={this.props.enabled}\n          switchName={this.props.name}\n          expandOnSwitchOn={true}\n          onSwitchChange={this.handleSwitchChange}\n        />\n        <CardBody expandable={true} padded={this.props.padded}>\n          {this.renderCardBody()}\n        </CardBody>\n      </Card>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  if (props.packageName && props.saveOpenStateToPreferences) {\n    const preferences = Reaction.getUserPreferences(props.packageName, \"settingsCards\", {});\n\n    onData(null, {\n      preferences\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nconst decoratedComponent = composeWithTracker(composer)(SettingsCard);\n\nexport default decoratedComponent;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nconst accounting = require(\"accounting-js\");\n\nfunction setCaretPosition(ctrl, pos) {\n  if (ctrl.setSelectionRange) {\n    ctrl.focus();\n    ctrl.setSelectionRange(pos, pos);\n  } else if (ctrl.createTextRange) {\n    const range = ctrl.createTextRange();\n\n    range.collapse(true);\n    range.moveEnd(\"character\", pos);\n    range.moveStart(\"character\", pos);\n    range.select();\n  }\n}\n\nclass NumericInput extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Set default state\n    this.state = {\n      value: this.props.value\n    };\n\n    // Bind event handlers\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  /**\n   * update state when component receives props\n   * @param  {Object} nextProps new props\n   * @return {undefined}\n   */\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      value: nextProps.value\n    });\n  }\n\n  get moneyFormat() {\n    const moneyFormat = this.props.format || {};\n    // precision is mis-represented in accounting.js. Precision in this case is actually scale\n    // so we add the property for precision based on scale.\n    moneyFormat.precision = moneyFormat.scale !== undefined ? moneyFormat.scale : 2;\n\n    return moneyFormat;\n  }\n\n  get displayValue() {\n    const value = this.state.value;\n\n    if (typeof value === \"number\") {\n      if (this.props.format && this.props.format.scale === 0) {\n        return this.format(value * 100);\n      }\n      return this.format(value);\n    }\n\n    return 0;\n  }\n\n  get scale() {\n    const parts = this.state.value.split(\".\");\n\n    if (parts.length === 2) {\n      return parts[1].length;\n    }\n\n    return 0;\n  }\n\n  /**\n   * format a numeric string\n   * @param  {String} value Value to format\n   * @param  {Object} format Object containing settings for formatting value\n   * @return {String} Foramtted numeric string\n   */\n  format(value, format) {\n    const moneyFormat = format || this.moneyFormat;\n\n    const decimal = moneyFormat.decimal || undefined;\n    const unformatedValue = this.unformat(value, decimal);\n\n    return accounting.formatMoney(unformatedValue, moneyFormat);\n  }\n\n  /**\n   * unformat numeric string\n   * @param  {String} value String value to unformat\n   * @param  {String} decimal String representing the decimal place\n   * @return {String} unformatted numeric string\n   */\n  unformat(value, decimal) {\n    return accounting.unformat(value, decimal);\n  }\n\n  /**\n   * Handle change event from text input\n   * @param  {SyntheticEvent} event Change event\n   * @return {undefined}\n   */\n  handleChange(event) {\n    const input = event.currentTarget;\n    const value = event.currentTarget.value;\n    let numberValue = this.unformat(value);\n\n    if (this.props.format.scale === 0) {\n      numberValue = numberValue / 100;\n    }\n\n    this.setState({\n      value: numberValue,\n      caretPosition: input.selectionStart\n    }, () => {\n      setCaretPosition(input, Math.max(this.state.caretPosition, 0));\n\n      if (this.props.onChange) {\n        this.props.onChange(event, { value, numberValue });\n      }\n    });\n  }\n\n  /**\n   * render\n   * @return {ReactElement} markup\n   */\n  render() {\n    const { classNames } = this.props;\n\n\n    if (this.props.isEditing === false) {\n      const textValueClassName = classnames({\n        rui: true,\n        text: true,\n        ...(classNames.text || {})\n      });\n\n      return (\n        <span className={textValueClassName}>\n          {this.displayValue}\n        </span>\n      );\n    }\n\n    const fieldClassName = classnames({\n      \"form-control\": true, // eslint-disable-line: quote-props\n      ...(classNames.input || {})\n    });\n\n    return (\n      <div className=\"rui control numeric-input\">\n        <input\n          className={fieldClassName}\n          disabled={this.props.disabled}\n          onChange={this.handleChange}\n          value={this.displayValue}\n        />\n      </div>\n    );\n  }\n}\n\nNumericInput.displayName = \"Numeric Input\";\n\nNumericInput.defaultProps = {\n  disabled: false,\n  isEditing: true,\n  classNames: {}\n};\n\nNumericInput.propTypes = {\n  classNames: PropTypes.shape({}),\n  disabled: PropTypes.bool,\n  format: PropTypes.shape({\n    scale: PropTypes.number\n  }),\n  isEditing: PropTypes.bool,\n  onChange: PropTypes.func,\n  value: PropTypes.number\n};\n\nexport default NumericInput;\n","import { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { templateClassName } from \"/imports/plugins/core/ui/client/helpers/helpers\";\n\n/**\n * Select - onCreated\n */\nTemplate.select.onCreated(function () {\n  this.state = new ReactiveDict();\n});\n\n/**\n * Select - events\n */\nTemplate.select.events({\n  \"change select, change input\"(event, template) {\n    if (template.data.onSelect) {\n      template.data.onSelect(event.target.value, event);\n    }\n  }\n});\n\n/**\n * Select - helpers\n */\nTemplate.select.helpers({\n  template() {\n    const type = Template.currentData().type;\n    if (type === \"radios\" || type === \"radio\") {\n      return \"selectAsRadioButtons\";\n    } else if (type === \"checkboxes\" || type === \"checkbox\") {\n      return \"selectAsCheckboxes\";\n    }\n\n    return \"selectAsDropdown\";\n  }\n});\n\n/**\n * Select (As a set of radio buttons) - helpers\n */\nTemplate.selectAsRadioButtons.helpers({\n  itemListClassName() {\n    return templateClassName(Template.instance(), {\n      rui: true,\n      items: true,\n      flex: true,\n      quarter: true\n    }, \"itemList\");\n  },\n\n  itemClassName() {\n    return templateClassName(Template.instance(), {\n      rui: true,\n      item: true\n    }, \"item\");\n  },\n\n  labelClassName() {\n    return templateClassName(Template.instance(), undefined, \"label\");\n  },\n\n  inputClassName() {\n    return templateClassName(Template.instance(), undefined, \"input\");\n  },\n\n  templateData(option) {\n    const instance = Template.instance();\n    const data = instance.data;\n\n    return {\n      selected: data.selected === option[data.key || \"_id\"],\n      option\n    };\n  },\n  /**\n   * checked attribute helper\n   * @param  {Object} option Option object\n   * @return {String|undefined} returns \"chekced\" if selected, undefined otherwise\n   */\n  checked(option) {\n    const data = Template.currentData();\n\n    if (data.selected === option[data.key || \"_id\"]) {\n      return \"checked\";\n    }\n  }\n});\n\n/**\n * Select (As a set of checkboxes) - helpers\n */\nTemplate.selectAsCheckboxes.helpers({\n  /**\n   * checked attribute helper\n   * @param  {Object} option Option object\n   * @return {String|undefined} returns \"chekced\" if selected, undefined otherwise\n   */\n  checked(option) {\n    const data = Template.currentData();\n\n    if (data.selected === option[data.key || \"_id\"]) {\n      return \"checked\";\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport MultiSelect from \"../multiselect/multiselect\";\n\nclass Select extends Component {\n  render() {\n    return (\n      <MultiSelect\n        multi={false}\n        clearable={false}\n        {...this.props}\n      />\n    );\n  }\n}\n\nexport default Select;\n","export { default as TagList } from \"./tags.jsx\";\nexport { default as TagItem } from \"./tag.jsx\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Autosuggest from \"react-autosuggest\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { i18next } from \"/client/api\";\nimport { Button, Handle } from \"/imports/plugins/core/ui/client/components\";\nimport { SortableItem } from \"../../containers\";\n\nclass Tag extends Component {\n  displayName: \"Tag\";\n\n  componentWillReceiveProps(nextProps) {\n    if (this._updated && this._saved && this.refs.autoSuggestInput) {\n      const input = this.refs.autoSuggestInput.input;\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n\n      this._updated = false;\n    }\n\n    if ((nextProps.tag.name !== this.props.tag.name)) {\n      this._updated = true;\n    }\n  }\n\n  get tag() {\n    return this.props.tag || {\n      name: \"\"\n    };\n  }\n\n  get inputPlaceholder() {\n    return i18next.t(this.props.i18nKeyInputPlaceholder || \"tags.tagName\", {\n      defaultValue: this.props.inputPlaceholder || \"Tag Name\"\n    });\n  }\n\n  getSuggestionValue(suggestion) {\n    return suggestion.label;\n  }\n\n  saveTag(event) {\n    if (this.props.onTagSave) {\n      this.props.onTagSave(event, this.props.tag);\n    }\n  }\n\n  /**\n   * Handle tag form submit events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagFormSubmit = (event) => {\n    event.preventDefault();\n    this._saved = true;\n    this.saveTag(event);\n  };\n\n  /**\n   * Handle tag remove events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagRemove = () => {\n    if (this.props.onTagRemove) {\n      this.props.onTagRemove(this.props.tag, this.props.parentTag);\n    }\n  };\n\n  /**\n   * Handle tag update events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagUpdate = (event) => {\n    if (this.props.onTagUpdate && event.keyCode === 13) {\n      this._saved = true;\n      this.props.onTagUpdate(this.props.tag._id, event.target.value);\n    }\n  };\n\n  handleTagKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this._saved = true;\n      this.saveTag(event);\n    }\n  }\n\n  /**\n   * Handle tag mouse out events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagMouseOut = (event) => {\n    // event.preventDefault();\n    if (this.props.onTagMouseOut) {\n      this.props.onTagMouseOut(event, this.props.tag);\n    }\n  };\n\n  /**\n   * Handle click event on drop button and pass up the component chain\n   * @return {void} no return value\n   */\n  handleTagSelect = () => {\n    if (this.props.onTagSelect) { // Pass the tag back up to the parent component\n      this.props.onTagSelect(this.props.tag);\n    }\n  }\n\n  /**\n   * Handle tag mouse over events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagMouseOver = (event) => {\n    if (this.props.onTagMouseOver) {\n      this.props.onTagMouseOver(event, this.props.tag);\n    }\n  };\n\n  /**\n   * Handle tag inout blur events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleTagInputBlur = (event) => {\n    if (this.props.onTagInputBlur) {\n      this._saved = true;\n      this.props.onTagInputBlur(event, this.props.tag);\n    }\n  };\n\n  handleInputChange = (event, { newValue }) => {\n    if (this.props.onTagUpdate) {\n      const updatedTag = Object.assign({}, { ...this.props.tag }, {\n        name: newValue\n      });\n      this.props.onTagUpdate(event, updatedTag);\n    }\n  }\n\n  handleSuggestionsUpdateRequested = (suggestion) => {\n    if (this.props.onGetSuggestions) {\n      this.props.onGetSuggestions(suggestion);\n    }\n  }\n\n  handleSuggestionsClearRequested = () => {\n    if (this.props.onClearSuggestions) {\n      this.props.onClearSuggestions();\n    }\n  }\n\n  handleClick = (event) => {\n    if (this.props.onTagClick) {\n      event.preventDefault();\n      this.props.onTagClick(event, this.props.tag);\n    }\n  }\n\n  /**\n   * Render a simple tag for display purposes only\n   * @return {JSX} simple tag\n   */\n  renderTag() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"tag\": true,\n      \"link\": true,\n      \"full-width\": this.props.fullWidth\n    });\n\n    return (\n      <a\n        className={baseClassName}\n        href=\"#\"\n        onMouseOut={this.handleTagMouseOut}\n        onMouseOver={this.handleTagMouseOver}\n        onClick={this.handleClick}\n      >\n        {this.props.tag.name}\n      </a>\n    );\n  }\n\n  /**\n   * Render an admin editable tag\n   * @return {JSX} editable tag\n   */\n  renderEditableTag() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"tag\": true,\n      \"edit\": true,\n      \"draggable\": this.props.draggable,\n      \"full-width\": this.props.fullWidth\n    });\n\n    return (\n      this.props.connectDropTarget(\n        <div className=\"rui item edit draggable\">\n          <div\n            className={baseClassName}\n            data-id={this.props.tag._id}\n          >\n            <form onSubmit={this.handleTagFormSubmit}>\n              <Handle connectDragSource={this.props.connectDragSource} />\n              {this.renderAutosuggestInput()}\n              <Button icon=\"times-circle\" onClick={this.handleTagRemove} status=\"danger\" />\n              {this.props.isTagNav &&\n                <Button icon=\"chevron-down\" onClick={this.handleTagSelect} status=\"default\" />\n              }\n            </form>\n          </div>\n        </div>\n      )\n    );\n  }\n\n  /**\n   * Render a tag creation form\n   * @return {JSX} blank tag for creating new tags\n   */\n  renderBlankEditableTag() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"tag\": true,\n      \"edit\": true,\n      \"create\": true,\n      \"full-width\": this.props.fullWidth\n    });\n\n    return (\n      <div className=\"rui item edit draggable\">\n        <div className={baseClassName}>\n          <form onSubmit={this.handleTagFormSubmit}>\n            <Button icon=\"tag\" />\n            {this.renderAutosuggestInput()}\n            <Button icon=\"plus\" />\n          </form>\n        </div>\n      </div>\n    );\n  }\n\n  renderSuggestion(suggestion) {\n    return (\n      <span>{suggestion.label}</span>\n    );\n  }\n\n  renderAutosuggestInput() {\n    return (\n      <Autosuggest\n        getSuggestionValue={this.getSuggestionValue}\n        inputProps={{\n          placeholder: this.inputPlaceholder,\n          value: this.props.tag.name,\n          onKeyDown(event) {\n            // 9 == Tab key\n            // 13 == Enter Key\n            if (event.keyCode === 9 || event.keyCode === 13) {\n              // this.handleUpdate\n              // options.onUpdateCallback && options.onUpdateCallback();\n            }\n          },\n          onBlur: this.handleTagInputBlur,\n          onChange: this.handleInputChange\n        }}\n        onSuggestionsClearRequested={this.handleSuggestionsClearRequested}\n        onSuggestionsFetchRequested={this.handleSuggestionsUpdateRequested}\n        ref=\"autoSuggestInput\"\n        renderSuggestion={this.renderSuggestion}\n        suggestions={this.props.suggestions}\n      />\n    );\n  }\n\n  /**\n   * Render component\n   * @return {JSX} tag component\n   */\n  render() {\n    if (this.props.blank) {\n      return this.renderBlankEditableTag();\n    } else if (this.props.editable) {\n      return this.renderEditableTag();\n    }\n\n    return this.renderTag();\n  }\n}\n\nTag.propTypes = {\n  blank: PropTypes.bool,\n  connectDragSource: PropTypes.func,\n  connectDropTarget: PropTypes.func,\n  draggable: PropTypes.bool,\n  editable: PropTypes.bool,\n  fullWidth: PropTypes.bool,\n  i18nKeyInputPlaceholder: PropTypes.string,\n  index: PropTypes.number,\n  inputPlaceholder: PropTypes.string,\n  isTagNav: PropTypes.bool,\n  onClearSuggestions: PropTypes.func,\n  onGetSuggestions: PropTypes.func,\n  onTagClick: PropTypes.func,\n  onTagInputBlur: PropTypes.func,\n  onTagMouseOut: PropTypes.func,\n  onTagMouseOver: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  onTagSave: PropTypes.func,\n  onTagSelect: PropTypes.func,\n  onTagUpdate: PropTypes.func,\n  parentTag: PropTypes.object,\n  suggestions: PropTypes.arrayOf(PropTypes.object),\n  tag: PropTypes.object\n};\n\nexport default SortableItem(\"tag\", Tag);\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, Router } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { i18next } from \"/client/api\";\nimport classnames from \"classnames\";\nimport Autosuggest from \"react-autosuggest\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport React from \"react\";\n\nfunction createAutosuggestInput(templateInstance, options) {\n  return {\n    component: Autosuggest,\n    suggestions: templateInstance.state.get(\"suggestions\"),\n    getSuggestionValue: getSuggestionValue,\n    renderSuggestion: renderSuggestion,\n    onSuggestionsFetchRequested({ value }) {\n      templateInstance.state.set(\"suggestions\", getSuggestions(value));\n    },\n    onSuggestionsClearRequested() {\n      templateInstance.state.set(\"suggestions\", []);\n    },\n    inputProps: {\n      placeholder: i18next.t(options.i18nPlaceholderKey, { defaultValue: options.i18nPlaceholderValue }),\n      value: templateInstance.state.get(\"inputValue\"),\n      onKeyDown(event) {\n        // 9 == Tab key\n        // 13 == Enter Key\n        if (event.keyCode === 9 || event.keyCode === 13) {\n          options.onUpdateCallback && options.onUpdateCallback();\n        }\n      },\n      onBlur: () => {\n        options.onUpdateCallback && options.onUpdateCallback();\n      },\n      onChange(event, { newValue }) {\n        templateInstance.state.set(\"suggestion\", getSuggestions(newValue));\n        templateInstance.state.set(\"inputValue\", newValue);\n      }\n    }\n  };\n}\n\nfunction getSuggestions(term) {\n  const datums = [];\n  const slug = Reaction.getSlug(term);\n  Tags.find({\n    slug: new RegExp(slug, \"i\")\n  }).forEach(function (tag) {\n    return datums.push({\n      label: tag.name\n    });\n  });\n\n  return datums;\n}\n\nfunction getSuggestionValue(suggestion) {\n  return suggestion.label;\n}\n\nfunction renderSuggestion(suggestion) {\n  return React.createElement(\"span\", null, suggestion.label);\n}\n\nTemplate.tagItem.helpers({\n  tagBlankProps() {\n    const instance = Template.instance();\n    return {\n      onTagCreate: instance.data.onTagCreate\n    };\n  },\n\n  tagEditableProps(tag) {\n    const instance = Template.instance();\n\n    return {\n      tag,\n      controls: _.map(instance.data.controls, (control) => {\n        return {\n          ...control,\n          toggleOn() {\n            if (control.toggleOn) {\n              if (_.isFunction(control.toggleOn)) {\n                return control.toggleOn(tag);\n              }\n\n              return control.toggleOn;\n            }\n            return undefined;\n          },\n          onClick(event) {\n            // Call the original onClick and add the current tag\n            control.onClick(event, tag);\n          }\n        };\n      }),\n      className: instance.data.className,\n      isSelected: instance.data.isSelected,\n      selectable: instance.data.selectable,\n      onTagRemove: instance.data.onTagRemove,\n      onTagSelect: instance.data.onTagSelect,\n      onTagUpdate: instance.data.onTagUpdate\n    };\n  }\n});\n\nTemplate.tagEditable.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    oldValue: this.data.tag.name,\n    inputValue: this.data.tag.name,\n    suggestions: []\n  });\n\n  this.submitInput = () => {\n    const value = this.state.get(\"inputValue\").trim();\n\n    if (this.data.onTagCreate && _.isEmpty(value) === false) {\n      this.data.onTagCreate(value);\n    }\n\n    this.state.set(\"inputValue\", \"\");\n  };\n\n  this.updateTag = () => {\n    const inputValue = this.state.get(\"inputValue\");\n    if (this.state.equals(\"oldValue\", inputValue) === false) {\n      const value = inputValue.trim();\n\n      if (this.data.onTagUpdate && _.isEmpty(value) === false) {\n        this.data.onTagUpdate(this.data.tag._id, value);\n        this.state.set(\"oldValue\", inputValue);\n      }\n    }\n  };\n});\n\nTemplate.tagEditable.helpers({\n  AutosuggestInput() {\n    const instance = Template.instance();\n\n    return createAutosuggestInput(instance, {\n      i18nPlaceholderKey: \"tags.updateTag\",\n      i18nPlaceholderValue: \"Update Tag\",\n      onUpdateCallback: instance.updateTag\n    });\n  },\n\n  className() {\n    const instance = Template.instance();\n\n    return classnames(instance.data.className, {\n      selected: instance.data.classes\n    });\n  },\n\n  handleTagSelect() {\n    const instance = Template.instance();\n    return () => {\n      // Pass the tag back up to the parent component\n      if (instance.data.onTagSelect) {\n        instance.data.onTagSelect(instance.data.tag);\n      }\n    };\n  },\n  handleTagRemove() {\n    const instance = Template.instance();\n    return () => {\n      // Pass the tag back up to the parent component\n      if (instance.data.onTagRemove) {\n        instance.data.onTagRemove(instance.data.tag);\n      }\n    };\n  }\n});\n\nTemplate.tagBlank.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    inputValue: \"\",\n    suggestions: []\n  });\n\n  this.submitInput = () => {\n    const value = this.state.get(\"inputValue\").trim();\n\n    if (this.data.onTagCreate && _.isEmpty(value) === false) {\n      this.data.onTagCreate(value);\n    }\n\n    this.state.set(\"inputValue\", \"\");\n  };\n});\n\nTemplate.tagBlank.helpers({\n  AutosuggestInput() {\n    const instance = Template.instance();\n\n    return createAutosuggestInput(instance, {\n      i18nPlaceholderKey: \"tags.addTag\",\n      i18nPlaceholderValue: \"Add Tag\",\n      onUpdateCallback: instance.submitInput\n    });\n  }\n});\n\nTemplate.tagLink.events({\n  \"click a\"(event, templateInstance) {\n    event.preventDefault();\n    const slug = templateInstance.data.tag && templateInstance.data.tag.slug;\n    Router.go(\"tag\", { slug });\n  }\n});\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport Sortable from \"sortablejs\";\n\nTemplate.tagList.onCreated(function () {\n  this.moveItem = (array, fromIndex, toIndex) => {\n    array.splice(toIndex, 0, array.splice(fromIndex, 1)[0]);\n\n    return array;\n  };\n});\n\nTemplate.tagList.onRendered(() => {\n  const instance = Template.instance();\n  const list = instance.$(\".rui.tags\")[0];\n\n  instance._sortable = Sortable.create(list, {\n    group: \"tags\",\n    draggable: \".rui.item.draggable\",\n    // filter: \".rui.tag.edit.create\",\n    onSort(event) {\n      const tagIds = instance.data.tags.map(item => {\n        if (item) {\n          return item._id;\n        }\n      });\n\n      const newTagsOrder = instance.moveItem(tagIds, event.oldIndex, event.newIndex);\n\n      if (newTagsOrder) {\n        if (instance.data.onTagSort) {\n          instance.data.onTagSort(newTagsOrder, instance.data.parentTag);\n        }\n      }\n    },\n\n    // On add from another list\n    onAdd(event) {\n      const toListId = event.to.dataset.id;\n      const movedTagId = event.item.dataset.id;\n      const tagIds = instance.data.tags.map(item => {\n        if (item) {\n          return item._id;\n        }\n      });\n\n      if (instance.data.onTagDragAdd) {\n        instance.data.onTagDragAdd(movedTagId, toListId, event.newIndex, tagIds);\n      }\n    },\n\n    // Tag removed from list becuase it was dragged to a different list\n    onRemove(event) {\n      const movedTagId = event.item.dataset.id;\n\n      if (instance.data.onTagRemove) {\n        const foundTag = _.find(instance.data.tags, (tag) => {\n          return tag._id === movedTagId;\n        });\n\n        instance.data.onTagRemove(foundTag, instance.data.parentTag);\n      }\n    }\n  });\n});\n\nTemplate.tagList.helpers({\n  isEditing() {\n    return Template.instance().data.isEditing;\n  },\n\n  tagProps(tag) {\n    const instance = Template.instance();\n    let isSelected = false;\n    if (instance.data.selectedTag && tag) {\n      isSelected = instance.data.selectedTag._id === tag._id;\n    }\n\n    return {\n      tag,\n      isEditing: instance.data.isEditing,\n      selectable: instance.data.selectable,\n      controls: instance.data.controls,\n      isSelected,\n      onTagSelect: instance.data.onTagSelect,\n      onTagRemove(tagToRemove) {\n        // Pass the tag back up to the parent component for removal\n        // -- include the parent tag\n        if (instance.data.onTagCreate) {\n          instance.data.onTagRemove(tagToRemove, instance.data.parentTag);\n        }\n      },\n      onTagUpdate(tagId, tagName) {\n        // Pass the tagId and tagName back up to the parent component for updating\n        if (instance.data.onTagUpdate) {\n          instance.data.onTagUpdate(tagId, tagName);\n        }\n      }\n    };\n  },\n\n  /**\n   * Arguments (Props) to pass into the blank tag for creating new tags\n   * @return {Object} An object containing props\n   */\n  tagBlankProps() {\n    const instance = Template.instance();\n    return {\n      blank: true,\n      onTagCreate(tagName) {\n        if (instance.data.onTagCreate) {\n          instance.data.onTagCreate(tagName, instance.data.parentTag);\n        }\n      }\n    };\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { PropTypes as ReactionPropTypes } from \"/lib/api\";\nimport { TagItem } from \"./\";\nimport { Router } from \"/client/api\";\nimport classnames from \"classnames\";\n\nclass Tags extends Component {\n  displayName = \"Tag List (Tags)\";\n\n  handleNewTagSave = (event, tag) => {\n    event.preventDefault();\n    if (this.props.onNewTagSave) {\n      this.props.onNewTagSave(tag, this.props.parentTag);\n    }\n  };\n\n  handleNewTagUpdate = (event, tag) => {\n    if (this.props.onNewTagUpdate) {\n      this.props.onNewTagUpdate(tag, this.props.parentTag);\n    }\n  }\n\n  handleTagSave = (event, tag) => {\n    if (this.props.onTagSave) {\n      this.props.onTagSave(tag, this.props.parentTag);\n    }\n  };\n\n  handleTagRemove = (tag) => {\n    if (this.props.onTagRemove) {\n      this.props.onTagRemove(tag, this.props.parentTag);\n    }\n  };\n\n  /**\n   * Handle tag mouse out events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @param  {Tag} tag Reaction.Schemas.Tag - a tag object\n   * @return {void} no return value\n   */\n  handleTagMouseOut = (event, tag) => {\n    if (this.props.onTagMouseOut) {\n      this.props.onTagMouseOut(event, tag, this.props.parentTag);\n    }\n  };\n\n  /**\n   * Handle tag mouse over events and pass them up the component chain\n   * @param  {Event} event Event object\n   * @param  {Tag} tag Reaction.Schemas.Tag - a tag object\n   * @return {void} no return value\n   */\n  handleTagMouseOver = (event, tag) => {\n    if (this.props.onTagMouseOver) {\n      this.props.onTagMouseOver(event, tag, this.props.parentTag);\n    }\n  };\n\n\n  handleTagUpdate = (event, tag) => {\n    if (this.props.onTagUpdate) {\n      this.props.onTagUpdate(tag, this.props.parentTag);\n    }\n  };\n\n  handleTagClick = (event, tag) => {\n    Router.go(\"tag\", { slug: tag.slug });\n  }\n\n  hasDropdownClassName = (tag) => {\n    if (this.props.hasDropdownClassName) {\n      return this.props.hasDropdownClassName(tag);\n    }\n    return \"\";\n  }\n\n  navbarSelectedClassName = (tag) => {\n    if (this.props.navbarSelectedClassName) {\n      return this.props.navbarSelectedClassName(tag);\n    }\n    return \"\";\n  }\n\n  renderTags() {\n    const classes = (tag = {}) => classnames({\n      \"navbar-item\": this.props.isTagNav,\n      [this.navbarSelectedClassName(tag)]: this.props.isTagNav,\n      [this.hasDropdownClassName(tag)]: this.props.isTagNav\n    });\n\n    if (_.isArray(this.props.tags)) {\n      const arrayProps = _.compact(this.props.tags);\n      const tags = arrayProps.map((tag, index) => {\n        return (\n          <div className={classes(tag)} key={index}>\n            <TagItem\n              {...this.props}\n              data-id={tag._id}\n              index={index}\n              key={index}\n              tag={tag}\n              onMove={this.props.onMoveTag}\n              draggable={this.props.draggable}\n              onTagInputBlur={this.handleTagSave}\n              onTagMouseOut={this.handleTagMouseOut}\n              onTagMouseOver={this.handleTagMouseOver}\n              onTagRemove={this.handleTagRemove}\n              onTagSave={this.handleTagSave}\n              onTagUpdate={this.handleTagUpdate}\n              onTagClick={this.handleTagClick}\n            />\n            {this.props.children}\n          </div>\n        );\n      });\n\n      // Render an blank tag for creating new tags\n      if (this.props.editable && this.props.enableNewTagForm) {\n        tags.push(\n          <div className={classes()} key=\"newTagForm\">\n            <TagItem\n              {...this.props}\n              blank={true}\n              key=\"newTagForm\"\n              tag={this.props.newTag}\n              inputPlaceholder=\"Add Tag\"\n              i18nKeyInputPlaceholder=\"tags.addTag\"\n              onTagInputBlur={this.handleNewTagSave}\n              onTagSave={this.handleNewTagSave}\n              onTagUpdate={this.handleNewTagUpdate}\n            />\n          </div>\n        );\n      }\n\n      return tags;\n    }\n\n    return null;\n  }\n\n  render() {\n    if (this.props.isTagNav) {\n      return (\n        <div className=\"tag-group\">\n          {this.renderTags()}\n        </div>\n      );\n    }\n\n    const classes = classnames({\n      rui: true,\n      tags: true,\n      edit: this.props.editable\n    });\n\n    return (\n      <div\n        className={classes}\n        data-id={this.props.parentTag._id}\n        ref=\"tags\"\n      >\n        {this.renderTags()}\n      </div>\n    );\n  }\n}\n\n// Default Props\nTags.defaultProps = {\n  parentTag: {}\n};\n\n// Prop Types\nTags.propTypes = {\n  children: PropTypes.node,\n  draggable: PropTypes.bool,\n  editable: PropTypes.bool,\n  enableNewTagForm: PropTypes.bool,\n  hasDropdownClassName: PropTypes.func,\n  isTagNav: PropTypes.bool,\n  navbarSelectedClassName: PropTypes.func,\n  newTag: PropTypes.object,\n  onClearSuggestions: PropTypes.func,\n  onGetSuggestions: PropTypes.func,\n  onMoveTag: PropTypes.func,\n  onNewTagSave: PropTypes.func,\n  onNewTagUpdate: PropTypes.func,\n  onTagClick: PropTypes.func,\n  onTagMouseOut: PropTypes.func,\n  onTagMouseOver: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  onTagSave: PropTypes.func,\n  onTagSort: PropTypes.func,\n  onTagUpdate: PropTypes.func,\n  parentTag: ReactionPropTypes.Tag,\n  showBookmark: PropTypes.bool,\n  suggestions: PropTypes.arrayOf(PropTypes.object),\n  tags: ReactionPropTypes.arrayOfTags\n};\n\n// Export\nexport default Tags;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { Translation } from \"../translation\";\nimport { i18next } from \"/client/api\";\n\nclass TextField extends Component {\n  /**\n   * Getter: value\n   * @return {String} value for text input\n   */\n  get value() {\n    return this.props.value || \"\";\n  }\n\n  /**\n   * Getter: isValid\n   * @return {Boolean} true/false if field is valid from props.isValid or props.valitation[this.props.name].isValid\n   */\n  get isValid() {\n    const { isValid } = this.props;\n\n    if (typeof isValid === \"boolean\") {\n      return isValid;\n    } else if (this.validationMessage) {\n      return false;\n    }\n\n    return undefined;\n  }\n\n  get validationMessage() {\n    const { name, validation } = this.props;\n\n    if (typeof validation === \"object\" && validation.messages && validation.messages[name]) {\n      return validation.messages[name];\n    }\n\n    return undefined;\n  }\n\n  /**\n   * onValueChange\n   * @summary set the state when the value of the input is changed\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onChange = (event) => {\n    if (this.props.onChange) {\n      this.props.onChange(event, event.target.value, this.props.name);\n    }\n  }\n\n  /**\n   * onBlur\n   * @summary set the state when the value of the input is changed\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onBlur = (event) => {\n    if (this.props.onBlur) {\n      this.props.onBlur(event, event.target.value, this.props.name);\n    }\n  }\n\n  /**\n   * onKeyDown\n   * @summary set the state when the value of the input is changed\n   * @param  {Event} event Event object\n   * @return {void}\n   */\n  onKeyDown = (event) => {\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(event, this.props.name);\n    }\n\n    if (this.props.onReturnKeyDown && event.keyCode === 13) {\n      this.props.onReturnKeyDown(event, event.target.value, this.props.name);\n    }\n  }\n\n  /**\n   * Render a multiline input (textarea)\n   * @return {JSX} jsx\n   */\n  renderMultilineInput() {\n    const placeholder = i18next.t(this.props.i18nKeyPlaceholder, {\n      defaultValue: this.props.placeholder\n    });\n\n    return (\n      <TextareaAutosize\n        className=\"{this.props.name}-edit-input\"\n        onBlur={this.onBlur}\n        onChange={this.onChange}\n        placeholder={placeholder}\n        ref=\"input\"\n        value={this.value}\n        style={this.props.style}\n        disabled={this.props.disabled}\n        id={this.props.id}\n      />\n    );\n  }\n\n  /**\n   * Render a singleline input\n   * @return {JSX} jsx\n   */\n  renderSingleLineInput() {\n    const inputClassName = classnames({\n      [`${this.props.name || \"text\"}-edit-input`]: true\n    }, this.props.className);\n\n    const placeholder = i18next.t(this.props.i18nKeyPlaceholder, {\n      defaultValue: this.props.placeholder\n    });\n\n    return (\n      <input\n        className={inputClassName}\n        name={this.props.name}\n        onBlur={this.onBlur}\n        onChange={this.onChange}\n        onKeyDown={this.onKeyDown}\n        placeholder={placeholder}\n        ref=\"input\"\n        type={this.props.type || \"text\"}\n        value={this.value}\n        style={this.props.style}\n        disabled={this.props.disabled}\n        id={this.props.id}\n      />\n    );\n  }\n\n  /**\n   * Render either a multiline (textarea) or singleline (input)\n   * @return {JSX} jsx template\n   */\n  renderField() {\n    if (this.props.multiline === true) {\n      return this.renderMultilineInput();\n    }\n\n    return this.renderSingleLineInput();\n  }\n\n  /**\n   * Render the label for the text field if one is provided in props\n   * @return {ReactNode|null} react node or null\n   */\n  renderLabel() {\n    if (this.props.label) {\n      return (\n        <label>\n          <Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n        </label>\n      );\n    }\n\n    return null;\n  }\n\n  /**\n   * Render help text or validation message\n   * @return {ReactNode|null} react node or null\n   */\n  renderHelpText() {\n    const message = this.validationMessage;\n    let helpText = this.props.helpText;\n    let i18nKey = this.props.i18nKeyHelpText;\n\n    if (this.isValid === false && message) {\n      helpText = message.message;\n      i18nKey = message.i18nKeyMessage;\n    }\n\n    if (helpText) {\n      return (\n        <span className=\"help-block\">\n          <Translation defaultValue={helpText} i18nKey={i18nKey} />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  /**\n   * Render Component\n   * @return {JSX} component\n   */\n  render() {\n    const classes = classnames({\n      // Base\n      \"rui\": true,\n      \"textfield\": true,\n      \"form-group\": true,\n      \"has-error\": this.isValid === false,\n      \"has-success\": this.isValid === true,\n\n      // Alignment\n      \"center\": this.props.align === \"center\",\n      \"left\": this.props.align === \"left\",\n      \"right\": this.props.align === \"right\"\n    });\n\n    return (\n      <div className={classes} style={this.props.textFieldStyle}>\n        {this.renderLabel()}\n        {this.renderField()}\n        {this.renderHelpText()}\n        <span className=\"product-detail-message\" id=\"{{field}}-message\" />\n      </div>\n    );\n  }\n}\n\nTextField.defaultProps = {\n\n};\n\nTextField.propTypes = {\n  align: PropTypes.oneOf([\"left\", \"center\", \"right\", \"justify\"]),\n  className: PropTypes.string,\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  i18nKeyHelpText: PropTypes.string,\n  i18nKeyLabel: PropTypes.string,\n  i18nKeyPlaceholder: PropTypes.string,\n  id: PropTypes.string,\n  isValid: PropTypes.bool,\n  label: PropTypes.string,\n  multiline: PropTypes.bool,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  onReturnKeyDown: PropTypes.func,\n  placeholder: PropTypes.string,\n  style: PropTypes.object,\n  textFieldStyle: PropTypes.object,\n  type: PropTypes.string,\n  validation: PropTypes.object,\n  value: PropTypes.any\n};\n\nexport default TextField;\n","/**\n * uploadHandler method\n */\n\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nfunction uploadHandler(event, instance) {\n  const files = [];\n\n  FS.Utility.eachFile(event, (file) => {\n    files.push(new FS.File(file));\n  });\n\n  if (instance.data.onUpload) {\n    instance.data.onUpload(files, event);\n  }\n\n  return files;\n}\n\nTemplate.upload.helpers({\n  uploadButtonProps() {\n    const instance = Template.instance();\n    return {\n      className: \"btn-block\",\n      label: instance.data.label || \"Drop file to upload\",\n      i18nLabel: instance.data.i18nLabel || \"productDetail.dropFiles\",\n      onClick() {\n        instance.$(\"input[name=files]\").click();\n      }\n    };\n  }\n});\n\nTemplate.upload.events({\n  \"click #btn-upload\": function () {\n    return $(\"#files\").click();\n  },\n  \"change input[name=files]\": uploadHandler,\n  \"dropped .js-dropzone\": uploadHandler\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TextField } from \"@reactioncommerce/reaction-ui\";\n\n\nclass SortableTableFilter extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n\n  render() {\n    return (\n      <TextField\n        i18nKeyPlaceholder=\"reactionUI.components.sortableTable.filterPlaceholder\"\n        id=\"react-table-filter-input\"\n        name={this.props.name}\n        onChange={this.props.onChange}\n        placeholder=\"Filter Data\"\n        tabIndex=\"1\"\n        type=\"text\"\n        value={this.props.value}\n      />\n    );\n  }\n}\n\n\nSortableTableFilter.propTypes = {\n  name: PropTypes.string,\n  onChange: PropTypes.func,\n  value: PropTypes.string\n};\n\nexport default SortableTableFilter;\n","export { default as PaginationButtons } from \"./paginationButtons\";\nexport { default as SortableTablePagination } from \"./pagination\";\n\nexport { default as SortableTableFilter } from \"./filter\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { PaginationButtons } from \"../sortableTableComponents\";\n\n\nclass SortableTablePagination extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getSafePage = this.getSafePage.bind(this);\n    this.changePage = this.changePage.bind(this);\n    this.applyPage = this.applyPage.bind(this);\n\n    this.state = {\n      page: props.page\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ page: nextProps.page });\n  }\n\n  getSafePage(page) {\n    if (isNaN(page)) {\n      page = this.props.page; // eslint-disable-line\n    }\n    return Math.min(Math.max(page, 0), this.props.pages - 1);\n  }\n\n  changePage(page) {\n    page = this.getSafePage(page); // eslint-disable-line\n    this.setState({ page });\n    if (this.props.page !== page) {\n      this.props.onPageChange(page);\n    }\n  }\n\n  applyPage(e) {\n    e && e.preventDefault();\n    const page = this.state.page;\n    this.changePage(page === \"\" ? this.props.page : page);\n  }\n\n  render() {\n    const {\n      // Computed\n      pages,\n      // Props\n      page,\n      showPageSizeOptions,\n      pageSizeOptions,\n      pageSize,\n      showPageJump,\n      canPrevious,\n      canNext,\n      onPageSizeChange,\n      className,\n      PreviousComponent = PaginationButtons,\n      NextComponent = PaginationButtons\n    } = this.props;\n\n    return (\n      <div\n        className={classnames(className, \"-pagination\")}\n        style={this.props.paginationStyle}\n      >\n        <div className=\"-center\">\n          <span className=\"-pageInfo\">\n            {this.props.pageText}{\" \"}\n            {showPageJump\n              ? <div className=\"-pageJump\">\n                <input\n                  type={this.state.page === \"\" ? \"text\" : \"number\"}\n                  onChange={e => {\n                    const val = e.target.value;\n                      const page = val - 1; // eslint-disable-line\n                    if (val === \"\") {\n                      return this.setState({ page: val });\n                    }\n                    this.setState({ page: this.getSafePage(page) });\n                  }}\n                  value={this.state.page === \"\" ? \"\" : this.state.page + 1}\n                  onBlur={this.applyPage}\n                  onKeyPress={e => {\n                    if (e.which === 13 || e.keyCode === 13) {\n                      this.applyPage();\n                    }\n                  }}\n                />\n              </div>\n              : <span className=\"-currentPage\">{page + 1}</span>}{\" \"}\n            {this.props.ofText}{\" \"}\n            <span className=\"-totalPages\">{pages || 1}</span>\n          </span>\n          {showPageSizeOptions &&\n            <span className=\"select-wrap -pageSizeOptions\">\n              <select\n                onChange={e => onPageSizeChange(Number(e.target.value))}\n                value={pageSize}\n              >\n                {pageSizeOptions.map((option, i) => {\n                  return (\n                    <option key={i} value={option}>\n                      {option} {this.props.rowsText}\n                    </option>\n                  );\n                })}\n              </select>\n            </span>}\n        </div>\n        <div className=\"-previous\">\n          <PreviousComponent\n            onClick={e => { // eslint-disable-line no-unused-vars\n              if (!canPrevious) {\n                return this.changePage(page - 1);\n              }\n            }}\n            disabled={!canPrevious}\n          >\n            {this.props.previousText}\n          </PreviousComponent>\n        </div>\n        <span className=\"-divider\">|</span>\n        <div className=\"-next\">\n          <NextComponent\n            onClick={e => { // eslint-disable-line no-unused-vars\n              if (!canNext) {\n                return this.changePage(page + 1);\n              }\n            }}\n            disabled={!canNext}\n          >\n            {this.props.nextText}\n          </NextComponent>\n        </div>\n      </div>\n    );\n  }\n}\n\nSortableTablePagination.propTypes = {\n  NextComponent: PropTypes.func,\n  PreviousComponent: PropTypes.func,\n  canNext: PropTypes.bool,\n  canPrevious: PropTypes.bool,\n  className: PropTypes.object,\n  nextText: PropTypes.string,\n  ofText: PropTypes.string,\n  onPageChange: PropTypes.func,\n  onPageSizeChange: PropTypes.func,\n  page: PropTypes.number,\n  pageSize: PropTypes.number,\n  pageSizeOptions: PropTypes.array,\n  pageText: PropTypes.string,\n  pages: PropTypes.number,\n  paginationStyle: PropTypes.object,\n  previousText: PropTypes.string,\n  rowsText: PropTypes.string,\n  showPageJump: PropTypes.bool,\n  showPageSizeOptions: PropTypes.bool\n};\n\nexport default SortableTablePagination;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"/imports/plugins/core/ui/client/components\";\n\n\nclass PaginationButtons extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  renderIcon() {\n    const { children } = this.props;\n\n    if (children === \"Previous\") {\n      return \"fa fa-angle-left\";\n    }\n\n    if (children === \"Next\") {\n      return \"fa fa-angle-right\";\n    }\n\n    return null;\n  }\n\n\n  renderIconPosition() {\n    const { children } = this.props;\n\n    if (children === \"Previous\") {\n      return false;\n    }\n\n    if (children === \"Next\") {\n      return true;\n    }\n\n    return false;\n  }\n\n  renderText() {\n    const { children } = this.props;\n\n    if (children === \"Previous\") {\n      return \" Previous\";\n    }\n\n    if (children === \"Next\") {\n      return \"Next \";\n    }\n\n    return null;\n  }\n\n  render() {\n    const { disabled, onClick } = this.props;\n\n    return (\n      <Button\n        bezelStyle=\"flat\"\n        icon={this.renderIcon()}\n        iconAfter={this.renderIconPosition()}\n        label={this.renderText()}\n        status=\"default\"\n        tagName=\"button\"\n        onClick={onClick}\n        disabled={disabled}\n        className=\"sortableTable-pagination\"\n      />\n    );\n  }\n}\n\nPaginationButtons.propTypes = {\n  children: PropTypes.string,\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func\n};\n\nexport default PaginationButtons;\n","export { default as SortableTable } from \"./sortableTable\";\nexport { default as SortableTableLegacy } from \"./sortableTableLegacy\";\n","import React,  { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport matchSorter from \"match-sorter\";\nimport ReactTable from \"react-table\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Counts } from \"meteor/tmeasday:publish-counts\";\nimport { SortableTableFilter, SortableTablePagination } from \"./sortableTableComponents\";\n\nclass SortableTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentPage: 0,\n      filterInput: \"\",\n      maxPages: 0,\n      query: this.props.query || {}\n    };\n\n    this.handleFilterInput = this.handleFilterInput.bind(this);\n  }\n\n\n  /**\n   * getMeteorData() - Absorb publication / collection information from props, output data from subscription\n   * @prop {String} matchingResultsCount - Send to Counts collection to get results count of sub\n   * @prop {String} publication - publication to subscribe to\n   * @prop {Object} collection - collection to get data from\n   * Use props to get collection\n   * Use that info to call meteor and get subscription\n   * Output data for table\n   * @returns {Object} loading status (bool), results (object), and matchingResults (number)\n   */\n  getMeteorData() {\n    const { collection, matchingResultsCount, publication } = this.props;\n\n    // Get a count of the number of items matching the current filter.\n    // If no filter is set it will return the total number of items in the collection.\n    const matchingResults = Counts.get(matchingResultsCount);\n\n    const options = {};\n\n    const pubHandle = Meteor.subscribe(publication, this.state.query, _.assignIn({}, options));\n\n    // optional transform of collection for grid results\n    let results = collection.find(this.state.query, options).fetch();\n    if (this.props.transform) {\n      results = this.props.transform(results);\n    }\n\n    return {\n      loading: !pubHandle.ready(),\n      results: results,\n      matchingResults: matchingResults\n    };\n  }\n\n\n  /**\n   * customFilter() - Replace default filter with customized filter\n   * custom filter is case insensitive\n   * custom filter searches entire string, not just from string start\n   * @param {Object} filter user-typed data\n   * @param {Object} row row info for associated filter\n   * @returns {String|Boolean} replacement filter\n   */\n  customFilter = (filter, row) => {\n    const id = filter.pivotId || filter.id;\n    if (row[id] !== null && typeof row[id] === \"string\") {\n      return (row[id] !== undefined\n        ? String(row[id].toLowerCase()).includes(filter.value.toLowerCase())\n        : true);\n    }\n  }\n\n\n  /**\n   * handleFilterInput() - Update state when filter is changed\n   * @param {script} event onChange event when typing in filter field\n   * @param {string} value text field input\n   * @param {string} field input field name to watch\n   * @return {function} state for field value\n   */\n  handleFilterInput = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n\n  /**\n   * handleClick() - Handle click on table row\n   * @param {object} rowInfo row data passed in from ReactTable\n   * @return {function} return onRowClick function prop, or undefined if not supplied\n   */\n  handleClick(rowInfo) {\n    const { onRowClick } = this.props;\n\n    if (typeof onRowClick === \"function\") {\n      return (\n        onRowClick({\n          className: \"sortable-table-row\",\n          props: {\n            data: {\n              _id: rowInfo.original._id,\n              type: rowInfo.original.type\n            }\n          }\n        })\n      );\n    }\n  }\n\n\n  /**\n   * renderColumns() - Absorb columnMetadata information from props, output columns to display\n   * @prop {String} columnMetadata - Object of data field, column header\n   * @returns {Object} data filed (string), translated header (string), and minWidth (number / undefined)\n   */\n  renderColumns() {\n    const { columnMetadata } = this.props;\n\n    // Add minWidth = undefined to override 100px default set by ReactTable\n    const displayColumns = columnMetadata.map((element) => {\n      return _.assignIn({}, element, {\n        minWidth: undefined\n      });\n    });\n\n    return displayColumns;\n  }\n\n\n  /**\n   * renderData() - Take data from getMeteorData() and filter if needed, or spit out raw if no filter\n   * @returns {Object} data filed (string), translated header (string), and minWidth (number / undefined)\n   */\n  renderData() {\n    const { filteredFields } = this.props;\n    const { filterInput } = this.state;\n\n    let originalData = [];\n\n    if (this.getMeteorData().results) {\n      originalData = this.getMeteorData().results;\n    }\n\n    const filteredData = matchSorter(originalData, filterInput, { keys: filteredFields });\n\n    return filteredData;\n  }\n\n\n  /**\n   * renderColumnFilter() - Uses props to determine if Column Filters should be shown\n   * @returns {Bool} returns true or false for column filters\n   */\n  renderColumnFilter() {\n    const { filterType } = this.props;\n\n    if (filterType === \"both\" || filterType === \"column\") {\n      return true;\n    }\n\n    return false;\n  }\n\n\n  /**\n   * renderTableFilter() - Uses props to determine if a Table Filter should be shown\n   * @returns {node} returns JSX node or null\n   */\n  renderTableFilter() {\n    const { filterType } = this.props;\n\n    if (filterType === \"both\" || filterType === \"table\") {\n      return (\n        <SortableTableFilter\n          onChange={this.handleFilterInput}\n          value={this.state.filterInput}\n          name=\"filterInput\"\n        />\n      );\n    }\n\n    return null;\n  }\n\n\n  render() {\n    const { ...otherProps } = this.props;\n\n    // All available props: https://github.com/tannerlinsley/react-table#props\n    return (\n      <div>\n        {this.renderTableFilter()}\n        <ReactTable\n          className={\"-striped -highlight\"}\n          columns={this.renderColumns()}\n          data={this.renderData()}\n          defaultFilterMethod={this.customFilter}\n          defaultPageSize={otherProps.defaultPageSize}\n          filterable={this.renderColumnFilter()}\n          minRows={otherProps.minRows}\n\n          previousText={otherProps.previousText}\n          nextText={otherProps.nextText}\n          loadingText={otherProps.loadingText}\n          noDataText={otherProps.noDataText}\n          pageText={otherProps.pageText}\n          ofText={otherProps.ofText}\n          rowsText={otherProps.rowsText}\n\n          PaginationComponent={SortableTablePagination}\n\n          getTrProps={(state, rowInfo, column, instance) => { // eslint-disable-line no-unused-vars\n            return {\n              onClick: e => { // eslint-disable-line no-unused-vars\n                this.handleClick(rowInfo);\n              }\n            };\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nSortableTable.propTypes = {\n  /** @type {object} collection collection to get data from */\n  collection: PropTypes.object,\n  /** @type {array} columnMetadata provides filtered columns with i18n headers */\n  columnMetadata: PropTypes.array,\n  /** @type {number} defaultPageSize how many results per page */\n  defaultPageSize: PropTypes.number,\n  /** @type {bool} filterType filter by table, column, or both */\n  filterType: PropTypes.string,\n  /** @type {array} filteredFields provides filtered columns, use columnMetadata instead */\n  filteredFields: PropTypes.array,\n  /** @type {bool} isFilterable show / hide column filter */\n  isFilterable: PropTypes.bool,\n  /** @type {bool} isResizeable allow resizing of table columns */\n  isResizeable: PropTypes.bool,\n  /** @type {bool} isSortable allow column sorting */\n  isSortable: PropTypes.bool,\n  /** @type {string} matchingResultsCount provides Count publication to get count from */\n  matchingResultsCount: PropTypes.string,\n  /** @type {number} minRows minimum amount of rows to display in table */\n  minRows: PropTypes.number,\n  /** @type {string} noDataMessage text to display when no data is available */\n  noDataMessage: PropTypes.string,\n  /** @type {function} onRowClick provides function / action when clicking on row */\n  onRowClick: PropTypes.func,\n  /** @type {string} publication provides publication to get Meteor data from */\n  publication: PropTypes.string,\n  /** @type {object} query provides query for publication filtering */\n  query: PropTypes.object,\n  /** @type {function} transform transform of collection for grid results */\n  transform: PropTypes.func\n};\n\nSortableTable.defaultProps = {\n  defaultPageSize: 10,\n  filterType: \"table\",\n  isFilterable: false,\n  isResizeable: true,\n  isSortable: true,\n  minRows: 0,\n  // Text props where translations are needed\n  noDataMessage: \"No results found\",\n  previousText: \"Previous\",\n  nextText: \"Next\",\n  loadingText: \"Loading...\",\n  noDataText: \"No results found\",\n  pageText: \"Page\",\n  ofText: \"of\",\n  rowsText: \"rows\"\n};\n\nexport default SortableTable;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TacoTable } from \"react-taco-table\";\n\nclass SortableTableLegacy extends Component {\n  constructor(props) {\n    super(props);\n    this.handleRowClick = this.handleRowClick.bind(this);\n  }\n\n  handleRowClick = (event, value) => {\n    if (this.props.onRowClick) {\n      this.props.onRowClick(event, value);\n    }\n  }\n\n  render() {\n    const {\n      data,\n      columns\n    } = this.props;\n\n    return (\n      <TacoTable\n        className=\"table sortable-table\"\n        columns={columns}\n        onRowClick={this.handleRowClick}\n        data={data}\n      />\n    );\n  }\n}\n\nSortableTableLegacy.propTypes = {\n  columns: PropTypes.array,\n  data: PropTypes.array,\n  onRowClick: PropTypes.func\n};\n\nexport default SortableTableLegacy;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Translation } from \"../translation\";\n\nclass Alert extends Component {\n  componentDidMount() {\n    if (this.props.alert) {\n      const {\n        options\n      } = this.props.alert;\n\n      if (this.props.onAlertSeen) {\n        this.props.onAlertSeen(this.props.alert);\n      }\n\n      if (this.props.alert && this.props.alert.options && this.props.alert.options.autoHide) {\n        setTimeout(() => {\n          if (this.props.onAlertRemove) {\n            this.props.onAlertRemove(this.props.alert);\n          }\n        }, options.autoHide);\n      }\n    }\n  }\n\n  render() {\n    // If we have an alert object, most likely form the global alert system,\n    // then display a standard alert\n    if (this.props.alert) {\n      const {\n        message,\n        mode,\n        options\n      } = this.props.alert;\n\n      const alertClassName = classnames({\n        alert: true,\n        [`alert-${mode || \"info\"}`]: true\n      });\n\n      return (\n        <div className={alertClassName}>\n          <Translation defaultValue={message} i18nKey={options.i18nKey} />\n          {this.props.children}\n        </div>\n      );\n    }\n\n    // Otherwise, it's up to the user to provide the content via props\n\n    const alertClassName = classnames({\n      alert: true,\n      [`alert-${this.props.mode || \"info\"}`]: true\n    });\n\n    return (\n      <div className={alertClassName}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nAlert.propTypes = {\n  alert: PropTypes.object,\n  children: PropTypes.node,\n  mode: PropTypes.oneOf([\"info\", \"warning\", \"danger\", \"success\"]),\n  onAlertRemove: PropTypes.func,\n  onAlertSeen: PropTypes.func\n};\n\nexport default Alert;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Alert from \"./alert\";\n\nclass Alerts extends Component {\n  renderAlerts() {\n    if (Array.isArray(this.props.alerts)) {\n      return this.props.alerts.map((alert, index) => {\n        return (\n          <Alert\n            alert={alert}\n            key={index}\n            onAlertRemove={this.props.onAlertRemove}\n            onAlertSeen={this.props.onAlertSeen}\n          />\n        );\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"alert-container\">\n        {this.renderAlerts()}\n      </div>\n    );\n  }\n}\n\nAlerts.propTypes = {\n  alerts: PropTypes.arrayOf(PropTypes.object),\n  onAlertRemove: PropTypes.func,\n  onAlertSeen: PropTypes.func\n};\n\nexport default Alerts;\n","export { default as Alerts } from \"./alerts\";\nexport { default as Alert } from \"./alert\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass Badge extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  renderLabel() {\n    if (this.props.label) {\n      if (typeof this.props.label === \"string\") {\n        return (\n          <Translation\n            defaultValue={this.props.label}\n            i18nKey={this.props.i18nKeyLabel}\n          />\n        );\n      }\n      return (\n        <span>\n          {this.props.label}\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const { status, badgeSize } = this.props;\n\n    const classes = classnames({\n      \"rui\": true,\n      \"badge\": true,\n      \"badge-small\": (badgeSize === null || badgeSize === undefined || badgeSize === \"small\"),\n      \"badge-large\": badgeSize === \"large\",\n      \"badge-basic\": status ===  \"basic\",\n      \"badge-cta\": status === \"cta\",\n      \"badge-danger\": status === \"danger\",\n      \"badge-default\": (status === null || status === undefined || status === \"default\"),\n      \"badge-info\": status === \"info\",\n      \"badge-primary\": status === \"primary\",\n      \"badge-success\": status === \"success\",\n      \"badge-warning\": status ===  \"warning\"\n    });\n\n    return (\n      <span className={classes} style={{ display: \"inline-flex\" }}>\n        {this.renderLabel()}\n      </span>\n    );\n  }\n}\n\nBadge.propTypes = {\n  badgeSize: PropTypes.string,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  i18nKeyLabel: PropTypes.string,\n  label: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  status: PropTypes.string\n};\n\nBadge.defaultProps = {\n  badgeSize: \"small\",\n  status: \"default\"\n};\n\nexport default Badge;\n","export { default as Badge } from \"./badge\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\n\nclass ButtonGroup extends Component {\n  render() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"btn-group\": true\n    });\n\n    return (\n      <div className={baseClassName}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nButtonGroup.propTypes = {\n  children: PropTypes.node\n};\n\nexport default ButtonGroup;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\n\nclass ButtonToolbar extends Component {\n  render() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"btn-toolbar\": true\n    });\n\n    return (\n      <div className={baseClassName}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nButtonToolbar.propTypes = {\n  children: PropTypes.node\n};\n\nexport default ButtonToolbar;\n","export { default as ButtonGroup } from \"./buttonGroup\";\nexport { default as ButtonToolbar } from \"./buttonToolbar\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass Checkbox extends Component {\n  handleChange = (event) => {\n    if (this.props.onChange) {\n      const isInputChecked = !this.props.checked;\n      this.props.onChange(event, isInputChecked, this.props.name);\n    }\n  }\n\n  render() {\n    return (\n      <label>\n        <input\n          checked={this.props.checked}\n          onChange={this.handleChange}\n          ref=\"checkbox\"\n          type=\"checkbox\"\n        />\n        <Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n      </label>\n    );\n  }\n}\n\nCheckbox.defaultProps = {\n  checked: false\n};\n\nCheckbox.propTypes = {\n  checked: PropTypes.bool,\n  i18nKeyLabel: PropTypes.string,\n  label: PropTypes.string,\n  name: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nexport default Checkbox;\n","export { default as Checkbox } from \"./checkbox\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport { Tooltip, Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass ClickToCopy extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltipOpen: false\n    };\n\n    this.handleCtcMouseOver = this.handleCtcMouseOver.bind(this);\n    this.handleCtcMouseOut = this.handleCtcMouseOut.bind(this);\n  }\n\n  get isTooltipOpen() {\n    return this.state.tooltipOpen;\n  }\n\n  handleCtcMouseOver() {\n    this.setState({\n      tooltipOpen: this.props.tooltip ? true : false\n    });\n  }\n\n  handleCtcMouseOut() {\n    this.setState({\n      tooltipOpen: false\n    });\n  }\n\n  renderTooltipContent() {\n    if (this.isTooltipOpen) {\n      if (typeof this.props.tooltip === \"string\") {\n        return (\n          <Translation defaultValue={this.props.tooltip} i18nKey={this.props.i18nKeyTooltip} />\n        );\n      }\n\n      return (\n        <div>\n          {this.props.tooltip}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <span\n        className=\"rui\"\n        onClick={this.handleClick}\n        onMouseOver={this.handleCtcMouseOver}\n        onMouseOut={this.handleCtcMouseOut}\n        style={{ display: \"inline-flex\" }}\n      >\n        <Tooltip tooltipContent={this.renderTooltipContent()} attachement={this.props.tooltipPosition}>\n          <CopyToClipboard\n            text={this.props.copyToClipboard}\n            onCopy={() => this.setState({ copied: true })}\n          >\n            <span>{this.props.displayText}</span>\n          </CopyToClipboard>\n        </Tooltip>\n      </span>\n    );\n  }\n}\n\nClickToCopy.propTypes = {\n  copyToClipboard: PropTypes.string,\n  displayText: PropTypes.string,\n  i18nKeyTooltip: PropTypes.string,\n  tooltip: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.node]),\n  tooltipPosition: PropTypes.string\n};\n\nClickToCopy.defaultProps = {\n  tooltip: \"Copy to Clipboard\",\n  tooltipPosition: \"middle left\"\n};\n\nexport default ClickToCopy;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Translation } from \"../\";\n\nclass Divider extends Component {\n  renderLabel() {\n    return (\n      <Translation defaultValue={this.props.label} />\n    );\n  }\n\n  render() {\n    const { label, i18nKeyLabel } = this.props;\n    const classes = classnames({\n      rui: true,\n      separator: true,\n      divider: true,\n      labeled: label || i18nKeyLabel\n    });\n\n    if (label) {\n      return (\n        <div className={classes} id={this.props.id}>\n          <hr />\n          <span className=\"label\">\n            <Translation defaultValue={label} i18nKey={i18nKeyLabel} />\n          </span>\n          <hr />\n        </div>\n      );\n    }\n\n    return (\n      <div className={classes}>\n        <hr />\n      </div>\n    );\n  }\n}\n\nDivider.propTypes = {\n  i18nKeyLabel: PropTypes.string,\n  id: PropTypes.string,\n  label: PropTypes.string\n};\n\nexport default Divider;\n","import React from \"react\";\n\nexport default function VerticalDivider() {\n  return (\n    <div\n      style={{\n        height: \"20px\",\n        width: 1,\n        backgroundColor: \"#E6E6E6\",\n        margin: \"0 10px\"\n      }}\n    />\n  );\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { map, update, set, at, isEqual } from \"lodash\";\nimport classnames from \"classnames\";\nimport { Switch, Button, TextField, Select, FormActions } from \"../\";\n\nclass Form extends Component {\n  static defaultProps = {\n    autoSave: false\n  }\n\n  static propTypes = {\n    autoSave: PropTypes.bool,\n    doc: PropTypes.object,\n    docPath: PropTypes.string,\n    fields: PropTypes.object,\n    hideFields: PropTypes.arrayOf(PropTypes.string),\n    name: PropTypes.string,\n    onSubmit: PropTypes.func,\n    schema: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      doc: props.doc,\n      schema: this.validationSchema(),\n      isValid: undefined\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (isEqual(nextProps.doc, this.props.doc) === false) {\n      this.setState({\n        doc: nextProps.doc,\n        schema: this.validationSchema()\n      });\n    }\n  }\n\n\n  validationSchema() {\n    const { docPath } = this.props;\n\n    if (docPath) {\n      const objectKeys = this.objectKeys[docPath + \".\"];\n      if (Array.isArray(objectKeys)) {\n        // Use the objectKeys from parent fieldset to generate\n        // actual form fields\n        const fieldNames = objectKeys.map((fieldName) => {\n          return `${docPath}.${fieldName}`;\n        });\n\n        return this.props.schema.pick(fieldNames).newContext();\n      }\n    }\n\n    return this.props.schema.namedContext();\n  }\n\n  get objectKeys() {\n    return this.props.schema._objectKeys;\n  }\n\n  get schema() {\n    return this.props.schema._schema;\n  }\n\n  valueForField(fieldName) {\n    const picked = at(this.state.doc, fieldName);\n\n    if (Array.isArray(picked) && picked.length) {\n      return picked[0];\n    }\n\n    return undefined;\n  }\n\n  validate() {\n    const { docPath } = this.props;\n\n    // Create a smaller document in order to validate without extra fields\n    const docToValidate = set(\n      {},\n      docPath,\n      at(this.state.doc, this.props.docPath)[0]\n    );\n\n    // Clean any fields not in schame to avoid needless validation errors\n    const cleanedObject = this.state.schema._simpleSchema.clean(docToValidate);\n\n    // Finally validate the document\n    this.setState({\n      isValid: this.state.schema.validate(cleanedObject)\n    });\n  }\n\n  isFieldHidden(fieldName) {\n    if (Array.isArray(this.props.hideFields) && this.props.hideFields.indexOf(fieldName) >= 0) {\n      return true;\n    }\n\n    return false;\n  }\n\n  handleChange = (event, value, name) => {\n    const newdoc = update(this.state.doc, name, () => {\n      return value;\n    });\n\n    this.setState({\n      doc: newdoc\n    }, () => {\n      this.validate();\n    });\n\n    if (this.props.autoSave === true) {\n      this.handleSubmit(event);\n    }\n  }\n\n  handleSelectChange = (value, name) => {\n    this.handleChange(new Event(\"onSelect\"), value, name);\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    this.validate();\n\n    if (this.props.onSubmit) {\n      this.props.onSubmit(event, {\n        doc: this.state.doc,\n        isValid: this.state.isValid\n      }, this.props.name);\n    }\n  }\n\n  renderFormField(field) {\n    const sharedProps = {\n      i18nKeyLabel: `admin.${field.name}`,\n      key: field.name,\n      label: field.label,\n      name: field.name\n    };\n\n    let fieldElement;\n    let helpText;\n\n    switch (field.type) {\n      case \"boolean\":\n        fieldElement = (\n          <Switch\n            {...sharedProps}\n            onChange={this.handleChange}\n            checked={this.valueForField(field.name)}\n          />\n        );\n        break;\n      case \"string\":\n        fieldElement = (\n          <TextField\n            {...sharedProps}\n            onChange={this.handleChange}\n            value={this.valueForField(field.name)}\n          />\n        );\n        break;\n      case \"select\":\n        fieldElement = (\n          <Select\n            {...sharedProps}\n            onChange={this.handleSelectChange}\n            options={field.options}\n            value={this.valueForField(field.name)}\n          />\n        );\n        break;\n      default:\n        return null;\n    }\n\n    let fieldHasError = false;\n\n    if (this.state.isValid === false) {\n      this.state.schema._invalidKeys\n        .filter((v) => v.name === field.name)\n        .map((validationError) => {\n          const message = this.state.schema.keyErrorMessage(validationError.name);\n          fieldHasError = true;\n\n          helpText = (\n            <div className=\"help-block\">\n              {message}\n            </div>\n          );\n        });\n    }\n\n    const formGroupClassName = classnames({\n      \"rui\": true,\n      \"form-group\": true,\n      \"has-error\": fieldHasError\n    });\n\n    return (\n      <div key={`${sharedProps.key}-group`} className={formGroupClassName}>\n        {fieldElement}\n        {helpText}\n      </div>\n    );\n  }\n\n  renderField(field, additionalFieldProps) {\n    const { fieldName } = field;\n\n    if (this.isFieldHidden(fieldName) === false) {\n      const fieldSchema = this.schema[fieldName];\n      const fieldProps = {\n        ...fieldSchema,\n        name: fieldName,\n        type: typeof fieldSchema.type(),\n        ...additionalFieldProps\n      };\n\n      return this.renderFormField(fieldProps);\n    }\n\n    return null;\n  }\n\n  renderWithSchema() {\n    const { docPath } = this.props;\n\n    if (this.props.schema) {\n      // Render form with a specific docPath\n      if (docPath) {\n        return map(this.schema, (field, key) => { // eslint-disable-line consistent-return\n          if (key.endsWith(docPath)) {\n            const objectKeys = this.objectKeys[docPath + \".\"];\n            if (Array.isArray(objectKeys)) {\n              // Use the objectKeys from parent fieldset to generate\n              // actual form fields\n              return objectKeys.map((fieldName) => {\n                const fullFieldName = docPath ? `${docPath}.${fieldName}` : fieldName;\n                return this.renderField({ fieldName: fullFieldName });\n              });\n            }\n\n            return this.renderField({ fieldName: key });\n          }\n        });\n      }\n\n      // Render form by only using desired fields from schema\n      if (this.props.fields) {\n        return map(this.props.fields, (fieldData, key) => { // eslint-disable-line consistent-return\n          const fieldSchema = this.schema[key];\n          if (fieldSchema) {\n            return this.renderField({ fieldName: key }, fieldData);\n          }\n        });\n      }\n\n      // Render all fields if none of the options are set above\n      return map(this.schema, (field, key) => { // eslint-disable-line consistent-return\n        return this.renderField({ fieldName: key });\n      });\n    }\n\n    return null;\n  }\n\n  renderFormActions() {\n    if (this.props.autoSave === false) {\n      return (\n        <FormActions>\n          <Button\n            label={\"Save Changes\"}\n            i18nKeyLabel={\"app.saveChanges\"}\n            bezelStyle={\"solid\"}\n            primary={true}\n            type=\"submit\"\n          />\n        </FormActions>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        {this.renderWithSchema()}\n        {this.renderFormActions()}\n      </form>\n    );\n  }\n}\n\nexport default Form;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass FormActions extends Component {\n  static propTypes = {\n    children: PropTypes.node\n  }\n\n  render() {\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"flex-end\"\n        }}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default FormActions;\n","export { default as Form } from \"./form\";\nexport { default as FormActions } from \"./formActions\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\n\nclass Icon extends Component {\n  render() {\n    const { icon } = this.props;\n    let classes;\n\n    if (icon) {\n      if (icon.indexOf(\"icon-\") === 0 || icon.indexOf(\"fa\") >= 0) {\n        classes = icon;\n      } else {\n        classes = classnames({\n          fa: true,\n          [`fa-${icon}`]: true\n        });\n      }\n    }\n\n    classes = classnames({\n      \"rui\": true,\n      \"font-icon\": true\n    }, classes, this.props.className);\n\n    return (\n      <i style={this.props.style} className={classes} />\n    );\n  }\n}\n\nIcon.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  icon: PropTypes.string.isRequired,\n  style: PropTypes.object\n};\n\nexport default Icon;\n","export { default as Icon } from \"./icon\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass Item extends React.Component {\n  render() {\n    return (\n      <div className=\"rui item\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nItem.displayName = \"Item\";\n\nItem.propTypes = {\n  children: PropTypes.node\n};\n\nexport default Item;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass Items extends React.Component {\n  render() {\n    return (\n      <div className=\"rui items\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nItems.displayName = \"Items\";\n\nItems.propTypes = {\n  children: PropTypes.node\n};\n\nexport default Items;\n","export { default as List } from \"./list\";\nexport { default as ListItem } from \"./listItem\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\n\nclass List extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n    isAdmin: PropTypes.bool\n  }\n\n  render() {\n    const listClassName = classnames({\n      \"rui\": true,\n      \"admin\": this.props.isAdmin,\n      \"list-group\": true\n    });\n\n    return (\n      <div className={listClassName}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default List;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Icon, Switch, Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass ListItem extends Component {\n  static propTypes = {\n    actionType: PropTypes.oneOf([\"arrow\", \"switch\"]),\n    children: PropTypes.node,\n    i18nKeyLabel: PropTypes.string,\n    icon: PropTypes.string,\n    isAdmin: PropTypes.bool,\n    label: PropTypes.string,\n    onClick: PropTypes.func,\n    onSwitchChange: PropTypes.func,\n    switchName: PropTypes.string,\n    switchOn: PropTypes.bool,\n    value: PropTypes.any\n  }\n\n  handleClick = (event) => {\n    if (this.props.actionType === \"switch\") {\n      const isChecked = typeof this.props.switchOn === \"boolean\" ? !this.props.switchOn : true;\n      this.handleSwitchChange(event, isChecked, this.props.switchName);\n    } else if (typeof this.props.onClick === \"function\") {\n      this.props.onClick(event, this.data);\n    }\n  }\n\n  handleSwitchChange = (event, isChecked, name) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (typeof this.props.onSwitchChange === \"function\") {\n      this.props.onSwitchChange(event, isChecked, name);\n    }\n  }\n\n  get data() {\n    return this.props.value;\n  }\n\n  renderIcon() {\n    const iconClassName = classnames({\n      \"rui\": true,\n      \"admin\": this.props.isAdmin,\n      \"list-item-icon\": true\n    });\n\n    if (this.props.icon) {\n      return (\n        <div className={iconClassName}>\n          <Icon icon={this.data.icon} />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderAction() {\n    const actionClassName = classnames({\n      \"rui\": true,\n      \"admin\": this.props.isAdmin,\n      \"list-item-action\": true\n    });\n\n    if (this.props.actionType === \"switch\") {\n      return (\n        <div className={actionClassName}>\n          <Switch\n            checked={this.props.switchOn}\n            name={this.props.switchName}\n            onChange={this.handleSwitchChange}\n          />\n        </div>\n      );\n    }\n\n    if (this.props.actionType) {\n      return (\n        <div className={actionClassName}>\n          <Icon icon=\"fa fa-angle-right\" />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderContent() {\n    let content;\n    const contentClassName = classnames({\n      \"rui\": true,\n      \"admin\": this.props.isAdmin,\n      \"list-item-content\": true\n    });\n\n    if (this.props.label) {\n      content = (\n        <Translation\n          defaultValue={this.props.label}\n          i18nKey={this.props.i18nKeyLabel}\n        />\n      );\n    } else {\n      content = this.props.children;\n    }\n\n    return (\n      <div className={contentClassName}>\n        {content}\n      </div>\n    );\n  }\n\n  renderSubItems() {\n    if (typeof this.props.label !== \"undefined\" && this.props.children) {\n      const listItemClassName = classnames({\n        \"rui\": true,\n        \"admin\": this.props.isAdmin,\n        \"list-group-item-sub-item\": true\n      });\n\n      return (\n        <div className={listItemClassName}>\n          {this.props.children}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const listItemClassName = classnames({\n      \"rui\": true,\n      \"admin\": this.props.isAdmin,\n      \"list-group-item\": true\n    });\n\n    return (\n      <div className={listItemClassName} onClick={this.handleClick}>\n        {this.renderIcon()}\n        {this.renderContent()}\n        {this.renderAction()}\n        {this.renderSubItems()}\n      </div>\n    );\n  }\n}\n\nexport default ListItem;\n","import React, { Component } from \"react\";\nimport CircularProgress from \"../progress/circularProgress\";\n\nclass Loading extends Component {\n  render() {\n    return (\n      <div className=\"spinner-container spinner-container-lg\">\n        <CircularProgress indeterminate={true} />\n      </div>\n    );\n  }\n}\n\nexport default Loading;\n","export { default as MediaGallery } from \"./mediaGallery\";\nexport { default as MediaItem } from \"./media\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IconButton } from \"../\";\nimport { SortableItem } from \"../../containers\";\n\n\nclass MediaItem extends Component {\n  handleMouseEnter = (event) => {\n    if (this.props.onMouseEnter) {\n      this.props.onMouseEnter(event, this.props.source);\n    }\n  }\n\n  handleMouseLeave = (event) => {\n    if (this.props.onMouseLeave) {\n      this.props.onMouseLeave(event, this.props.source);\n    }\n  }\n\n  handleRemoveMedia = (event) => {\n    event.stopPropagation();\n\n    if (this.props.onRemoveMedia) {\n      this.props.onRemoveMedia(this.props.source);\n    }\n  }\n\n  renderRevision() {\n    if (this.props.revision) {\n      if (this.props.revision.changeType === \"remove\") {\n        return (\n          <IconButton\n            icon=\"fa\"\n            status=\"danger\"\n            i18nKeyTooltip=\"admin.mediaGallery.removedImage\"\n            tooltip=\"Image has been deleted. Publish to save changes.\"\n            kind=\"mediaGalleryStatus\"\n          />\n        );\n      }\n      return (\n        <IconButton\n          icon=\"fa\"\n          status=\"info\"\n          i18nKeyTooltip=\"admin.mediaGallery.addedImage\"\n          tooltip=\"This is a new image. Publish to save changes.\"\n          kind=\"mediaGalleryStatus\"\n        />\n      );\n    }\n    return undefined;\n  }\n\n  renderControls() {\n    if (this.props.editable) {\n      // If we have a pending remove, don't show the remove button\n      if (!this.props.revision || this.props.revision.changeType !== \"remove\") {\n        return (\n          <div className=\"rui badge-container\">\n            {this.renderRevision()}\n            <IconButton\n              icon=\"fa fa-times\"\n              onClick={this.handleRemoveMedia}\n              i18nKeyTooltip=\"admin.mediaGallery.deleteImage\"\n              tooltip=\"Click to remove image\"\n            />\n          </div>\n        );\n      }\n      return (\n        <div className=\"rui badge-container\">\n          {this.renderRevision()}\n        </div>\n      );\n    }\n    return null;\n  }\n\n  get defaultSource() {\n    return this.props.defaultSource || \"/resources/placeholder.gif\";\n  }\n\n  get source() {\n    if (typeof this.props.source === \"object\" && this.props.source) {\n      return this.props.source.url() || this.defaultSource;\n    }\n\n    return this.props.source || this.defaultSource;\n  }\n\n  renderImage() {\n    const image = (\n      <img\n        alt=\"\"\n        className=\"img-responsive\"\n        src={this.source}\n      />\n    );\n\n    return image;\n  }\n\n  render() {\n    const mediaElement = (\n      <div\n        className=\"gallery-image\"\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n      >\n        {this.renderImage()}\n        {this.renderControls()}\n      </div>\n    );\n\n    if (this.props.editable) {\n      return this.props.connectDragSource(\n        this.props.connectDropTarget(\n          mediaElement\n        )\n      );\n    }\n\n    return mediaElement;\n  }\n}\n\nMediaItem.propTypes = {\n  connectDragSource: PropTypes.func,\n  connectDropTarget: PropTypes.func,\n  defaultSource: PropTypes.string,\n  editable: PropTypes.bool,\n  isFeatured: PropTypes.bool,\n  mediaHeight: PropTypes.number,\n  mediaWidth: PropTypes.number,\n  metadata: PropTypes.object,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onRemoveMedia: PropTypes.func,\n  revision: PropTypes.object,\n  source: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n};\n\nexport default SortableItem(\"media\", MediaItem);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Dropzone from \"react-dropzone\";\nimport Measure from \"react-measure\";\nimport MediaItem from \"./media\";\n\nclass MediaGallery extends Component {\n  constructor() {\n    super();\n    this.state = {\n      dimensions: {\n        width: -1,\n        height: -1\n      }\n    };\n    this.onDrop = this.onDrop.bind(this);\n  }\n\n  get hasMedia() {\n    return Array.isArray(this.props.media) && this.props.media.length > 0;\n  }\n\n  get allowFeaturedMediaHover() {\n    if (this.props.allowFeaturedMediaHover && this.props.featuredMedia) {\n      return true;\n    }\n\n    return false;\n  }\n\n  get featuredMedia() {\n    return this.props.featuredMedia || this.props.media[0];\n  }\n\n  handleDropClick = () => {\n    this.refs.dropzone.open();\n  }\n\n  onDrop(files) {\n    if (files.length === 0) {\n      return;\n    }\n    return this.props.onDrop(files);\n  }\n\n  renderAddItem() {\n    if (this.props.editable) {\n      return (\n        <div\n          className=\"gallery-image add\"\n          onClick={this.handleDropClick}\n        >\n          <img\n            alt=\"\"\n            className=\"img-responsive\"\n            src={\"/resources/placeholder.gif\"}\n          />\n          <div className=\"rui badge-container\">\n            <i className=\"fa fa-plus fa-2x\" />\n          </div>\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderFeaturedMedia() {\n    const { width, height } = this.state.dimensions;\n\n    if (this.hasMedia) {\n      return this.props.media.map((media, index) => {\n        if (index === 0) {\n          return (\n            <Measure\n              key={index}\n              onMeasure={(dimensions) => {\n                this.setState({ dimensions });\n              }}\n            >\n              <MediaItem\n                editable={this.props.editable}\n                index={index}\n                key={index}\n                revision={this.featuredMedia.revision}\n                metadata={this.featuredMedia.metadata}\n                onMouseEnter={this.props.onMouseEnterMedia}\n                onMove={this.props.onMoveMedia}\n                onRemoveMedia={this.props.onRemoveMedia}\n                source={this.featuredMedia}\n                mediaHeight={height}\n                mediaWidth={width}\n                isFeatured={true}\n                {...this.props}\n              />\n            </Measure>\n          );\n        }\n      });\n    }\n\n    return (\n      <MediaItem />\n    );\n  }\n\n  renderMediaThumbnails() {\n    if (this.hasMedia) {\n      return this.props.media.map((media, index) => {\n        return (\n          <MediaItem\n            editable={this.props.editable}\n            index={index}\n            key={index}\n            revision={media.revision}\n            metadata={media.metadata}\n            onMouseEnter={this.props.onMouseEnterMedia}\n            onMove={this.props.onMoveMedia}\n            onRemoveMedia={this.props.onRemoveMedia}\n            source={media}\n          />\n        );\n      });\n    }\n    return null;\n  }\n\n  renderMediaGalleryUploader() {\n    const containerWidth = this.props.mediaGalleryWidth;\n    let featured = this.renderAddItem();\n    let gallery;\n\n    // Only render media only if there is any\n    if (this.hasMedia) {\n      featured = this.renderFeaturedMedia();\n      gallery = this.renderMediaThumbnails();\n    }\n\n    return (\n      <div className=\"rui media-gallery\">\n        <Dropzone\n          className=\"rui gallery-drop-pane\"\n          disableClick={true}\n          multiple={true}\n          disablePreview={true}\n          onDrop={this.onDrop}\n          ref=\"dropzone\"\n          accept=\"image/jpg, image/png, image/jpeg\"\n        >\n          <div className=\"rui gallery\">\n            <div className=\"featuredImage\" style={{ height: containerWidth + \"px\" }}>\n              {featured}\n            </div>\n            <div className=\"rui gallery-thumbnails\">\n              {gallery}\n              {this.renderAddItem()}\n            </div>\n          </div>\n        </Dropzone>\n      </div>\n    );\n  }\n\n  renderMediaGallery() {\n    const containerWidth = this.props.mediaGalleryWidth;\n\n    return (\n      <div className=\"rui media-gallery\">\n        <div className=\"rui gallery\">\n          <div className=\"featuredImage\" style={{ height: containerWidth + \"px\" }}>\n            {this.renderFeaturedMedia()}\n          </div>\n          <div className=\"rui gallery-thumbnails\">\n            {this.renderMediaThumbnails()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    if (this.props.editable) {\n      return this.renderMediaGalleryUploader();\n    }\n\n    return this.renderMediaGallery();\n  }\n}\n\nMediaGallery.propTypes = {\n  allowFeaturedMediaHover: PropTypes.bool,\n  editable: PropTypes.bool,\n  featuredMedia: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  media: PropTypes.arrayOf(PropTypes.object),\n  mediaGalleryHeight: PropTypes.number,\n  mediaGalleryWidth: PropTypes.number,\n  onDrop: PropTypes.func,\n  onMouseEnterMedia: PropTypes.func,\n  onMouseLeaveMedia: PropTypes.func,\n  onMoveMedia: PropTypes.func,\n  onRemoveMedia: PropTypes.func\n};\n\nexport default MediaGallery;\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Button,\n  Menu,\n  Popover\n} from \"../\";\n\nclass DropDownMenu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      label: undefined,\n      isOpen: false\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.isControlled) {\n      this.setState({\n        isOpen: nextProps.isOpen\n      });\n    }\n  }\n\n  handleDropdownToggle = () => {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  }\n\n  get isOpen() {\n    return this.props.isOpen || this.state.isOpen;\n  }\n\n  get isControlled() {\n    return typeof this.props.isOpen === \"boolean\";\n  }\n\n  handleMenuItemChange = (event, value, menuItem) => {\n    this.setState({\n      label: menuItem.props.label || value,\n      isOpen: false\n    });\n\n    if (this.props.closeOnClick) {\n      this.handleOpen(false);\n    }\n\n    if (this.props.onChange) {\n      this.props.onChange(event, value);\n    }\n  }\n\n  handleOpen = (isOpen) => {\n    if (this.isControlled) {\n      if (this.props.onRequestOpen) {\n        this.props.onRequestOpen(isOpen);\n      }\n    } else {\n      this.setState({\n        isOpen: isOpen\n      });\n    }\n  }\n\n  get label() {\n    let label = this.state.label;\n    Children.forEach(this.props.children, (element) => {\n      if (element.props.value === this.props.value) {\n        label = element.props.label;\n      }\n    });\n\n    if (!label) {\n      const children = Children.toArray(this.props.children);\n      if (children.length) {\n        return children[0].props.label;\n      }\n    }\n\n    return label;\n  }\n\n  render() {\n    return (\n      <Popover\n        attachment={this.props.attachment}\n        buttonElement={\n          this.props.buttonElement ||\n          <Button\n            icon=\"fa fa-chevron-down\"\n            iconAfter={true}\n            label={this.label}\n          />\n        }\n        isOpen={this.isOpen}\n        onClick={this.handleDropdownToggle}\n        onRequestOpen={this.handleOpen}\n        targetAttachment={this.props.targetAttachment}\n      >\n        <Menu\n          className={this.props.className}\n          value={this.props.value}\n          onChange={this.handleMenuItemChange}\n          style={this.props.menuStyle}\n        >\n          {this.props.children}\n        </Menu>\n      </Popover>\n    );\n  }\n}\n\nDropDownMenu.propTypes = {\n  attachment: PropTypes.string,\n  buttonElement: PropTypes.node,\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  closeOnClick: PropTypes.bool,\n  isEnabled: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  menuStyle: PropTypes.object,\n  onChange: PropTypes.func,\n  onPublishClick: PropTypes.func,\n  onRequestOpen: PropTypes.func,\n  revisions: PropTypes.arrayOf(PropTypes.object),\n  targetAttachment: PropTypes.string,\n  translation: PropTypes.shape({\n    lang: PropTypes.string\n  }),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.bool, PropTypes.number])\n};\n\nexport default DropDownMenu;\n","export { default as Menu } from \"./menu\";\nexport { default as MenuItem } from \"./menuItem\";\nexport { default as DropDownMenu } from \"./dropDownMenu\";\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\n\nclass Menu extends Component {\n  handleChange = (event, value, menuItem) => {\n    if (this.props.onChange) {\n      this.props.onChange(event, value, menuItem);\n    }\n  }\n\n  renderMenuItems() {\n    if (this.props.children) {\n      return Children.map(this.props.children, (element) => {\n        const newChild = React.cloneElement(element, {\n          onClick: this.handleChange\n        });\n        const baseClassName = classnames({\n          active: element.props.value === this.props.value\n        }, this.props.className);\n        return (\n          <li className={baseClassName}>{newChild}</li>\n        );\n      });\n    }\n  }\n\n  render() {\n    return (\n      <ul className=\"rui menu dropdown-menu\" style={this.props.style}>\n        {this.renderMenuItems()}\n      </ul>\n    );\n  }\n}\n\nMenu.propTypes = {\n  attachment: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  onChange: PropTypes.func,\n  style: PropTypes.object,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.bool, PropTypes.number])\n};\n\nMenu.defaultProps = {\n  attachment: \"top\"\n};\n\nexport default Menu;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\nimport Icon from \"../icon/icon.jsx\";\nimport { Translation } from \"../\";\n\nclass MenuItem extends Component {\n  handleClick = (event) => {\n    event.preventDefault();\n    if (this.props.onClick && this.props.disabled === false) {\n      this.props.onClick(event, this.props.value, this);\n    }\n  }\n\n  renderIcon() {\n    if (this.props.icon) {\n      return (\n        <Icon icon={this.props.icon} style={this.props.iconStyle}/>\n      );\n    }\n    return null;\n  }\n\n  renderLabel() {\n    if (this.props.label) {\n      return (\n        <Translation\n          defaultValue={this.props.label}\n          i18nKey={this.props.i18nKeyLabel}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"menu-item\": true,\n      \"disabled\": this.props.disabled === true\n    }, this.props.className);\n\n    return (\n      <a\n        className={baseClassName}\n        href= \"#\"\n        data-event-action={this.props.eventAction}\n        onClick={this.handleClick}\n        role=\"button\"\n      >\n        {this.renderIcon()}\n        {this.renderLabel()}\n      </a>\n    );\n  }\n}\n\nMenuItem.propTypes = {\n  active: PropTypes.bool,\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  disabled: PropTypes.bool,\n  eventAction: PropTypes.string,\n  i18nKeyLabel: PropTypes.string,\n  i18nKeySelectedLabel: PropTypes.string,\n  icon: PropTypes.string,\n  iconStyle: PropTypes.object,\n  label: PropTypes.string,\n  onClick: PropTypes.func,\n  selectionLabel: PropTypes.string,\n  value: PropTypes.any\n};\n\nMenuItem.defaultProps = {\n  disabled: false\n};\n\nexport default MenuItem;\n","export { default as Metadata } from \"./metadata\";\nexport { default as Metafield } from \"./metafield\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Metafield from \"./metafield\";\n\nclass Metadata extends Component {\n  /**\n   * Handle form submit\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleSubmit = (event) => {\n    event.preventDefault();\n  }\n\n  handleMetaChange = (event, metafield, index) => {\n    if (this.props.onMetaChange) {\n      this.props.onMetaChange(event, metafield, index);\n    }\n  }\n\n  handleMetaSave = (event, metafield, index) => {\n    if (this.props.onMetaSave) {\n      this.props.onMetaSave(event, metafield, index);\n    }\n  }\n\n  handleMetaRemove = (event, metafield, index) => {\n    if (this.props.onMetaRemove) {\n      this.props.onMetaRemove(event, metafield, index);\n    }\n  }\n\n  /**\n   * Render user readable metadata\n   * @return {JSX} metadata\n   */\n  renderMetadata() {\n    if (this.props.metafields) {\n      return this.props.metafields.map((metadata, index) => {\n        return (\n          <div className=\"rui meta-item\" key={index}>\n            <div className=\"rui meta-key\">{metadata.key}</div>\n            <div className=\"rui meta-value\">{metadata.value}</div>\n          </div>\n        );\n      });\n    }\n\n    return null;\n  }\n\n  /**\n   * Render a metadata form\n   * @return {JSX} metadata forms for each row of metadata\n   */\n  renderMetadataForm() {\n    if (this.props.metafields) {\n      return this.props.metafields.map((metadata, index) => {\n        return (\n          <Metafield\n            index={index}\n            key={index}\n            metafield={metadata}\n            onBlur={this.handleMetaSave}\n            onChange={this.handleMetaChange}\n            onRemove={this.handleMetaRemove}\n          />\n        );\n      });\n    }\n\n    return null;\n  }\n\n  renderMetadataCreateForm() {\n    return (\n      <Metafield\n        blank={true}\n        metafield={this.props.newMetafield}\n        onBlur={this.handleMetaSave}\n        onChange={this.handleMetaChange}\n        ref=\"newMetadataFields\"\n      />\n    );\n  }\n\n  /**\n   * render\n   * @return {JSX} component\n   */\n  render() {\n    // Admin editable metadata\n    if (this.props.editable) {\n      return (\n        <div className=\"rui list-group product-detail-edit product-attributes\">\n          {this.renderMetadataForm()}\n          {this.renderMetadataCreateForm()}\n        </div>\n      );\n    }\n\n    // User readable metadata\n    return (\n      <div className=\"rui metadata\">\n        {this.renderMetadata()}\n      </div>\n    );\n  }\n}\n\nMetadata.defaultProps = {\n  editable: true\n};\n\n// Prop Types\nMetadata.propTypes = {\n  editable: PropTypes.bool,\n  metafields: PropTypes.arrayOf(PropTypes.object),\n  newMetafield: PropTypes.object,\n  onMetaChange: PropTypes.func,\n  onMetaRemove: PropTypes.func,\n  onMetaSave: PropTypes.func\n};\n\nexport default Metadata;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Velocity from \"velocity-animate\";\nimport \"velocity-animate/velocity.ui\";\nimport { TextField, Button } from \"../\";\n\nclass Metafield extends Component {\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.metafield.key !== this.props.metafield.key) {\n      const input = this.refs.keyInput.refs.input;\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n\n    if (nextProps.metafield.value !== this.props.metafield.value) {\n      const input = this.refs.valueInput.refs.input;\n\n      Velocity.RunSequence([\n        { e: input, p: { backgroundColor: \"#e2f2e2\" }, o: { duration: 200 } },\n        { e: input, p: { backgroundColor: \"#fff\" }, o: { duration: 100 } }\n      ]);\n    }\n  }\n\n  get detailNamePlaceholder() {\n    return this.props.detailNamePlaceholder || \"Detail Name\";\n  }\n\n  get i18nKeyDetailName() {\n    return this.props.i18nKeyDetailName || \"productDetailEdit.detailName\";\n  }\n\n  get detailInfoPlaceholder() {\n    return this.props.detailInfoPlaceholder || \"Detail Information\";\n  }\n\n  get i18nKeyDetailInformation() {\n    return this.props.i18nKeyDetailInfo || \"productDetail.detailsInfo\";\n  }\n\n  /**\n   * Handle form submit\n   * @param  {Event} event Event object\n   * @return {void} no return value\n   */\n  handleSubmit = (event) => {\n    event.preventDefault();\n  }\n\n  handleChange = (event) => {\n    if (this.props.onChange) {\n      const newMetadata = {\n        key: this.refs.keyInput.refs.input.value,\n        value: this.refs.valueInput.refs.input.value\n      };\n\n      this.props.onChange(event, newMetadata, this.props.index);\n    }\n  }\n\n  handleBlur = (event) => {\n    if (this.props.onBlur) {\n      const newMetadata = {\n        key: this.refs.keyInput.refs.input.value,\n        value: this.refs.valueInput.refs.input.value\n      };\n\n      if (newMetadata.key && newMetadata.value) {\n        this.props.onBlur(event, newMetadata, this.props.index);\n      }\n    }\n  }\n\n  handleRemove = (event) => {\n    if (this.props.onRemove) {\n      this.props.onRemove(event, this.props.metafield, this.props.index);\n    }\n  }\n\n  renderActionButton() {\n    if (this.props.blank === true) {\n      return (\n        <Button icon=\"plus\" onClick={this.handleSubmit} type=\"submit\" />\n      );\n    }\n    return (\n      <Button icon=\"times-circle\" onClick={this.handleRemove} type=\"button\" />\n    );\n  }\n\n  /**\n   * Render a metadata form\n   * @return {JSX} metadata forms for each row of metadata\n   */\n  render() {\n    if (this.props.metafield) {\n      return (\n        <div className=\"rui list-group-item metafield-list-item\">\n          <form className=\"form form-inline\" onSubmit={this.handleSubmit}>\n            <TextField\n              className=\"metafield-key-input\"\n              i18nKeyPlaceholder={this.i18nKeyDetailName}\n              name=\"key\"\n              onBlur={this.handleBlur}\n              onChange={this.handleChange}\n              onReturnKeyDown={this.handleBlur}\n              placeholder={this.detailNamePlaceholder}\n              ref=\"keyInput\"\n              value={this.props.metafield.key}\n            />\n            <TextField\n              className=\"metafield-value-input\"\n              i18nKeyPlaceholder={this.i18nKeyDetailInformation}\n              name=\"value\"\n              onBlur={this.handleBlur}\n              onChange={this.handleChange}\n              onReturnKeyDown={this.handleBlur}\n              placeholder={this.detailInfoPlaceholder}\n              ref=\"valueInput\"\n              value={this.props.metafield.value}\n            />\n            {this.renderActionButton()}\n          </form>\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nMetafield.defaultProps = {\n  editable: true\n};\n\n// Prop Types\nMetafield.propTypes = {\n  blank: PropTypes.bool,\n  detailInfoPlaceholder: PropTypes.func,\n  detailNamePlaceholder: PropTypes.func,\n  i18nKeyDetailInfo: PropTypes.func,\n  i18nKeyDetailName: PropTypes.func,\n  index: PropTypes.number,\n  metafield: PropTypes.object,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  onRemove: PropTypes.func\n};\n\nexport default Metafield;\n","export { default as Overlay } from \"./overlay\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { VelocityTransitionGroup } from \"velocity-react\";\nimport Radium from \"radium\";\nimport classnames from \"classnames\";\n\nconst styles = {\n  base: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"rgba(0, 0, 0, 0.7)\",\n    zIndex: 1040,\n    padding: 0\n  }\n};\n\nclass Overlay extends Component {\n  static defaultProps = {\n    isVisible: true\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    isVisible: PropTypes.bool,\n    onClick: PropTypes.func\n  };\n\n  state = {\n    enterAnimation: {\n      animation: { opacity: 1 },\n      duration: 200\n    },\n    leaveAnimation: {\n      animation: { opacity: 0 },\n      duration: 200\n    }\n  }\n\n  renderOverlay() {\n    if (this.props.isVisible) {\n      const baseClassName = classnames({\n        rui: true\n      });\n\n      return (\n        <div\n          className={baseClassName}\n          style={styles.base}\n          onClick={this.props.onClick}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <VelocityTransitionGroup\n        enter={this.state.enterAnimation}\n        leave={this.state.leaveAnimation}\n      >\n        {this.renderOverlay()}\n      </VelocityTransitionGroup>\n    );\n  }\n}\n\nexport default Radium(Overlay);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport Select from \"react-select\";\nimport { Translation } from \"../translation\";\nimport { i18next } from \"/client/api\";\n\nclass MultiSelect extends Component {\n  static defaultProps = {\n    multi: true,\n    simpleValue: true\n  }\n\n  static propTypes = {\n    i18nKeyLabel: PropTypes.string,\n    i18nKeyPlaceholder: PropTypes.string,\n    label: PropTypes.string,\n    name: PropTypes.string,\n    onChange: PropTypes.func,\n    options: PropTypes.array,\n    placeholder: PropTypes.string,\n    value: PropTypes.any\n  }\n\n  renderLabel() {\n    if (this.props.label) {\n      return (\n        <label>\n          <Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n        </label>\n      );\n    }\n\n    return null;\n  }\n\n  handleChange = (value) => {\n    if (typeof this.props.onChange === \"function\") {\n      this.props.onChange(value, this.props.name);\n    }\n  }\n\n  render() {\n    const {\n      label, i18nKeyLabel, // eslint-disable-line no-unused-vars\n      placeholder, i18nKeyPlaceholder,\n      ...selectProps\n    } = this.props;\n\n    const classes = classnames({\n      // Base\n      \"rui\": true,\n      \"multiselect\": true,\n      \"form-group\": true\n    });\n\n    const translatedPlaceholder = i18next.t(i18nKeyPlaceholder, { defaultValue: placeholder });\n\n    return (\n      <div className={classes}>\n        {this.renderLabel()}\n        <Select\n          {...selectProps}\n          placeholder={translatedPlaceholder}\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MultiSelect;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Tooltip } from \"/imports/plugins/core/ui/client/components\";\nimport classnames from \"classnames\";\nimport TetherComponent from \"react-tether\";\nimport PopoverContent from \"./popoverContent\";\nimport { Button, ButtonGroup } from \"/imports/plugins/core/ui/client/components/\";\n\nclass Popover extends Component {\n  state = {\n    isOpen: false\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.isControlled) {\n      this.setState({\n        isOpen: nextProps.isOpen\n      });\n    }\n  }\n\n  get isOpen() {\n    return this.props.isOpen || this.state.isOpen;\n  }\n\n  get isControlled() {\n    return typeof this.props.isOpen === \"boolean\";\n  }\n\n  /**\n   * attachment\n   * @description Return the attachment for the tooltip or the default\n   * @return {String} attachment\n   */\n  get attachment() {\n    return this.props.attachment || Tooltip.defaultProps.attachment;\n  }\n\n  handleDisplayButtonClick = (event, value) => {\n    if (this.props.onDisplayButtonClick) {\n      this.props.onDisplayButtonClick(event, value);\n    }\n  }\n\n  handleOpen = () => {\n    if (this.isControlled) {\n      if (this.props.onRequestOpen) {\n        this.props.onRequestOpen(true);\n      }\n    } else {\n      this.setState({\n        isOpen: true\n      });\n    }\n  }\n\n  handleClickOutside = () => {\n    if (this.isControlled) {\n      if (this.props.onRequestOpen) {\n        this.props.onRequestOpen(false);\n      }\n    } else {\n      this.setState({\n        isOpen: false\n      });\n    }\n  }\n\n  renderPopoverChildren() {\n    if (this.isOpen) {\n      return  (\n        <PopoverContent\n          children={this.props.children}\n          onClickOutside={this.props.onClick}\n        />\n      );\n    }\n    return null;\n  }\n\n  renderButtons() {\n    if (this.props.showDropdownButton) {\n      return (\n        <ButtonGroup>\n          {this.props.buttonElement}\n          <Button\n            key=\"dropdown-button\"\n            icon=\"fa fa-chevron-down\"\n            onClick={this.props.onClick}\n            status={this.props.buttonElement.props.status}\n          />\n        </ButtonGroup>\n      );\n    }\n\n    return React.cloneElement(this.props.buttonElement, {\n      onClick: this.props.onClick\n    });\n  }\n\n  render() {\n    return (\n      <TetherComponent\n        attachment={this.attachment}\n        classPrefix=\"popover\"\n        className={classnames({\n          \"rui\": true,\n          \"popover-element\": true,\n          \"popover-open\": true,\n          \"popover-theme-arrows\": this.props.showArrow || false\n        })}\n        constraints={[{\n          to: \"scrollParent\",\n          attachment: \"together\"\n        }]}\n        targetAttachment={this.props.targetAttachment}\n      >\n        {this.renderButtons()}\n        {this.renderPopoverChildren()}\n      </TetherComponent>\n    );\n  }\n}\n\nPopover.propTypes = {\n  attachment: PropTypes.string,\n  buttonElement: PropTypes.node,\n  children: PropTypes.node,\n  isOpen: PropTypes.bool,\n  onClick: PropTypes.func,\n  onDisplayButtonClick: PropTypes.func,\n  onRequestOpen: PropTypes.func,\n  showArrow: PropTypes.bool,\n  showDropdownButton: PropTypes.bool,\n  targetAttachment: PropTypes.string,\n  tooltipContent: PropTypes.node\n};\n\nPopover.defaultProps = {\n  attachment: \"bottom left\",\n  showArrow: false,\n  targetAttachment: \"top left\"\n};\n\n\nexport default Popover;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport onclickOutside from \"react-onclickoutside\";\n\nclass PopoverContent extends Component {\n  handleClickOutside(event) {\n    if (this.props.onClickOutside) {\n      this.props.onClickOutside(event);\n    }\n  }\n\n  render() {\n    return  (\n      <div className=\"rui popover-content\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nPopoverContent.propTypes = {\n  children: PropTypes.node,\n  onClickOutside: PropTypes.func\n};\n\nexport default onclickOutside(PopoverContent);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass CircularProgress extends Component {\n  renderInderterminateProgress() {\n    return (\n      <div className=\"spinner\" />\n    );\n  }\n\n  render() {\n    if (this.props.indeterminate === true) {\n      return this.renderInderterminateProgress();\n    }\n\n    return null;\n  }\n}\n\nCircularProgress.propTypes = {\n  indeterminate: PropTypes.bool\n};\n\nCircularProgress.defaultProps = {\n  indeterminate: true\n};\n\nexport default CircularProgress;\n","/**\n * Implementing No UI Slider\n * https://www.npmjs.com/package/react-nouislider\n */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Nouislider from \"react-nouislider\";\n\nclass Slider extends Component {\n  render() {\n    return (\n      <Nouislider\n        range={this.props.range}\n        start={this.props.start}\n        tooltips={this.props.tooltips}\n        connect={this.props.connect}\n        step={this.props.step}\n        orientation={this.props.orientation}\n        margin={this.props.margin}\n        padding={this.props.padding}\n        onChange={this.props.onChange}\n        onSlide={this.props.onSlide}\n      />\n    );\n  }\n}\n\nSlider.propTypes = {\n  connect: PropTypes.oneOfType([PropTypes.array, PropTypes.bool]),\n  margin: PropTypes.number,\n  onChange: PropTypes.func,\n  onSlide: PropTypes.func,\n  orientation: PropTypes.string,\n  padding: PropTypes.number,\n  range: PropTypes.object,\n  start: PropTypes.arrayOf(PropTypes.number),\n  step: PropTypes.number,\n  tooltips: PropTypes.oneOfType([PropTypes.array, PropTypes.bool])\n};\n\nSlider.defaultProps = {\n  range: {\n    min: 0,\n    max: 100\n  },\n  start: [0, 100],\n  step: 5,\n  orientation: \"horizontal\",\n  tooltips: true,\n  margin: 0,\n  padding: 0\n};\n\nexport default Slider;\n","export { default as Switch } from \"./switch\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass Switch extends Component {\n  static defaultProps = {\n    checked: false\n  }\n\n  static propTypes = {\n    checked: PropTypes.bool,\n    i18nKeyLabel: PropTypes.string,\n    i18nKeyOnLabel: PropTypes.string,\n    label: PropTypes.string,\n    name: PropTypes.string,\n    onChange: PropTypes.func,\n    onLabel: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      checked: false\n    };\n  }\n\n  handleChange = (event) => {\n    if (this.props.onChange) {\n      const isInputChecked = !this.props.checked;\n      this.props.onChange(event, isInputChecked, this.props.name);\n    }\n  }\n\n  renderLabel() {\n    let labelElement;\n\n    if (this.props.checked === false && this.props.label) {\n      labelElement = (\n        <Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n      );\n    } else if (this.props.checked === true && this.props.onLabel) {\n      labelElement = (\n        <Translation defaultValue={this.props.onLabel} i18nKey={this.props.i18nKeyOnLabel} />\n      );\n    } else if (this.props.label) {\n      labelElement = (\n        <Translation defaultValue={this.props.label} i18nKey={this.props.i18nKeyLabel} />\n      );\n    }\n\n    if (labelElement) {\n      return (\n        <div className=\"control-label\">\n          {labelElement}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  checkboxRef = (ref) => {\n    this._checkbox = ref;\n  }\n\n  render() {\n    const baseClassName = classnames({\n      rui: true,\n      switch: true\n    });\n\n    const switchControlClassName = classnames({\n      \"switch-control\": true,\n      \"active\": this.props.checked\n    });\n\n    return (\n      <label className={baseClassName}>\n        <input\n          checked={this.props.checked}\n          onChange={this.handleChange}\n          ref={this.checkboxRef}\n          type=\"checkbox\"\n        />\n        <div className={switchControlClassName} />\n        {this.renderLabel()}\n      </label>\n    );\n  }\n}\n\nexport default Switch;\n","export { default as TabList } from \"./tabList\";\nexport { default as TabItem } from \"./tabItem\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\n\nclass TabItem extends Component {\n  static propTypes = {\n    active: PropTypes.bool,\n    children: PropTypes.node,\n    className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    href: PropTypes.string,\n    index: PropTypes.number,\n    onClick: PropTypes.func,\n    value: PropTypes.any\n  }\n\n  handleClick = (event) => {\n    if (typeof this.props.onClick === \"function\") {\n      event.preventDefault();\n      this.props.onClick(event, this.props.value, this.props.index);\n    }\n  }\n\n  render() {\n    const {\n      active,\n      className,\n      // Remove props that cannot be added to DOM elements\n      onClick, value, href, index, // eslint-disable-line no-unused-vars\n\n      // All other props pass on through\n      ...otherProps\n    } = this.props;\n\n    const baseClassName = classnames({\n      rui: true,\n      tab: true,\n      active\n    }, className);\n\n    return (\n      <li {...otherProps} className={baseClassName} role=\"presentation\">\n        <a onClick={this.handleClick} href={href} style={{ width: \"100%\", height: \"100%\" }}>\n          {this.props.children}\n        </a>\n      </li>\n    );\n  }\n}\n\nexport default TabItem;\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames/dedupe\";\n\nclass TabList extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n    className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    selectedTab: PropTypes.oneOfType([PropTypes.any])\n  }\n\n  render() {\n    const { className, selectedTab, ...otherProps } = this.props;\n\n    const baseClassName = classnames({\n      \"rui\": true,\n      \"tab-list\": true,\n      \"nav\": true,\n      \"nav-pills\": true\n    }, className);\n\n    const elements = Children.map(this.props.children, (child, index) => {\n      const newProps = {\n        index,\n        active: false\n      };\n\n      if (selectedTab === child.props.value || selectedTab === index) {\n        newProps.active = true;\n      }\n\n      return React.cloneElement(child, newProps);\n    });\n\n    return (\n      <ul {...otherProps} className={baseClassName} role=\"tabList\">\n        {elements}\n      </ul>\n    );\n  }\n}\n\nexport default TabList;\n","export { default as Toolbar } from \"./toolbar\";\nexport { default as ToolbarGroup } from \"./toolbarGroup\";\nexport { default as ToolbarText } from \"./toolbarText\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass Toolbar extends Component {\n  render() {\n    return (\n      <nav className=\"rui toolbar navbar-inverse\">\n        {this.props.children}\n      </nav>\n    );\n  }\n}\n\nToolbar.propTypes = {\n  attachment: PropTypes.string,\n  children: PropTypes.node\n};\n\nToolbar.defaultProps = {\n  attachment: \"top\"\n};\n\nexport default Toolbar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\n\n/**\n * Toobar Text\n * @param {Object} props component props\n * @return {node} react element node\n */\nconst ToolbarGroup = (props) => {\n  const baseClassName = classnames({\n    \"rui\": true,\n    \"toolbar-group\": true,\n    \"left\": props.firstChild,\n    \"right\": props.lastChild,\n    \"visible-mobile\": props.visibleOnMobile\n  }, props.className);\n\n  return (\n    <div className={baseClassName}>{props.children}</div>\n  );\n};\n\nToolbarGroup.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n  firstChild: PropTypes.bool,\n  lastChild: PropTypes.bool,\n  visibleOnMobile: PropTypes.bool\n};\n\nexport default ToolbarGroup;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\n\n/**\n * Toobar Text\n * @param {Object} props component props\n * @return {node} react element node\n */\nconst ToolbarText = (props) => {\n  const baseClassName = classnames({\n    \"navbar-text\": true\n  }, props.className);\n\n  return (\n    <div className={baseClassName}>{props.children}</div>\n  );\n};\n\nToolbarText.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.oneOfType([PropTypes.object, PropTypes.string])\n};\n\nexport default ToolbarText;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport TetherComponent from \"react-tether\";\nimport classnames from \"classnames\";\n\nclass Tooltip extends Component {\n  /**\n   * attachment\n   * @description Return the attachment for the tooltip or the default\n   * @return {String} attachment\n   */\n  get attachment() {\n    return this.props.attachment || Tooltip.defaultProps.attachment;\n  }\n\n  renderTooltip() {\n    if (this.props.tooltipContent) {\n      return (\n        <div className=\"tooltip-content\">\n          {this.props.tooltipContent}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <TetherComponent\n        attachment={this.attachment}\n        classPrefix=\"tooltip\"\n        className={classnames({\n          \"tooltip-element\": true,\n          \"tooltip-open\": true,\n          \"tooltip-theme-arrows\": true\n        })}\n        constraints={[{\n          to: \"scrollParent\",\n          attachment: \"together\"\n        }]}\n      >\n        <div>\n          {this.props.children}\n        </div>\n        {this.renderTooltip()}\n      </TetherComponent>\n    );\n  }\n}\n\nTooltip.propTypes = {\n  attachment: PropTypes.string,\n  children: PropTypes.node,\n  tooltipContent: PropTypes.node\n};\n\nTooltip.defaultProps = {\n  attachment: \"bottom center\"\n};\n\nexport default Tooltip;\n","import React, { Component, PropTypes, Children } from \"react\"; // eslint-disable-line\nimport { formatPriceString } from \"/client/api\";\n\nclass Currency extends Component {\n  render() {\n    const amount = formatPriceString(this.props.amount || this.props.priceRange, this.props.editable);\n\n    return (\n      <span itemProp=\"price\">{amount}</span>\n    );\n  }\n}\n\nCurrency.propTypes = {\n  amount: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  editable: PropTypes.bool,\n  priceRange: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\n\nexport default Currency;\n","export { default as Translation } from \"./translation\";\nexport { default as Currency } from \"./currency\";\n","import { camelCase } from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { i18next } from \"/client/api\";\n\nclass Translation extends Component {\n  render() {\n    const i18nKey = this.props.i18nKey || camelCase(this.props.defaultValue);\n\n    const translation = i18next.t(i18nKey, {\n      defaultValue: this.props.defaultValue\n    });\n\n    return (\n      <span>{translation}</span>\n    );\n  }\n}\n\nTranslation.propTypes = {\n  defaultValue: PropTypes.string,\n  i18nKey: PropTypes.string\n};\n\nexport default Translation;\n","// export ButtonGroup from \"./buttonGroup/buttonGroup\";\n\nexport { Alerts, Alert } from \"./alerts\";\nexport { default as Icon } from \"./icon/icon\";\nexport { default as CircularProgress } from \"./progress/circularProgress\";\nexport { default as Divider } from \"./divider/divider\";\nexport { default as VerticalDivider } from \"./divider/verticalDivider\";\nexport { default as Items } from \"./items/items\";\nexport { default as Item } from \"./items/item\";\nexport { default as TextField } from \"./textfield/textfield\";\nexport { default as NumericInput } from \"./numericInput/numericInput\";\nexport { Button, IconButton, EditButton, VisibilityButton, Handle, ButtonSelect } from \"./button\";\nexport { Badge } from \"./badge\";\nexport { Translation, Currency } from \"./translation\";\nexport { default as Tooltip } from \"./tooltip/tooltip\";\nexport { Metadata, Metafield } from \"./metadata\";\nexport { TagList, TagItem } from \"./tags\";\nexport * from \"./cards\";\nexport { MediaGallery, MediaItem } from \"./media\";\nexport { default as FlatButton } from \"./button/flatButton\";\nexport { SortableTable, SortableTableLegacy } from \"./table\";\nexport { Checkbox } from \"./checkbox\";\nexport { default as Loading } from \"./loading/loading\";\nexport * from \"./forms\";\nexport * from \"./toolbar\";\nexport { default as Popover } from \"./popover/popover\";\nexport * from \"./menu\";\nexport * from \"./buttonGroup\";\nexport { Switch } from \"./switch\";\nexport { List, ListItem } from \"./list\";\nexport { default as Slider } from \"./slider/slider\";\nexport { default as MultiSelect } from \"./multiselect/multiselect\";\nexport { Overlay } from \"./modal\";\nexport * from \"./tabs\";\nexport { default as Select } from \"./select/select.react\";\nexport { default as ClickToCopy } from \"./clickToCopy/clickToCopy\";\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { i18next, Router } from \"/client/api\";\nimport { Themes } from \"/lib/collections\";\n\nTemplate.uiDashboard.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    themes: []\n  });\n\n  this.autorun(() => {\n    this.subscribe(\"Themes\");\n    const themes = Themes.find({}).fetch();\n    this.state.set(\"themes\", themes);\n  });\n});\n\nTemplate.uiDashboard.helpers({\n  themeCardProps(theme) {\n    return {\n      onContentClick() {\n        Router.go(\"dashboard/uiThemeDetails\", {\n          id: theme.name\n        });\n      },\n      controls: [\n        {\n          icon: \"check-square fa-fw\"\n        },\n        {\n          icon: \"files-o fa-fw\",\n          onClick() {\n            Alerts.alert({\n              title: i18next.t(\"reactionUI.duplicateTheme\", \"Duplicate Theme\"),\n              showCancelButton: true,\n              confirmButtonText: \"Duplicate\"\n            }, () => {\n              Meteor.call(\"ui/duplicateTheme\", theme.name, (error) => {\n                if (error) {\n                  const alertDescription = i18next.t(\"reactionUI.duplicateThemeError\", {\n                    defaultValue: \"Couldn't duplicate theme\"\n                  });\n                  Alerts.toast(alertDescription, \"error\");\n                }\n              });\n            });\n          }\n        }\n      ]\n    };\n  },\n\n  themes() {\n    return Template.instance().state.get(\"themes\");\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Reaction, Router, i18next } from \"/client/api\";\nimport { Themes } from \"/lib/collections\";\n\nTemplate.uiThemeDetails.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    selectedComponent: null,\n    theme: {}\n  });\n\n  this.subscribe(\"Themes\");\n\n  this.autorun(() => {\n    const selectedComponent = Router.getQueryParam(\"component\");\n    this.state.set(\"selectedComponent\", selectedComponent);\n\n    if (selectedComponent) {\n      Reaction.showActionView({\n        label: i18next.t(\"reactionUI.editTheme\", \"Edit Theme\"),\n        props: {\n          size: \"large\"\n        },\n        template: \"uiThemeEditor\"\n      });\n    }\n  });\n\n  this.autorun(() => {\n    this.theme = Themes.findOne({ name: \"base\" });\n    this.state.set(\"theme\", this.theme);\n  });\n});\n\nTemplate.uiThemeDetails.onRendered(function () {\n\n});\n\nTemplate.uiThemeDetails.helpers({\n  activeClassName(componentName) {\n    if (Template.instance().state.equals(\"selectedComponent\", componentName)) {\n      return \"active\";\n    }\n    return \"\";\n  },\n\n  components() {\n    const instance = Template.instance();\n    const theme = instance.state.get(\"theme\");\n    let components = [];\n\n    if (theme) {\n      components = theme.components.map((component) => {\n        return {\n          label: i18next.t(`reactionUI.components.${component.name}`, {\n            defaultValue: component.label\n          }),\n          name: component.name\n        };\n      });\n    }\n\n    return components;\n  },\n\n  publishTheme() {\n    const instance = Template.instance();\n    return () => {\n      const theme = instance.state.get(\"theme\") || {};\n      Meteor.call(\"ui/publishTheme\", theme, (error) => {\n        if (error) {\n          const alertDescription = i18next.t(\"reactionUI.publishThemeError\", {\n            defaultValue: `Couldn't publish theme ${theme.name}`,\n            themeName: theme.name\n          });\n          Alerts.toast(alertDescription, \"error\");\n        }\n      });\n    };\n  }\n});\n\nTemplate.uiThemeDetails.events({\n  \"click [data-event-action=editComponentTheme]\"(event) {\n    Router.setQueryParams({\n      component: event.currentTarget.dataset.component\n    });\n  }\n\n});\n","import _ from \"lodash\";\nimport { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Router } from \"/client/api\";\nimport { Themes } from \"/lib/collections\";\n\nTemplate.uiThemeEditor.onCreated(function () {\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    selectors: [],\n    annotations: {},\n    selectedComponent: null,\n    styles: {},\n    theme: {}\n  });\n\n  this.subscribe(\"Themes\");\n\n  this.findComponentByName = (name) => {\n    const theme = this.state.get(\"theme\");\n    if (theme) {\n      return _.find(theme.components, (component) => {\n        return component.name === name;\n      });\n    }\n  };\n\n  this.selectThemeComponent = (name) => {\n    this.state.set(\"selectedComponent\", name);\n  };\n\n  this.autorun(() => {\n    const componentName = Router.getQueryParam(\"component\");\n    const component = this.findComponentByName(componentName);\n\n    this.state.set(\"selectedComponent\", component);\n    if (component) {\n      // Get a freestyle-like object from raw css\n      Meteor.call(\"ui/cssToObject\", component.styles, (error, result) => {\n        this.state.set(\"styles\", result);\n      });\n\n      const annotations = {};\n\n      for (const annotation of component.annotations) {\n        if (annotation.rule) {\n          annotations[annotation.rule] = annotation;\n        }\n      }\n\n      this.state.set(\"annotations\", annotations);\n    }\n  });\n\n  this.previewTheme = (theme) => {\n    let output = \"\";\n    for (const component of theme.components) {\n      output += component.styles;\n    }\n    $(\"#reactionLayoutStyles\").text(output);\n  };\n\n  this.autorun(() => {\n    const theme = Themes.findOne({ name: \"base\" });\n    this.state.set(\"theme\", theme);\n\n    if (theme) {\n      this.previewTheme(theme);\n    }\n  });\n});\n\n\nTemplate.uiThemeEditor.helpers({\n  component() {\n    const instance = Template.instance();\n    const theme = instance.state.get(\"theme\");\n    const selectedComponent = instance.state.get(\"selectedComponent\");\n    if (theme) {\n      return selectedComponent;\n    }\n  },\n\n  styles() {\n    const instance = Template.instance();\n    const stylesObject = instance.state.get(\"styles\");\n    const annotations = instance.state.get(\"annotations\") || {};\n\n    const stylesArray = _.map(stylesObject, (declarations, selector) => {\n      return {\n        selector,\n        annotation: annotations[selector] || {\n          label: selector\n        },\n        declarations: _.map(declarations, (value, property) => {\n          return {\n            property,\n            value\n          };\n        })\n      };\n    });\n    return stylesArray;\n  },\n\n  updateStyles() {\n    return () => {\n    };\n  },\n\n  componentSelectProps() {\n    const instance = Template.instance();\n    let options = [];\n    const theme = instance.state.get(\"theme\");\n\n    if (theme) {\n      options = theme.components.map((component) => {\n        return {\n          label: component.label || component.name,\n          value: component.name\n        };\n      });\n    }\n\n    return {\n      options,\n      onSelect(value) {\n        instance.selectThemeComponent(value);\n      }\n    };\n  }\n});\n\nTemplate.uiThemeEditor.events({\n  \"mouseover [data-rule]\"(event) {\n    const selector = event.currentTarget.dataset.selector;\n\n    $(selector).css({\n      boxShadow: \"0 0 5px 2px #00dcdd\"\n    });\n  },\n\n  \"mouseout [data-rule]\"(event) {\n    const selector = event.currentTarget.dataset.selector;\n    $(selector).css({\n      boxShadow: \"none\"\n    });\n  },\n\n\n  \"input input\"(event, instance) {\n    const selector = $(event.target).closest(\"[data-selector]\").attr(\"data-selector\");\n    const property = event.target.name;\n    const value = event.target.value;\n    const theme = instance.state.get(\"theme\");\n    const component = instance.state.get(\"selectedComponent\");\n    const styles = instance.state.get(\"styles\");\n\n    styles[selector][property] = value;\n\n    // Update style value\n    const data = {\n      theme,\n      component,\n      styles\n    };\n\n    Meteor.call(\"ui/updateStyles\", data, (error) => {\n      if (error) {\n        Alerts.toast(`Couldn't update theme ${theme.name}`);\n      }\n    });\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Alerts } from \"../components\";\nimport { default as ReactionAlerts } from \"/imports/plugins/core/layout/client/templates/layout/alerts/inlineAlerts\";\n\nclass AlertContainer extends Component {\n  handleAlertRemove(alert) {\n    ReactionAlerts.collection_.remove(alert._id);\n  }\n\n  handleAlertSeen(alert) {\n    ReactionAlerts.collection_.update(alert._id, {\n      $set: {\n        seen: true\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"alert-container\">\n        <Alerts\n          onAlertRemove={this.handleAlertRemove}\n          onAlertSeen={this.handleAlertSeen}\n          {...this.props}\n        />\n      </div>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const alerts = ReactionAlerts.collection_.find({\n    \"options.placement\": props.placement || \"\",\n    \"options.id\": props.id || \"\"\n  }).fetch();\n\n  onData(null, {\n    alerts: alerts\n  });\n}\n\nAlertContainer.propTypes = {\n  id: PropTypes.string,\n  placement: PropTypes.string\n};\n\nexport default composeWithTracker(composer)(AlertContainer);\n","import React, { Children, Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Reaction } from \"/client/api\";\nimport { EditButton, VisibilityButton, Translation } from \"/imports/plugins/core/ui/client/components\";\nimport { composeWithTracker } from \"/lib/api/compose\";\n\nconst styles = {\n  editContainerItem: {\n    display: \"flex\",\n    marginLeft: 5\n  }\n};\n\nclass EditContainer extends Component {\n  handleEditButtonClick = (event) => {\n    const props = this.props;\n\n    if (this.props.onEditButtonClick) {\n      const returnValue = this.props.onEditButtonClick(event, props);\n\n      if (returnValue === false) {\n        return returnValue;\n      }\n    }\n\n    Reaction.showActionView({\n      label: props.label,\n      i18nKeyLabel: props.i18nKeyLabel,\n      template: props.editView,\n      data: {\n        data: props.data,\n        viewProps: {\n          field: props.field\n        }\n      }\n    });\n\n    Reaction.state.set(\"edit/focus\", props.field);\n\n    return true;\n  }\n\n  handleVisibilityButtonClick = (event) => {\n    const props = this.props;\n\n    if (this.props.onVisibilityButtonClick) {\n      const returnValue = this.props.onVisibilityButtonClick(event, props);\n\n      if (returnValue === false) {\n        return returnValue;\n      }\n    }\n\n    return true;\n  }\n\n  renderVisibilityButton() {\n    if (this.props.showsVisibilityButton) {\n      return (\n        <span className=\"edit-container-item\" style={styles.editContainerItem}>\n          <VisibilityButton\n            onClick={this.handleVisibilityButtonClick}\n            toggleOn={this.props.data.isVisible}\n          />\n        </span>\n      );\n    }\n\n    return null;\n  }\n\n  renderEditButton() {\n    let status;\n    let tooltip;\n    let hasChange = false;\n\n    if (this.props.data.__draft && this.props.field) {\n      const draft = this.props.data.__draft;\n\n      if (Array.isArray(draft.diff)) {\n        for (const diff of draft.diff) {\n          let hasChangedField = false;\n\n          if (Array.isArray(this.props.field)) {\n            if (this.props.field.indexOf(diff.path[0]) >= 0) {\n              hasChangedField = true;\n            }\n          } else if (typeof this.props.field === \"string\" && this.props.field === diff.path[0]) {\n            hasChangedField = true;\n          }\n\n          if (hasChangedField) {\n            status = \"warning\";\n\n            tooltip = (\n              <span>\n                <Translation defaultValue=\"Unpublished Changes\" i18nKey=\"revisions.unpublishedChanges\" />\n              </span>\n            );\n\n            hasChange = true;\n          }\n        }\n      }\n    } else if (this.props.data.__draft) {\n      status = \"warning\";\n\n      tooltip = (\n        <span>\n          <Translation defaultValue=\"Unpublished Changes\" i18nKey=\"revisions.unpublishedChanges\" />\n        </span>\n      );\n    }\n\n    if (this.props.autoHideEditButton && hasChange === false) {\n      return null;\n    }\n\n    return (\n      <span className=\"edit-container-item\" style={styles.editContainerItem}>\n        <EditButton\n          onClick={this.handleEditButtonClick}\n          status={status}\n          tooltip={tooltip}\n        />\n      </span>\n    );\n  }\n\n  render() {\n    // Display edit button if the permissions allow it.\n    if (this.props.hasPermission) {\n      // If children were passed as props to this component,\n      // copy the children and inject the edit buttons\n      if (this.props.children) {\n        return React.cloneElement(this.props.children, {\n          visibilityButton: this.renderVisibilityButton(),\n          editButton: this.renderEditButton()\n        });\n      }\n\n      // Otherwise, render a container for the edit buttons\n      return (\n        <span className=\"rui edit-container\">\n          {this.renderVisibilityButton()}\n          {this.renderEditButton()}\n        </span>\n      );\n    }\n\n    // If permissions don't allow the edit buttons to be shown and there are\n    // no child elements, then cancel rendering.\n    if (!this.props.children) {\n      return null;\n    }\n\n    // If permissions don't allow the edit buttons to be shown and there are\n    // child elements, render them normally\n    return (\n      Children.only(this.props.children)\n    );\n  }\n}\n\nEditContainer.propTypes = {\n  autoHideEditButton: PropTypes.bool,\n  children: PropTypes.node,\n  data: PropTypes.object,\n  field: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  hasPermission: PropTypes.bool,\n  onEditButtonClick: PropTypes.func,\n  onVisibilityButtonClick: PropTypes.func,\n  showsVisibilityButton: PropTypes.bool\n};\n\nfunction composer(props, onData) {\n  let hasPermission;\n  const viewAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  if (props.disabled === true || viewAs === \"customer\") {\n    hasPermission = false;\n  } else {\n    hasPermission = Reaction.hasPermission(props.permissions);\n  }\n\n  onData(null, {\n    hasPermission\n  });\n}\n\nexport default composeWithTracker(composer)(EditContainer);\n","export { default as EditContainer } from \"./editContainer\";\nexport { default as TagListContainer } from \"./tagListContainer\";\nexport { default as AlertContainer } from \"./alertContainer\";\nexport { default as SortableItem } from \"./sortableItem\";\nexport { default as MediaGalleryContainer } from \"./mediaGalleryContainer\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Measure from \"react-measure\";\nimport update from \"react/lib/update\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { MediaGallery } from \"../components\";\nimport { Reaction } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Media, Revisions } from \"/lib/collections\";\n\nfunction uploadHandler(files) {\n  // TODO: It would be cool to move this logic to common ValidatedMethod, but\n  // I can't find a way to do this, because of browser's `FileList` collection\n  // and it `Blob`s which is our event.target.files.\n  // There is a way to do this: http://stackoverflow.com/a/24003932. but it's too\n  // tricky\n  const productId = ReactionProduct.selectedProductId();\n  const variant = ReactionProduct.selectedVariant();\n  if (typeof variant !== \"object\") {\n    return Alerts.add(\"Please, create new Variant first.\", \"danger\", {\n      autoHide: true\n    });\n  }\n  const variantId = variant.ancestors[0];\n  const shopId = ReactionProduct.selectedProduct().shopId || Reaction.getShopId();\n  const userId = Meteor.userId();\n  let count = Media.find({\n    \"metadata.variantId\": variantId\n  }).count();\n\n  for (const file of files) {\n    const fileObj = new FS.File(file);\n\n    fileObj.metadata = {\n      ownerId: userId,\n      productId: productId,\n      variantId: variantId,\n      shopId: shopId,\n      priority: count,\n      toGrid: 1 // we need number\n    };\n\n    Media.insert(fileObj);\n    count++;\n  }\n\n  return true;\n}\n\nclass MediaGalleryContainer extends Component {\n  // Load first image as featuredImage\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      featuredMedia: props.media[0],\n      dimensions: {\n        width: -1,\n        height: -1\n      }\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      featuredMedia: nextProps.media[0],\n      media: nextProps.media\n    });\n  }\n\n  handleDrop = (files) => {\n    uploadHandler(files);\n  }\n\n  handleRemoveMedia = (media) => {\n    const imageUrl = media.url();\n    const mediaId = media._id;\n\n    Alerts.alert({\n      title: \"Remove Media?\",\n      type: \"warning\",\n      showCancelButton: true,\n      imageUrl,\n      imageHeight: 150\n    }, (isConfirm) => {\n      if (isConfirm) {\n        Media.remove({ _id: mediaId }, (error) => {\n          if (error) {\n            Alerts.toast(error.reason, \"warning\", {\n              autoHide: 10000\n            });\n          }\n\n          // updateImagePriorities();\n        });\n      }\n      // show media as removed (since it will not disappear until changes are published\n    });\n  }\n\n  get allowFeaturedMediaHover() {\n    if (this.state.featuredMedia) {\n      return true;\n    }\n    return false;\n  }\n\n  get media() {\n    return (this.state && this.state.media) || this.props.media;\n  }\n\n  handleMouseEnterMedia = (event, media) => {\n    this.setState({\n      featuredMedia: media\n    });\n  }\n\n  handleMouseLeaveMedia = () => {\n    this.setState({\n      featuredMedia: undefined\n    });\n  }\n\n  handleMoveMedia = (dragIndex, hoverIndex) => {\n    const media = this.props.media[dragIndex];\n\n    // Apply new sort order to variant list\n    const newMediaOrder = update(this.props.media, {\n      $splice: [\n        [dragIndex, 1],\n        [hoverIndex, 0, media]\n      ]\n    });\n\n    // Set local state so the component does't have to wait for a round-trip\n    // to the server to get the updated list of variants\n    this.setState({\n      media: newMediaOrder\n    });\n\n    // Save the updated positions\n    Meteor.defer(() => {\n      newMediaOrder.forEach((mediaItem, index) => {\n        Media.update(mediaItem._id, {\n          $set: {\n            \"metadata.priority\": index\n          }\n        });\n      });\n    });\n  }\n\n  render() {\n    const { width, height } = this.state.dimensions;\n\n    return (\n      <Measure\n        onMeasure={(dimensions) => {\n          this.setState({ dimensions });\n        }}\n      >\n        <MediaGallery\n          allowFeaturedMediaHover={this.allowFeaturedMediaHover}\n          featuredMedia={this.state.featuredMedia}\n          onDrop={this.handleDrop}\n          onMouseEnterMedia={this.handleMouseEnterMedia}\n          onMouseLeaveMedia={this.handleMouseLeaveMedia}\n          onMoveMedia={this.handleMoveMedia}\n          onRemoveMedia={this.handleRemoveMedia}\n          {...this.props}\n          media={this.media}\n          mediaGalleryHeight={height}\n          mediaGalleryWidth={width}\n        />\n      </Measure>\n    );\n  }\n}\n\nfunction fetchMediaRevisions() {\n  const productId = ReactionProduct.selectedProductId();\n  const mediaRevisions = Revisions.find({\n    \"parentDocument\": productId,\n    \"documentType\": \"image\",\n    \"workflow.status\": {\n      $nin: [\"revision/published\"]\n    }\n  }).fetch();\n  return mediaRevisions;\n}\n\n// resort the media in\nfunction sortMedia(media) {\n  const sortedMedia = _.sortBy(media, function (m) { return m.metadata.priority;});\n  return sortedMedia;\n}\n\n// Search through revisions and if we find one for the image, stick it on the object\nfunction appendRevisionsToMedia(props, media) {\n  if (!Reaction.hasPermission(props.permission || [\"createProduct\"])) {\n    return media;\n  }\n  const mediaRevisions = fetchMediaRevisions();\n  const newMedia = [];\n  for (const image of media) {\n    image.revision = undefined;\n    for (const revision of mediaRevisions) {\n      if (revision.documentId === image._id) {\n        image.revision = revision;\n        image.metadata.priority = revision.documentData.priority;\n      }\n    }\n    newMedia.push(image);\n  }\n  return sortMedia(newMedia);\n}\n\nfunction composer(props, onData) {\n  let media;\n  let editable;\n  const viewAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  if (!props.media) {\n    // Fetch media based on props\n  } else {\n    media = appendRevisionsToMedia(props, props.media);\n  }\n\n  if (viewAs === \"customer\") {\n    editable = false;\n  } else {\n    editable = Reaction.hasPermission(props.permission || [\"createProduct\"]);\n  }\n\n  onData(null, {\n    editable,\n    media\n  });\n}\n\nMediaGalleryContainer.propTypes = {\n  editable: PropTypes.bool,\n  id: PropTypes.string,\n  media: PropTypes.arrayOf(PropTypes.object),\n  placement: PropTypes.string\n};\n\nexport default composeWithTracker(composer)(MediaGalleryContainer);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { DragSource, DropTarget } from \"react-dnd\";\n\nconst cardSource = {\n  beginDrag(props) {\n    return {\n      index: props.index\n    };\n  }\n};\n\n/**\n * Specifies the props to inject into your component.\n * @param {DragSourceConnector} connect An onject containing functions to assign roles to a component's DOM nodes\n * @param {DragSourceMonitor} monitor An object containing functions that return information about drag state\n * @return {Object} Props for drag source\n */\nfunction collectDropSource(connect, monitor) {\n  return {\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging()\n  };\n}\n\nfunction collectDropTarget(connect) {\n  return {\n    connectDropTarget: connect.dropTarget()\n  };\n}\n\nconst cardTarget = {\n  hover(props, monitor) {\n    const dragIndex = monitor.getItem().index;\n    const hoverIndex = props.index;\n\n    // Don't replace items with themselves\n    if (dragIndex === hoverIndex) {\n      return;\n    }\n\n    // Time to actually perform the action\n    props.onMove(dragIndex, hoverIndex);\n\n    // Note: we're mutating the monitor item here!\n    // Generally it's better to avoid mutations,\n    // but it's good here for the sake of performance\n    // to avoid expensive index searches.\n    monitor.getItem().index = hoverIndex;\n  }\n};\n\nexport default function ComposeSortableItem(itemType, SortableItemComponent) {\n  const SortableItem = (props) => {\n    return <SortableItemComponent {...props} />;\n  };\n\n  SortableItem.contextTypes = {\n    dragDropManager: PropTypes.object.isRequired\n  };\n\n  SortableItem.propTypes = {\n    // Injected by React DnD:\n    connectDragPreview: PropTypes.func.isRequired,\n    connectDragSource: PropTypes.func.isRequired,\n    connectDropTarget: PropTypes.func.isRequired,\n    isDragging: PropTypes.bool.isRequired\n  };\n\n  let decoratedComponent = SortableItem;\n  decoratedComponent = DragSource(itemType, cardSource, collectDropSource)(decoratedComponent);\n  decoratedComponent = DropTarget(itemType, cardTarget, collectDropTarget)(decoratedComponent);\n\n  return decoratedComponent;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport debounce from \"lodash/debounce\";\nimport _ from \"lodash\";\nimport update from \"react/lib/update\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { TagList } from \"../components/tags\";\nimport { Tags } from \"/lib/collections\";\nimport { getTagIds } from \"/lib/selectors/tags\";\nimport { DragDropProvider } from \"/imports/plugins/core/ui/client/providers\";\n\n\nfunction updateSuggestions(term, { excludeTags }) {\n  const slug = Reaction.getSlug(term);\n\n  const selector = {\n    slug: new RegExp(slug, \"i\")\n  };\n\n  if (Array.isArray(excludeTags)) {\n    selector._id = {\n      $nin: excludeTags\n    };\n  }\n\n  const tags = Tags.find(selector).map((tag) => {\n    return {\n      label: tag.name\n    };\n  });\n\n  return tags;\n}\n\nclass TagListContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tagIds: props.tagIds || [],\n      tagsByKey: props.tagsByKey || {},\n      newTag: {\n        name: \"\"\n      },\n      suggestions: []\n    };\n\n    this.debounceUpdateTagOrder = debounce(() => {\n      Meteor.call(\n        \"products/updateProductField\",\n        this.props.product._id,\n        \"hashtags\",\n        this.state.tagIds\n      );\n    }, 500);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      tagIds: nextProps.tagIds || [],\n      tagsByKey: nextProps.tagsByKey || {}\n    });\n  }\n\n  get productId() {\n    if (this.props.product) {\n      return this.props.product._id;\n    }\n    return null;\n  }\n\n  canSaveTag(tag) {\n    // Blank tags cannot be saved\n    if (typeof tag.name === \"string\" && tag.name.trim().length === 0) {\n      return false;\n    }\n\n    // If the tag does not have an id, then allow the save\n    if (!tag._id) {\n      return true;\n    }\n\n    // Get the original tag from the props\n    // Tags from props are not mutated, and come from an outside source\n    const originalTag = this.props.tagsByKey[tag._id];\n\n    if (originalTag && originalTag.name !== tag.name) {\n      return true;\n    }\n\n    return false;\n  }\n\n  handleNewTagSave = (tag) => {\n    if (this.productId && this.canSaveTag(tag)) {\n      Meteor.call(\"products/updateProductTags\", this.productId, tag.name, null, (error) => {\n        if (error) {\n          return Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n        }\n\n        this.setState({\n          newTag: {\n            name: \"\"\n          },\n          suggestions: []\n        });\n\n        return true;\n      });\n    }\n  }\n\n  handleNewTagUpdate = (tag) => {\n    this.setState({\n      newTag: tag\n    });\n  }\n\n  handleTagSave = (tag) => {\n    if (this.productId && this.canSaveTag(tag)) {\n      Meteor.call(\"products/updateProductTags\", this.productId, tag.name, tag._id, (error) => {\n        if (error) {\n          return Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n        }\n\n        this.setState({\n          suggestions: []\n        });\n\n        return true;\n      });\n    }\n  }\n\n  handleTagRemove = (tag) => {\n    if (this.productId) {\n      Meteor.call(\"products/removeProductTag\", this.productId, tag._id, (error) => {\n        if (error) {\n          Alerts.toast(i18next.t(\"productDetail.tagInUse\"), \"error\");\n        }\n      });\n    }\n  }\n\n  handleTagUpdate = (tag) => {\n    const newState = update(this.state, {\n      tagsByKey: {\n        [tag._id]: {\n          $set: tag\n        }\n      }\n    });\n\n    this.setState(newState);\n  }\n\n  handleMoveTag = (dragIndex, hoverIndex) => {\n    const tag = this.state.tagIds[dragIndex];\n\n    // Apply new sort order to variant list\n    const newState = update(this.state, {\n      tagIds: {\n        $splice: [\n          [dragIndex, 1],\n          [hoverIndex, 0, tag]\n        ]\n      }\n    });\n\n    // Set local state so the component does't have to wait for a round-trip\n    // to the server to get the updated list of variants\n    this.setState(newState, () => {\n      // Save the updated positions\n      if (this.props.product) {\n        this.debounceUpdateTagOrder();\n      }\n    });\n  }\n\n  handleGetSuggestions = (suggestionUpdateRequest) => {\n    const suggestions = updateSuggestions(\n      suggestionUpdateRequest.value,\n      { excludeTags: this.state.tagIds }\n    );\n\n    this.setState({\n      suggestions: suggestions\n    });\n  }\n\n  handleClearSuggestions = () => {\n    this.setState({\n      suggestions: []\n    });\n  }\n\n  get tags() {\n    if (this.props.editable) {\n      return this.state.tagIds.map((tagId) => this.state.tagsByKey[tagId]);\n    }\n\n    return this.props.tagsAsArray;\n  }\n\n  render() {\n    return (\n      <DragDropProvider>\n        <TagList\n          newTag={this.state.newTag}\n          onClick={this.handleEditButtonClick}\n          onClearSuggestions={this.handleClearSuggestions}\n          onGetSuggestions={this.handleGetSuggestions}\n          onMoveTag={this.handleMoveTag}\n          onNewTagSave={this.handleNewTagSave}\n          onNewTagUpdate={this.handleNewTagUpdate}\n          onTagRemove={this.handleTagRemove}\n          onTagSave={this.handleTagSave}\n          onTagUpdate={this.handleTagUpdate}\n          suggestions={this.state.suggestions}\n          tags={this.tags}\n          tooltip=\"Unpublished changes\"\n          {...this.props}\n        />\n      </DragDropProvider>\n    );\n  }\n}\n\nTagListContainer.propTypes = {\n  children: PropTypes.node,\n  editable: PropTypes.bool,\n  hasPermission: PropTypes.bool,\n  product: PropTypes.object,\n  tagIds: PropTypes.arrayOf(PropTypes.string),\n  tagsAsArray: PropTypes.arrayOf(PropTypes.object),\n  tagsByKey: PropTypes.object\n};\n\nfunction composer(props, onData) {\n  let tags = props.tags;\n\n  if (props.product) {\n    if (_.isArray(props.product.hashtags)) {\n      tags = _.map(props.product.hashtags, function (id) {\n        return Tags.findOne(id);\n      });\n    }\n  }\n\n  let isEditable = props.editable;\n\n  if (typeof isEditable !== \"boolean\") {\n    isEditable = Reaction.hasPermission(props.permissions);\n  }\n\n  const tagsByKey = {};\n\n  if (Array.isArray(tags)) {\n    for (const tag of tags) {\n      tagsByKey[tag._id] = tag;\n    }\n  }\n\n  onData(null, {\n    isProductTags: props.product !== undefined,\n    tagIds: getTagIds({ tags }),\n    tagsByKey,\n    tagsAsArray: tags,\n    editable: isEditable\n  });\n}\n\nlet decoratedComponent = TagListContainer;\ndecoratedComponent = composeWithTracker(composer)(decoratedComponent);\n\nexport default decoratedComponent;\n","import _ from \"lodash\";\nimport classnames from \"classnames\";\n\nexport const templateClassName = (templateInstance, defaults, key) => {\n  const classNameData = templateInstance.data.classNames || {};\n  const classNameOverrides = classNameData[key];\n\n  if (_.isString(classNameOverrides)) {\n    return classnames(defaults, classNameOverrides);\n  }\n\n  return classnames({\n    ...defaults || {},\n    ...classNameOverrides\n  });\n};\n","// http://react-in-meteor.readthedocs.org/en/latest/react-template-helper/\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Blaze } from \"meteor/blaze\";\n\n// Empty template; logic in `onRendered` below\nTemplate.React = new Template(\"Template.React\", function () {\n  return [];\n});\n\n\nTemplate.React.onRendered(function () {\n  const parentTemplate = parentTemplateName();\n  const container = this.firstNode.parentNode;\n  this.container = container;\n\n  this.autorun(() => {\n    const data = Blaze.getData();\n\n    const comp = data && data.component;\n    if (!comp) {\n      throw new Error(\n        \"In template \" + parentTemplate + \", call to `{{> React ... }}` missing \" +\n          \"`component` argument.\");\n    }\n\n    const props = _.omit(data, \"component\");\n    ReactDOM.render(React.createElement(comp, props), container);\n  });\n});\n\nTemplate.React.onDestroyed(function () {\n  if (this.container) {\n    ReactDOM.unmountComponentAtNode(this.container);\n  }\n});\n\n// Gets the name of the template inside of which this instance of `{{> React ...}}`\n// is being used. Used to print more explicit error messages\nfunction parentTemplateName() {\n  let view = Blaze.getView();\n  if (!view || view.name !== \"Template.React\") {\n    throw new Error(\"Unexpected: called outside of Template.React\");\n  }\n  // find the first parent view which is a template or body\n  view = view.parentView;\n  while (view) {\n    const m = view.name.match(/^Template\\.(.*)/);\n    // check `view.name.match(/^Template\\./)` because iron-router (and\n    // maybe other packages) create a view named \"yield\" that has the\n    // `template` property set\n    if (view.template && view.name && m) {\n      return m[1];\n    } else if (view.name === \"body\") {\n      return \"<body>\";\n    }\n\n    view = view.parentView;\n  }\n\n  // not sure when this could happen\n  return \"<unknown>\";\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default function Admin() {\n  return (Component) => {\n    const AdminComponent = (props, context) => {\n      const { adminContext } = context;\n\n      return <Component adminContext={adminContext} {...props} />;\n    };\n\n    AdminComponent.contextTypes = {\n      adminContext: PropTypes.object.isRequired\n    };\n\n    return AdminComponent;\n  };\n}\n","import React, { Component, PropTypes, Children } from \"react\"; // eslint-disable-line\nimport { composeWithTracker } from \"/lib/api/compose\";\n\nclass AdminContextProvider extends Component {\n  static childContextTypes = {\n    adminContext: PropTypes.object.isRequired\n  };\n\n  static propTypes = {\n    adminContext: PropTypes.object.isRequired,\n    children: PropTypes.node\n  };\n\n  getChildContext() {\n    const { adminContext } = this.props;\n    return { adminContext };\n  }\n\n  render() {\n    // `Children.only` enables us not to add a <div /> for nothing\n    return Children.only(this.props.children);\n  }\n}\n\nfunction composer(props, onData) {\n  onData(null, {\n    adminContext: {\n      isAdminArea: true,\n      adminClassName: {\n        admin: true\n      }\n    }\n  });\n}\n\n\nexport default composeWithTracker(composer)(AdminContextProvider);\n","import React, { Component, PropTypes, Children } from \"react\"; // eslint-disable-line\nimport { DragDropManager } from \"dnd-core\";\nimport HTML5Backend from \"react-dnd-html5-backend\";\n\nconst defaultManager = new DragDropManager(HTML5Backend);\n\n// /**\n//  * This is singleton used to initialize only once dnd in our app.\n//  * If you initialized dnd and then try to initialize another dnd\n//  * context the app will break.\n//  * Here is more info: https://github.com/gaearon/react-dnd/issues/186\n//  *\n//  * The solution is to call Dnd context from this singleton this way\n//  * all dnd contexts in the app are the same.\n//  */\n// export default function getDndContext() {\n//   if (defaultManager) return defaultManager;\n//\n//   defaultManager = new DragDropManager(HTML5Backend);\n//\n//   return defaultManager;\n// }\n\nclass DragDropProvider extends Component {\n  getChildContext() {\n    return {\n      dragDropManager: defaultManager\n    };\n  }\n\n  render() {\n    // `Children.only` enables us not to add a <div /> for nothing\n    return Children.only(this.props.children);\n  }\n}\n\nDragDropProvider.childContextTypes = {\n  dragDropManager: PropTypes.object.isRequired\n};\n\nDragDropProvider.propTypes = {\n  children: PropTypes.node\n};\n\nexport default DragDropProvider;\n","export { default as Admin } from \"./admin\";\nexport { default as AdminContextProvider } from \"./adminContextProvider\";\nexport { default as Translatable } from \"./translatable\";\nexport { default as TranslationProvider } from \"./translationProvider\";\nexport { default as DragDropProvider } from \"./dragDropProvider\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default function Translatable() {\n  return (Component) => {\n    const TranslatableComponent = (props, context) => {\n      const { translations } = context;\n\n      return <Component translations={translations} {...props} />;\n    };\n\n    TranslatableComponent.contextTypes = {\n      translations: PropTypes.object.isRequired\n    };\n\n    return TranslatableComponent;\n  };\n}\n","import { Session } from \"meteor/session\";\nimport React, { Component, PropTypes, Children } from \"react\"; // eslint-disable-line\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { i18nextDep } from \"/client/api\";\n\nclass TranslationProvider extends Component {\n  getChildContext() {\n    const { translations } = this.props;\n    return { translations };\n  }\n  render() {\n    // `Children.only` enables us not to add a <div /> for nothing\n    return Children.only(this.props.children);\n  }\n}\n\nTranslationProvider.childContextTypes = {\n  translations: PropTypes.object.isRequired\n};\n\nTranslationProvider.propTypes = {\n  children: PropTypes.node,\n  translations: PropTypes.object.isRequired\n};\n\nfunction composer(props, onData) {\n  i18nextDep.depend();\n\n  onData(null, {\n    translations: {\n      language: Session.get(\"language\")\n    }\n  });\n}\n\n\nexport default composeWithTracker(composer)(TranslationProvider);\n","export * from \"./helpers/helpers\";\nimport \"./helpers/react-template-helper\";\n\nimport \"./templates/dashboard/dashboard.html\";\nimport \"./templates/dashboard/dashboard.js\";\nimport \"./templates/themeDetails/themeDetails.html\";\nimport \"./templates/themeDetails/themeDetails.js\";\nimport \"./templates/themeEditor/themeEditor.html\";\nimport \"./templates/themeEditor/themeEditor.js\";\n\n// Import blaze components\nimport \"./components/button/button.html\";\nimport \"./components/button/button.js\";\n\nimport \"./components/cards/cardGroup.html\";\nimport \"./components/cards/cards.html\";\nimport \"./components/cards/cards.js\";\n\nimport \"./components/numericInput/numericInput.html\";\nimport \"./components/numericInput/numericInput.js\";\n\nimport \"./components/select/select.html\";\nimport \"./components/select/select.js\";\n\nimport \"./components/tags/tagItem.html\";\nimport \"./components/tags/tagItem.js\";\nimport \"./components/tags/tagList.html\";\nimport \"./components/tags/tagList.js\";\n\nimport \"./components/textfield/textfield.html\";\n\nimport \"./components/upload/upload.html\";\nimport \"./components/upload/upload.js\";\n\n// Safe css import for npm package\nimport \"nouislider-algolia-fork/src/nouislider.css\";\nimport \"nouislider-algolia-fork/src/nouislider.pips.css\";\nimport \"nouislider-algolia-fork/src/nouislider.tooltips.css\";\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, Router } from \"/client/api\";\nimport { Media, Shops } from \"/lib/collections\";\n\nTemplate.coreNavigationBrand.helpers({\n  logo() {\n    const shop = Shops.findOne(Reaction.getShopId());\n\n    if (_.isArray(shop.brandAssets)) {\n      const brandAsset = _.find(shop.brandAssets, (asset) => asset.type === \"navbarBrandImage\");\n      return Media.findOne(brandAsset.mediaId);\n    }\n\n    return false;\n  }\n});\n\nTemplate.coreNavigationBrand.events({\n  \"click a.brand\"(event) {\n    event.preventDefault();\n    Router.go(\"/\");\n  }\n});\n","import { Shops } from \"/lib/collections\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * i18nChooser helpers\n */\n\nTemplate.CoreNavigationLanguage.helpers({\n  languages: function () {\n    const languages = [];\n    const shop = Shops.findOne();\n    if (typeof shop === \"object\" && shop.languages) {\n      for (const language of shop.languages) {\n        if (language.enabled === true) {\n          language.translation = \"languages.\" + language.label.toLowerCase();\n          languages.push(language);\n        }\n      }\n      return languages;\n    }\n  },\n  active: function () {\n    if (Session.equals(\"language\", this.i18n)) {\n      return \"active\";\n    }\n  }\n});\n\n/**\n * i18nChooser events\n */\n\nTemplate.CoreNavigationLanguage.events({\n  \"click .i18n-language\": function (event) {\n    event.preventDefault();\n    return Session.set(\"language\", this.i18n);\n  }\n});\n","import React, { Component } from \"react\";\nimport _ from \"lodash\";\nimport { Reaction } from \"/client/api\";\nimport { Media, Shops } from \"/lib/collections\";\n\nclass Brand extends Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick = (event) => {\n    event.preventDefault();\n    Reaction.Router.go(\"/\");\n  }\n\n  getShop() {\n    return Shops.findOne(Reaction.getShopId());\n  }\n\n  getLogo() {\n    if (_.isArray(this.getShop().brandAssets)) {\n      const brandAsset = _.find(this.getShop().brandAssets, (asset) => asset.type === \"navbarBrandImage\");\n      return Media.findOne(brandAsset.mediaId);\n    }\n    return false;\n  }\n\n  render() {\n    return (\n      <a className=\"brand\" onClick={this.handleClick}>\n        {this.getLogo() &&\n          <div className=\"logo\">\n            <img src={this.getLogo().url()} />\n          </div>\n        }\n        <span className=\"title\">{this.getShop().name}</span>\n      </a>\n    );\n  }\n}\n\nexport default Brand;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FlatButton, Button } from \"/imports/plugins/core/ui/client/components\";\nimport { NotificationContainer } from \"/imports/plugins/included/notifications/client/containers\";\nimport CartIconContainer from \"/imports/plugins/core/checkout/client/container/cartIconContainer\";\nimport CartPanel from \"/imports/plugins/core/checkout/client/templates/cartPanel/container/cartPanelContainer\";\nimport MainDropdown from \"/client/modules/accounts/containers/dropdown/mainDropdownContainer\";\nimport LanguageContainer from \"/client/modules/i18n/templates/header/containers/i18nContainer\";\nimport CurrencyContainer from \"/client/modules/i18n/templates/currency/containers/currencyContainer\";\nimport TagNavContainer from \"/imports/plugins/core/ui-tagnav/client/containers/tagNavContainer\";\nimport Brand from \"./brand\";\n\nclass NavBar extends Component {\n  static propTypes = {\n    hasProperPermission: PropTypes.bool,\n    searchEnabled: PropTypes.bool\n  }\n\n  state = {\n    navBarVisible: false\n  }\n\n  toggleNavbarVisibility = () => {\n    const isVisible = this.state.navBarVisible;\n    this.setState({ navBarVisible: !isVisible });\n  }\n\n  handleCloseNavbar = () => {\n    this.setState({ navBarVisible: false });\n  };\n\n  renderLanguage() {\n    return (\n      <div className=\"languages hidden-xs\">\n        <LanguageContainer />\n      </div>\n    );\n  }\n\n  renderCurrency() {\n    return (\n      <div className=\"currencies hidden-xs\">\n        <CurrencyContainer />\n      </div>\n    );\n  }\n\n  renderBrand() {\n    return (\n      <Brand />\n    );\n  }\n\n  renderSearchButton() {\n    if (this.props.searchEnabled) {\n      return (\n        <div className=\"search\">\n          <FlatButton\n            icon=\"fa fa-search\"\n            kind=\"flat\"\n          />\n        </div>\n      );\n    }\n  }\n\n  renderNotificationIcon() {\n    if (this.props.hasProperPermission) {\n      return (\n        <NotificationContainer />\n      );\n    }\n  }\n\n  renderCartContainerAndPanel() {\n    return (\n      <div className=\"cart-container\">\n        <div className=\"cart\">\n          <CartIconContainer />\n        </div>\n        <div className=\"cart-alert\">\n          <CartPanel />\n        </div>\n      </div>\n    );\n  }\n\n  renderMainDropdown() {\n    return (\n      <MainDropdown />\n    );\n  }\n\n  renderHamburgerButton() {\n    return (\n      <div className=\"showmenu\"><Button icon=\"bars\" onClick={this.toggleNavbarVisibility} /></div>\n    );\n  }\n\n  renderTagNav() {\n    return (\n      <div className=\"menu\">\n        <TagNavContainer\n          isVisible={this.state.navBarVisible}\n          closeNavbar={this.handleCloseNavbar}\n        >\n          <Brand />\n        </TagNavContainer>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"rui navbar\">\n        {this.renderHamburgerButton()}\n        {this.renderBrand()}\n        {this.renderTagNav()}\n        {this.renderSearchButton()}\n        {this.renderNotificationIcon()}\n        {this.renderLanguage()}\n        {this.renderCurrency()}\n        {this.renderMainDropdown()}\n        {this.renderCartContainerAndPanel()}\n      </div>\n    );\n  }\n}\n\nexport default NavBar;\n","import React, { Component } from \"react\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction } from \"/client/api\";\nimport NavBar from \"../components/navbar\";\n\nclass NavBarContainer extends Component {\n  render() {\n    return (\n      <div>\n        <NavBar\n          {...this.props}\n        />\n      </div>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const searchPackage = Reaction.Apps({ provides: \"ui-search\" });\n  let searchEnabled;\n  let searchTemplate;\n\n  if (searchPackage.length) {\n    searchEnabled = true;\n    searchTemplate = searchPackage[0].template;\n  } else {\n    searchEnabled = false;\n  }\n\n  const hasProperPermission = Reaction.hasPermission(\"account/profile\");\n\n  onData(null, {\n    searchEnabled,\n    searchTemplate,\n    hasProperPermission\n  });\n}\n\nexport default composeWithTracker(composer)(NavBarContainer);\n","import { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { Blaze } from \"meteor/blaze\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { FlatButton } from \"/imports/plugins/core/ui/client/components\";\nimport { NotificationContainer } from \"/imports/plugins/included/notifications/client/containers\";\nimport { Reaction } from \"/client/api\";\nimport CartPanel from \"../../../../checkout/client/templates/cartPanel/container/cartPanelContainer\";\nimport MainDropdown from \"/client/modules/accounts/containers/dropdown/mainDropdownContainer.js\";\nimport NavBarContainer from \"./containers/navbarContainer\";\n\nTemplate.CoreNavigationBar.onCreated(function () {\n  this.state = new ReactiveDict();\n  const searchPackage = Reaction.Apps({ provides: \"ui-search\" });\n  if (searchPackage.length) {\n    this.state.set(\"searchEnabled\", true);\n    this.state.set(\"searchTemplate\", searchPackage[0].template);\n  } else {\n    this.state.set(\"searchEnabled\", false);\n  }\n});\n\n/**\n * layoutHeader events\n */\nTemplate.CoreNavigationBar.events({\n  \"click .navbar-accounts .dropdown-toggle\": function () {\n    return setTimeout(function () {\n      return $(\"#login-email\").focus();\n    }, 100);\n  },\n  \"click .header-tag, click .navbar-brand\": function () {\n    return $(\".dashboard-navbar-packages ul li\").removeClass(\"active\");\n  },\n  \"click .search\": function () {\n    const instance = Template.instance();\n    const searchTemplateName = instance.state.get(\"searchTemplate\");\n    const searchTemplate = Template[searchTemplateName];\n    Blaze.renderWithData(searchTemplate, {\n    }, $(\"html\").get(0));\n    $(\"body\").css(\"overflow\", \"hidden\");\n    $(\"#search-input\").focus();\n  }\n});\n\nTemplate.CoreNavigationBar.helpers({\n  dropdown() {\n    return {\n      component: MainDropdown\n    };\n  },\n  navbar() {\n    return {\n      component: NavBarContainer\n    };\n  },\n\n  searchTemplate() {\n    const instance = Template.instance();\n    if (instance.state.get(\"searchEnabled\")) {\n      return instance.state.get(\"searchTemplate\");\n    }\n  },\n\n  onMenuButtonClick() {\n    const instance = Template.instance();\n    return () => {\n      if (instance.toggleMenuCallback) {\n        instance.toggleMenuCallback();\n      }\n    };\n  },\n\n  isSearchEnabled() {\n    const instance = Template.instance();\n    return instance.state.get(\"searchEnabled\");\n  },\n\n  IconButtonComponent() {\n    return {\n      component: FlatButton,\n      icon: \"fa fa-search\",\n      kind: \"flat\"\n    };\n  },\n  notificationButtonComponent() {\n    return {\n      component: NotificationContainer\n    };\n  },\n\n  cartPanel() {\n    return CartPanel;\n  }\n});\n","import \"./components/brand/brand.html\";\nimport \"./components/brand/brand.js\";\n\nimport \"./components/i18n/i18n.html\";\nimport \"./components/i18n/i18n.js\";\n\nimport \"./components/navbar/navbar.html\";\nimport \"./components/navbar/navbar.js\";\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\n\nTemplate.catalogSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  }\n});\n\nTemplate.catalogSettings.events({\n  /**\n   * settings update enabled status for services on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input[name=enabled]\": (event) => {\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n\n    Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n    Meteor.call(\"shop/togglePackage\", packageId, !event.target.checked);\n  }\n});\n","import \"./templates/settings.html\";\nimport \"./templates/settings.js\";\n","import { Template } from \"meteor/templating\";\nimport EmailLogs from \"../containers/emailLogs\";\nimport EmailConfig from \"../containers/emailConfig\";\n\n\nTemplate.emailSettings.helpers({\n  EmailConfig() {\n    return {\n      component: EmailConfig\n    };\n  },\n  EmailLogs() {\n    return {\n      component: EmailLogs\n    };\n  }\n});\n","export { default as logs } from \"./logs\";\nexport { default as settings } from \"./settings\";\n","import { Meteor } from \"meteor/meteor\";\nimport { i18next } from \"/client/api\";\n\nexport default {\n  /**\n   * Restart a failed or cancelled email job\n   * @param {Object} email - the email job object\n   * @return {null} triggers an alert\n   */\n  resend(email) {\n    Meteor.call(\"emails/retryFailed\", email._id, (err) => {\n      if (err) {\n        return Alerts.toast(i18next.t(\"app.error\", { error: err.reason }), \"error\");\n      }\n      return Alerts.toast(i18next.t(\"mail.alerts.resendSuccess\", { email: email.data.to }), \"success\");\n    });\n  }\n};\n","import { Meteor } from \"meteor/meteor\";\nimport Alert from \"sweetalert2\";\nimport { i18next } from \"/client/api\";\n\nexport default {\n  /**\n   * Save email settings\n   * @param {Object} settings - object of mail provider settings\n   * @param {Function} callback - optional callback\n   * @return {Boolean} returns true if all fields provided and update method called\n   */\n  saveSettings(settings, callback) {\n    const { service, host, port, user, password } = settings;\n\n    if (!service) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"mail.alerts.missingService\"), \"error\");\n      return callback();\n    }\n\n    if (service !== \"custom\" && (!user || !password)) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"mail.alerts.userPassRequired\", { service }), \"error\");\n      return callback();\n    }\n\n    if (service === \"custom\" && (!host || !port || !user || !password)) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"mail.alerts.allFieldsRequired\"), \"error\");\n      return callback();\n    }\n\n    // make sure port is a Number\n    settings.port = Number(settings.port);\n\n    if (isNaN(settings.port)) {\n      Alert(i18next.t(\"app.error\"), i18next.t(\"mail.alerts.portNaN\"), \"error\");\n      return callback();\n    }\n\n    const save = () => {\n      Meteor.call(\"email/saveSettings\", settings, (err) => {\n        if (err) {\n          return Alert(i18next.t(\"app.error\"),\n            i18next.t(\"mail.alerts.saveFailed\", { error: err.reason }),\n            \"error\");\n        }\n        return Alert({\n          title: i18next.t(\"app.success\"),\n          text: i18next.t(\"mail.alerts.saveSuccess\"),\n          type: \"success\",\n          timer: 1700\n        }).catch(() => null);\n      });\n    };\n\n    // check if the settings work first\n    Meteor.call(\"email/verifySettings\", settings, (error) => {\n      callback();\n      // if the connection fails\n      if (error) {\n        Alert({\n          title: i18next.t(\"mail.alerts.connectionFailed\"),\n          text: i18next.t(\"mail.alerts.saveAnyway\"),\n          type: \"warning\",\n          showCancelButton: true,\n          cancelButtonText: i18next.t(\"app.cancel\"),\n          confirmButtonColor: \"#DD6B55\",\n          confirmButtonText: i18next.t(\"app.save\")\n        }).then(() => save()).catch(() => true);\n      } else {\n        save();\n      }\n    });\n\n    return true;\n  }\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Card, CardHeader, CardBody, CardGroup, Icon, Translation } from \"/imports/plugins/core/ui/client/components\";\nimport EmailSettings from \"../containers/emailSettings\";\n\n\nclass EmailConfig extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showPassword: false,\n      showSettings: false\n    };\n\n    this.togglePassword = this.togglePassword.bind(this);\n    this.toggleSettings = this.toggleSettings.bind(this);\n  }\n\n\n  togglePassword() {\n    this.setState({\n      showPassword: !this.state.showPassword\n    });\n  }\n\n  toggleSettings() {\n    this.setState({\n      showSettings: !this.state.showSettings\n    });\n  }\n\n  renderSettingsDisplay() {\n    const { settings, status } = this.props;\n    const { service, host, port, user, password } = settings;\n    const { showPassword } = this.state;\n\n    const NotSet = () => <span data-i18n=\"admin.settings.fieldNotSet\">Not set</span>;\n\n    return (\n      <div>\n        <div className=\"pull-right\">\n          <a onClick={this.toggleSettings}><Icon icon=\"gear\"/></a>\n        </div>\n        <div className=\"email-config-status\">\n          <strong><Translation defaultValue={\"Status\"} i18nKey={\"admin.settings.status\"} /></strong>: {status ?\n            <i className={`fa fa-circle ${status}`} />\n            : <i className={\"fa fa-refresh fa-spin\"} />}\n        </div>\n        <div>\n          <strong><Translation defaultValue={\"Service\"} i18nKey={\"admin.settings.service\"} /></strong>: {service || <NotSet/>}\n        </div>\n        <div className=\"truncate\">\n          <strong><Translation defaultValue={\"Host\"} i18nKey={\"admin.settings.host\"} /></strong>: {host || <NotSet/>}\n        </div>\n        <div>\n          <strong><Translation defaultValue={\"Port\"} i18nKey={\"admin.settings.port\"} /></strong>: {port || <NotSet/>}\n        </div>\n        <div className=\"truncate\">\n          <strong><Translation defaultValue={\"User\"} i18nKey={\"admin.settings.user\"} /></strong>: {user || <NotSet/>}\n        </div>\n        <div>\n          <strong><Translation defaultValue={\"Password\"} i18nKey={\"admin.settings.password\"} /></strong>:&nbsp;&nbsp;\n          {password ?\n            <span>\n              {showPassword ? password : \"********\"}\n              <a onClick={this.togglePassword}>\n                <span style={{ marginLeft: \"1rem\" }}>\n                  <em>{showPassword ?\n                    <span data-i18n=\"admin.settings.passwordHide\">Hide</span>\n                    : <span data-i18n=\"admin.settings.passwordShow\">Show</span>}\n                  </em>\n                </span>\n              </a>\n            </span>\n            : <NotSet/>}\n        </div>\n      </div>\n    );\n  }\n\n  renderSettingsUpdate() {\n    const { showSettings } = this.state;\n\n    if (showSettings === true) {\n      return (\n        <div>\n          <hr />\n          <h4>\n            <Translation\n              defaultValue={\"Edit Settings\"}\n              i18nKey={\"admin.settings.editSettings\"}\n            />\n          </h4>\n          <EmailSettings showSettings={showSettings} />\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        <Card\n          expanded={true}\n        >\n          <CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"admin.settings.mailProvider\"\n            title=\"Mail Provider\"\n          />\n          <CardBody expandable={true}>\n            {this.renderSettingsDisplay()}\n            {this.renderSettingsUpdate()}\n          </CardBody>\n        </Card>\n      </CardGroup>\n    );\n  }\n}\n\nEmailConfig.propTypes = {\n  settings: PropTypes.shape({\n    host: PropTypes.string,\n    password: PropTypes.string,\n    port: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string\n    ]),\n    service: PropTypes.string,\n    user: PropTypes.string\n  }),\n  status: PropTypes.string\n};\n\nexport default EmailConfig;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Card, CardHeader, CardBody, CardGroup, Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\nimport EmailTableColumn from \"./emailTableColumn\";\nimport { Jobs } from \"/lib/collections\";\nimport { i18next } from \"/client/api\";\n\n\nclass EmailLogs extends Component {\n  renderEmailsTable() {\n    const filteredFields = [\"data.to\", \"updated\", \"data.subject\", \"status\"];\n    const noDataMessage = i18next.t(\"admin.logs.noEmails\");\n\n    // helper adds a class to every grid row\n    const customRowMetaData = {\n      bodyCssClassName: () =>  {\n        return \"email-grid-row\";\n      }\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach(function (field) {\n      let colWidth = undefined;\n      let colStyle = undefined;\n      let colClassName = undefined;\n\n      if (field === \"status\") {\n        colWidth = 70;\n        colStyle = { textAlign: \"center\" };\n        colClassName = \"email-log-status\";\n      }\n\n      // https://react-table.js.org/#/story/cell-renderers-custom-components\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.logs.headers.${field}`),\n        Cell: row => (\n          <EmailTableColumn row={row} />\n        ),\n        className: colClassName,\n        width: colWidth,\n        style: colStyle\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n\n    return (\n      <SortableTable\n        publication=\"Emails\"\n        collection={Jobs}\n        matchingResultsCount=\"emails-count\"\n        showFilter={true}\n        rowMetadata={customRowMetaData}\n        filteredFields={filteredFields}\n        noDataMessage={noDataMessage}\n        columnMetadata={customColumnMetadata}\n        externalLoadingComponent={Loading}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        <Card\n          expanded={true}\n        >\n          <CardHeader\n            actAsExpander={true}\n            i18nKeyTitle=\"admin.logs.headers.emailLogs\"\n            title=\"Email Logs\"\n          />\n          <CardBody expandable={true}>\n            {this.renderEmailsTable()}\n          </CardBody>\n        </Card>\n      </CardGroup>\n    );\n  }\n}\n\nEmailLogs.propTypes = {\n  emails: PropTypes.arrayOf(PropTypes.shape({\n    _id: PropTypes.string.isRequired,\n    created: PropTypes.instanceOf(Date).isRequired,\n    data: PropTypes.shape({\n      to: PropTypes.string.isRequired,\n      subject: PropTypes.string.isRequired\n    }),\n    status: PropTypes.string.isRequired\n  })),\n  limit: PropTypes.string\n};\n\nexport default EmailLogs;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Select, TextField } from \"/imports/plugins/core/ui/client/components\";\n\nclass EmailSettings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: props.settings,\n      isSaving: false\n    };\n\n    this.handleStateChange = this.handleStateChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n  }\n\n  handleStateChange(e) {\n    const { settings } = this.state;\n    settings[e.target.name] = e.target.value;\n    this.setState({ settings });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const { saveSettings } = this.props;\n    const { settings } = this.state;\n    this.setState({ isSaving: true });\n    saveSettings(settings, () => this.setState({ isSaving: false }));\n  }\n\n  handleSelect(e) {\n    const { settings } = this.state;\n    settings.service = e;\n    this.setState({ settings });\n  }\n\n  render() {\n    const { providers } = this.props;\n    const { settings, isSaving } = this.state;\n\n    const emailProviders = providers.map((name) => (\n      { label: name, value: name }\n    ));\n\n    emailProviders.unshift({ label: \"Custom\", value: \"custom\" });\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <Select\n          clearable={false}\n          label=\"Service\"\n          i18nKeyLabel=\"admin.settings.providerName\"\n          placeholder=\"Select a Service\"\n          i18nKeyPlaceholder=\"admin.settings.selectService\"\n          name=\"service\"\n          onChange={this.handleSelect}\n          options={emailProviders}\n          value={settings.service || \"\"}\n        />\n        {settings.service === \"custom\" &&\n          <div>\n            <TextField\n              label=\"Host\"\n              i18nKeyLabel=\"admin.settings.host\"\n              type=\"text\"\n              name=\"host\"\n              value={settings.host}\n              onChange={this.handleStateChange}\n            />\n            <TextField\n              label=\"Port\"\n              i18nKeyLabel=\"admin.settings.port\"\n              type=\"text\"\n              name=\"port\"\n              value={settings.port}\n              onChange={this.handleStateChange}\n            />\n          </div>\n        }\n        <TextField\n          label=\"User\"\n          i18nKeyLabel=\"admin.settings.user\"\n          type=\"text\"\n          name=\"user\"\n          value={settings.user}\n          onChange={this.handleStateChange}\n        />\n        <TextField\n          label=\"Password\"\n          i18nKeyLabel=\"admin.settings.password\"\n          type=\"password\"\n          name=\"password\"\n          value={settings.password}\n          onChange={this.handleStateChange}\n        />\n        <Button\n          primary={true}\n          bezelStyle=\"solid\"\n          className=\"pull-right\"\n          type=\"submit\"\n          disabled={isSaving}\n        >\n          {isSaving ?\n            <i className=\"fa fa-refresh fa-spin\"/>\n            : <span data-i18n=\"app.save\">Save</span>}\n        </Button>\n      </form>\n    );\n  }\n}\n\nEmailSettings.propTypes = {\n  providers: PropTypes.arrayOf(PropTypes.string).isRequired,\n  saveSettings: PropTypes.func.isRequired,\n  settings: PropTypes.shape({\n    service: PropTypes.string,\n    host: PropTypes.string,\n    port: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    user: PropTypes.string,\n    password: PropTypes.string\n  })\n};\n\nexport default EmailSettings;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport moment from \"moment\";\nimport { Icon } from \"/imports/plugins/core/ui/client/components\";\nimport { i18next } from \"/client/api\";\n\nclass EmailTableColumn extends Component {\n  static propTypes = {\n    data: PropTypes.object,\n    row: PropTypes.object\n  }\n\n  handleAction = () => {\n    const { row } = this.props;\n\n    const emailId = row.original._id;\n    const emailAddress = row.original.data.to;\n\n    Meteor.call(\"emails/retryFailed\", emailId, (err) => {\n      if (err) {\n        return Alerts.toast(i18next.t(\"app.error\", { error: err.reason }), \"error\");\n      }\n      return Alerts.toast(i18next.t(\"mail.alerts.resendSuccess\", { email: emailAddress }), \"success\");\n    });\n  }\n\n  render() {\n    const { row } = this.props;\n\n    const renderColumn = row.column.id;\n\n    if (renderColumn === \"status\") {\n      if (row.value === \"completed\") {\n        return (\n          <span>\n            <Icon icon=\"fa fa-circle\" className=\"valid\" />\n            <span onClick={this.handleAction} title={this.props.data}>\n              <Icon icon=\"fa fa-retweet\" className=\"resend-mail\" />\n            </span>\n          </span>\n        );\n      }\n      return (\n        <span>\n          <Icon icon=\"fa fa-circle\" className=\"error\" />\n          <span onClick={this.handleAction} title={this.props.data}>\n            <Icon icon=\"fa fa-retweet\" className=\"resend-mail\" />\n          </span>\n        </span>\n      );\n    }\n    if (renderColumn === \"updated\") {\n      const createdDate = moment(row.value).format(\"LLL\");\n      return (\n        <span>{createdDate}</span>\n      );\n    }\n    return (\n      <span>{row.value}</span>\n    );\n  }\n}\n\nexport default EmailTableColumn;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useDeps } from \"react-simple-di\";\nimport getServiceConfig from \"nodemailer-wellknown\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport actions from \"../actions\";\nimport EmailConfig from \"../components/emailConfig\";\nimport { composeWithTracker, merge } from \"/lib/api/compose\";\n\nclass EmailConfigContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      status: null,\n      error: null\n    };\n  }\n\n  componentWillMount() {\n    const { settings } = this.props;\n    const { service, host, port, user, password } = settings;\n\n    if (service && host && port && user && password) {\n      Meteor.call(\"email/verifySettings\", (error) => {\n        if (error) {\n          this.setState({ status: \"error\" });\n        }\n        this.setState({ status: \"valid\" });\n      });\n    } else {\n      this.setState({ status: \"error\" });\n    }\n  }\n\n  render() {\n    const { status } = this.state;\n    return (\n      <EmailConfig {...this.props} status={status} />\n    );\n  }\n}\n\nEmailConfigContainer.propTypes = {\n  settings: PropTypes.shape({\n    host: PropTypes.string,\n    password: PropTypes.string,\n    port: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string\n    ]),\n    service: PropTypes.string,\n    user: PropTypes.string\n  })\n};\n\nconst composer = ({}, onData) => {\n  if (Meteor.subscribe(\"Packages\").ready()) {\n    const shopSettings = Reaction.getShopSettings();\n    const settings = shopSettings.mail || {};\n\n    if (settings.service && settings.service !== \"custom\") {\n      const config = getServiceConfig(settings.service);\n\n      // show localhost for test providers like Maildev that have no host\n      settings.host = config.host || \"localhost\";\n      settings.port = config.port;\n    }\n    return onData(null, { settings });\n  }\n};\n\nconst depsMapper = () => ({\n  toggleSettings: actions.settings.toggleSettings\n});\n\nexport default merge(\n  composeWithTracker(composer, Loading),\n  useDeps(depsMapper)\n)(EmailConfigContainer);\n","import { useDeps } from \"react-simple-di\";\nimport { Meteor } from \"meteor/meteor\";\nimport actions from \"../actions\";\nimport EmailLogs from \"../components/emailLogs\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { Jobs } from \"/lib/collections\";\nimport { composeWithTracker, merge } from \"/lib/api/compose\";\n\nconst composer = ({}, onData) => {\n  if (Meteor.subscribe(\"Emails\").ready()) {\n    const emails = Jobs.find().fetch();\n    onData(null, { emails });\n  }\n};\n\nconst depsMapper = () => ({\n  resend: actions.logs.resend\n});\n\nexport default merge(\n  composeWithTracker(composer, Loading),\n  useDeps(depsMapper)\n)(EmailLogs);\n","import { useDeps } from \"react-simple-di\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction } from \"/client/api\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport actions from \"../actions\";\nimport EmailSettings from \"../components/emailSettings\";\nimport { composeWithTracker, merge } from \"/lib/api/compose\";\n\nconst providers = Object.keys(require(\"nodemailer-wellknown/services.json\"));\n\nconst composer = ({}, onData) => {\n  if (Meteor.subscribe(\"Packages\").ready()) {\n    const settings = Reaction.getShopSettings().mail || {};\n\n    const { service, host, port, user, password } = settings;\n\n    if (host && port && user && password && !service) {\n      settings.service = \"custom\";\n    }\n\n    onData(null, { providers, settings });\n  }\n};\n\nconst depsMapper = () => ({\n  saveSettings: actions.settings.saveSettings\n});\n\nexport default merge(\n  composeWithTracker(composer, Loading),\n  useDeps(depsMapper)\n)(EmailSettings);\n","import \"./templates/email.html\";\nimport \"./templates/email.js\";\n","import { Template } from \"meteor/templating\";\nimport SearchContainer from \"../containers/settingsContainer.js\";\n\nTemplate.revisionControlSettings.helpers({\n  SearchContainerComponent() {\n    return {\n      component: SearchContainer\n    };\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Button,\n  FlatButton,\n  IconButton,\n  Divider,\n  DropDownMenu,\n  MenuItem,\n  ToolbarGroup,\n  Switch,\n  Icon\n} from \"/imports/plugins/core/ui/client/components\";\nimport SimpleDiff from \"./simpleDiff\";\nimport { Translatable } from \"/imports/plugins/core/ui/client/providers\";\n\n/** TMP **/\nimport { Reaction } from \"/client/api\";\n\nclass PublishControls extends Component {\n  static propTypes = {\n    documentIds: PropTypes.arrayOf(PropTypes.string),\n    documents: PropTypes.arrayOf(PropTypes.object),\n    isEnabled: PropTypes.bool,\n    isPreview: PropTypes.bool,\n    onAction: PropTypes.func,\n    onAddProduct: PropTypes.func,\n    onPublishClick: PropTypes.func,\n    onViewContextChange: PropTypes.func,\n    onVisibilityChange: PropTypes.func,\n    revisions: PropTypes.arrayOf(PropTypes.object),\n    showViewAsControls: PropTypes.bool,\n    translation: PropTypes.shape({\n      lang: PropTypes.string\n    })\n  }\n\n  static defaultProps = {\n    showViewAsControls: true\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showDiffs: false\n    };\n\n    this.handleToggleShowChanges = this.handleToggleShowChanges.bind(this);\n    this.handlePublishClick = this.handlePublishClick.bind(this);\n  }\n\n  handleToggleShowChanges() {\n    this.setState({\n      showDiffs: !this.state.showDiffs\n    });\n  }\n\n  handlePublishClick() {\n    if (this.props.onPublishClick) {\n      this.props.onPublishClick(this.props.revisions);\n    }\n  }\n\n  handleVisibilityChange = (event, value) => {\n    if (this.props.onVisibilityChange) {\n      let isDocumentVisible = false;\n\n      if (value === \"public\") {\n        isDocumentVisible = true;\n      }\n\n      this.props.onVisibilityChange(event, isDocumentVisible, this.props.documentIds);\n    }\n  }\n\n  handleAction = (event, value) => {\n    if (this.props.onAction) {\n      this.props.onAction(event, value, this.props.documentIds);\n    }\n  }\n\n  onViewContextChange = (event, isChecked) => {\n    if (typeof this.props.onViewContextChange === \"function\") {\n      this.props.onViewContextChange(event, isChecked ? \"customer\" : \"administrator\");\n    }\n  }\n\n  get showChangesButtonLabel() {\n    if (!this.showDiffs) {\n      return \"Show Changes\";\n    }\n\n    return \"Hide Changes\";\n  }\n\n  get showChangesButtoni18nKeyLabel() {\n    if (!this.showDiffs) {\n      return \"app.showChanges\";\n    }\n\n    return \"app.hideChanges\";\n  }\n\n  get revisionIds() {\n    if (this.hasRevisions) {\n      return this.props.revisions.map(revision => revision._id);\n    }\n    return false;\n  }\n\n  get hasRevisions() {\n    return Array.isArray(this.props.revisions) && this.props.revisions.length;\n  }\n\n  get diffs() {\n    return this.props.revisions;\n  }\n\n  get showDiffs() {\n    return this.diffs && this.state.showDiffs;\n  }\n\n  get isVisible() {\n    if (Array.isArray(this.props.revisions) && this.props.revisions.length) {\n      const primaryRevision = this.props.revisions[0];\n\n      if (primaryRevision.documentData.isVisible) {\n        return \"public\";\n      }\n    } else if (Array.isArray(this.props.documents) && this.props.documents.length) {\n      const primaryDocument = this.props.documents[0];\n\n      if (primaryDocument.isVisible) {\n        return \"public\";\n      }\n    }\n\n    return \"private\";\n  }\n\n  /**\n   * Getter hasChanges\n   * @return {Boolean} one or more revision has changes\n   */\n  get hasChanges() {\n    // Verify we even have any revision at all\n    if (this.hasRevisions) {\n      // Loop through all revisions to determine if they have changes\n      const diffHasActualChanges = this.props.revisions.map((revision) => {\n        // We probably do have chnages to publish\n        // Note: Sometimes \"updatedAt\" will cause false positives, but just incase, lets\n        // enable the publish button anyway.\n        if (Array.isArray(revision.diff) && revision.diff.length || revision.documentType !== \"product\") {\n          return true;\n        }\n\n        // If all else fails, we will disable the button\n        return false;\n      });\n\n      // If even one revision has changes we should enable the publish button\n      return diffHasActualChanges.some((element) => {\n        return element === true;\n      });\n    }\n\n    // No revisions, no publishing\n    return false;\n  }\n\n  renderChanges() {\n    if (this.showDiffs) {\n      const diffs = this.props.revisions.map((revision) => {\n        return <SimpleDiff diff={revision.diff} key={revision._id} />;\n      });\n\n      return (\n        <div>\n          {diffs}\n        </div>\n      );\n    }\n    return null;\n  }\n\n  renderDeletionStatus() {\n    if (this.hasChanges) {\n      if (this.props.revisions[0].documentData.isDeleted) {\n        return (\n          <Button\n            label=\"Archived\"\n            onClick={this.handleRestore}\n            status=\"danger\"\n            i18nKeyLabel=\"app.archived\"\n          />\n        );\n      }\n    }\n\n    return null;\n  }\n\n  renderPublishButton() {\n    const buttonProps = {};\n\n    if (Array.isArray(this.props.documentIds) && this.props.documentIds.length > 1) {\n      buttonProps.label = \"Publish All\";\n      buttonProps.i18nKeyLabel = \"toolbar.publishAll\";\n    }\n\n    return (\n      <Button\n        bezelStyle=\"outline\"\n        disabled={this.hasChanges === false}\n        label=\"Publish\"\n        onClick={this.handlePublishClick}\n        status=\"success\"\n        tooltip={\"This product has changes that need to be published before they are visible to your customers.\"}\n        i18nKeyLabel=\"productDetailEdit.publish\"\n        {...buttonProps}\n      />\n    );\n  }\n\n  renderMoreOptionsButton() {\n    return (\n      <DropDownMenu\n        buttonElement={<IconButton icon={\"fa fa-ellipsis-v\"}/>}\n        handleMenuItemChange={this.handleAction}\n      >\n        <MenuItem label=\"Administrator\" value=\"administrator\" />\n        <MenuItem label=\"Customer\" value=\"customer\" />\n        <Divider />\n        <MenuItem\n          i18nKeyLabel=\"app.public\"\n          icon=\"fa fa-unlock\"\n          label=\"Public\"\n          selectLabel=\"Public\"\n          value=\"public\"\n        />\n        <MenuItem\n          i18nKeyLabel=\"app.private\"\n          label=\"Private\"\n          icon=\"fa fa-lock\"\n          selectLabel=\"Public\"\n          value=\"private\"\n        />\n        <Divider />\n        <MenuItem\n          disabled={this.hasChanges === false}\n          i18nKeyLabel=\"revisions.discardChanges\"\n          icon=\"fa fa-undo\"\n          label=\"Discard Changes\"\n          value=\"discard\"\n        />\n        <Divider />\n        <MenuItem\n          i18nKeyLabel=\"app.archive\"\n          icon=\"fa fa-trash-o\"\n          label=\"Archive\"\n          value=\"archive\"\n        />\n      </DropDownMenu>\n    );\n  }\n\n  renderViewControls() {\n    if (this.props.showViewAsControls) {\n      let tooltip = \"Private\";\n      let i18nKeyTooltip = \"app.private\";\n\n      if (this.isVisible === \"public\") {\n        tooltip = \"Public\";\n        i18nKeyTooltip = \"app.public\";\n      }\n\n      return (\n        <FlatButton\n          i18nKeyTooltip={i18nKeyTooltip}\n          icon=\"fa fa-eye-slash\"\n          onIcon=\"fa fa-eye\"\n          toggle={true}\n          tooltip={tooltip}\n          value=\"public\"\n          onValue=\"private\"\n          toggleOn={this.isVisible === \"public\"}\n          onToggle={this.handleVisibilityChange}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  renderUndoButton() {\n    return (\n      <FlatButton\n        disabled={this.hasChanges === false}\n        tooltip=\"Discard Changes\"\n        i18nKeyTooltip=\"revisions.discardChanges\"\n        icon={\"fa fa-undo\"}\n        value=\"discard\"\n        onClick={this.handleAction}\n      />\n    );\n  }\n\n  renderArchiveButton() {\n    return (\n      <FlatButton\n        tooltip=\"Archive\"\n        i18nKeyTooltip=\"app.archive\"\n        icon={\"fa fa-archive\"}\n        value=\"archive\"\n        onClick={this.handleAction}\n      />\n    );\n  }\n\n  renderSettingsButton() {\n    return (\n      <FlatButton\n        icon={\"fa fa-cog\"}\n        value=\"settings\"\n        onClick={this.handleAction}\n      />\n    );\n  }\n\n  renderVisibilitySwitch() {\n    return (\n      <Switch\n        i18nKeyLabel={\"admin.dashboard.preview\"}\n        label={\"Preview\"}\n        checked={this.props.isPreview}\n        onChange={this.onViewContextChange}\n      />\n    );\n  }\n\n  renderAdminButton() {\n    return (\n      <FlatButton\n        onClick={() => {\n          Reaction.showActionView({\n            i18nKeyTite: \"dashboard.coreTitle\",\n            title: \"Dashboard\",\n            template: \"dashboardPackages\"\n          });\n        }}\n      >\n        <Icon style={{ fontSize: 24 }} icon=\"icon icon-reaction-logo\" />\n      </FlatButton>\n    );\n  }\n\n  renderAddButton() {\n    return (\n      <FlatButton\n        i18nKeyTooltip={\"app.shortcut.addProduct\"}\n        icon={\"fa fa-plus\"}\n        tooltip={\"Add Product\"}\n        onClick={this.props.onAddProduct}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.isEnabled) {\n      return (\n        <ToolbarGroup lastChild={true}>\n          {this.renderDeletionStatus()}\n          {this.renderUndoButton()}\n          {this.renderArchiveButton()}\n          {this.renderViewControls()}\n          {this.renderPublishButton()}\n          {/* this.renderMoreOptionsButton() */}\n        </ToolbarGroup>\n      );\n    }\n\n    return null;\n  }\n}\n\nexport default Translatable()(PublishControls);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\n\nclass RevisionControlSettings extends Component {\n  get settings() {\n    return this.props.settings;\n  }\n\n  render() {\n    let message;\n\n    if (this.settings.general.enabled) {\n      message = (\n        <Translation\n          defaultValue=\"Revision controls is enabled\"\n          i18nKey=\"revisions.isEnabled\"\n        />\n      );\n    } else {\n      message = (\n        <Translation\n          defaultValue=\"Revision controls is disabled\"\n          i18nKey=\"revisions.isDisabled\"\n        />\n      );\n    }\n\n    return (\n      <div className=\"rui publish-controls\">\n        <p className=\"help-text\">{message}</p>\n      </div>\n    );\n  }\n}\n\nRevisionControlSettings.propTypes = {\n  checked: PropTypes.bool,\n  label: PropTypes.string,\n  onUpdateSettings: PropTypes.func,\n  settings: PropTypes.object\n};\n\nexport default RevisionControlSettings;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass SimpleDiff extends Component {\n  renderDiff() {\n    const diff = this.props.diff;\n\n    return diff.map((change, index) => {\n      const rightHandSide = change.rhs && change.rhs.toString();\n      const leftHandSide = change.lhs && change.lhs.toString();\n\n      switch (change.kind) {\n        // Array change\n        case \"A\":\n          return (\n            <tr className=\"success\" key={index}>\n              <td><i className=\"fa fa-plus\" /></td>\n              <td style={{ whiteSpace: \"normal\" }}>{leftHandSide}</td>\n              <td style={{ whiteSpace: \"normal\" }}>{rightHandSide}</td>\n            </tr>\n          );\n\n        // Added property / element\n        case \"N\":\n          return (\n            <tr className=\"success\" key={index}>\n              <td><i className=\"fa fa-plus\" /></td>\n              <td style={{ whiteSpace: \"normal\" }}>{leftHandSide}</td>\n              <td style={{ whiteSpace: \"normal\" }}>{rightHandSide}</td>\n            </tr>\n          );\n\n        // Edited property or element\n        case \"E\":\n          return (\n            <tr className=\"warning\" key={index}>\n              <td><i className=\"fa fa-pencil\" /></td>\n              <td style={{ whiteSpace: \"normal\" }}>{leftHandSide}</td>\n              <td style={{ whiteSpace: \"normal\" }}>{rightHandSide}</td>\n            </tr>\n          );\n\n        // Removed property / element\n        case \"D\":\n          return (\n            <tr className=\"danger\" key={index}>\n              <td><i className=\"fa fa-times\" /></td>\n              <td style={{ whiteSpace: \"normal\" }}>{leftHandSide}</td>\n              <td style={{ whiteSpace: \"normal\" }}>{rightHandSide}</td>\n            </tr>\n          );\n        default:\n          return null;\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <table className=\"table table-bordered\">\n          <thead>\n            <tr>\n              <th />\n              <th>{\"Current\"}</th>\n              <th>{\"Change\"}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.renderDiff()}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nSimpleDiff.defaultProps = {\n  diff: []\n};\n\nSimpleDiff.propTypes = {\n  diff: PropTypes.arrayOf(PropTypes.object)\n};\n\nexport default SimpleDiff;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport PublishControls from \"../components/publishControls\";\nimport { Revisions } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport TranslationProvider from \"/imports/plugins/core/ui/client/providers/translationProvider\";\nimport { isRevisionControlEnabled } from \"../../lib/api\";\nimport { Reaction, i18next } from \"/client/api\";\n\n/*\n * PublishContainer is a container component connected to Meteor data source.\n */\nclass PublishContainer extends Component {\n  handlePublishClick = (revisions) => {\n    if (Array.isArray(revisions)) {\n      let documentIds = revisions.map((revision) => {\n        if (revision.parentDocument && revision.documentType !== \"product\") {\n          return revision.parentDocument;\n        }\n        return revision.documentId;\n      });\n\n      const documentIdsSet = new Set(documentIds); // ensures they are unique\n      documentIds = Array.from(documentIdsSet);\n      Meteor.call(\"revisions/publish\", documentIds, (error, result) => {\n        if (result && result.status === \"success\") {\n          const message = i18next.t(\"revisions.changedPublished\", {\n            defaultValue: \"Changes published successfully\"\n          });\n\n          Alerts.toast(message, \"success\");\n\n          if (this.props.onPublishSuccess) {\n            this.props.onPublishSuccess(result);\n          }\n        } else {\n          Alerts.toast(error.message, \"error\");\n        }\n      });\n    }\n  }\n\n  handlePublishActions = (event, action, documentIds) => {\n    switch (action) {\n      case \"archive\":\n        if (this.props.onAction) {\n          this.props.onAction(event, action, this.props.documentIds);\n        }\n        break;\n      case \"discard\":\n        Meteor.call(\"revisions/discard\", documentIds, (error, result) => {\n          if (result === true) {\n            const message = i18next.t(\"revisions.changesDiscarded\", {\n              defaultValue: \"Changes discarded successfully\"\n            });\n\n            Alerts.toast(message, \"success\");\n          } else {\n            const message = i18next.t(\"revisions.noChangesDiscarded\", {\n              defaultValue: \"There are no changes to discard\"\n            });\n\n            Alerts.toast(message, \"warning\");\n          }\n        });\n        break;\n      default:\n    }\n  }\n\n  render() {\n    return (\n      <TranslationProvider>\n        <PublishControls\n          documentIds={this.props.documentIds}\n          documents={this.props.documents}\n          isEnabled={this.props.isEnabled}\n          onPublishClick={this.handlePublishClick}\n          onAction={this.handlePublishActions}\n          onVisibilityChange={this.props.onVisibilityChange}\n          revisions={this.props.revisions}\n          isPreview={this.props.isPreview}\n        />\n      </TranslationProvider>\n    );\n  }\n}\n\nPublishContainer.propTypes = {\n  documentIds: PropTypes.arrayOf(PropTypes.string),\n  documents: PropTypes.arrayOf(PropTypes.object),\n  isEnabled: PropTypes.bool,\n  isPreview: PropTypes.bool,\n  onAction: PropTypes.func,\n  onPublishSuccess: PropTypes.func,\n  onVisibilityChange: PropTypes.func,\n  revisions: PropTypes.arrayOf(PropTypes.object)\n};\n\nfunction composer(props, onData) {\n  const viewAs = Reaction.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n  if (Array.isArray(props.documentIds) && props.documentIds.length) {\n    const subscription = Meteor.subscribe(\"Revisions\", props.documentIds);\n\n    if (subscription.ready()) {\n      const revisions = Revisions.find({\n        \"$or\": [\n          {\n            documentId: {\n              $in: props.documentIds\n            }\n          },\n          {\n            \"documentData.ancestors\": {\n              $in: props.documentIds\n            }\n          },\n          {\n            parentDocument: {\n              $in: props.documentIds\n            }\n          }\n        ],\n        \"workflow.status\": {\n          $nin: [\n            \"revision/published\"\n          ]\n        }\n      }).fetch();\n\n      onData(null, {\n        isEnabled: isRevisionControlEnabled(),\n        documentIds: props.documentIds,\n        documents: props.documents,\n        revisions,\n        isPreview: viewAs === \"customer\" ? true : false\n      });\n\n      return;\n    }\n  }\n\n  onData(null, {\n    isEnabled: isRevisionControlEnabled(),\n    isPreview: viewAs === \"customer\" ? true : false\n  });\n}\n\nexport default composeWithTracker(composer, null)(PublishContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport SettingsComponent from \"../components/settings\";\nimport { Packages } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport TranslationProvider from \"/imports/plugins/core/ui/client/providers/translationProvider\";\n\n\nclass RevisionSettingsContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: this.props.packageInfo.settings\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      settings: nextProps.packageInfo.settings\n    });\n  }\n\n  get settings() {\n    return this.state.settings;\n  }\n\n  handleUpdateSettings = (settings) => {\n    this.setState({ settings }, () => {\n      Meteor.call(\"revisions/settings/update\", settings);\n    });\n  }\n\n  /**\n   * Publish container is a stateless container component connected to Meteor data source.\n   * @return {PropTypes.node} react node\n   */\n  render() {\n    return (\n      <div>\n        <TranslationProvider>\n          <SettingsComponent\n            onUpdateSettings={this.handleUpdateSettings}\n            settings={this.settings}\n          />\n        </TranslationProvider>\n      </div>\n    );\n  }\n}\n\nRevisionSettingsContainer.propTypes = {\n  packageInfo: PropTypes.object\n};\n\nexport function handlePublishClick(revisions) {\n  if (Array.isArray(revisions)) {\n    const documentIds = revisions.map((revision) => {\n      return revision.documentId;\n    });\n    Meteor.call(\"revisions/publish\", documentIds);\n  }\n}\n\nfunction composer(props, onData) {\n  const packageInfo = Packages.findOne({\n    name: \"reaction-revisions\"\n  });\n\n  onData(null, {\n    packageInfo\n  });\n}\n\nexport default composeWithTracker(composer)(RevisionSettingsContainer);\n","import \"./templates/settings.html\";\nimport \"./templates/settings.js\";\n","export * from \"./revisions\";\n","import { Packages } from \"/lib/collections\";\n\nexport function getPackageSettings() {\n  const packageInfo = Packages.findOne({\n    name: \"reaction-revisions\"\n  });\n\n  if (packageInfo && packageInfo.enabled && packageInfo.settings) {\n    return packageInfo.settings;\n  }\n\n  return null;\n}\n\nexport function isRevisionControlEnabled() {\n  const settings = getPackageSettings();\n\n  if (settings && settings.general && typeof settings.general.enabled === \"boolean\") {\n    return settings.general.enabled;\n  }\n\n  return false;\n}\n\nexport const RevisionApi = {\n  isRevisionControlEnabled,\n  getPackageSettings\n};\n","import { Meteor } from \"meteor/meteor\";\nimport { $ } from \"meteor/jquery\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Shops } from \"/lib/collections\";\nimport { Countries } from \"/client/collections\";\nimport { Taxes, TaxCodes } from \"../../lib/collections\";\nimport { i18next } from \"/client/api\";\nimport { Taxes as TaxSchema } from \"../../lib/collections/schemas\";\nimport { IconButton, Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\n\n/* eslint no-shadow: [\"error\", { \"allow\": [\"options\"] }] */\n/* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"[oO]ptions\" }] */\n\nTemplate.customTaxRates.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"Taxes\");\n  });\n\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\nTemplate.customTaxRates.helpers({\n  editButton() {\n    const instance = Template.instance();\n    const state = instance.state;\n    const isEditing = state.equals(\"isEditing\", true);\n    let editingId = state.get(\"editingId\");\n    // toggle edit state\n    if (!isEditing) {\n      editingId = null;\n    }\n    // return icon\n    return {\n      component: IconButton,\n      icon: \"fa fa-plus\",\n      onIcon: \"fa fa-pencil\",\n      toggle: true,\n      toggleOn: isEditing,\n      style: {\n        position: \"relative\",\n        top: \"-25px\",\n        right: \"8px\"\n      },\n      onClick() {\n        // remove active rows from grid\n        $(\".tax-grid-row\").removeClass(\"active\");\n        return state.set({\n          isEditing: !isEditing,\n          editingId: editingId\n        });\n      }\n    };\n  },\n  taxGrid() {\n    const filteredFields = [\"taxCode\", \"rate\", \"country\", \"region\", \"postal\"];\n    const noDataMessage = i18next.t(\"admin.taxSettings.noCustomTaxRatesFound\");\n    const instance = Template.instance();\n\n    //\n    // helper to get and select row from griddle\n    // into blaze for to select tax row for editing\n    //\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n      // isEditing is tax rate object\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    //\n    // helper adds a class to every grid row\n    //\n    const customRowMetaData = {\n      bodyCssClassName: () =>  {\n        return \"tax-grid-row\";\n      }\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach(function (field) {\n      const columnMeta = {\n        accessor: field,\n        Header: i18next.t(`admin.taxGrid.${field}`)\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return tax Grid\n    return {\n      component: SortableTable,\n      publication: \"Taxes\",\n      collection: Taxes,\n      matchingResultsCount: \"taxes-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields: filteredFields,\n      columns: filteredFields,\n      noDataMessage: noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n  // schema for forms\n  taxSchema() {\n    return TaxSchema;\n  },\n  // list of countries for tax input\n  countryOptions: function () {\n    return Countries.find().fetch();\n  },\n  statesForCountry: function () {\n    const shop = Shops.findOne();\n    const selectedCountry = AutoForm.getFieldValue(\"country\");\n    if (!selectedCountry) {\n      return false;\n    }\n    if ((shop !== null ? shop.locales.countries[selectedCountry].states : void 0) === null) {\n      return false;\n    }\n    const options = [];\n    if (shop && typeof shop.locales.countries[selectedCountry].states === \"object\") {\n      for (const state in shop.locales.countries[selectedCountry].states) {\n        if ({}.hasOwnProperty.call(shop.locales.countries[selectedCountry].states, state)) {\n          const locale = shop.locales.countries[selectedCountry].states[state];\n          options.push({\n            label: locale.name,\n            value: state\n          });\n        }\n      }\n    }\n    return options;\n  },\n  taxRate() {\n    const shop = Shops.findOne();\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const tax = Taxes.findOne(id) || {};\n    // enforce a default country that makes sense.\n    if (!tax.country) {\n      if (shop && typeof shop.addressBook === \"object\") {\n        tax.country = shop.addressBook[0].country;\n      }\n    }\n    return tax;\n  },\n  taxCodes() {\n    const instance = Template.instance();\n    if (instance.subscriptionsReady()) {\n      const taxCodes = TaxCodes.find().fetch();\n      const options = [{\n        label: i18next.t(\"admin.taxSettings.taxable\"),\n        value: \"RC_TAX\"\n      }, {\n        label: i18next.t(\"admin.taxSettings.nottaxable\"),\n        value: \"RC_NOTAX\"\n      }];\n\n      for (const taxCode of taxCodes) {\n        options.push({\n          label: i18next.t(taxCode.label),\n          value: taxCode.id\n        });\n      }\n      return options;\n    }\n    return [];\n  }\n});\n\n//\n// on submit lets clear the form state\n//\nTemplate.customTaxRates.events({\n  \"submit #customTaxRates-update-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"submit #customTaxRates-insert-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: true,\n      editingId: null\n    });\n  },\n  \"click .cancel, .tax-grid-row .active\": function () {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    // ugly hack\n    $(\".tax-grid-row\").removeClass(\"active\");\n  },\n  \"click .delete\": function () {\n    const confirmTitle = i18next.t(\"admin.taxSettings.confirmRateDelete\");\n    const confirmButtonText = i18next.t(\"app.delete\");\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    // confirm delete\n    Alerts.alert({\n      title: confirmTitle,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: confirmButtonText\n    }, (isConfirm) => {\n      if (isConfirm) {\n        if (id) {\n          Meteor.call(\"taxes/deleteRate\", id);\n          instance.state.set({\n            isEditing: false,\n            editingId: null\n          });\n        }\n      }\n    });\n  },\n  \"click .tax-grid-row\": function (event) {\n    // toggle all rows off, then add our active row\n    $(\".tax-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  }\n});\n\n//\n// Hooks for update and insert forms\n//\nAutoForm.hooks({\n  \"customTaxRates-update-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesSaved\"),\n        \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.taxSettings.shopCustomTaxRatesFailed\")} ${error}`, \"error\"\n      );\n    }\n  },\n  \"customTaxRates-insert-form\": {\n    onSuccess: function () {\n      return Alerts.toast(i18next.t(\"admin.taxSettings.shopCustomTaxRatesSaved\"), \"success\");\n    },\n    onError: function (operation, error) {\n      return Alerts.toast(\n        `${i18next.t(\"admin.taxSettings.shopCustomTaxRatesFailed\")} ${error}`, \"error\"\n      );\n    }\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { TaxCodes } from \"../../lib/collections\";\nimport { i18next } from \"/client/api\";\n\n/*\n * Template taxes Helpers\n */\nTemplate.taxSettings.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"TaxCodes\");\n  });\n});\n\nTemplate.taxSettings.helpers({\n  checked(enabled) {\n    if (enabled === true) {\n      return \"checked\";\n    }\n    return \"\";\n  },\n  shown(enabled) {\n    if (enabled !== true) {\n      return \"hidden\";\n    }\n    return \"\";\n  },\n  // prepare and return taxCodes\n  // for default shop value\n  //\n  taxCodes() {\n    const instance = Template.instance();\n    if (instance.subscriptionsReady()) {\n      const taxCodes = TaxCodes.find().fetch();\n      const options = [{\n        label: i18next.t(\"app.auto\"),\n        value: \"none\"\n      }];\n\n      for (const taxCode of taxCodes) {\n        options.push({\n          label: i18next.t(taxCode.label),\n          value: taxCode.id\n        });\n      }\n      return options;\n    }\n    return undefined;\n  }\n});\n\nTemplate.taxSettings.events({\n  /**\n   * taxSettings settings update enabled status for tax service on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input[name=enabled]\": (event) => {\n    const settingsKey = event.target.getAttribute(\"data-key\");\n    const packageId = event.target.getAttribute(\"data-id\");\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n    // save tax registry updates\n    Meteor.call(\"registry/update\", packageId, settingsKey, fields);\n  },\n\n  /**\n   * taxSettings settings show/hide secret key for a tax service\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"click [data-event-action=showSecret]\": (event) => {\n    const button = Template.instance().$(event.currentTarget);\n    const input = button.closest(\".form-group\").find(\"input[name=secret]\");\n\n    if (input.attr(\"type\") === \"password\") {\n      input.attr(\"type\", \"text\");\n      button.html(\"Hide\");\n    } else {\n      input.attr(\"type\", \"password\");\n      button.html(\"Show\");\n    }\n  }\n});\n","import \"./settings/custom.html\";\nimport \"./settings/custom.js\";\nimport \"./settings/settings.html\";\nimport \"./settings/settings.js\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { Taxes } from \"./taxes\";\n\n/**\n* TaxPackageConfig Schema\n*/\n\nexport const TaxPackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.defaultTaxCode\": {\n      type: String,\n      optional: true\n    },\n    \"settings.taxIncluded\": {\n      type: Boolean,\n      defaultValue: false\n    },\n    \"settings.taxShipping\": {\n      type: Boolean,\n      defaultValue: false\n    },\n    \"settings.rates\": {\n      type: Object,\n      optional: true\n    },\n    \"settings.rates.enabled\": {\n      type: Boolean,\n      optional: true,\n      defaultValue: false\n    },\n    \"settings.rates.taxes\": {\n      type: [Taxes],\n      optional: true\n    }\n  }\n]);\n","export * from \"./taxrates\";\nexport * from \"./taxes\";\nexport * from \"./taxcodes\";\nexport * from \"./config\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\n/**\n* TaxCodes Schema\n*/\n\nexport const TaxCodes = new SimpleSchema({\n  id: {\n    type: String,\n    label: \"Tax Id\",\n    unique: true\n  },\n  shopId: {\n    type: String\n  },\n  taxCode: {\n    type: String,\n    label: \"Tax Code\"\n  },\n  taxCodeProvider: {\n    type: String,\n    label: \"Tax Code Provider\"\n  },\n  ssuta: {\n    type: Boolean,\n    label: \"Streamlined Sales Tax\",\n    optional: true,\n    defaultValue: false\n  },\n  title: {\n    type: String,\n    optional: true\n  },\n  label: {\n    type: String,\n    optional: true\n  },\n  parent: {\n    type: String,\n    optional: true\n  },\n  children: {\n    type: [Object],\n    optional: true,\n    blackbox: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { shopIdAutoValue } from \"/lib/collections/schemas/helpers\";\n\n/**\n* Taxes Schema\n*/\n\nexport const Taxes = new SimpleSchema({\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Taxes shopId\"\n  },\n  \"taxCode\": {\n    type: String,\n    label: \"Tax Identifier\",\n    defaultValue: \"RC_TAX\",\n    index: 1\n  },\n  \"cartMethod\": {\n    label: \"Calculation Method\",\n    type: String,\n    allowedValues: [\"unit\", \"row\", \"total\"],\n    defaultValue: \"total\"\n  },\n  \"taxLocale\": {\n    label: \"Taxation Location\",\n    type: String,\n    allowedValues: [\"shipping\", \"billing\", \"origination\", \"destination\"],\n    defaultValue: \"destination\"\n  },\n  \"taxShipping\": {\n    label: \"Tax Shipping\",\n    type: Boolean,\n    defaultValue: false\n  },\n  \"taxIncluded\": {\n    label: \"Taxes included in product prices\",\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  },\n  \"discountsIncluded\": {\n    label: \"Tax before discounts\",\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  },\n  \"region\": {\n    label: \"State/Province/Region\",\n    type: String,\n    optional: true,\n    index: 1\n  },\n  \"postal\": {\n    label: \"ZIP/Postal Code\",\n    type: String,\n    optional: true,\n    index: 1\n  },\n  \"country\": {\n    type: String,\n    label: \"Country\",\n    optional: true,\n    index: 1\n  },\n  \"isCommercial\": {\n    label: \"Commercial address.\",\n    type: Boolean,\n    optional: true\n  },\n  \"rate\": {\n    type: Number,\n    decimal: true\n  },\n  \"method\": {\n    type: Array,\n    optional: true,\n    label: \"Tax Methods\"\n  },\n  \"method.$\": {\n    type: Object\n  },\n  \"method.$.plugin\": {\n    type: String,\n    label: \"Plugin\",\n    defaultValue: \"Custom\",\n    optional: true\n  },\n  \"method.$.enabled\": {\n    type: Boolean,\n    label: \"Enabled\",\n    defaultValue: true,\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\n/**\n* TaxRates Schema\n*/\n\nexport const TaxRates = new SimpleSchema({\n  country: {\n    type: String\n  },\n  county: {\n    type: String,\n    optional: true\n  },\n  postal: {\n    type: String,\n    optional: true\n  },\n  rate: {\n    type: Number,\n    decimal: true\n  }\n});\n","import { Mongo } from \"meteor/mongo\";\nimport * as Schemas from \"./schemas\";\n\n/**\n* ReactionCore Collections TaxCodes\n*/\n\n/**\n* Taxes Collection\n*/\nexport const Taxes = new Mongo.Collection(\"Taxes\");\n\nTaxes.attachSchema(Schemas.Taxes);\n\n\n/**\n* TaxCodes Collection\n*/\nexport const TaxCodes = new Mongo.Collection(\"TaxCodes\");\n\nTaxCodes.attachSchema(Schemas.TaxCodes);\n","export * from \"./collections\";\n","import { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Blaze } from \"meteor/blaze\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Template } from \"meteor/templating\";\nimport { Loading, SortableTable } from \"/imports/plugins/core/ui/client/components\";\nimport { EmailTemplates } from \"../../lib/collections/schemas\";\nimport { i18next } from \"/client/api\";\nimport { Templates } from \"/lib/collections\";\n\n\n/*\n * template templateSettings onCreated\n */\nTemplate.templateSettings.onCreated(function () {\n  // Subscribe to Templates collections\n  this.autorun(() => {\n    this.subscribe(\"Templates\");\n  });\n\n  // Initiate State\n  this.state = new ReactiveDict();\n  this.state.setDefault({\n    isEditing: false,\n    editingId: null\n  });\n});\n\n\n/*\n * template templateSettings helpers\n */\nTemplate.templateSettings.helpers({\n  templateGrid() {\n    const filteredFields = [\"title\", \"type\", \"language\"];\n    const noDataMessage = i18next.t(\"templateGrid.noTemplatesFound\");\n    const instance = Template.instance();\n\n    //\n    // helper to get and select row from griddle\n    // into blaze to get correct template to edit\n    //\n    function editRow(options) {\n      const currentId = instance.state.get(\"editingId\");\n\n      // isEditing is current template\n      instance.state.set(\"isEditing\", options.props.data);\n      instance.state.set(\"editingId\", options.props.data._id);\n      // toggle edit mode clicking on same row\n      if (currentId === options.props.data._id) {\n        instance.state.set(\"isEditing\", null);\n        instance.state.set(\"editingId\", null);\n      }\n    }\n\n    // helper adds a class to every grid row\n    const customRowMetaData = {\n      bodyCssClassName: () =>  {\n        return \"template-grid-row\";\n      }\n    };\n\n    // add i18n handling to headers\n    const customColumnMetadata = [];\n    filteredFields.forEach(function (field) {\n      const columnMeta = {\n        accessor: field, // name of field\n        Header: i18next.t(`templateGrid.columns.${field}`) // name to display\n      };\n      customColumnMetadata.push(columnMeta);\n    });\n\n    // return template Grid\n    return {\n      component: SortableTable,\n      publication: \"Templates\",\n      collection: Templates,\n      matchingResultsCount: \"templates-count\",\n      showFilter: true,\n      rowMetadata: customRowMetaData,\n      filteredFields: filteredFields,\n      columns: filteredFields,\n      noDataMessage: noDataMessage,\n      onRowClick: editRow,\n      columnMetadata: customColumnMetadata,\n      externalLoadingComponent: Loading\n    };\n  },\n\n  instance() {\n    const instance = Template.instance();\n    return instance;\n  },\n\n  template() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const template = Templates.findOne(id) || {};\n    return template;\n  },\n\n  typeEmail() {\n    const instance = Template.instance();\n    const id = instance.state.get(\"editingId\");\n    const template = Templates.findOne(id) || {};\n    if (template.type === \"email\") {\n      return true;\n    }\n    return false;\n  },\n\n  emailTemplateSchema() {\n    return EmailTemplates;\n  }\n});\n\n\n/*\n * template templateSettings events\n */\nTemplate.templateSettings.events({\n  \"click .template-grid-row\": function (event) {\n    // toggle all rows off, then add our active row\n    $(\".template-grid-row\").removeClass(\"active\");\n    Template.instance().$(event.currentTarget).addClass(\"active\");\n  },\n  \"submit #email-template-edit-form\": function () {\n    const instance = Template.instance();\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n  },\n  \"click .cancel, .template-grid-row .active\": function () {\n    const instance = Template.instance();\n    // remove active rows from grid\n    instance.state.set({\n      isEditing: false,\n      editingId: null\n    });\n    $(\".template-grid-row\").removeClass(\"active\");\n  }\n});\n\n\nAutoForm.hooks({\n  \"email-template-edit-form\": {\n    onSubmit: function (insertDoc) {\n      this.event.preventDefault();\n\n      const templateId = this.docId;\n\n      Meteor.call(\"templates/email/update\", templateId, insertDoc, (error, result) => {\n        if (error) {\n          Alerts.toast(i18next.t(\"templateUpdateForm.alerts.failedToUpdate\", { err: error.message }), \"error\");\n          this.done(new Error(\"Failed to update template: \", error));\n          return false;\n        }\n        if (result) {\n          Alerts.toast(i18next.t(\"templateUpdateForm.alerts.templateUpdated\", \"Template successfully updated\"), \"success\");\n          this.done();\n        }\n      });\n    }\n  }\n});\n\n\nBlaze.TemplateInstance.prototype.parentTemplate = function (levels = 1) {\n  let view = Blaze.currentView;\n  let numLevel = levels;\n  while (view) {\n    if (view.name.substring(0, 9) === \"Template.\" && !numLevel--) {\n      return view.templateInstance();\n    }\n    view = view.parentView;\n  }\n};\n","import \"./templates/settings.html\";\nimport \"./templates/settings.js\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Templates } from \"/lib/collections\";\nimport { shopIdAutoValue } from \"/lib/collections/schemas/helpers\";\n\n/**\n * EmailTemplates Schema\n*/\n\nexport const EmailTemplates = new SimpleSchema({\n  shopId: {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Template ShopId\"\n  },\n  name: {\n    type: String,\n    optional: true\n  },\n  priority: {\n    type: Number,\n    optional: true,\n    defaultValue: 1\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: true\n  },\n  route: {\n    type: String,\n    optional: true\n  },\n  audience: {\n    type: [String],\n    optional: true\n  },\n  type: {\n    type: String,\n    defaultValue: \"email\",\n    optional: true\n  },\n  provides: {\n    type: String,\n    defaultValue: \"template\"\n  },\n  block: {\n    type: String,\n    optional: true\n  },\n  defaultData: {\n    type: Object,\n    blackbox: true,\n    optional: true\n  },\n  template: {\n    type: String,\n    optional: true\n  },\n  parser: {\n    type: String,\n    optional: true\n  },\n  language: {\n    type: String,\n    optional: true,\n    defaultValue: \"en\"\n  },\n  source: {\n    type: String,\n    optional: true\n  },\n  title: {\n    type: String,\n    optional: true\n  },\n  subject: {\n    type: String,\n    optional: true\n  }\n});\n\nTemplates.attachSchema(EmailTemplates, { selector: { type: \"email\" } });\n","export * from \"./emailtemplates\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"/lib/collections/schemas/registry\";\nimport { Discounts } from \"./discounts\";\n\n/**\n* DiscountsPackageConfig Schema\n*/\n\nexport const DiscountsPackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.rates\": {\n      type: Object,\n      optional: true\n    },\n    \"settings.rates.enabled\": {\n      type: Boolean,\n      optional: true,\n      defaultValue: false\n    },\n    \"settings.rates.discounts\": {\n      type: [Discounts],\n      optional: true\n    }\n  }\n]);\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { shopIdAutoValue } from \"/lib/collections/schemas/helpers\";\n\n// The Discounts Schema validates using multiple schemas\n// be sure to use `{ selector: { discountMethod: \"code\" } }`\n// to indicate which schema to apply in all updates\n\n/*\n* Discounts Tranaction History Schema\n*/\nexport const Transactions = new SimpleSchema({\n  cartId: {\n    type: String,\n    index: 1\n  },\n  userId: {\n    type: String,\n    index: 1\n  },\n  appliedAt: {\n    type: Date,\n    optional: true\n  }\n});\n\n/*\n* Discounts Schema\n*/\n\nexport const Discounts = new SimpleSchema({\n  \"shopId\": {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Discounts shopId\"\n  },\n  \"label\": {\n    type: String,\n    optional: true\n  },\n  \"description\": {\n    type: String,\n    optional: true\n  },\n  \"discountMethod\": {\n    label: \"Discount Method Type\",\n    type: String,\n    index: 1,\n    allowedValues: [\"code\", \"rate\"]\n  },\n  // discount is allowed to be string or number.\n  // it's a formula value (could be shipping code)\n  \"discount\": {\n    type: String,\n    optional: true\n  },\n  \"transactions\": {\n    type: [Transactions],\n    optional: true\n  },\n  \"calculation\": {\n    type: Object,\n    optional: true,\n    label: \"Calculation\"\n  },\n  \"calculation.method\": {\n    type: String,\n    index: 1,\n    defaultValue: \"discount\",\n    allowedValues: [\"credit\", \"discount\", \"sale\", \"shipping\"]\n  },\n  \"conditions\": {\n    type: Object,\n    optional: true,\n    label: \"Conditions\"\n  },\n  \"conditions.order\": {\n    type: Object\n  },\n  \"conditions.order.min\": {\n    type: Number,\n    label: \"Mininum\",\n    decimal: true,\n    defaultValue: 0.00\n  },\n  \"conditions.order.max\": {\n    type: Number,\n    label: \"Maximum\",\n    decimal: true,\n    optional: true\n  },\n  \"conditions.order.startDate\": {\n    type: Date,\n    label: \"Start\",\n    optional: true\n  },\n  \"conditions.order.endDate\": {\n    type: Date,\n    label: \"End\",\n    optional: true\n  },\n  \"conditions.enabled\": {\n    type: Boolean,\n    label: \"Enabled\",\n    defaultValue: true,\n    optional: true\n  },\n  \"conditions.audience\": {\n    type: [String],\n    optional: true,\n    label: \"Audience\"\n  },\n  \"conditions.permissions\": {\n    type: [String],\n    optional: true,\n    label: \"Permissions\"\n  },\n  \"conditions.products\": {\n    type: [String],\n    optional: true,\n    label: \"Products\"\n  },\n  \"conditions.tags\": {\n    type: [String],\n    optional: true,\n    label: \"Tags\"\n  }\n});\n","export * from \"./discounts\";\nexport * from \"./config\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport debounce from \"lodash/debounce\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nexport default class DiscountForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      discount: this.props.discount,\n      validationMessage: null,\n      validatedInput: this.props.validatedInput || false,\n      attempts: 0,\n      discountApplied: false\n    };\n    // debounce helper so to wait on user input\n    this.debounceDiscounts = debounce(() => {\n      this.setState({ validationMessage: \"\" });\n      const { discount } = this.state;\n      // handle discount code validation messages after attempt to apply\n      Meteor.call(\"discounts/codes/apply\", this.props.id, discount, this.props.collection, (error, result) => {\n        if (typeof result === \"object\") {\n          this.setState({ validationMessage: result });\n        } else if (result !== 1) {\n          // if validationMessage isn't an object with i18n\n          // we will display an elliptical that's not\n          // actually done here though, just bit of foolery\n          this.timerId = Meteor.setTimeout(function () {\n            this.setState({ validationMessage: \"...\" });\n          }.bind(this), 2000);\n        }\n      });\n    }, 800);\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentWillUnmount() {\n    if (this.timerId) Meteor.clearInterval(this.timerId);\n  }\n\n  // handle apply\n  renderApplied() {\n    return (\n      <a onClick={this.handleClick}>\n        <Translation defaultValue=\"Discount submitted.\" i18nKey=\"discounts.submitted\"/>\n      </a>\n    );\n  }\n\n  // handle keydown and change events\n  handleChange(event) {\n    const { attempts } = this.state;\n    // ensure we don't submit on enter\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    // clear input if user hits escape key\n    if (event.keyCode === 27) {\n      return this.setState({ discount: \"\", validatedInput: false, attempts: 0, discountApplied: false, validationMessage: null });\n    }\n    this.setState({\n      discount: event.target.value,\n      attempts: attempts + 1\n    });\n    // TODO: this.debounce doesn't always need to exec we should add some logic to determine based on attempts or some other\n    // cleverness if now is a good time to apply the code.\n    this.debounceDiscounts();\n  }\n\n  // handle display or not\n  handleClick(event) {\n    event.preventDefault();\n    this.setState({ validatedInput: true });\n  }\n\n  // loader button\n  loader() {\n    const { attempts, discount, validationMessage } = this.state;\n    let loader;\n    if (validationMessage && validationMessage.i18nKeyLabel && attempts > 3) {\n      loader = <Translation defaultValue={validationMessage.i18nKeyLabel} i18nKey={validationMessage.i18nKey}/>;\n    } else if (validationMessage) {\n      loader = <i className=\"fa fa-ellipsis-h fa-fw\"/>;\n    } else {\n      if (discount && discount.length >= 10 && attempts >= 12) {\n        loader = <i className=\"fa fa-stop-circle fa-fw\"/>;\n      } else if (discount && discount.length >= 2 && attempts >= 2) {\n        loader = <i className=\"fa fa-circle-o-notch fa-spin fa-fw\"/>;\n      } else {\n        loader = <i className=\"fa fa-search fa-fw\"/>;\n      }\n    }\n\n    return loader;\n  }\n\n  // render discount form\n  renderDiscountForm() {\n    return (\n      <form>\n        <label htmlFor=\"discount-url\">\n          <Translation defaultValue=\"Discount Code\" i18nKey=\"discounts.discountLabel\"/>\n        </label>\n        <div className=\"input-group\">\n          <input\n            autoFocus\n            onChange={this.handleChange}\n            onKeyDown={this.handleChange}\n            className=\"form-control\"\n            id=\"discount-input\"\n            aria-describedby=\"discount-input-addon\"\n          />\n          <span className=\"input-group-addon\" id=\"discount-input-addon\">\n            {this.loader()}\n          </span>\n        </div>\n      </form>\n    );\n  }\n  // have a code link\n  renderDiscountLink() {\n    return (\n      <a onClick={this.handleClick}>\n        <Translation defaultValue=\"Have a code? Enter it here.\" i18nKey=\"discounts.enterItHere\"/>\n      </a>\n    );\n  }\n\n  // render discount code input form\n  render() {\n    const { discountApplied, validatedInput } = this.state;\n    if (discountApplied === true && validatedInput === true) {\n      return this.renderApplied();\n    } else if (validatedInput === true) {\n      return this.renderDiscountForm();\n    }\n    return this.renderDiscountLink();\n  }\n}\n\nDiscountForm.propTypes = {\n  collection: PropTypes.string,\n  discount: PropTypes.string,\n  id: PropTypes.string,\n  validatedInput: PropTypes.bool\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Translation, IconButton } from \"/imports/plugins/core/ui/client/components\";\nimport DiscountForm from \"./form\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction } from \"/client/api\";\n\nclass DiscountList extends Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  // handle remove click\n  handleClick(event, codeId) {\n    return Meteor.call(\"discounts/codes/remove\", this.props.id, codeId, this.props.collection);\n  }\n  // list items\n  renderList() {\n    const listItems = this.props.listItems.map((listItem) => {\n      return this.renderItem(listItem.id, listItem.code);\n    });\n\n    return (\n      <div className=\"rui list-group\">{listItems}</div>\n    );\n  }\n  // render item\n  renderItem(_id, code) {\n    let TrashCan;\n\n    if (this.props.collection !== \"Orders\") {\n      TrashCan =\n        <a className=\"pull-right\">\n          <IconButton icon=\"fa fa-remove\" onClick={(e) => this.handleClick(e, _id)}/>\n        </a>;\n    }\n    return (\n      <div className=\"rui list-group-item\" key={_id}>\n        <span>\n          {code}&nbsp;\n          <Translation defaultValue=\"code\" i18nKey={\"discounts.code\"} />&nbsp;\n          <Translation defaultValue=\"Discount applied\" i18nKey={\"discounts.applied\"} />\n        </span>\n        {TrashCan}\n      </div>\n    );\n  }\n\n  // load form input view\n  renderNoneFound() {\n    return (\n      <DiscountForm id={this.props.id} collection={this.props.collection} validatedInput={this.props.validatedInput} />\n    );\n  }\n\n  // render list view\n  render() {\n    const { listItems } = this.props;\n    return (listItems.length >= 1) ? this.renderList() : this.renderNoneFound();\n  }\n}\n\nDiscountList.propTypes = {\n  collection: PropTypes.string,\n  id: PropTypes.string,\n  listItems: PropTypes.array,\n  validatedInput: PropTypes.bool\n};\n\nfunction composer(props, onData) {\n  const currentCart = Reaction.Collections[props.collection].findOne({\n    _id: props.id\n  });\n\n  const listItems = [];\n  for (const billing of currentCart.billing) {\n    if (billing.paymentMethod && billing.paymentMethod.processor === \"code\") {\n      listItems.push({\n        id: billing._id,\n        code: billing.paymentMethod.code,\n        discount: billing.paymentMethod.amount\n      });\n    }\n  }\n\n  onData(null, {\n    collection: props.collection,\n    validatedInput: props.validatedInput,\n    id: props.id,\n    listItems: listItems\n  });\n}\n\n// export default composeWithTracker(composer)(DiscountList)\nconst options = {\n  propsToWatch: [\"billing\"]\n};\n\nlet discountListComponent = DiscountList;\ndiscountListComponent = composeWithTracker(composer, options)(discountListComponent);\n\nexport default discountListComponent;\n","/**\n * Validation class\n * @summary Helper to streamline getting simple-schema validation in react components\n */\nclass Validation {\n  /**\n   * Instantiate with a schema to validate against\n   * @param  {SimpleSchema} schema aldeed:simpleschema class\n   * @param  {Object} options extra options such as { pick: [\"fieldName\"] }\n   */\n  constructor(schema, options) {\n    if (options && options.pick) {\n      this.validationContext = schema.pick(options.pick).newContext();\n    } else {\n      this.validationContext = schema.namedContext();\n    }\n\n    this.schema = schema;\n    this.options = options;\n    this.validationStatus = {\n      isValid: undefined,\n      fields: {},\n      messages: {},\n      isFieldValid: this.isFieldValid\n    };\n  }\n\n  get cleanOptions() {\n    return this.options && this.options.cleanOptions || { getAutoValues: false };\n  }\n\n  /**\n   * validate\n   * @param  {Object} objectToValidate Object to validate against schema\n   * @return {Object} object containting {isValid: true|false, validationMessages: undefined|object}\n   */\n  validate(objectToValidate) {\n    const messages = {};\n    const fields = {};\n\n    // clean object, removing fields that aren't in the schema, and convert types\n    // based on schema\n    const cleanedObject = this.schema.clean(objectToValidate, this.cleanOptions);\n\n    // Validate the cleaned object\n    const isValid = this.validationContext.validate(cleanedObject);\n\n    // Avoiding the reactive-stuff built into simple-schema, grab invalid\n    // keys from the private var _invalidKeys, and create a new object with\n    // the validation error and message.\n    this.validationContext._invalidKeys\n      .forEach((validationError) => {\n        messages[validationError.name] = {\n          ...validationError,\n          isValid: false,\n          message: this.validationContext.keyErrorMessage(validationError.name)\n        };\n      });\n\n    for (const fieldName of Object.keys(cleanedObject)) {\n      const hasMessage = messages[fieldName];\n\n      fields[fieldName] = {\n        isValid: hasMessage ? false : true,\n        value: cleanedObject[fieldName]\n      };\n    }\n\n\n    // Set the current validation status of the validated object on class instance\n    this.validationStatus = {\n      isValid,\n      fields,\n      messages,\n      isFieldValid: this.isFieldValid\n    };\n\n    // Return object validation status, fields, and helpers\n    return this.validationStatus;\n  }\n\n  /**\n   * isFieldValid - get status of a field after running `validate`\n   * @param  {String} fieldName Name of field to check status\n   * @return {Boolean} `true` if valid / `false` if not valid / `undefined` if unknown or not yet tested\n   */\n  isFieldValid = (fieldName) => {\n    const field = this.validationStatus.fields[fieldName];\n    return field && field.isValid;\n  }\n}\n\nexport default Validation;\n","export { default as Validation } from \"./lib/validation\";\n","\n/**\n * Route Hook Methods\n */\nconst Hooks = {\n  _hooks: {\n    onEnter: {},\n    onExit: {}\n  },\n\n  _addHook(type, routeName, callback) {\n    if (typeof this._hooks[type][routeName] === \"undefined\") {\n      this._hooks[type][routeName] = [];\n    }\n    this._hooks[type][routeName].push(callback);\n  },\n\n  enter(callback) {\n    if (Array.isArray(callback)) {\n      callback.forEach((cb) => {\n        this.onEnter(cb);\n      });\n    } else {\n      this.onEnter(callback);\n    }\n  },\n\n  leave(callback) {\n    if (Array.isArray(callback)) {\n      callback.forEach((cb) => {\n        this.onExit(cb);\n      });\n    } else {\n      return this.onExit(callback);\n    }\n  },\n\n  onEnter(routeName, callback) {\n    // global onEnter callback\n    if (arguments.length === 1 && typeof arguments[0] === \"function\") {\n      const cb = routeName;\n      return this._addHook(\"onEnter\", \"GLOBAL\", cb);\n    }\n    // route-specific onEnter callback\n    return this._addHook(\"onEnter\", routeName, callback);\n  },\n\n  onExit(routeName, callback) {\n    // global onExit callback\n    if (arguments.length === 1 && typeof arguments[0] === \"function\") {\n      const cb = routeName;\n      return this._addHook(\"onExit\", \"GLOBAL\", cb);\n    }\n    // route-specific onExit callback\n    return this._addHook(\"onExit\", routeName, callback);\n  },\n\n  get(type, name) {\n    const group = this._hooks[type] || {};\n    const callbacks = group[name];\n    return (typeof callbacks !== \"undefined\" && !!callbacks.length) ? callbacks : [];\n  },\n\n  run(type, name, constant) {\n    const callbacks = this.get(type, name);\n    if (typeof callbacks !== \"undefined\" && !!callbacks.length) {\n      return callbacks.forEach((callback) => {\n        return callback(constant);\n      });\n    }\n    return null;\n  }\n};\n\nexport default Hooks;\n","export { default as Router } from \"./router\";\n","import React from \"react\";\nimport { Route } from \"react-router\";\nimport createBrowserHistory from \"history/createBrowserHistory\";\nimport createMemoryHistory from \"history/createMemoryHistory\";\nimport pathToRegexp from \"path-to-regexp\";\nimport queryParse from \"query-parse\";\nimport Immutable from \"immutable\";\nimport { uniqBy } from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport Blaze from \"meteor/gadicc:blaze-react-component\";\nimport { Template } from \"meteor/templating\";\nimport { Session } from \"meteor/session\";\nimport { Counts } from \"meteor/tmeasday:publish-counts\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Packages, Shops } from \"/lib/collections\";\nimport { getComponent } from \"/imports/plugins/core/layout/lib/components\";\nimport BlazeLayout from \"/imports/plugins/core/layout/lib/blazeLayout\";\nimport Hooks from \"./hooks\";\n\n\nexport let history;\n\n// Private vars\n// const currentRoute = new ReactiveVar({});\nlet currentRoute = Immutable.Map();\nconst routerReadyDependency = new Tracker.Dependency;\nconst routerChangeDependency = new Tracker.Dependency;\n\n// Create history object depending on if this is client or server\nif (Meteor.isClient) {\n  history = createBrowserHistory();\n} else {\n  history = createMemoryHistory();\n}\n\n// Base router class (static)\nclass Router {\n  static history = history\n  static Hooks = Hooks\n  static routes = []\n  static _initialized = false;\n  static activeClassName = \"active\";\n\n  static set _routes(value) {\n    Router.routes = value;\n  }\n\n  static get _routes() {\n    return Router.routes;\n  }\n\n  static ready() {\n    routerReadyDependency.depend();\n    return Router._initialized;\n  }\n\n  static triggerRouterReady() {\n    routerReadyDependency.changed();\n  }\n\n  static get triggers() {\n    return Hooks;\n  }\n\n  static current() {\n    return currentRoute.toJS();\n  }\n\n  static setCurrentRoute(routeData) {\n    currentRoute = Immutable.Map(routeData);\n    routerChangeDependency.changed();\n  }\n\n  static getRouteName() {\n    const current = Router.current();\n\n    return current.route && current.route.name || \"\";\n  }\n\n  static getParam(name) {\n    routerChangeDependency.depend();\n    const current = Router.current();\n\n    return current.params && current.params[name] || undefined;\n  }\n\n  static getQueryParam(name) {\n    routerChangeDependency.depend();\n    const current = Router.current();\n\n    return current.query && current.query[name] || undefined;\n  }\n\n  static setQueryParams(newParams) {\n    const current = Router.current();\n    const queryParams = Object.assign({}, current.query, newParams);\n\n    for (const key in queryParams) {\n      if (queryParams[key] === null || queryParams[key] === undefined) {\n        delete queryParams[key];\n      }\n    }\n\n    Router.go(current.route.name, current.params, queryParams);\n  }\n\n  static watchPathChange() {\n    routerChangeDependency.depend();\n  }\n}\n\n/**\n * pathFor\n * @summary get current router path\n * @param {String} path - path to fetch\n * @param {Object} options - url params\n * @return {String} returns current router path\n */\nRouter.pathFor = (path, options = {}) => {\n  // const params = options.hash || {};\n  // const query = params.query ? Router._qs.parse(params.query) : {};\n  // // prevent undefined param error\n  // for (const i in params) {\n  //   if (params[i] === null || params[i] === undefined) {\n  //     params[i] = \"/\";\n  //   }\n  // }\n  // return Router.path(path, params, query);\n\n  const foundPath = Router.routes.find((pathObject) => {\n    if (pathObject.options.name === path) {\n      return true;\n    }\n    return false;\n  });\n\n  if (foundPath) {\n    // Pull the hash out of options\n    //\n    // This is becuase of Spacebars that we have hash.\n    // Spacebars takes all params passed into a template tag and places\n    // them into the options.hash object. This will also include any `query` params\n    const hash = options && options.hash || {};\n\n    // Create an executable function based on the route regex\n    const toPath = pathToRegexp.compile(foundPath.route);\n\n    // Compile the regex path with the params from the hash\n    const compiledPath = toPath(hash);\n\n    // Convert the query object to a string\n    // e.g. { a: \"one\", b: \"two\"} => \"a=one&b=two\"\n    const queryString = queryParse.toString(hash.query);\n\n    // Return the compiled path + query string if we have one\n    if (typeof queryString === \"string\" && queryString.length) {\n      return `${compiledPath}?${queryString}`;\n    }\n\n    // Return only the compiled path\n    return compiledPath;\n  }\n\n  return \"/\";\n};\n\n\nRouter.go = (path, params, query) => {\n  let actualPath;\n\n  const routerGo = () => {\n    if (typeof path === \"string\" && path.startsWith(\"/\")) {\n      actualPath = path;\n    } else {\n      actualPath = Router.pathFor(path, {\n        hash: {\n          ...params,\n          query\n        }\n      });\n    }\n\n    if (window) {\n      history.push(actualPath);\n    }\n  };\n\n  // if Router is in a non ready/initialized state yet ,wait until it is\n  if (!Router.ready()) {\n    Tracker.autorun(routerReadyWaitFor => {\n      if (Router.ready()) {\n        routerReadyWaitFor.stop();\n        routerGo();\n      }\n    });\n\n    return;\n  }\n\n  routerGo();\n};\n\nRouter.replace = (path, params, query) => {\n  const actualPath = Router.pathFor(path, {\n    hash: {\n      ...params,\n      query\n    }\n  });\n\n  if (window) {\n    history.replace(actualPath);\n  }\n};\n\nRouter.reload = () => {\n  const current = Router.current();\n\n  if (window) {\n    history.replace(current.route.fullPath || \"/\");\n  }\n};\n\n/**\n * isActive\n * @summary general helper to return \"active\" when on current path\n * @example {{active \"name\"}}\n * @param {String} routeName - route name as defined in registry\n * @return {String} return \"active\" or null\n */\nRouter.isActiveClassName = (routeName) => {\n  const current = Router.current();\n  const group = current.route.group;\n  let prefix = \"\";\n\n  if (current.route) {\n    const path = current.route.path;\n\n    if (group && group.prefix) {\n      prefix = current.route.group.prefix;\n    }\n\n    // Match route\n    if (prefix.length && routeName.startsWith(prefix) && path === routeName) {\n      // Route name is a path and starts with the prefix. (default '/reaction')\n      return Router.activeClassName;\n    } else if (routeName.startsWith(\"/\") && path === routeName) {\n      // Route name isa  path and starts with slash, but was not prefixed\n      return Router.activeClassName;\n    } else if (current.route.name === routeName) {\n      // Route name is the actual name of the route\n      return Router.activeClassName;\n    }\n  }\n\n  return \"\";\n};\n\n/**\n * hasRoutePermission\n * check if user has route permissions\n * @param  {Object} route - route context\n * @return {Boolean} returns `true` if route is autoriized, `false` otherwise\n */\nfunction hasRoutePermission(route) {\n  const routeName = route.name;\n\n  if (routeName === \"index\" || routeName === \"not-found\") {\n    return true;\n  } else if (Router.Reaction.hasPermission(route.permissions, Meteor.userId())) {\n    return true;\n  }\n\n  return false;\n}\n\n\n/**\n * getRegistryRouteName\n * assemble route name to be standard\n * prefix/package name + registry name or route\n * @param  {String} packageName  [package name]\n * @param  {Object} registryItem [registry object]\n * @return {String}              [route name]\n */\nfunction getRegistryRouteName(packageName, registryItem) {\n  let routeName;\n  if (packageName && registryItem) {\n    if (registryItem.name) {\n      routeName = registryItem.name;\n    } else if (registryItem.template) {\n      routeName = `${packageName}/${registryItem.template}`;\n    } else {\n      routeName = packageName;\n    }\n    // dont include params in the name\n    routeName = routeName.split(\":\")[0];\n    return routeName;\n  }\n  return null;\n}\n\n/**\n * selectLayout\n * @param {Object} layout - element of shops.layout array\n * @param {Object} setLayout - layout\n * @param {Object} setWorkflow - workflow\n * @returns {Object} layout - return object of template definitions for Blaze Layout\n */\nfunction selectLayout(layout, setLayout, setWorkflow) {\n  const currentLayout = setLayout || Session.get(\"DEFAULT_LAYOUT\") || \"coreLayout\";\n  const currentWorkflow = setWorkflow || Session.get(\"DEFAULT_WORKFLOW\") || \"coreWorkflow\";\n  if (layout.layout === currentLayout && layout.workflow === currentWorkflow && layout.enabled === true) {\n    return layout;\n  }\n  return null;\n}\n\n/**\n * ReactionLayout\n * sets and returns reaction layout structure\n * @param {Object} options - this router context\n * @param {String} options.layout - string of shop.layout.layout (defaults to coreLayout)\n * @param {String} options.workflow - string of shop.layout.workflow (defaults to coreLayout)\n * @returns {Object} layout - return object of template definitions for Blaze Layout\n */\nexport function ReactionLayout(options = {}) {\n  // Find a workflow layout to render\n  // Get the current shop data\n  const shop = Shops.findOne(Router.Reaction.getShopId());\n\n  // get the layout & workflow from options if they exist\n  // Otherwise get them from the Session. this is set in `/client/config/defaults`\n  // Otherwise, default to hard-coded values\n  const layoutName = options.layout || Session.get(\"DEFAULT_LAYOUT\") || \"coreLayout\";\n  const workflowName = options.workflow || Session.get(\"DEFAULT_WORKFLOW\") || \"coreWorkflow\";\n\n  // Layout object used to render\n  // Defaults provided for reference\n  let layoutStructure = {\n    template: \"\",\n    layoutHeader: \"\",\n    layoutFooter: \"\",\n    notFound: \"notFound\",\n    dashboardHeader: \"\",\n    dashboardControls: \"\",\n    dashboardHeaderControls: \"\",\n    adminControlsFooter: \"\"\n  };\n\n  // Find a registered layout using the layoutName and workflowName\n  if (shop) {\n    const sortedLayout = shop.layout.sort((prev, next) => prev.priority - next.priority);\n    const foundLayout = sortedLayout.find((x) => selectLayout(x, layoutName, workflowName));\n\n    if (foundLayout && foundLayout.structure) {\n      layoutStructure = {\n        ...foundLayout.structure\n      };\n    }\n  }\n\n  // If the original options did not include a workflow, but did have a template,\n  // then we override the template from the layout with the one provided by the options.\n  //\n  // Why is this? We always need a workflow to render the entire layout of the app.\n  // The default layout has a default template that may not be the one we want to render.\n  // Some routes, such as `/account/profile` do no have a workflow, but define a template.\n  // Without the logic below, it would end up rendering the homepage instead of the profile\n  // page.\n  // const optionsHasWorkflow = typeof options.workflow === \"string\";\n  const optionsHasTemplate = typeof options.template === \"string\";\n\n  if (optionsHasTemplate) {\n    layoutStructure.template = options.template;\n  }\n\n  // If there is no Blaze Template (Template[]) or React Component (getComponent)\n  // Then use the notFound template instead\n  if (!Template[layoutStructure.template] && !getComponent(layoutStructure.template)) {\n    return (\n      <Blaze template={layoutStructure.notFound} />\n    );\n  }\n\n  // Render the layout\n  return {\n    structure: layoutStructure,\n    component: (props) => { // eslint-disable-line react/no-multi-comp, react/display-name\n      const route = Router.current().route;\n      const permissions = options.permissions;\n      const structure = {\n        ...layoutStructure\n      };\n\n      // If the current route is unauthorized, and is not the \"not-found\" route,\n      // then override the template to use the default unauthroized template\n      if (hasRoutePermission({ ...route, permissions }) === false && route.name !== \"not-found\") {\n        structure.template = \"unauthorized\";\n      }\n\n      if (getComponent(layoutName)) {\n        return React.createElement(getComponent(layoutName), {\n          ...props,\n          structure: structure\n        });\n      } else if (Template[layoutName]) {\n        return (\n          <BlazeLayout\n            {...structure}\n            blazeTemplate={layoutName}\n          />\n        );\n      }\n\n      return <Blaze template={structure.notFound} />;\n    }\n  };\n}\n\n/**\n * initPackageRoutes\n * registers route and template when registry item has\n * registryItem.route && registryItem.template\n * @param {Object} options - options and context for route creation\n * @returns {undefined} returns undefined\n */\nRouter.initPackageRoutes = (options) => {\n  // make _initialized = false in case router is reinitialized\n  Router._initialized = false;\n  routerReadyDependency.changed();\n\n  Router.Reaction = options.reactionContext;\n  Router.routes = [];\n\n  const pkgs = Packages.find().fetch();\n  const prefix = Router.Reaction.getShopPrefix();\n  const routeDefinitions = [];\n\n  // prefixing isnt necessary if we only have one shop\n  // but we need to bypass the current\n  // subscription to determine this.\n  const shopSub = Meteor.subscribe(\"shopsCount\");\n\n  Tracker.autorun(shopSubWaitFor => {\n    if (shopSub.ready()) {\n      shopSubWaitFor.stop();\n      // using tmeasday:publish-counts\n      const shopCount = Counts.get(\"shops-count\");\n\n      // Default layouts\n      const indexLayout = ReactionLayout(options.indexRoute);\n      const notFoundLayout = ReactionLayout({ template: \"notFound\" });\n\n      // Index route\n      routeDefinitions.push({\n        route: \"/\",\n        name: \"index\",\n        options: {\n          name: \"index\",\n          ...options.indexRoute,\n          component: indexLayout.component,\n          structure: indexLayout.structure\n        }\n      });\n\n      // Not found route\n      routeDefinitions.push({\n        route: \"/not-found\",\n        name: \"not-found\",\n        options: {\n          name: \"not-found\",\n          ...notFoundLayout.indexRoute,\n          component: notFoundLayout.component,\n          structure: notFoundLayout.structure\n        }\n      });\n\n      // get package registry route configurations\n      for (const pkg of pkgs) {\n        const newRoutes = [];\n        // pkg registry\n        if (pkg.registry && pkg.enabled) {\n          const registry = Array.from(pkg.registry);\n          for (const registryItem of registry) {\n            // registryItems\n            if (registryItem.route) {\n              const {\n                meta,\n                route,\n                permissions,\n                template,\n                layout,\n                workflow\n              } = registryItem;\n\n              // get registry route name\n              const name = getRegistryRouteName(pkg.name, registryItem);\n\n              // define new route\n              // we could allow the options to be passed in the registry if we need to be more flexible\n              const reactionLayout = ReactionLayout({ template, workflow, layout, permissions });\n              const newRouteConfig = {\n                route,\n                name,\n                options: {\n                  meta,\n                  name,\n                  template,\n                  layout,\n                  triggersEnter: Router.Hooks.get(\"onEnter\", name),\n                  triggersExit: Router.Hooks.get(\"onExit\", name),\n                  component: reactionLayout.component,\n                  structure: reactionLayout.structure\n                }\n              };\n\n              // push new routes\n              newRoutes.push(newRouteConfig);\n            } // end registryItems\n          } // end package.registry\n\n          //\n          // add group and routes to routing table\n          //\n          for (const route of newRoutes) {\n            // allow overriding of prefix in route definitions\n            // define an \"absolute\" url by excluding \"/\"\n            route.group = {};\n\n            if (route.route.substring(0, 1) !== \"/\") {\n              route.route = \"/\" + route.route;\n              route.group.prefix = \"\";\n            } else if (shopCount <= 1) {\n              route.group.prefix = \"\";\n            } else {\n              route.group.prefix = prefix;\n              route.route = `${prefix}${route.route}`;\n            }\n\n            routeDefinitions.push(route);\n          }\n        }\n      } // end package loop\n\n      // Uniq-ify routes\n      // Take all route definitions in the order that were received, and reverse it.\n      // Routes defined later, like in the case of custom routes will then have a\n      // higher precedence. Any duplicates after the first instance will be removed.\n      //\n      // TODO: In the future, sort by priority\n      // TODO: Allow duplicated routes with a prefix / suffix / flag\n      const uniqRoutes = uniqBy(routeDefinitions.reverse(), \"route\");\n      const reactRouterRoutes = uniqRoutes.map((route, index) => {\n        return (\n          <Route\n            key={`${route.name}-${index}`}\n            path={route.route}\n            exact={true}\n            render={route.options.component}\n          />\n        );\n      });\n\n      Router._initialized = true;\n      Router.reactComponents = reactRouterRoutes;\n      Router._routes = uniqRoutes;\n\n      routerReadyDependency.changed();\n    }\n  });\n};\n\n\nexport default Router;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Reaction, Router } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport ToolbarContainer from \"/imports/plugins/core/dashboard/client/containers/toolbarContainer\";\nimport Toolbar from \"/imports/plugins/core/dashboard/client/components/toolbar\";\nimport { ActionViewContainer, PackageListContainer } from \"/imports/plugins/core/dashboard/client/containers\";\nimport { ActionView, ShortcutBar } from \"/imports/plugins/core/dashboard/client/components\";\n\nconst ConnectedToolbarComponent = ToolbarContainer(Toolbar);\nconst ConnectedAdminViewComponent = ActionViewContainer(ActionView);\nconst ConnectedShortcutBarContainer = PackageListContainer(ShortcutBar);\n\nconst styles = {\n  customerApp: {\n    width: \"100%\"\n  },\n  adminApp: {\n    width: \"100%\",\n    height: \"100vh\",\n    display: \"flex\",\n    overflow: \"hidden\"\n  },\n  adminContentContainer: {\n    flex: \"1 1 auto\",\n    height: \"100vh\"\n  },\n  adminContainer: {\n    display: \"flex\",\n    flex: \"1 1 auto\"\n  },\n  scrollableContainer: {\n    overflow: \"auto\"\n  }\n};\n\nclass App extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n    currentRoute: PropTypes.object.isRequired,\n    hasDashboardAccess: PropTypes.bool,\n    isActionViewOpen: PropTypes.bool\n  }\n\n  get isAdminApp() {\n    return this.props.hasDashboardAccess;\n  }\n\n  renderAdminApp() {\n    const pageClassName = classnames({\n      \"admin\": true,\n      \"page\": true,\n      \"show-settings\": this.props.isActionViewOpen\n    });\n\n    const currentRoute = this.props.currentRoute;\n    const routeOptions = currentRoute.route && currentRoute.route.options || {};\n    const routeData = routeOptions && currentRoute.route.options.structure || {};\n\n    return (\n      <div\n        style={styles.adminApp}\n      >\n        <div className={pageClassName} id=\"reactionAppContainer\" style={styles.adminContentContainer}>\n          <div className=\"reaction-toolbar\">\n            <ConnectedToolbarComponent data={routeData} />\n          </div>\n          <div style={styles.scrollableContainer}>\n            {this.props.children}\n          </div>\n        </div>\n        {this.props.hasDashboardAccess && <ConnectedAdminViewComponent />}\n        {this.props.hasDashboardAccess && <ConnectedShortcutBarContainer />}\n      </div>\n    );\n  }\n\n  render() {\n    const pageClassName = classnames({\n      \"admin\": true,\n      \"show-settings\": this.props.isActionViewOpen\n    });\n\n    const currentRoute = this.props.currentRoute;\n    const layout = currentRoute.route.options.layout;\n\n    if (this.isAdminApp && layout !== \"printLayout\") {\n      return this.renderAdminApp();\n    }\n\n    return (\n      <div\n        className={pageClassName}\n        style={styles.customerApp}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  onData(null, {\n    isActionViewOpen: Reaction.isActionViewOpen(),\n    hasDashboardAccess: Reaction.hasDashboardAccess(),\n    currentRoute: Router.current()\n  });\n}\n\nexport default composeWithTracker(composer, Loading)(App);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactDOM from \"react-dom\";\nimport { matchPath } from \"react-router\";\nimport { Router as ReactRouter } from \"react-router-dom\";\nimport { Reaction } from \"/client/api\";\nimport pathToRegexp from \"path-to-regexp\";\nimport { isEqual } from \"lodash\";\nimport queryParse from \"query-parse\";\nimport { Session } from \"meteor/session\";\nimport { Tracker } from \"meteor/tracker\";\nimport App from \"/imports/plugins/core/router/client/app\";\nimport { Router } from \"../lib\";\nimport { MetaData } from \"/lib/api/router/metadata\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\n\nconst history = Router.history;\n\nclass BrowserRouter extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n    history: PropTypes.object,\n    store: PropTypes.object\n  }\n\n  static contextTypes = {\n    store: PropTypes.object\n  }\n\n  componentWillMount() {\n    this.unsubscribeFromHistory = history.listen(this.handleLocationChange);\n    this.handleLocationChange(history.location);\n  }\n\n  componentWillUnmount() {\n    if (this.unsubscribeFromHistory) this.unsubscribeFromHistory();\n  }\n\n  handleLocationChange = location => {\n    // Find all matching paths\n    const foundPaths = Router.routes.filter((pathObject) => {\n      return matchPath(location.pathname, {\n        path: pathObject.route,\n        exact: true\n      });\n    });\n\n    // If no matching pathis, redirect to the not found page\n    if (foundPaths.length === 0 && location.pathname !== \"not-found\") {\n      Router.replace(\"not-found\");\n      return undefined;\n    }\n\n    // If we have a found path, take the first match\n    const foundPath = foundPaths.length && foundPaths[0];\n    const params = {};\n\n    // Process the params from the found path definiton\n    if (foundPath) {\n      const keys = [];\n      const re = pathToRegexp(foundPath.route, keys); // Create parser with route regex\n      const values = re.exec(location.pathname); // Process values\n\n      // Create params object\n      keys.forEach((key, index) => {\n        params[key.name] = values[index + 1];\n      });\n    }\n\n    // Get serach (query) string from current location\n    let search = location.search;\n\n    // Remove the ? if it exists at the beginning\n    if (typeof search === \"string\" && search.startsWith(\"?\")) {\n      search = search.substr(1);\n    }\n\n    // Create objext of all necessary data for the current route\n    const routeData = {\n      route: {\n        ...foundPath,\n        name: foundPath.name,\n        path: location.pathname,\n        fullPath: `${location.pathname}${location.search}`\n      },\n      params,\n      query: queryParse.toObject(search), // Parse query string into object\n      payload: location\n    };\n\n    // Get the previousroute, which is the currentRoute just before it changes\n    const previousRoute = Router.current();\n\n    // If it seems like we've moved to a differen route, then run the onExit\n    // hooks for the previousRoute\n    const routesAreSame = isEqual(previousRoute.route, routeData.route);\n    const paramsAreSame = isEqual(previousRoute.params, routeData.params);\n    const queryParamsAreSame = isEqual(previousRoute.query, routeData.query);\n\n    const routesDiffer = routesAreSame && paramsAreSame && queryParamsAreSame;\n\n    if (routesDiffer === false) {\n      // Run on enter hooks\n      Router.Hooks.run(\"onExit\", \"GLOBAL\", routeData);\n      Router.Hooks.run(\"onExit\", previousRoute.name, previousRoute);\n\n      // Set current route reactive-var\n      Router.setCurrentRoute(routeData);\n\n      // Run on enter hooks for the new route\n      Router.Hooks.run(\"onEnter\", \"GLOBAL\", routeData);\n      Router.Hooks.run(\"onEnter\", routeData.name, routeData);\n    }\n  }\n\n  render() {\n    return (\n      <ReactRouter {...this.props} />\n    );\n  }\n}\n\nexport function getRootNode() {\n  let rootNode = document.getElementById(\"react-root\");\n\n  if (rootNode) {\n    return rootNode;\n  }\n  const rootNodeHtml = \"<div id='react-root'></div>\";\n  const body = document.getElementsByTagName(\"body\")[0];\n\n  body.insertAdjacentHTML(\"beforeend\", rootNodeHtml);\n  rootNode = document.getElementById(\"react-root\");\n\n  return rootNode;\n}\n\nexport function initBrowserRouter() {\n  Router.initPackageRoutes({\n    reactionContext: Reaction,\n    indexRoute: Session.get(\"INDEX_OPTIONS\") || {}\n  });\n\n  Router.Hooks.onEnter(MetaData.init);\n\n  Tracker.autorun(() => {\n    if (Router.ready()) {\n      ReactDOM.render((\n        <BrowserRouter history={history}>\n          <TranslationProvider>\n            <App children={Router.reactComponents} />\n          </TranslationProvider>\n        </BrowserRouter>\n      ), getRootNode());\n    }\n  });\n}\n\nexport default BrowserRouter;\n","import \"./startup\";\n","import { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Reaction } from \"/client/api\";\nimport { initBrowserRouter } from \"./browserRouter\";\nimport { Router } from \"../lib\";\n\nMeteor.startup(function () {\n  Tracker.autorun(function () {\n    // initialize client routing\n\n    if (Reaction.Subscriptions.Packages.ready() && Reaction.Subscriptions.Shops.ready()) {\n      //  initBrowserRouter calls Router.initPackageRoutes which calls shopSub.ready which is reactive,\n      //  So we have to call initBrowserRouter in a non reactive context.\n      //  Otherwise initBrowserRouter is called twice each time a Reaction.Subscriptions.Packages.ready() and\n      //  Reaction.Subscriptions.Shops.ready() are true\n\n      Tracker.nonreactive(()=> {\n        initBrowserRouter();\n      });\n    }\n  });\n\n  //\n  // we need to sometimes force\n  // router reload on login to get\n  // the entire layout to rerender\n  // we only do this when the routes table\n  // has already been generated (existing user)\n  //\n  Accounts.onLogin(() => {\n    if (Meteor.loggingIn() === false && Router._routes.length > 0) {\n      initBrowserRouter();\n    }\n  });\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  CardGroup,\n  CardToolbar,\n  FlatButton,\n  Form,\n  List,\n  ListItem,\n  SettingsCard\n} from \"/imports/plugins/core/ui/client/components\";\n\nimport { Shop as ShopSchema } from \"/lib/collections/schemas/shops\";\n\nconst PACKAGE_NAME = \"reaction-i18n\";\n\nclass LocalizationSettings extends Component {\n  static propTypes = {\n    currencies: PropTypes.array,\n    currencyOptions: PropTypes.array,\n    enabledLanguages: PropTypes.array,\n    languages: PropTypes.array,\n    onEnableAllCurrencies: PropTypes.func,\n    onEnableAllLanguages: PropTypes.func,\n    onUpdateCurrencyConfiguration: PropTypes.func,\n    onUpdateLanguageConfiguration: PropTypes.func,\n    onUpdateLocalization: PropTypes.func,\n    shop: PropTypes.object, // Shop data\n    timezoneOptions: PropTypes.array,\n    uomOptions: PropTypes.array\n  }\n\n  renderCurrencies() {\n    return this.props.currencies.map((currency, key) => {\n      return (\n        <ListItem\n          actionType={\"switch\"}\n          key={key}\n          label={currency.label}\n          switchOn={currency.enabled}\n          switchName={currency.name}\n          onSwitchChange={this.props.onUpdateCurrencyConfiguration}\n        />\n      );\n    });\n  }\n\n  renderLanguages() {\n    return this.props.languages.map((language, key) => {\n      return (\n        <ListItem\n          actionType={\"switch\"}\n          key={key}\n          label={language.label}\n          switchOn={language.enabled}\n          switchName={language.value}\n          onSwitchChange={this.props.onUpdateLanguageConfiguration}\n        />\n      );\n    });\n  }\n\n  handleSubmit = (event, formData) => {\n    if (typeof this.props.onUpdateLocalization === \"function\") {\n      this.props.onUpdateLocalization(formData.doc);\n    }\n  }\n\n  handleAllOn = (event, name) => {\n    if (name === \"language\") {\n      if (typeof this.props.onEnableAllLanguages === \"function\") {\n        this.props.onEnableAllLanguages(true);\n      }\n    } else if (name === \"currency\") {\n      if (typeof this.props.onEnableAllCurrencies === \"function\") {\n        this.props.onEnableAllCurrencies(true);\n      }\n    }\n  }\n\n  handleAllOff = (event, name) => {\n    if (name === \"language\") {\n      if (typeof this.props.onEnableAllLanguages === \"function\") {\n        this.props.onEnableAllLanguages(false);\n      }\n    } else if (name === \"currency\") {\n      if (typeof this.props.onEnableAllCurrencies === \"function\") {\n        this.props.onEnableAllCurrencies(false);\n      }\n    }\n  }\n\n  renderListControls(name) {\n    return (\n      <CardToolbar>\n        <FlatButton\n          i18nKeyLabel={\"admin.i18nSettings.allOn\"}\n          label=\"All On\"\n          value={name}\n          onClick={this.handleAllOn}\n        />\n        { \"|\" }\n        <FlatButton\n          i18nKeyLabel={\"admin.i18nSettings.allOff\"}\n          label=\"All Off\"\n          value={name}\n          onClick={this.handleAllOff}\n        />\n      </CardToolbar>\n    );\n  }\n\n  render() {\n    return (\n      <CardGroup>\n        <SettingsCard\n          i18nKeyTitle=\"admin.i18nSettings.shopLocalization\"\n          name=\"localization\"\n          packageName={PACKAGE_NAME}\n          saveOpenStateToPreferences={true}\n          showSwitch={false}\n          title=\"Shop Localization\"\n        >\n          <Form\n            autoSave={true}\n            schema={ShopSchema}\n            doc={this.props.shop}\n            fields={{\n              timezone: {\n                type: \"select\",\n                options: this.props.timezoneOptions\n              },\n              currency: {\n                type: \"select\",\n                options: this.props.currencyOptions\n              },\n              baseUOM: {\n                type: \"select\",\n                options: this.props.uomOptions\n              },\n              language: {\n                type: \"select\",\n                options: this.props.enabledLanguages\n              }\n            }}\n            name=\"localization\"\n            onSubmit={this.handleSubmit}\n          />\n        </SettingsCard>\n        <SettingsCard\n          i18nKeyTitle=\"admin.i18nSettings.enabledLanguages\"\n          name=\"languages\"\n          padded={false}\n          packageName={PACKAGE_NAME}\n          saveOpenStateToPreferences={true}\n          showSwitch={false}\n          title=\"Languages\"\n        >\n          {this.renderListControls(\"language\")}\n          <List>\n            {this.renderLanguages()}\n          </List>\n        </SettingsCard>\n        <SettingsCard\n          i18nKeyTitle=\"admin.i18nSettings.enabledCurrencies\"\n          padded={false}\n          packageName={PACKAGE_NAME}\n          name=\"currencies\"\n          saveOpenStateToPreferences={true}\n          showSwitch={false}\n          title=\"Currencies\"\n        >\n          {this.renderListControls(\"currency\")}\n          <List>\n            {this.renderCurrencies()}\n          </List>\n        </SettingsCard>\n      </CardGroup>\n    );\n  }\n}\n\nexport default LocalizationSettings;\n","import React, { Component } from \"react\";\nimport moment from \"moment-timezone\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Countries } from \"/client/collections\";\nimport { Shops } from \"/lib/collections\";\nimport LocalizationSettings from \"../components/localizationSettings\";\n\nclass LocalizationSettingsContainer extends Component {\n  static propTypes = LocalizationSettings.propTypes\n\n  handleUpdateLanguageConfiguration = (event, isChecked, name) => {\n    const language = this.props.languages.find((l) => l.value === name);\n\n    if (language) {\n      Meteor.call(\"shop/updateLanguageConfiguration\", language.value, isChecked);\n    }\n  }\n\n  handleUpdateCurrencyConfiguration = (event, isChecked, name) => {\n    Meteor.call(\"shop/updateCurrencyConfiguration\", name, isChecked);\n  }\n\n  handleSubmit = (doc) => {\n    Shops.update({\n      _id: doc._id\n    }, {\n      $set: {\n        timezone: doc.timezone,\n        currency: doc.currency,\n        baseUOM: doc.baseUOM,\n        language: doc.language\n      }\n    });\n  }\n\n  handleEnableAllLanguages = (isEnabled) => {\n    Meteor.call(\"shop/updateLanguageConfiguration\", \"all\", isEnabled);\n  }\n\n  handleEnableAllCurrencies = (isEnabled) => {\n    Meteor.call(\"shop/updateCurrencyConfiguration\", \"all\", isEnabled);\n  }\n\n  render() {\n    return (\n      <LocalizationSettings\n        {...this.props}\n        onEnableAllCurrencies={this.handleEnableAllCurrencies}\n        onEnableAllLanguages={this.handleEnableAllLanguages}\n        onUpdateCurrencyConfiguration={this.handleUpdateCurrencyConfiguration}\n        onUpdateLanguageConfiguration={this.handleUpdateLanguageConfiguration}\n        onUpdateLocalization={this.handleSubmit}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const languages = [];\n  const shop = Shops.findOne();\n  const countries = Countries.find().fetch();\n  const preferences = Reaction.getUserPreferences(\"reaction-i18n\", \"settingsCards\", {});\n\n  if (typeof shop === \"object\" && shop.languages) {\n    for (const language of shop.languages) {\n      const i18nKey = \"languages.\" + language.label.toLowerCase();\n      languages.push({\n        label: language.label,\n        value: language.i18n,\n        enabled: (language.i18n === shop.language || language.enabled),\n        i18nKey: i18nKey\n      });\n    }\n  }\n\n  const currencies = shop.currencies;\n  const currencyList = [];\n  const currencyOptions = [];\n  for (const currency in currencies) {\n    if ({}.hasOwnProperty.call(currencies, currency)) {\n      if (currency === \"updatedAt\") {\n        continue;\n      }\n\n      const structure = currencies[currency];\n      const label = currency + \"  |  \" + structure.symbol + \"  |  \" +\n        structure.format;\n\n      currencyList.push({\n        name: currency,\n        label,\n        enabled: (structure.enabled || currency === shop.currency)\n      });\n\n      if (structure.enabled || currency === shop.currency) {\n        currencyOptions.push({\n          label,\n          value: currency\n        });\n      }\n    }\n  }\n\n\n  const unitsOfMeasure = Shops.findOne().unitsOfMeasure;\n  const uomOptions = [];\n  for (const measure of unitsOfMeasure) {\n    uomOptions.push({\n      label: i18next.t(`uom.${measure.uom}`, { defaultValue: measure.uom }),\n      value: measure.uom\n    });\n  }\n\n  const label = i18next.t(\"app.timezoneOptions\", \"Choose timezone\");\n  const timezoneOptions = [{\n    value: \"\",\n    label: label\n  }];\n  const timezones = moment.tz.names();\n  for (const timezone of timezones) {\n    timezoneOptions.push({\n      value: timezone,\n      label: timezone\n    });\n  }\n\n  onData(null, {\n    preferences,\n    shop,\n    languages,\n    currencies: currencyList,\n    enabledLanguages: languages.filter(language => (language.enabled || language.value === shop.language)),\n    countryOptions: countries,\n    currencyOptions,\n    uomOptions,\n    timezoneOptions\n  });\n}\n\nconst decoratedComponent = composeWithTracker(composer)(LocalizationSettingsContainer);\n\nexport default decoratedComponent;\n","import LocalizationSettingsContainer from \"./containers/localizationSettingsContainer\";\nimport { registerComponent } from \"/imports/plugins/core/layout/lib/components\";\n\nregisterComponent({\n  name: \"i18nSettings\",\n  component: LocalizationSettingsContainer\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport update from \"react/lib/update\";\nimport TagGroupBody from \"./tagGroupBody\";\nimport TagGroupHeader from \"./tagGroupHeader\";\nimport { TagItem } from \"/imports/plugins/core/ui/client/components/tags/\";\nimport { TagHelpers } from \"/imports/plugins/core/ui-tagnav/client/helpers\";\nimport { getTagIds } from \"/lib/selectors/tags\";\nimport { Router } from \"/client/api\";\n\nclass TagGroup extends Component {\n  constructor(props) {\n    super(props);\n\n    const { parentTag, tagsByKey, tagIds } = props.tagGroupProps;\n    this.state = {\n      suggestions: [],\n      newTag: {\n        name: \"\"\n      },\n      tagIds,\n      parentTag,\n      tagsByKey\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { parentTag, tagsByKey, tagIds } = nextProps.tagGroupProps;\n    this.setState({ tagIds, parentTag, tagsByKey });\n  }\n\n  get tags() {\n    if (this.props.editable) {\n      return this.state.tagIds.map((tagId) => this.state.tagsByKey[tagId]);\n    }\n\n    return this.props.tagGroupProps.subTagGroups;\n  }\n\n  get className() {\n    if (this.props.blank) {\n      return \"create\";\n    }\n    return \"\";\n  }\n\n  handleGetSuggestions = (suggestionUpdateRequest) => {\n    const suggestions = TagHelpers.updateSuggestions(\n      suggestionUpdateRequest.value,\n      { excludeTags: this.state.tagIds }\n    );\n\n    this.setState({ suggestions });\n  }\n\n  handleClearSuggestions = () => {\n    this.setState({ suggestions: [] });\n  }\n\n  handleNewTagSave = (event, tag) => {\n    if (this.props.onNewTagSave) {\n      this.props.onNewTagSave(tag, this.props.tagGroupProps.parentTag);\n      this.setState({\n        newTag: { name: \"\" }\n      });\n    }\n  }\n\n  handleTagUpdate = (event, tag) => {\n    const newState = update(this.state, {\n      tagsByKey: {\n        [tag._id]: {\n          $set: tag\n        }\n      }\n    });\n\n    this.setState(newState);\n  }\n\n  handleNewTagUpdate = (event, tag) => { // updates blank tag state being edited\n    this.setState({ newTag: tag });\n  }\n\n  tagGroupBodyProps = (tag) => {\n    const subTagGroups = _.compact(TagHelpers.subTags(tag));\n    const tagsByKey = {};\n\n    if (Array.isArray(subTagGroups)) {\n      for (const tagItem of subTagGroups) {\n        tagsByKey[tagItem._id] = tagItem;\n      }\n    }\n\n    return {\n      parentTag: tag,\n      tagsByKey: tagsByKey || {},\n      tagIds: getTagIds({ tags: subTagGroups }) || [],\n      subTagGroups\n    };\n  }\n\n  renderTree(tags) {\n    if (Array.isArray(tags)) {\n      return tags.map((tag) => (\n        <div className={`rui grouptag ${this.className}`} data-id={tag._id} key={tag._id}>\n          <TagGroupHeader\n            {...this.props}\n            tag={tag}\n            parentTag={this.state.parentTag}\n            onTagRemove={this.props.onTagRemove}\n          />\n          <TagGroupBody\n            {...this.props}\n            tagGroupBodyProps={this.tagGroupBodyProps(tag)}\n          />\n        </div>\n      ));\n    }\n  }\n\n  render() {\n    const slug = this.state.parentTag.slug;\n    const url = Router.pathFor(\"tag\", {\n      hash: {\n        slug: slug\n      }\n    });\n    return (\n      <div className=\"rui tagtree\">\n        <div className=\"header\">\n          <span className=\"title\">{this.state.parentTag.name}</span>\n          <a href={url}>View All <i className=\"fa fa-angle-right\" /></a>\n        </div>\n        <div className=\"content\">\n          {this.renderTree(this.tags)}\n          {this.props.editable &&\n            <div className=\"rui grouptag create\">\n              <div className=\"header\">\n                <TagItem\n                  blank={true}\n                  tag={this.state.newTag}\n                  key=\"newTagForm\"\n                  inputPlaceholder=\"Add Tag\"\n                  i18nKeyInputPlaceholder=\"tags.addTag\"\n                  suggestions={this.state.suggestions}\n                  onClearSuggestions={this.handleClearSuggestions}\n                  onGetSuggestions={this.handleGetSuggestions}\n                  onTagInputBlur={this.handleNewTagSave}\n                  onTagSave={this.handleNewTagSave}\n                  onTagUpdate={this.handleNewTagUpdate}\n                />\n              </div>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nTagGroup.propTypes = {\n  blank: PropTypes.bool,\n  editable: PropTypes.bool,\n  onNewTagSave: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  tagGroupProps: PropTypes.object\n};\n\nexport default TagGroup;\n","import debounce from \"lodash/debounce\";\nimport _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport update from \"react/lib/update\";\nimport PropTypes from \"prop-types\";\nimport { TagItem } from \"/imports/plugins/core/ui/client/components/tags/\";\n\nclass TagGroupBody extends Component {\n  constructor(props) {\n    super(props);\n\n    const { parentTag, tagsByKey, tagIds } = props.tagGroupBodyProps;\n    this.state = {\n      suggestions: [],\n      newTag: {\n        name: \"\"\n      },\n      tagIds,\n      parentTag,\n      tagsByKey\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { parentTag, tagsByKey, tagIds } = nextProps.tagGroupBodyProps;\n    this.setState({ tagIds, parentTag, tagsByKey });\n  }\n\n  handleNewTagSave = (event, tag) => {\n    if (this.props.onNewTagSave) {\n      this.props.onNewTagSave(tag, this.state.parentTag);\n      this.setState({\n        newTag: { name: \"\" }\n      });\n    }\n  }\n\n  handleTagUpdate = (event, tag) => {\n    const newState = update(this.state, {\n      tagsByKey: {\n        [tag._id]: {\n          $set: tag\n        }\n      }\n    });\n\n    this.setState(newState);\n  }\n\n  handleNewTagUpdate = (event, tag) => { // updates blank tag state being edited\n    this.setState({ newTag: tag });\n  }\n\n  handleGetSuggestions = (suggestionUpdateRequest) => {\n    const suggestions = this.props.updateSuggestions(\n      suggestionUpdateRequest.value,\n      { excludeTags: this.state.tagIds }\n    );\n\n    this.setState({ suggestions });\n  }\n\n  handleClearSuggestions = () => {\n    this.setState({ suggestions: [] });\n  }\n\n  handleMoveTag = (dragIndex, hoverIndex) => {\n    const tag = this.state.tagIds[dragIndex];\n    if (!tag) {\n      return false;\n    }\n    // Apply new sort order to variant list\n    const newState = update(this.state, {\n      tagIds: {\n        $splice: [\n          [dragIndex, 1],\n          [hoverIndex, 0, tag]\n        ]\n      }\n    });\n\n    // Set local state so the component does't have to wait for a round-trip\n    // to the server to get the updated list of variants\n    this.setState(newState, () => {\n      debounce(() => this.props.onTagSort(this.state.tagIds, this.state.parentTag), 500)();\n    });\n  }\n\n  handleTagSave = (event, tag) => {\n    if (this.props.onUpdateTag) {\n      this.props.onUpdateTag(tag._id, tag.name, this.state.parentTag._id);\n    }\n  }\n\n  get tags() {\n    if (this.props.editable) {\n      return this.state.tagIds.map((tagId) => this.state.tagsByKey[tagId]);\n    }\n\n    return this.props.tagGroupBodyProps.subTagGroups;\n  }\n\n  genTagsList(tags, parentTag) {\n    if (Array.isArray(tags)) {\n      return tags.map((tag, index) => {\n        return (\n          <TagItem\n            tag={tag}\n            index={index}\n            key={index}\n            data-id={tag._id}\n            editable={this.props.editable}\n            isSelected={this.isSelected}\n            parentTag={parentTag}\n            draggable={true}\n            selectable={true}\n            suggestions={this.state.suggestions}\n            onClearSuggestions={this.handleClearSuggestions}\n            onGetSuggestions={this.handleGetSuggestions}\n            onMove={this.handleMoveTag}\n            onTagInputBlur={this.handleTagSave}\n            onTagMouseOut={this.handleTagMouseOut}\n            onTagMouseOver={this.handleTagMouseOver}\n            onTagRemove={this.props.onTagRemove}\n            onTagSave={this.handleTagSave}\n            onTagSelect={this.onTagSelect}\n            onTagUpdate={this.handleTagUpdate}\n            onTagClick={this.props.onTagClick}\n          />\n        );\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"content\">\n        <div className=\"rui tags\" data-id={this.state.parentTag._id}>\n          {this.genTagsList(_.compact(this.tags), this.state.parentTag)}\n          {this.props.editable &&\n            <div className=\"rui item create\">\n              <TagItem\n                blank={true}\n                key=\"newTagForm\"\n                tag={this.state.newTag}\n                inputPlaceholder=\"Add Tag\"\n                i18nKeyInputPlaceholder=\"tags.addTag\"\n                suggestions={this.state.suggestions}\n                onClearSuggestions={this.handleClearSuggestions}\n                onGetSuggestions={this.handleGetSuggestions}\n                onMoveTag={this.handleMoveTag}\n                onTagInputBlur={this.handleNewTagSave}\n                onTagSave={this.handleNewTagSave}\n                onTagUpdate={this.handleNewTagUpdate}\n              />\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nTagGroupBody.propTypes = {\n  editable: PropTypes.bool,\n  onNewTagSave: PropTypes.func,\n  onTagClick: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  onTagSort: PropTypes.func,\n  onUpdateTag: PropTypes.func,\n  tagGroupBodyProps: PropTypes.object,\n  updateSuggestions: PropTypes.func\n};\n\nexport default TagGroupBody;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TagItem } from \"/imports/plugins/core/ui/client/components/tags/\";\n\nclass TagGroupHeader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      suggestions: [],\n      tag: this.props.tag\n    };\n  }\n\n  handleGetSuggestions = (suggestionUpdateRequest) => {\n    const suggestions = this.props.updateSuggestions(\n      suggestionUpdateRequest.value,\n      { excludeTags: this.state.tagIds }\n    );\n\n    this.setState({ suggestions });\n  }\n\n  handleTagUpdate = (event, tag) => {\n    this.setState({ tag: tag });\n  }\n\n  handleTagSave = (event, tag) => {\n    if (this.props.onUpdateTag) {\n      this.props.onUpdateTag(tag._id, tag.name, this.props.parentTag._id);\n    }\n  }\n\n  handleTagTreeMove = () => {\n    // needed to prevent move errors, pending fix for TagGroup draging\n  }\n\n  render() {\n    return (\n      <div className=\"header\">\n        <TagItem\n          tag={this.state.tag}\n          parentTag={this.props.parentTag}\n          selectable={true}\n          className=\"js-tagNav-item\"\n          editable={this.props.editable}\n          isSelected={this.isSelected}\n          suggestions={this.state.suggestions}\n          onClearSuggestions={this.handleClearSuggestions}\n          onGetSuggestions={this.handleGetSuggestions}\n          onMove={this.handleTagTreeMove}\n          onTagRemove={this.props.onTagRemove}\n          onTagSave={this.handleTagSave}\n          onTagInputBlur={this.handleTagSave}\n          onTagUpdate={this.handleTagUpdate}\n          onTagClick={this.props.onTagClick}\n        />\n      </div>\n    );\n  }\n}\n\nTagGroupHeader.propTypes = {\n  editable: PropTypes.bool,\n  onTagClick: PropTypes.func,\n  onTagRemove: PropTypes.func,\n  onUpdateTag: PropTypes.func,\n  parentTag: PropTypes.object,\n  tag: PropTypes.object,\n  updateSuggestions: PropTypes.func\n};\n\nexport default TagGroupHeader;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { getTagIds } from \"/lib/selectors/tags\";\nimport { DragDropProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport { Button, EditButton } from \"/imports/plugins/core/ui/client/components\";\nimport { TagHelpers } from \"/imports/plugins/core/ui-tagnav/client/helpers\";\nimport { TagList } from \"/imports/plugins/core/ui/client/components/tags/\";\nimport TagGroup from \"./tagGroup\";\n\nclass TagNav extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedTag: this.props.selectedTag || {}\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ selectedTag: nextProps.selectedTag });\n  }\n\n  renderEditButton() {\n    const { editContainerItem } = this.props.navButtonStyles;\n    return (\n      <span className=\"navbar-item edit-button\" style={editContainerItem}>\n        <EditButton\n          onClick={this.props.onEditButtonClick}\n          bezelStyle=\"solid\"\n          primary={true}\n          icon=\"fa fa-pencil\"\n          onIcon=\"fa fa-check\"\n          toggle={true}\n          toggleOn={this.props.editable}\n        />\n      </span>\n    );\n  }\n\n  tagGroupProps = (tag) => {\n    const subTagGroups = _.compact(TagHelpers.subTags(tag));\n    const tagsByKey = {};\n\n    if (Array.isArray(subTagGroups)) {\n      for (const tagItem of subTagGroups) {\n        tagsByKey[tagItem._id] = tagItem;\n      }\n    }\n\n    return {\n      parentTag: tag,\n      tagsByKey: tagsByKey || {},\n      tagIds: getTagIds({ tags: subTagGroups }) || [],\n      subTagGroups\n    };\n  }\n\n  render() {\n    const { navbarOrientation, navbarPosition, navbarAnchor, navbarVisibility } = this.props;\n    return (\n      <div className={`rui tagnav ${navbarOrientation} ${navbarPosition} ${navbarAnchor} ${navbarVisibility}`}>\n        <div className=\"navbar-header\">\n          <Button\n            primary={true}\n            icon=\"times\"\n            status=\"default\"\n            className=\"close-button\"\n            onClick={this.props.closeNavbar}\n          />\n          {this.props.children}\n        </div>\n        <div className=\"navbar-items\">\n          <DragDropProvider>\n            <TagList\n              {...this.props}\n              isTagNav={true}\n              draggable={true}\n              enableNewTagForm={true}\n            >\n              <div className=\"dropdown-container\">\n                <TagGroup\n                  {...this.props}\n                  editable={this.props.editable === true}\n                  tagGroupProps={this.tagGroupProps(this.state.selectedTag || {})}\n                  onMove={this.props.onMoveTag}\n                  onTagInputBlur={this.handleTagSave}\n                  onTagMouseOut={this.handleTagMouseOut}\n                  onTagMouseOver={this.handleTagMouseOver}\n                  onTagSave={this.handleTagSave}\n                />\n              </div>\n            </TagList>\n          </DragDropProvider>\n          {this.props.canEdit && this.renderEditButton()}\n        </div>\n      </div>\n    );\n  }\n}\n\nTagNav.propTypes = {\n  canEdit: PropTypes.bool,\n  children: PropTypes.node,\n  closeNavbar: PropTypes.func,\n  editable: PropTypes.bool,\n  navButtonStyles: PropTypes.object,\n  navbarAnchor: PropTypes.string,\n  navbarOrientation: PropTypes.string,\n  navbarPosition: PropTypes.string,\n  navbarVisibility: PropTypes.string,\n  onEditButtonClick: PropTypes.func,\n  onMoveTag: PropTypes.func,\n  selectedTag: PropTypes.object\n};\n\nexport default TagNav;\n","import debounce from \"lodash/debounce\";\nimport _ from \"lodash\";\nimport update from \"react/lib/update\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Reaction, Router } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { getTagIds } from \"/lib/selectors/tags\";\nimport { Overlay } from \"/imports/plugins/core/ui/client/components\";\nimport { TagHelpers } from \"/imports/plugins/core/ui-tagnav/client/helpers\";\nimport { Tags } from \"/lib/collections\";\nimport TagNav from \"../components/tagNav\";\n\nconst navButtonStyles = {\n  editContainerItem: {\n    display: \"flex\",\n    marginLeft: 5\n  }\n};\n\nconst NavbarStates = {\n  Orientation: \"stateNavbarOrientation\",\n  Position: \"stateNavbarPosition\",\n  Anchor: \"stateNavbarAnchor\",\n  Visible: \"stateNavbarVisible\"\n};\n\nconst NavbarOrientation = {\n  Vertical: \"vertical\",\n  Horizontal: \"horizontal\"\n};\n\nconst NavbarPosition = {\n  Static: \"static\",\n  Fixed: \"fixed\"\n};\n\nconst NavbarAnchor = {\n  Top: \"top\",\n  Right: \"right\",\n  Bottom: \"bottom\",\n  Left: \"left\",\n  None: \"inline\"\n};\n\nconst TagNavHelpers = {\n  onTagCreate(tagName, parentTag) {\n    TagHelpers.createTag(tagName, undefined, parentTag);\n  },\n  onTagRemove(tag, parentTag) {\n    TagHelpers.removeTag(tag, parentTag);\n  },\n  onTagSort(tagIds, parentTag) {\n    TagHelpers.sortTags(tagIds, parentTag);\n  },\n  onTagDragAdd(movedTagId, toListId, toIndex, ofList) {\n    TagHelpers.moveTagToNewParent(movedTagId, toListId, toIndex, ofList);\n  },\n  onUpdateTag(tagId, tagName, parentTagId) {\n    TagHelpers.updateTag(tagId, tagName, parentTagId);\n  },\n  isMobile() {\n    return window.matchMedia(\"(max-width: 991px)\").matches;\n  },\n  tagById(tagId, tags) {\n    return _.find(tags, (tag) => tag._id === tagId);\n  },\n  updateSuggestions(suggestion, excludeTagsObj) {\n    return TagHelpers.updateSuggestions(suggestion, excludeTagsObj);\n  },\n  hasSubTags(tagId, tags) {\n    const foundTag = this.tagById(tagId, tags);\n\n    if (foundTag) {\n      if (Array.isArray(foundTag.relatedTagIds) && foundTag.relatedTagIds.length) {\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\nclass TagNavContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      attachedBodyListener: false,\n      editable: false,\n      tagIds: props.tagIds || [],\n      tagsByKey: props.tagsByKey || {},\n      selectedTag: null,\n      suggestions: [],\n      [NavbarStates.Visible]: props.isVisible,\n      newTag: {\n        name: \"\"\n      }\n    };\n\n    this.onWindowResize = this.onWindowResize.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.onWindowResize);\n    this.onWindowResize();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let selectedTag = {};\n    const previousEdit = this.state.editable;\n    nextProps.tagsAsArray.map((tag) => {\n      if (this.isSelected(tag)) {\n        selectedTag = tag;\n      }\n    });\n\n    const { tagIds, tagsByKey, isVisible } = nextProps;\n    this.setState({\n      [NavbarStates.Visible]: isVisible,\n      editable: previousEdit && this.canEdit,\n      tagIds,\n      tagsByKey,\n      selectedTag\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.onWindowResize);\n  }\n\n  onWindowResize = () => {\n    const matchQuery = window.matchMedia(\"(max-width: 991px)\");\n    if (matchQuery.matches) {\n      this.setState({\n        [NavbarStates.Orientation]: NavbarOrientation.Vertical,\n        [NavbarStates.Position]: NavbarPosition.Fixed,\n        [NavbarStates.Anchor]: NavbarAnchor.Left\n      });\n    } else {\n      this.setState({\n        [NavbarStates.Orientation]: NavbarOrientation.Horizontal,\n        [NavbarStates.Position]: NavbarPosition.Static,\n        [NavbarStates.Anchor]: NavbarAnchor.None,\n        [NavbarStates.Visible]: false\n      });\n    }\n  }\n\n  canSaveTag(tag) {\n    // Blank tags cannot be saved\n    if (typeof tag.name === \"string\" && tag.name.trim().length === 0) {\n      return false;\n    }\n\n    // If the tag does not have an id, then allow the save\n    if (!tag._id) {\n      return true;\n    }\n\n    // Get the original tag from the props\n    // Tags from props are not mutated, and come from an outside source\n    const originalTag = this.props.tagsByKey[tag._id];\n\n    if (originalTag && originalTag.name !== tag.name) {\n      return true;\n    }\n\n    return false;\n  }\n\n  handleNewTagSave = (tag, parentTag) => {\n    if (this.canSaveTag(tag)) {\n      TagNavHelpers.onTagCreate(tag.name, parentTag);\n      this.setState({ newTag: { name: \"\" } });\n    }\n  }\n\n  handleNewTagUpdate = (tag) => { // updates the current tag state being edited\n    this.setState({\n      newTag: tag\n    });\n  }\n\n  handleTagRemove = (tag, parentTag) => {\n    TagNavHelpers.onTagRemove(tag, parentTag);\n  }\n\n  handleTagUpdate = (tag) => {\n    const newState = update(this.state, {\n      tagsByKey: {\n        [tag._id]: {\n          $set: tag\n        }\n      }\n    });\n\n    this.setState(newState);\n  }\n\n  handleTagSave = (tag) => {\n    TagNavHelpers.onUpdateTag(tag._id, tag.name);\n  }\n\n  handleMoveTag = (dragIndex, hoverIndex) => {\n    const tag = this.state.tagIds[dragIndex];\n\n    // Apply new sort order to variant list\n    const newState = update(this.state, {\n      tagIds: {\n        $splice: [\n          [dragIndex, 1],\n          [hoverIndex, 0, tag]\n        ]\n      }\n    });\n\n    // Set local state so the component does't have to wait for a round-trip\n    // to the server to get the updated list of variants\n    this.setState(newState, () => {\n      debounce(() => TagNavHelpers.onTagSort(this.state.tagIds), 500)(); // Save the updated positions\n    });\n  }\n\n  handleGetSuggestions = (suggestionUpdateRequest) => {\n    const suggestions = TagNavHelpers.updateSuggestions(\n      suggestionUpdateRequest.value,\n      { excludeTags: this.state.tagIds }\n    );\n\n    this.setState({ suggestions });\n  }\n\n  handleClearSuggestions = () => {\n    this.setState({ suggestions: [] });\n  }\n\n  get canEdit() {\n    return this.props.hasEditRights && Reaction.isPreview() === false;\n  }\n\n  attachBodyListener = () => {\n    document.body.addEventListener(\"mouseover\", this.closeDropdown);\n    this.setState({ attachedBodyListener: true });\n  }\n\n  detachhBodyListener = () => {\n    document.body.removeEventListener(\"mouseover\", this.closeDropdown);\n    this.setState({ attachedBodyListener: false });\n  }\n\n  closeDropdown = (event) => {\n    const closestNavItem = event.target.closest(\".navbar-item\");\n\n    // on mouseover an element outside of tags, close dropdown\n    if (!closestNavItem) {\n      this.closeDropdownTimeout = setTimeout(() => {\n        this.setState({ selectedTag: null });\n        this.detachhBodyListener();\n      }, 500);\n    } else {\n      if (this.closeDropdownTimeout) {\n        clearTimeout(this.closeDropdownTimeout);\n      }\n    }\n  }\n\n  get navbarOrientation() {\n    return this.state[NavbarStates.Orientation];\n  }\n\n  get navbarPosition() {\n    return this.state[NavbarStates.Position];\n  }\n\n  get navbarAnchor() {\n    return this.state[NavbarStates.Anchor];\n  }\n\n  get navbarVisibility() {\n    const isVisible = this.state[NavbarStates.Visible] === true;\n\n    if (isVisible) {\n      return \"open\";\n    }\n    return \"closed\";\n  }\n\n  onTagSelect = (currentSelectedTag) => {\n    if (_.isEqual(currentSelectedTag, this.state.selectedTag)) {\n      this.setState({ selectedTag: null });\n    } else {\n      this.setState({ selectedTag: currentSelectedTag });\n    }\n  }\n\n  isSelected(tag) {\n    let isSelected = false;\n    if (this.state.selectedTag && tag) {\n      isSelected = this.state.selectedTag._id === tag._id;\n    }\n    return isSelected;\n  }\n\n  handleTagMouseOver = (event, tag) => {\n    const tagId = tag._id;\n    const tags = this.props.tagsAsArray;\n\n    if (TagNavHelpers.isMobile()) {\n      return;\n    }\n    // While in edit mode, don't trigger the hover hide/show menu\n    if (this.state.editable === false) {\n      // User mode\n      // Don't show dropdown if there are no subtags\n      if (TagNavHelpers.hasSubTags(tagId, tags) === false) {\n        this.setState({ selectedTag: null });\n        return;\n      }\n\n      // Otherwise, show the menu\n      // And Attach an event listener to the document body\n      // This will check to see if the dropdown should be closed if the user\n      // leaves the tag nav bar\n      this.attachBodyListener();\n      this.setState({ selectedTag: TagNavHelpers.tagById(tagId, tags) });\n    }\n  }\n\n  handleTagClick = (event, tag) => {\n    if (TagNavHelpers.isMobile()) {\n      const tagId = tag._id;\n      const tags = this.props.tagsAsArray;\n      const selectedTag = this.state.selectedTag;\n      const hasSubTags = TagNavHelpers.hasSubTags(tagId, tags);\n\n      if (hasSubTags === false) {\n        // click close button to make navbar left disappear\n        this.props.closeNavbar();\n      } else {\n        event.preventDefault();\n      }\n\n      if (selectedTag && selectedTag._id === tagId) {\n        this.setState({ selectedTag: null });\n      } else if (hasSubTags) {\n        this.setState({ selectedTag: TagNavHelpers.tagById(tagId, tags) });\n      }\n    }\n    Router.go(\"tag\", { slug: tag.slug });\n  }\n\n  handleEditButtonClick = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  hasDropdownClassName(tag) {\n    if (Array.isArray(tag.relatedTagIds)) {\n      return \"has-dropdown\";\n    }\n    return \"\";\n  }\n\n  navbarSelectedClassName = (tag) => {\n    const currentSelectedTag = this.state.selectedTag;\n\n    if (currentSelectedTag) {\n      if (currentSelectedTag._id === tag._id) {\n        return \"selected\";\n      }\n    }\n    return \"\";\n  }\n\n  get tags() {\n    if (this.state.editable) {\n      return this.state.tagIds.map((tagId) => this.state.tagsByKey[tagId]);\n    }\n\n    return this.props.tagsAsArray;\n  }\n\n  render() {\n    return (\n      <div>\n        <TagNav\n          {...this.props}\n          {...TagNavHelpers}\n          navbarOrientation={this.navbarOrientation}\n          navbarPosition={this.navbarPosition}\n          navbarAnchor={this.navbarAnchor}\n          navbarVisibility={this.navbarVisibility}\n          tags={this.tags}\n          canEdit={this.canEdit}\n          newTag={this.state.newTag}\n          selectedTag={this.state.selectedTag}\n          navButtonStyles={navButtonStyles}\n          editable={this.state.editable}\n          hasDropdownClassName={this.hasDropdownClassName}\n          navbarSelectedClassName={this.navbarSelectedClassName}\n          suggestions={this.state.suggestions}\n          onClearSuggestions={this.handleClearSuggestions}\n          onGetSuggestions={this.handleGetSuggestions}\n          onEditButtonClick={this.handleEditButtonClick}\n          onMoveTag={this.handleMoveTag}\n          onNewTagSave={this.handleNewTagSave}\n          onNewTagUpdate={this.handleNewTagUpdate}\n          onTagClick={this.handleTagClick}\n          onTagMouseOver={this.handleTagMouseOver}\n          onTagRemove={this.handleTagRemove}\n          onTagSave={this.handleTagSave}\n          onTagUpdate={this.handleTagUpdate}\n          onTagSelect={this.onTagSelect}\n        />\n        <Overlay\n          isVisible={this.state[NavbarStates.Visible]}\n          onClick={this.props.closeNavbar}\n        />\n      </div>\n    );\n  }\n}\n\nTagNavContainer.propTypes = {\n  closeNavbar: PropTypes.func,\n  editButton: PropTypes.node,\n  editable: PropTypes.bool,\n  hasEditRights: PropTypes.bool,\n  isVisible: PropTypes.bool,\n  tagIds: PropTypes.arrayOf(PropTypes.string),\n  tagsAsArray: PropTypes.arrayOf(PropTypes.object),\n  tagsByKey: PropTypes.object\n};\n\nconst composer = (props, onData) => {\n  let tags = Tags.find({ isTopLevel: true }, { sort: { position: 1 } }).fetch();\n  tags = _.sortBy(tags, \"position\"); // puts tags without position at end of array\n\n  const tagsByKey = {};\n\n  if (Array.isArray(tags)) {\n    for (const tag of tags) {\n      tagsByKey[tag._id] = tag;\n    }\n  }\n\n  onData(null, {\n    name: \"coreHeaderNavigation\",\n    hasEditRights: Reaction.hasAdminAccess(),\n    tagsAsArray: tags,\n    isVisible: props.isVisible,\n    tagIds: getTagIds({ tags }),\n    tagsByKey\n  });\n};\n\nexport default composeWithTracker(composer, null)(TagNavContainer);\n","export { TagHelpers } from \"./tags\";\n","import _ from \"lodash\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * Reaction TagNav shared helpers\n * @type {Object}\n */\nexport const TagHelpers = {\n  moveItem(oldArray, fromIndex, toIndex) {\n    const newArray = [...oldArray];\n    newArray.splice(toIndex, 0, newArray.splice(fromIndex, 1)[0]);\n    return newArray;\n  },\n\n  subTags(parentTag) {\n    if (_.isArray(parentTag.relatedTagIds)) {\n      const tags = Tags.find({\n        isTopLevel: false,\n        _id: {\n          $in: parentTag.relatedTagIds\n        }\n      }).fetch();\n\n      const subTags = parentTag.relatedTagIds.map((tagId) => {\n        return _.find(tags, (tagObject) => {\n          return tagObject._id === tagId;\n        });\n      });\n\n      return subTags;\n    }\n\n    return [];\n  },\n\n  currentTag() {\n    return Session.get(\"currentTag\");\n  },\n\n  getTags() {\n    let tags = [];\n\n    tags = Tags.find({\n      isTopLevel: true\n    }, {\n      sort: {\n        position: 1\n      }\n    }).fetch();\n    /*\n    if (this.tagIds) {\n      for (let relatedTagId of this.tagIds) {\n        if (!_.find(tags, {\n          _id: relatedTagId\n        })) {\n          tags.push(Tags.findOne(relatedTagId));\n        }\n      }\n    }*/\n\n    if (this.tag) {\n      Session.set(\"currentTag\", this.tag._id);\n    } else {\n      Session.set(\"currentTag\", \"\");\n    }\n\n    return tags;\n    // there are cases where\n    // we'll have no tags, and sort will error\n    // so we check length for safety\n    // if (tags) {\n    //   tags.sort(function (a, b) {\n    //     return a.position - b.position;\n    //   });\n    //   return tags;\n    // }\n  },\n\n  createTag(tagName, tagId, parentTag) {\n    if (!tagName) {\n      return;\n    }\n    let parentTagId;\n\n    if (parentTag) {\n      parentTagId = parentTag._id;\n    }\n\n    Meteor.call(\"shop/updateHeaderTags\", tagName, null, parentTagId,\n      function (error) {\n        if (error) {\n          Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n        }\n      });\n  },\n\n  updateTag(tagId, tagName, parentTagId) {\n    Meteor.call(\"shop/updateHeaderTags\", tagName, tagId, parentTagId,\n      function (error) {\n        if (error) {\n          Alerts.toast(i18next.t(\"productDetail.tagExists\"), \"error\");\n        }\n      });\n  },\n\n  /* eslint no-unused-vars: 0 */\n  //\n  //   TODO review toIndex, ofList variable implementation in tags.js moveTagToNewParent\n  //\n  moveTagToNewParent(movedTagId, toListId, toIndex, ofList) {\n    if (movedTagId) {\n      if (toListId) {\n        const result = Tags.update(toListId,\n          {\n            $addToSet: {\n              relatedTagIds: movedTagId\n            }\n          }\n        );\n\n        return result;\n      }\n\n      const result = Tags.update(movedTagId,\n        {\n          $set: {\n            isTopLevel: true\n          }\n        }\n      );\n\n      return result;\n    }\n    return 0;\n  },\n\n  sortTags(tagIds, parentTag) {\n    if (_.isArray(tagIds)) {\n      if (_.isEmpty(parentTag)) {\n        // Top level tags\n        for (const tagId of tagIds) {\n          Tags.update(tagId, {\n            $set: {\n              position: tagIds.indexOf(tagId)\n            }\n          });\n        }\n      } else {\n        // Sub tags\n        Tags.update(parentTag._id, {\n          $set: {\n            relatedTagIds: _.compact(tagIds)\n          }\n        });\n      }\n    }\n  },\n\n  removeTag(tag, parentTag) {\n    if (_.isEmpty(parentTag) === false) {\n      Tags.update(parentTag._id,\n        {\n          $pullAll: {\n            relatedTagIds: [tag._id]\n          }\n        }\n      );\n    } else if (tag.isTopLevel === true) {\n      Tags.update(tag._id,\n        {\n          $set: {\n            isTopLevel: false\n          }\n        }\n      );\n    }\n  },\n\n  updateSuggestions(term, { excludeTags }) {\n    const slug = Reaction.getSlug(term);\n\n    const selector = {\n      slug: new RegExp(slug, \"i\")\n    };\n\n    if (Array.isArray(excludeTags)) {\n      selector._id = {\n        $nin: excludeTags\n      };\n    }\n\n    const tags = Tags.find(selector).map((tag) => {\n      return {\n        label: tag.name\n      };\n    });\n\n    return tags;\n  }\n};\n\nTemplate.registerHelper(\"reactionSubTags\", TagHelpers.subTags);\n","import { $ } from \"meteor/jquery\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { HTTP } from \"meteor/http\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Template } from \"meteor/templating\";\nimport { Reaction, i18next } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\n\nTemplate.addressBookAdd.onCreated(function () {\n  this.currentCountry = new ReactiveVar(null);\n  // hit Reaction's GeoIP server and try to determine the user's country\n  HTTP.get(\"https://geo.getreaction.io/json/\", (err, res) => {\n    if (!err) {\n      this.currentCountry.set(res.data.country_code);\n    }\n  });\n});\n\nTemplate.addressBookAdd.helpers({\n  thisAddress() {\n    const thisAddress = {};\n\n    // admin should receive their account\n    const account = Collections.Accounts.findOne({\n      userId: Meteor.userId()\n    });\n\n    if (account && account.profile) {\n      if (account.profile.name) {\n        thisAddress.fullName = account.profile.name;\n      }\n      // if this will be the first address we set defaults here and not display\n      // them inside form\n      if (account.profile.addressBook) {\n        if (account.profile.addressBook.length === 0) {\n          thisAddress.isShippingDefault = true;\n          thisAddress.isBillingDefault = true;\n        }\n      }\n    }\n\n    const shop = Collections.Shops.findOne(Reaction.getShopId());\n\n    // Set default country code based on shop's shipping address\n    if (shop && Array.isArray(shop.addressBook) && shop.addressBook.length > 0) {\n      const defaultAddress = shop.addressBook.find(address => address.isShippingDefault);\n      const defaultCountryCode = defaultAddress.country;\n      if (defaultCountryCode) {\n        thisAddress.country = defaultCountryCode;\n      }\n    }\n\n    if (Session.get(\"address\")) {\n      thisAddress.postal = Session.get(\"address\").zipcode;\n      thisAddress.country = Session.get(\"address\").countryCode;\n      thisAddress.city = Session.get(\"address\").city;\n      thisAddress.region = Session.get(\"address\").state;\n    }\n\n    // update the reactive country code from the GeoIP lookup (if found)\n    thisAddress.country = Template.instance().currentCountry.get() || thisAddress.country;\n\n    return thisAddress;\n  },\n\n  hasAddressBookEntries: function () {\n    const account = Collections.Accounts.findOne({\n      userId: Meteor.userId()\n    });\n    if (account) {\n      if (account.profile) {\n        if (account.profile.addressBook) {\n          return account.profile.addressBook.length > 0;\n        }\n      }\n    }\n\n    return false;\n  }\n});\n\n/**\n * addressBookAddForm form handling\n * @description gets accountId and calls addressBookAdd method\n * @fires \"accounts/addressBookAdd\" method\n */\nAutoForm.hooks({\n  addressBookAddForm: {\n    onSubmit: function (insertDoc) {\n      const that = this;\n      this.event.preventDefault();\n      const addressBook = $(this.template.firstNode).closest(\".address-book\");\n\n      Meteor.call(\"accounts/validateAddress\", insertDoc, function (err, res) {\n        // if the address is validated OR the address has already been through the validation process, pass it on\n        if (res.validated) {\n          Meteor.call(\"accounts/addressBookAdd\", insertDoc, function (error, result) {\n            if (error) {\n              Alerts.toast(i18next.t(\"addressBookAdd.failedToAddAddress\", { err: error.message }), \"error\");\n              that.done(new Error(\"Failed to add address: \", error));\n              return false;\n            }\n            if (result) {\n              that.done();\n              addressBook.trigger($.Event(\"showMainView\"));\n              return true;\n            }\n          });\n        } else {\n          // set addressState and kick it back to review\n          const addressState = {\n            requiresReview: true,\n            address: insertDoc,\n            validatedAddress: res.validatedAddress,\n            formErrors: res.formErrors,\n            fieldErrors: res.fieldErrors\n          };\n          Session.set(\"addressState\", addressState);\n          addressBook.trigger($.Event(\"addressRequiresReview\"));\n        }\n      });\n    }\n  }\n});\n","import { $ } from \"meteor/jquery\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { i18next } from \"/client/api\";\n\n\nfunction setWorkingAddress(address) {\n  if (address.fullName) {\n    const fullName = $(\"input[name='fullName']\");\n    fullName.val(address.fullName);\n  }\n  if (address.city) {\n    const city = $(\"input[name='city']\");\n    city.val(address.city);\n  }\n  if (address.postal) {\n    const postal = $(\"input[name='postal']\");\n    postal.val(address.postal);\n  }\n  if (address.address1) {\n    const address1 = $(\"input[name='address1']\");\n    address1.val(address.address1);\n  }\n\n  if (address.address2) {\n    const address2 = $(\"input[name='address2']\");\n    address2.val(address.address2);\n  }\n  if (address.country) {\n    const country = $(\"select[name='country']\");\n    country.val(address.country);\n  }\n\n  if (address.region) {\n    const region = $(\"select[name='region']\");\n    region.val(address.region);\n  }\n\n  if (address.phone) {\n    const phone = $(\"input[name='phone']\");\n    phone.val(address.phone);\n  }\n\n  if (address.isCommercial) {\n    const isCommercial = $(\"input[name='isCommercial']\");\n    isCommercial.val(address.isCommercial);\n  }\n}\n\n\nTemplate.addressBookEdit.onRendered(function () {\n  const addressState = Session.get(\"addressState\");\n  if (addressState.address) {\n    setWorkingAddress(addressState.address);\n  }\n});\n\n/*\n * update address book (cart) form handling\n * onSubmit we need to add accountId which is not in context\n */\nAutoForm.hooks({\n  addressBookEditForm: {\n    onSubmit: function (insertDoc) {\n      const that = this;\n      this.event.preventDefault();\n      const addressBook = $(this.template.firstNode).closest(\".address-book\");\n\n      Meteor.call(\"accounts/validateAddress\", insertDoc, function (err, res) {\n        // if the address is validated OR the address has already been through the validation process, pass it on\n        if (res.validated) {\n          Meteor.call(\"accounts/addressBookUpdate\", insertDoc, (error, result) => {\n            if (error) {\n              Alerts.toast(i18next.t(\"addressBookEdit.somethingWentWrong\", { err: error.message }), \"error\");\n              this.done(new Error(error));\n              return false;\n            }\n            if (result) {\n              that.done();\n\n              // Show the grid\n              addressBook.trigger($.Event(\"showMainView\"));\n            }\n          });\n        } else {\n          // set addressState and kick it back to review\n          const addressState = {\n            requiresReview: true,\n            address: insertDoc,\n            validatedAddress: res.validatedAddress,\n            formErrors: res.formErrors,\n            fieldErrors: res.fieldErrors\n          };\n          Session.set(\"addressState\", addressState);\n          addressBook.trigger($.Event(\"addressRequiresReview\"));\n        }\n      });\n    }\n  }\n});\n","import { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\nimport { Countries } from \"/client/collections\";\nimport * as Collections from \"/lib/collections\";\n\nTemplate.addressBookForm.helpers({\n\n  /*\n   * TODO: update for i18n\n   */\n  countryOptions: function () {\n    return Countries.find().fetch();\n  },\n  statesForCountry: function () {\n    let locale;\n    const shop = Collections.Shops.findOne();\n    const selectedCountry = Session.get(\"addressBookCountry\") || AutoForm.getFieldValue(\"country\");\n    if (!selectedCountry) {\n      return false;\n    }\n    if ((shop !== null ? shop.locales.countries[selectedCountry].states : void 0) === null) {\n      return false;\n    }\n    const options = [];\n    const ref = shop !== null ? shop.locales.countries[selectedCountry].states : void 0;\n    for (const state in ref) {\n      if ({}.hasOwnProperty.call(ref, state)) {\n        locale = ref[state];\n        options.push({\n          label: locale.name,\n          value: state\n        });\n      }\n    }\n    return options;\n  },\n\n  /*\n   *  Defaults billing/shipping when 1st new address.\n   */\n  isBillingDefault: function () {\n    return typeof this.address === \"object\" ? this.address.isBillingDefault : true;\n  },\n  isShippingDefault: function () {\n    return typeof this.address === \"object\" ? this.address.isShippingDefault : true;\n  },\n  hasAddressBookEntries: function () {\n    const account = Collections.Accounts.findOne({\n      userId: Meteor.userId()\n    });\n    if (account) {\n      if (account.profile) {\n        if (account.profile.addressBook) {\n          return account.profile.addressBook.length > 0;\n        }\n      }\n    }\n\n    return false;\n  }\n});\n\nTemplate.addressBookForm.events({\n  \"change [name='country']\": function () {\n    return Session.set(\"addressBookCountry\", AutoForm.getFieldValue(\"country\"));\n  }\n});\n","import * as Collections from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\n\n/*\n * handles display of addressBook grid\n */\nTemplate.addressBookGrid.helpers({\n  selectedBilling: function () {\n    const cart = Collections.Cart.findOne({\n      userId: Meteor.userId()\n    });\n\n    if (cart) {\n      if (cart.billing) {\n        if (cart.billing[0].address) {\n          if (this._id === cart.billing[0].address._id) {\n            return \"active\";\n          }\n        }\n      } else { // if this is a first checkout review, we need to push default\n        // billing address to cart\n        if (this.isBillingDefault) {\n          Meteor.call(\"cart/setPaymentAddress\", cart._id, this);\n          // return \"active\";\n        }\n      }\n    }\n  },\n\n  selectedShipping: function () {\n    const cart = Collections.Cart.findOne({\n      userId: Meteor.userId()\n    });\n\n    if (cart) {\n      if (cart.shipping) {\n        if (cart.shipping[0].address) {\n          if (this._id === cart.shipping[0].address._id) {\n            return \"active\";\n          }\n        }\n      } else { // if this is a first checkout review, we need to push default\n        // shipping address to cart\n        if (this.isShippingDefault) {\n          Meteor.call(\"cart/setShipmentAddress\", cart._id, this);\n          // return \"active\";\n        }\n      }\n    }\n  },\n  account: function () {\n    return Collections.Accounts.findOne({\n      userId: Meteor.userId()\n    });\n  }\n});\n\n/*\n * events\n */\n\nTemplate.addressBookGrid.events({\n  \"click [data-event-action=selectShippingAddress]\": function () {\n  // update address(make it default) only if wasn't already\n    if (!this.isShippingDefault) {\n      return Meteor.call(\"accounts/addressBookUpdate\", this, null,\n        \"isShippingDefault\");\n    }\n  },\n  \"click [data-event-action=selectBillingAddress]\": function () {\n    // update address(make it default) only if wasn't already\n    if (!this.isBillingDefault) {\n      return Meteor.call(\"accounts/addressBookUpdate\", this, null,\n        \"isBillingDefault\");\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { $ } from \"meteor/jquery\";\nimport { i18next } from \"/client/api\";\n\n\nTemplate.addressBookReview.onCreated(function () {\n  const addressState = Session.get(\"addressState\");\n  this.state = new ReactiveDict();\n  this.state.set(\"address\", addressState.address);\n  this.state.set(\"originalAddress\", addressState.address);  // use this to \"revert\" address changes\n  this.state.set(\"validatedAddress\", addressState.validatedAddress);\n  this.state.set(\"formErrors\", addressState.formErrors);\n  this.state.set(\"fieldErrors\", addressState.fieldErrors);\n});\n\nTemplate.addressBookReview.helpers({\n  address: function () {\n    const address = Template.instance().state.get(\"address\");\n    return address;\n  },\n  validatedAddress: function () {\n    const validatedAddress = Template.instance().state.get(\"validatedAddress\");\n    return validatedAddress;\n  },\n  formErrors: function () {\n    const formErrors = Template.instance().state.get(\"formErrors\");\n    return formErrors;\n  },\n  fieldErrors: function () {\n    const fieldErrors = Template.instance().state.get(\"fieldErrors\");\n    return fieldErrors;\n  },\n  hasAddress2: function () {\n    const address = Template.instance().state.get(\"address\");\n    const validatedAddress = Template.instance().state.get(\"validatedAddress\");\n    return !!address.address2 || !!validatedAddress.address2;\n  }\n});\n\nTemplate.addressBookReview.events({\n  \"mouseover .address-ignore\": function (event) {\n    event.stopPropagation();\n  },\n  \"mouseover .address-invalid-line\": function (event) {\n    // show checkmark when mousing over\n    const addressKey = event.target.getAttribute(\"data-key\");\n    $(`div .address-invalid-line [data-key=${addressKey}] .address-line-copyover`).show();\n  },\n  \"mouseout .address-invalid-line\": function (event) {\n    // hide checkmark when mousing out\n    const addressKey = event.target.getAttribute(\"data-key\");\n    $(`div .address-invalid-line [data-key=${addressKey}] .address-line-copyover`).hide();\n  },\n  \"click .address-ignore\": function (event) {\n    // Ignore line but mark it \"valid\"\n    event.stopPropagation();\n    const addressKey = event.target.getAttribute(\"data-key\");\n    const addressLine = $(`div.${addressKey}-display`);\n    $(`div .address-invalid-line [data-key=${addressKey}] .address-line-copyover`).hide();\n    $(`div .address-invalid-line [data-key=${addressKey}] .address-ignore`).hide();\n    addressLine.removeClass(\"address-invalid-line\");\n  },\n  \"click .address-invalid-line\": function (event) {\n    // set address value to be value from validatedAddress and mark it valid\n    const addressKey = event.target.getAttribute(\"data-key\");\n    const address = Template.instance().state.get(\"address\");\n    const validatedAddress = Template.instance().state.get(\"validatedAddress\");\n    address[addressKey] = validatedAddress[addressKey];\n    Template.instance().state.set(\"address\", address);\n    $(`div .address-invalid-line [data-key=${addressKey}] .address-ignore`).hide();\n    const addressLine = $(`div.${addressKey}-display`);\n    addressLine.removeClass(\"address-invalid-line\");\n    addressLine.addClass(\"address-valid-line\");\n  },\n  \"click [data-event-action=saveAddress]\": function () {\n    const instance = Template.instance();\n    const address = instance.state.get(\"address\");\n    const addressState = {\n      requiresReview: false,\n      address: address,\n      formErrors: [],\n      fieldErrors: {}\n    };\n    Session.set(\"addressState\", addressState);\n    Meteor.call(\"accounts/addressBookAdd\", address, function (error, result) {\n      if (error) {\n        Alerts.toast(i18next.t(\"addressBookAdd.failedToAddAddress\", { err: error.message }), \"error\");\n        return false;\n      }\n      if (result) {\n        const addressBook = $(instance.firstNode).closest(\".address-book\");\n        addressBook.trigger($.Event(\"showMainView\"));\n        return true;\n      }\n    });\n  },\n  \"click [data-event-action=cancelAddressEdit]\": function () {\n    // set address back to original value before edits\n    const originalAddress = Template.instance().state.get(\"originalAddress\");\n    const addressState = {\n      requiresReview: false,\n      address: originalAddress,\n      formErrors: [],\n      fieldErrors: {}\n    };\n    Session.set(\"addressState\", addressState);\n    const instance = Template.instance();\n    const addressBook = $(instance.firstNode).closest(\".address-book\");\n    addressBook.trigger($.Event(\"addressReviewComplete\"));\n    return false;\n  }\n});\n\n","import { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { i18next } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\nimport { Template } from \"meteor/templating\";\n\n/*\n * Template.checkoutAddressBook\n * template determines which view should be used:\n * addAddress (edit or add)\n * addressBookView (view)\n * addressBookReview (review errors)\n */\n\nTemplate.addressBook.onCreated(function () {\n  let addressState = Session.get(\"addressState\");\n  if (!addressState) {\n    addressState = { requiresReview: false };\n    Session.setDefault(\"addressState\", addressState);\n  }\n  if (addressState && addressState.requiresReview) {\n    this.currentViewTemplate = ReactiveVar(\"addressBookReview\");\n  } else {\n    this.currentViewTemplate = ReactiveVar(\"addressBookAdd\");\n  }\n  this.templateData = ReactiveVar({});\n\n  this.autorun(() => {\n    this.subscribe(\"Accounts\", Meteor.userId());\n\n    const account = Collections.Accounts.findOne({\n      userId: Meteor.userId()\n    });\n\n    if (account && !addressState.requiresReview) {\n      if (account.profile) {\n        if (account.profile.addressBook) {\n          if (account.profile.addressBook.length === 0) {\n            this.currentViewTemplate.set(\"addressBookAdd\");\n          } else {\n            this.currentViewTemplate.set(\"addressBookGrid\");\n          }\n        }\n      }\n    }\n  });\n});\n\n// Template.addressBook.onRendered(function () {\n//   let view = this.$(\"[blaze-view=\"addressBook\"]\").get(0);\n// });\n\nTemplate.addressBook.helpers({\n  account: function () {\n    const account = Collections.Accounts.findOne({\n      userId: Meteor.userId()\n    });\n    return account;\n  },\n\n  data: function () {\n    return Template.instance().templateData.get();\n  },\n\n  currentView: function () {\n    return Template.instance().currentViewTemplate.get();\n  },\n\n  selectedAddress: function () {\n    return Template.instance.templateData.get();\n  }\n});\n\nTemplate.addressBook.events({\n\n  // **************************************************************************\n  //\n  //\n  \"click [data-event-action=addNewAddress]\": function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    Template.instance().currentViewTemplate.set(\"addressBookAdd\");\n  },\n\n  // **************************************************************************\n  // Edit an address\n  //\n  \"click [data-event-action=editAddress]\": function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    Template.instance().templateData.set({\n      address: this\n    });\n\n    Template.instance().currentViewTemplate.set(\"addressBookEdit\");\n  },\n\n  // **************************************************************************\n  // Remove the address from the address book\n  //\n  \"click [data-event-action=removeAddress]\": function (event, template) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    Meteor.call(\"accounts/addressBookRemove\", this._id, (error, result) => {\n      if (error) {\n        Alerts.toast(i18next.t(\"addressBookGrid.cantRemoveThisAddress\", { err: error.message }), \"error\");\n      }\n      if (result) {\n        const account = Collections.Accounts.findOne({\n          userId: Meteor.userId()\n        });\n        if (account) {\n          if (account.profile) {\n            if (account.profile.addressBook.length === 0) {\n              template.currentViewTemplate.set(\"addressBookAdd\");\n            }\n          }\n        }\n      }\n    });\n  },\n\n  \"click [data-event-action=cancelAddressEdit], form submit, showMainView\": function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    Template.instance().currentViewTemplate.set(\"addressBookGrid\");\n  },\n  \"addressRequiresReview\": (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    Template.instance().currentViewTemplate.set(\"addressBookReview\");\n  },\n  \"addressReviewComplete\": (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    Template.instance().currentViewTemplate.set(\"addressBookEdit\");\n  }\n});\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { ServiceConfiguration } from \"meteor/service-configuration\";\nimport { Reaction, i18next } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\nimport { ServiceConfigHelper } from \"../../helpers/util\";\n\n/**\n * Accounts helpers\n */\nTemplate.accountsDashboard.onCreated(function () {\n  this.autorun(() => {\n    this.subscribe(\"ShopMembers\");\n  });\n});\n\nTemplate.accountsDashboard.helpers({\n  /**\n   * isShopMember\n   * @return {Boolean} True if the memnber is an administrator\n   */\n  isShopMember() {\n    return _.includes([\"dashboard\", \"admin\", \"owner\"], this.role);\n  },\n\n  /**\n   * isShopGuest\n   * @return {Boolean} True if the member is a guest\n   */\n  isShopGuest() {\n    return !_.includes([\"dashboard\", \"admin\", \"owner\"], this.role);\n  },\n  /**\n   * members\n   * @return {Boolean} True array of adminsitrative members\n   */\n  members() {\n    if (Reaction.hasPermission(\"reaction-accounts\")) {\n      const shopId = Reaction.getShopId();\n      const instance = Template.instance();\n      if (instance.subscriptionsReady()) {\n        const shopUsers = Meteor.users.find();\n\n        return shopUsers.map(user => {\n          const member = {};\n\n          // Querying the Accounts collection to retrieve user's name because\n          // Meteor filters out sensitive info from the Meteor.users schema\n          const userSub = Meteor.subscribe(\"UserAccount\", user._id);\n          if (userSub.ready()) {\n            member.name = Collections.Accounts.findOne(user._id).name;\n          }\n          member.userId = user._id;\n\n          if (user.emails && user.emails.length) {\n            // this is some kind of denormalization. It is helpful to have both\n            // of this string and array. Array goes to avatar, string goes to\n            // template\n            member.emails = user.emails;\n            member.email = user.emails[0].address;\n          }\n          // member.user = user;\n          member.username = user.username;\n          member.isAdmin = Roles.userIsInRole(user._id, \"admin\", shopId);\n          member.roles = user.roles;\n          member.services = user.services;\n\n          if (Roles.userIsInRole(member.userId, \"owner\", shopId)) {\n            member.role = \"owner\";\n          } else if (Roles.userIsInRole(member.userId, \"admin\", shopId)) {\n            member.role = \"admin\";\n          } else if (Roles.userIsInRole(member.userId, \"dashboard\", shopId)) {\n            member.role = \"dashboard\";\n          } else if (Roles.userIsInRole(member.userId, \"guest\", shopId)) {\n            member.role = \"guest\";\n          }\n\n          return member;\n        });\n      }\n    }\n  }\n});\n\n/**\n * Account Settings Helpers\n */\nTemplate.accountsSettings.onCreated(function () {\n  this.subscribe(\"ServiceConfiguration\", Meteor.userId());\n});\n\n/**\n * Account Settings Helpers\n */\nTemplate.accountsSettings.helpers({\n\n  /**\n   * services\n   * @return {Array} available services\n   */\n  services() {\n    const serviceHelper = new ServiceConfigHelper();\n    const configurations = ServiceConfiguration.configurations.find().fetch();\n\n    const services = serviceHelper.services((item) => {\n      const matchingConfigurations = _.filter(configurations, {\n        service: item.name\n      });\n      if (matchingConfigurations.length) {\n        return matchingConfigurations[0];\n      }\n    });\n\n    return services;\n  },\n\n  /**\n   * Template helper to add a hidden class if the condition is false\n   * @param  {Boolean} enabled Service enabled\n   * @return {String}          \"hidden\" or \"\"\n   */\n  shown(enabled) {\n    return enabled !== true ? \"hidden\" : \"\";\n  },\n\n  /**\n   * Return checked classname if true\n   * @param  {Boolean} enabled Boolean value true/false\n   * @return {String}          \"checked\" or \"\"\n   */\n  checked(enabled) {\n    return enabled === true ? \"checked\" : \"\";\n  },\n\n  /**\n   * Returns a value from the supplied service object with a field name\n   * @param  {String} fieldName name of field to retrive the value for.\n   * @param  {Object} service   Service object to find the value in.\n   * @return {String}           A value or blank string if nothing is found.\n   */\n  valueForField(fieldName, service) {\n    return service[fieldName] || \"\";\n  }\n});\n\nTemplate.accountsSettings.events({\n\n  /**\n   * Account settings form submit\n   * @param  {event} event    jQuery event\n   * @return {void}\n   */\n  \"submit form\": (event) => {\n    event.preventDefault();\n\n    const service = event.target.service.value;\n    const serviceHelper = new ServiceConfigHelper();\n    const fields = serviceHelper.configFieldsForService(service);\n    // todo remove this after i18next 2 will be installed\n    // let niceName = serviceHelper.capitalizedServiceName(service);\n\n    for (const field of fields) {\n      field.value = event.target[field.property].value;\n    }\n\n    Meteor.call(\"accounts/updateServiceConfiguration\", service, fields, (error) => {\n      if (!error) {\n        Alerts.toast(i18next.t(\n          \"accountsUI.updatedServiceConfiguration\",\n          { service: i18next.t(`social.${service}`) }\n        ));\n      }\n    });\n  },\n\n  /**\n   * Account settings update enabled status for login service on change\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"change input[name=enabled]\": (event) => {\n    const service = event.target.value;\n    const fields = [{\n      property: \"enabled\",\n      value: event.target.checked\n    }];\n\n    Meteor.call(\"accounts/updateServiceConfiguration\", service, fields);\n  },\n\n  /**\n   * Account settings show/hide secret key for a service\n   * @param  {event} event    jQuery Event\n   * @return {void}\n   */\n  \"click [data-event-action=showSecret]\": (event) => {\n    const button = Template.instance().$(event.currentTarget);\n    const input = button.closest(\".form-group\").find(\"input[name=secret]\");\n\n    if (input.attr(\"type\") === \"password\") {\n      input.attr(\"type\", \"text\");\n      button.html(\"Hide\");\n    } else {\n      input.attr(\"type\", \"password\");\n      button.html(\"Show\");\n    }\n  }\n});\n","import { Template } from \"meteor/templating\";\n\nexport const LoginFormSharedHelpers = {\n  messages: function () {\n    return Template.instance().formMessages.get();\n  },\n\n  hasError(error) {\n    // True here means the field is valid\n    // We're checking if theres some other message to display\n    if (error !== true && typeof error !== \"undefined\") {\n      return \"has-error has-feedback\";\n    }\n  },\n  capitalize: function (str) {\n    const finalString = str === null ? \"\" : String(str);\n    return finalString.charAt(0).toUpperCase() + finalString.slice(1);\n  }\n};\n","export { LoginFormSharedHelpers } from \"./helpers\";\nexport { ServiceConfigHelper } from \"./util\";\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Gravatar } from \"meteor/jparker:gravatar\";\nimport { Reaction, i18next, i18nextDep } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\n\nTemplate.registerHelper(\"getGravatar\", function (currentUser, size) {\n  const options = {\n    secure: true,\n    size: size,\n    default: \"identicon\"\n  };\n  const user = currentUser || Accounts.user();\n  if (!user) return false;\n  const account = Collections.Accounts.findOne(user._id);\n  // first we check picture exists. Picture has higher priority to display\n  if (account && account.profile && account.profile.picture) {\n    return account.profile.picture;\n  }\n  if (user.emails && user.emails.length === 1) {\n    const email = user.emails[0].address;\n    return Gravatar.imageUrl(email, options);\n  }\n});\n\n/**\n * registerHelper displayName\n */\nTemplate.registerHelper(\"displayName\", function (displayUser) {\n  i18nextDep.depend();\n\n  const user = displayUser || Accounts.user();\n  if (user) {\n    if (user.profile && user.profile.name) {\n      return user.profile.name;\n    } else if (user.username) {\n      return user.username;\n    }\n\n    // todo: previous check was user.services !== \"anonymous\", \"resume\". Is this\n    // new check covers previous check?\n    if (Roles.userIsInRole(user._id || user.userId, \"account/profile\",\n      Reaction.getShopId())) {\n      return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n    }\n  }\n});\n\n/**\n * registerHelper fName\n */\n\nTemplate.registerHelper(\"fName\", function (displayUser) {\n  const user = displayUser || Meteor.user();\n  if (user && user.profile && user.profile.name) {\n    return user.profile.name.split(\" \")[0];\n  } else if (user && user.username) {\n    return user.username.name.split(\" \")[0];\n  }\n  if (user && user.services) {\n    const username = (function () {\n      switch (false) {\n        case !user.services.twitter:\n          return user.services.twitter.first_name;\n        case !user.services.google:\n          return user.services.google.given_name;\n        case !user.services.facebook:\n          return user.services.facebook.first_name;\n        case !user.services.instagram:\n          return user.services.instagram.first_name;\n        case !user.services.pinterest:\n          return user.services.pinterest.first_name;\n        default:\n          return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n      }\n    })();\n    return username;\n  }\n  return i18next.t(\"accountsUI.signIn\", { defaultValue: \"Sign in\" });\n});\n","import _ from \"lodash\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { ServiceConfiguration } from \"meteor/service-configuration\";\n\nfunction capitalize(str) {\n  const finalString = str === null ? \"\" : String(str);\n  return finalString.charAt(0).toUpperCase() + str.slice(1);\n}\n\nconst providers = {\n  Facebook: {},\n  Google: {},\n  Twitter: {}\n};\n\nproviders.Facebook.fields = function () {\n  return [\n    { property: \"appId\", label: \"App ID\" },\n    { property: \"secret\", label: \"App Secret\" }\n  ];\n};\n\nproviders.Google.fields = function () {\n  return [\n    { property: \"clientId\", label: \"Client ID\" },\n    { property: \"secret\", label: \"Client secret\" }\n  ];\n};\n\nproviders.Twitter.fields = function () {\n  return [\n    { property: \"consumerKey\", label: \"API key\" },\n    { property: \"secret\", label: \"API secret\" }\n  ];\n};\n\nexport class ServiceConfigHelper {\n  availableServices() {\n    const services = Package[\"accounts-oauth\"] ? Accounts.oauth.serviceNames() : [];\n    services.sort();\n\n    return services;\n  }\n\n  capitalizedServiceName(name) {\n    if (name === \"meteor-developer\") {\n      return \"MeteorDeveloperAccount\";\n    }\n\n    return capitalize(name);\n  }\n\n  configFieldsForService(name) {\n    const capitalizedName = this.capitalizedServiceName(name);\n    const template = providers[capitalizedName];\n\n    if (template) {\n      const fields = template.fields();\n\n      return _.map(fields, (field) => {\n        if (!field.type) {\n          field.type = field.property === \"secret\" ? \"password\" : \"text\";\n        }\n\n        return _.extend(field, {\n          type: field.type\n        });\n      });\n    }\n\n    return [];\n  }\n\n  services(extendEach) {\n    const availableServices = this.availableServices();\n    const configurations = ServiceConfiguration.configurations.find().fetch();\n\n    return _.map(availableServices, (name) => {\n      const matchingConfigurations = _.filter(configurations, { service: name });\n      let service = {\n        name,\n        label: this.capitalizedServiceName(name),\n        fields: this.configFieldsForService(name)\n      };\n\n      if (matchingConfigurations.length) {\n        service = _.extend(service, matchingConfigurations[0]);\n      }\n\n      if (_.isFunction(extendEach)) {\n        service = _.extend(service, extendEach(service) || {});\n      }\n\n      return service;\n    });\n  }\n}\n","import { Reaction, Logger } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Roles } from \"meteor/alanning:roles\";\n\nTemplate.loginDropdown.events({\n\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click #logout\": (event, template) => {\n    event.preventDefault();\n    template.$(\".dropdown-toggle\").dropdown(\"toggle\");\n    // Meteor.logoutOtherClients();\n    Meteor.logout((error) => {\n      if (error) {\n        Logger.warn(\"Failed to logout.\", error);\n      }\n    });\n  },\n\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click .user-accounts-dropdown-apps a\": function (event, template) {\n    if (this.name === \"createProduct\") {\n      event.preventDefault();\n      event.stopPropagation();\n\n      Meteor.call(\"products/createProduct\", (error, productId) => {\n        let currentTag;\n        let currentTagId;\n\n        if (error) {\n          throw new Meteor.Error(\"createProduct error\", error);\n        } else if (productId) {\n          currentTagId = Session.get(\"currentTag\");\n          currentTag = Tags.findOne(currentTagId);\n          if (currentTag) {\n            Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n          }\n          Reaction.Router.go(\"product\", {\n            handle: productId\n          });\n        }\n      });\n    } else if (this.name !== \"account/profile\") {\n      event.preventDefault();\n      /** TMP **/\n      Reaction.showActionView(this);\n    } else if (this.route || this.name) {\n      const route = this.name || this.route;\n      Reaction.Router.go(route);\n    }\n    template.$(\".dropdown-toggle\").dropdown(\"toggle\");\n  }\n});\n\nTemplate.accountsDropdownApps.helpers({\n  reactionAppsOptions() {\n    // get shortcuts with audience permissions based on user roles\n    const roles = Roles.getRolesForUser(Meteor.userId(), Reaction.getShopId());\n\n    return {\n      provides: \"shortcut\",\n      enabled: true,\n      audience: roles\n    };\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * Inline login form for instance where guest login is needed.\n */\nTemplate.loginInline.events({\n\n  /**\n   * Continue as guest.\n   * @param  {Event} event - jQuery Event\n   * @return {void}\n   */\n  \"click .continue-guest\": (event) => {\n    event.preventDefault();\n    Meteor.call(\"workflow/pushCartWorkflow\", \"coreCartWorkflow\", \"checkoutLogin\");\n  }\n});\n","import { Template } from \"meteor/templating\";\nimport { LoginContainer, MessagesContainer } from \"../../containers\";\n\nTemplate.loginForm.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n\n    return {\n      ...currentData,\n      component: LoginContainer\n    };\n  }\n});\n\nTemplate.loginFormMessages.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n    return {\n      ...currentData,\n      component: MessagesContainer\n    };\n  }\n});\n","import _ from \"lodash\";\nimport { Reaction } from \"/client/api\";\nimport { Packages, Shops } from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { Roles } from \"meteor/alanning:roles\";\n\nconst getPermissionMap = (permissions) => {\n  const permissionMap = {};\n  _.each(permissions, function (existing) {\n    permissionMap[existing.permission] = existing.label;\n  });\n  return permissionMap;\n};\n\n/**\n * shopMember helpers\n * permissions / roles controls\n * we use userInRole instead of Reaction intentionally\n * to check each users permissions\n */\nTemplate.member.events({\n  \"click [data-event-action=showMemberSettings]\": function () {\n    $(\".customerUsageType input\").val(\"\"); // form reset\n    $(\".customerUsageType\").addClass(\"hide\"); // form reset\n    Reaction.setActionViewDetail({\n      label: \"Permissions\",\n      i18nKeyLabel: \"admin.settings.permissionsSettingsLabel\",\n      data: this,\n      template: \"memberSettings\"\n    });\n  }\n});\n\nTemplate.memberSettings.helpers({\n  isOwnerDisabled: function () {\n    if (Meteor.userId() === this.userId) {\n      if (Roles.userIsInRole(this.userId, \"owner\", this.shopId)) {\n        return true;\n      }\n    }\n  },\n  userId: function () {\n    return Meteor.userId();\n  },\n  hasPermissionChecked: function (permission, userId) {\n    if (userId && Roles.userIsInRole(userId, permission, this.shopId || Roles.userIsInRole(userId, permission,\n      Roles.GLOBAL_GROUP))) {\n      return \"checked\";\n    }\n  },\n  groupsForUser: function (groupUserId) {\n    const userId = groupUserId || this.userId || Template.parentData(1).userId;\n    return Roles.getGroupsForUser(userId);\n  },\n  shopLabel: function (thisShopId) {\n    const shopId = thisShopId || Template.currentData();\n    const shop = Shops.findOne({\n      _id: shopId\n    });\n    if (shop && shop.name) {\n      return shop.name || \"Default Shop\";\n    }\n  },\n  permissionGroups: function (thisShopId) {\n    const permissionGroups = [];\n    const shopId = thisShopId || Template.currentData();\n    const packages = Packages.find({\n      shopId: shopId\n    });\n\n    packages.forEach(function (pkg) {\n      const permissions = [];\n      if (pkg.registry && pkg.enabled) {\n        for (const registryItem of pkg.registry) {\n          // Skip entires with missing routes\n          if (!registryItem.route) {\n            continue;\n          }\n\n          // Get all permissions, add them to an array\n          if (registryItem.permissions) {\n            for (const permission of registryItem.permissions) {\n              // check needed because of non-object perms in the permissions array (e.g \"admin\", \"owner\")\n              if (typeof permission === \"object\") {\n                permission.shopId = shopId;\n                permissions.push(permission);\n              }\n            }\n          }\n\n          // Also create an object map of those same permissions as above\n          const permissionMap = getPermissionMap(permissions);\n          if (!permissionMap[registryItem.route]) {\n            permissions.push({\n              shopId: pkg.shopId,\n              permission: registryItem.name || pkg.name + \"/\" + registryItem.template, // launchdock-connect/connectDashboard\n              icon: registryItem.icon,\n              label: registryItem.label || registryItem.provides || registryItem.route\n            });\n          }\n        }\n        // TODO review this, hardcoded WIP\n        const label = pkg.name.replace(\"reaction\", \"\").replace(/(-.)/g, function (x) {\n          return \" \" + x[1].toUpperCase();\n        });\n\n        return permissionGroups.push({\n          shopId: pkg.shopId,\n          icon: pkg.icon,\n          name: pkg.name,\n          label: label,\n          permissions: _.uniq(permissions)\n        });\n      }\n    });\n\n    return permissionGroups;\n  },\n\n  hasManyPermissions: function (permissions) {\n    return Boolean(permissions.length);\n  },\n  /**\n   * showAvalaraTaxSettings\n   * @return {Boolean} True if avalara is enabled. Defaults to false if not found\n   */\n  showAvalaraTaxSettings() {\n    const avalara = Packages.findOne({\n      name: \"taxes-avalara\",\n      shopId: Reaction.getShopId()\n    });\n\n    return _.get(avalara, \"settings.avalara.enabled\", false);\n  }\n});\n\n/**\n * shopMember events\n *\n */\nTemplate.memberSettings.events({\n  \"change [data-event-action=toggleMemberPermission]\": function (event, template) {\n    const self = this;\n    const permissions = [];\n    const member = template.data;\n    if (!this.shopId) {\n      throw new Meteor.Error(\"Shop is required\");\n    }\n    if (self.name) {\n      permissions.push(self.name);\n      for (const pkgPermissions of self.permissions) {\n        permissions.push(pkgPermissions.permission);\n      }\n    } else {\n      permissions.push(self.permission);\n    }\n    if (Template.instance().$(event.currentTarget).is(\":checked\")) {\n      Meteor.call(\"accounts/addUserPermissions\", member.userId, permissions, this.shopId);\n    } else {\n      Meteor.call(\"accounts/removeUserPermissions\", member.userId, permissions, this.shopId);\n    }\n  },\n  \"click [data-event-action=resetMemberPermission]\": function (event, template) {\n    const $icon = Template.instance().$(event.currentTarget);\n    if (confirm($icon.data(\"confirm\"))) { // eslint-disable-line no-alert\n      const results = [];\n      for (const role of template.data.roles) {\n        results.push(Meteor.call(\"accounts/setUserPermissions\", this.userId, [\"guest\", \"account/profile\"], role));\n      }\n      return results;\n    }\n  }\n});\n","import { Reaction, i18next } from \"/client/api\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\n\n\n/**\n * memberForm events\n *\n */\nTemplate.memberForm.events({\n  \"submit form\": function (event, template) {\n    event.preventDefault();\n\n    const newMemberEmail = template.$('input[name=\"email\"]').val();\n    const newMemberName = template.$('input[name=\"name\"]').val();\n\n    return Meteor.call(\"accounts/inviteShopMember\", Reaction.getShopId(),\n      newMemberEmail, newMemberName, function (error, result) {\n        if (error) {\n          let message;\n          if (error.reason === \"Unable to send invitation email.\") {\n            message = i18next.t(\"accountsUI.error.unableToSendInvitationEmail\");\n          } else if (error.reason === \"A user with this email address already exists\") {\n            message = i18next.t(\"accountsUI.error.userWithEmailAlreadyExists\");\n          } else if (error.reason !== \"\") {\n            message = error;\n          } else {\n            message = `${i18next.t(\"accountsUI.error.errorSendingEmail\")\n            } ${error}`;\n          }\n\n          Alerts.inline(message, \"error\", {\n            placement: \"memberform\"\n          });\n\n          template.$(\"input[type=text], input[type=email]\").val(\"\");\n\n          return false;\n        }\n        if (result) {\n          Alerts.toast(i18next.t(\"accountsUI.info.invitationSent\",\n            \"Invitation sent.\"), \"success\");\n\n          template.$(\"input[type=text], input[type=email]\").val(\"\");\n          $(\".settings-account-list\").show();\n\n          return true;\n        }\n      }\n    );\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Reaction } from \"/client/api\";\nimport { i18next } from  \"/client/api\";\nimport * as Collections from \"/lib/collections\";\n\n/**\n * onCreated: Account Profile View\n */\nTemplate.accountProfile.onCreated(() => {\n  const template = Template.instance();\n\n  template.userHasPassword = ReactiveVar(false);\n\n  Meteor.call(\"accounts/currentUserHasPassword\", (error, result) => {\n    template.userHasPassword.set(result);\n  });\n  // hide actionView if open, doesn't relate to profile page\n  Reaction.hideActionView();\n});\n\n/**\n * Helpers: Account Profile View\n */\nTemplate.accountProfile.helpers({\n\n  /**\n   * User has password\n   * @return {Boolean} return true if the current user has a password, false otherwise\n   */\n  userHasPassword() {\n    return Template.instance().userHasPassword.get();\n  },\n\n  /**\n   * User's order history\n   * @return {Array|null} an array of available orders for the user\n   */\n  userOrders() {\n    const orderSub = Meteor.subscribe(\"AccountOrders\", Meteor.userId());\n    if (orderSub.ready()) {\n      return Collections.Orders.find({\n        userId: Meteor.userId()\n      }, {\n        sort: {\n          createdAt: -1\n        },\n        limit: 25\n      });\n    }\n  },\n\n  /**\n   * User's account profile\n   * @return {Object} account profile\n   */\n  account() {\n    return Collections.Accounts.findOne();\n  },\n\n  /**\n   * User's display name\n   * @return {String} display name\n   */\n  displayName() {\n    const userId = Meteor.userId() || {};\n    const user = Collections.Accounts.findOne(userId);\n\n    if (user) {\n      if (user.name) {\n        return user.name;\n      } else if (user.username) {\n        return user.username;\n      } else if (user.profile && user.profile.name) {\n        return user.profile.name;\n      }\n    }\n\n    if (Roles.userIsInRole(user._id || user.userId, \"account/profile\",\n      Reaction.getShopId())) {\n      return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n    }\n  },\n\n  /**\n   * Returns the address book default view\n   * @return {String} \"addressBookGrid\" || \"addressBookAdd\"\n   */\n  addressBookView: function () {\n    const account = Collections.Accounts.findOne();\n    if (account.profile) {\n      return \"addressBookGrid\";\n    }\n    return \"addressBookAdd\";\n  }\n});\n","import { Accounts } from \"meteor/accounts-base\";\nimport { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { $ } from \"meteor/jquery\";\nimport { Random } from \"meteor/random\";\nimport { Blaze } from \"meteor/blaze\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { i18next } from \"/client/api\";\nimport { LoginFormSharedHelpers } from \"/client/modules/accounts/helpers\";\nimport { UpdatePasswordOverlayContainer } from \"/client/modules/accounts/containers\";\nimport { LoginFormValidation } from \"/lib/api\";\n\n/**\n * Accounts Event: onResetPasswordLink When a user uses a password reset link\n */\nAccounts.onResetPasswordLink((token, done) => {\n  Blaze.renderWithData(Template.loginFormUpdatePasswordOverlay, {\n    token: token,\n    callback: done,\n    isOpen: true\n  }, $(\"body\").get(0));\n});\n\n/**\n * Accounts Event: onEnrollmentLink When a user uses an enrollment link\n */\nAccounts.onEnrollmentLink((token, done) => {\n  Meteor.call(\"accounts/verifyAccount\", \"\", token);\n  Blaze.renderWithData(Template.loginFormUpdatePasswordOverlay, {\n    token: token,\n    callback: done,\n    isOpen: true\n  }, $(\"body\").get(0));\n});\n\n/**\n * Accounts Event: onEmailVerificationLink When a user uses an verification link\n */\nAccounts.onEmailVerificationLink(function (token, done) {\n  Accounts.verifyEmail(token);\n  done();\n});\n\n// ----------------------------------------------------------------------------\n// /**\n//  * Helpers: Login Form Update Password Overlay\n//  */\nTemplate.loginFormUpdatePasswordOverlay.helpers({\n  component() {\n    const currentData = Template.currentData() || {};\n    return {\n      ...currentData,\n      component: UpdatePasswordOverlayContainer\n    };\n  }\n});\n\n// ----------------------------------------------------------------------------\n\n/**\n * onCreated: Login Form Change Password\n */\nTemplate.loginFormChangePassword.onCreated(() => {\n  const template = Template.instance();\n\n  template.uniqueId = Random.id();\n  template.formMessages = new ReactiveVar({});\n});\n\n/**\n * Helpers: Login Form Change Password\n */\nTemplate.loginFormChangePassword.helpers(LoginFormSharedHelpers);\n\n/**\n * Events: Login Form Change Password\n */\nTemplate.loginFormChangePassword.events({\n\n  /**\n   * Submit form for password update\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"submit form\": function (event, template) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const oldPasswordInput = template.$(\".login-input--oldPassword\");\n    const passwordInput = template.$(\".login-input--password\");\n\n    const oldPassword = oldPasswordInput.val().trim();\n    const password = passwordInput.val().trim();\n\n    // We only check if it exists, just incase we\"ve change the password strength and want the\n    // user to have an oppurtinity to update to a stronger password\n    const validatedOldPassword = LoginFormValidation.password(password, { validationLevel: \"exists\" });\n    const validatedPassword = LoginFormValidation.password(password);\n\n    const templateInstance = Template.instance();\n    const errors = {};\n\n    templateInstance.formMessages.set({});\n\n\n    if (validatedOldPassword !== true) {\n      errors.oldPassword = validatedOldPassword;\n    }\n\n    if (validatedPassword !== true) {\n      errors.password = validatedPassword;\n    }\n\n    if ($.isEmptyObject(errors) === false) {\n      templateInstance.formMessages.set({\n        errors: errors\n      });\n      // prevent password update\n      return;\n    }\n\n    Accounts.changePassword(oldPassword, password, (error) => {\n      if (error) {\n        // Show some error message\n        templateInstance.formMessages.set({\n          alerts: [error]\n        });\n      } else {\n        // // Close dropdown or navigate to page\n        templateInstance.formMessages.set({\n          info: [{\n            reason: i18next.t(\"accountsUI.info.passwordChanged\")\n          }]\n        });\n      }\n    });\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { Reaction } from \"/client/api\";\n\nTemplate.verifyAccount.onCreated(() => {\n  const template = Template.instance();\n  template.verified = ReactiveVar(false);\n  const email = Reaction.Router.getQueryParam(\"email\");\n  Meteor.call(\"accounts/verifyAccount\", email, (error, result) => {\n    if (error) {\n      throw new Meteor.Error(\"Account Verification error\", error);\n    }\n    return template.verified.set(result);\n  });\n});\n\nTemplate.verifyAccount.helpers({\n  verificationStatus() {\n    return Template.instance().verified.get();\n  }\n});\n","export LoginButtons from \"./loginButtons\";\nexport SignIn from \"./signIn\";\nexport SignUp from \"./signUp\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Divider, Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass LoginButtons extends Component {\n  static propTypes = {\n    capitalizeName: PropTypes.func,\n    currentView: PropTypes.string,\n    loginServices: PropTypes.func,\n    onSeparator: PropTypes.func,\n    onSocialClick: PropTypes.func\n  }\n\n  renderLoginButtons() {\n    const enabledServices = this.props.loginServices().filter((service) =>{\n      return service.enabled;\n    });\n\n    return (\n      <div>\n        {this.props.loginServices &&\n          enabledServices.map((service) => (\n            <Button\n              key={service._id}\n              className={`btn-block provider-${service.name}`}\n              primary={true}\n              bezelStyle=\"solid\"\n              type=\"button\"\n              data-provider={`${service.name}`}\n              onClick={() => this.props.onSocialClick(service.name)}\n            >\n              <i className={`fa fa-${service.name}`} />\n\n              {this.props.currentView === \"loginFormSignInView\" &&\n                <span>\n                  &nbsp;\n                  <Translation defaultValue=\"Sign in with\"  i18nKey=\"accountsUI.signInWith\" />\n                </span>\n              }\n              {this.props.currentView === \"loginFormSignUpView\" &&\n                <span>\n                  <Translation defaultValue=\"Sign up with\" i18nKey=\"accountsUI.signUpWith\" />\n                </span>\n              }\n\n              <span>\n                &nbsp;\n                <Translation defaultValue={this.props.capitalizeName(service.name)} i18nKey={`social.${service.name}`} />\n              </span>\n            </Button>\n          ))\n        }\n      </div>\n    );\n  }\n\n  renderSeparator() {\n    if (this.props.onSeparator()) {\n      return (\n        <div className=\"loginForm-seperator\">\n          <Divider id=\"auth-divider\" label=\"or\" i18nKeyLabel=\"accountsUI.or\" />\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderLoginButtons()}\n        {this.renderSeparator()}\n      </div>\n    );\n  }\n}\n\nexport default LoginButtons;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Button, TextField, Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass SignIn extends Component {\n  static propTypes = {\n    credentials: PropTypes.object,\n    isLoading: PropTypes.bool,\n    loginFormMessages: PropTypes.func,\n    messages: PropTypes.object,\n    onError: PropTypes.func,\n    onForgotPasswordClick: PropTypes.func,\n    onFormSubmit: PropTypes.func,\n    onSignUpClick: PropTypes.func,\n    uniqueId: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: props.credentials.email,\n      password: props.credentials.password\n    };\n\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    if (this.props.onFormSubmit) {\n      this.props.onFormSubmit(event, this.state.email, this.state.password);\n    }\n  }\n\n  renderEmailErrors() {\n    if (this.props.onError(this.props.messages.errors && this.props.messages.errors.email)) {\n      return (\n        <span className=\"help-block\">\n          <Translation\n            defaultValue={this.props.messages.errors.email.reason}\n            i18nKey={this.props.messages.errors.email.i18nKeyReason}\n          />\n        </span>\n      );\n    }\n  }\n\n  renderPasswordErrors() {\n    return (\n      <span className=\"help-block\">\n        {this.props.onError(this.props.messages.errors && this.props.messages.errors.password) &&\n          this.props.messages.errors.password.map((error, i) => (\n            <Translation\n              key={i}\n              defaultValue={error.reason}\n              i18nKey={error.i18nKeyReason}\n            />\n          ))\n        }\n      </span>\n    );\n  }\n\n  renderFormMessages() {\n    if (this.props.loginFormMessages) {\n      return (\n        <div>\n          {this.props.loginFormMessages()}\n        </div>\n      );\n    }\n  }\n\n  renderSpinnerOnWait() {\n    if (this.props.isLoading === true) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <i className=\"fa fa-spinner fa-spin\" />\n        </div>\n      );\n    }\n    return (\n      <Button\n        className=\"btn-block\"\n        primary={true}\n        bezelStyle=\"solid\"\n        i18nKeyLabel=\"accountsUI.signIn\"\n        label=\"Sign In\"\n        type=\"submit\"\n        tabIndex=\"3\"\n        eventAction=\"submitSignInForm\"\n      />\n    );\n  }\n\n  render() {\n    const emailClasses = classnames({\n      \"form-group\": true,\n      \"form-group-email\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.email)\n    });\n\n    const passwordClasses = classnames({\n      \"form-group\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.password)\n    });\n    return (\n      <div>\n        <div className=\"loginForm-title\">\n          <h2>\n            <Translation defaultValue=\"Sign In\" i18nKey=\"accountsUI.signIn\" />\n          </h2>\n        </div>\n\n        <form className=\"login-form\" onSubmit={this.handleSubmit} noValidate>\n\n          {this.renderFormMessages()}\n\n          <div className={emailClasses}>\n            <TextField\n              i18nKeyLabel=\"accountsUI.emailAddress\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              tabIndex=\"1\"\n              id={`email-${this.props.uniqueId}`}\n              value={this.state.email}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderEmailErrors()}\n          </div>\n\n          <div className={passwordClasses}>\n            <TextField\n              i18nKeyLabel=\"accountsUI.password\"\n              label=\"Password\"\n              name=\"password\"\n              type=\"password\"\n              tabIndex=\"2\"\n              id={`password-${this.props.uniqueId}`}\n              value={this.state.password}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderPasswordErrors()}\n          </div>\n\n          <div className=\"form-group\">\n            {this.renderSpinnerOnWait()}\n          </div>\n\n          <div className=\"form-group flex flex-justify-spaceBetween\">\n            <a\n              href=\"#\"\n              tabIndex=\"4\"\n              onClick={this.props.onForgotPasswordClick}\n            >\n              <Translation defaultValue=\"Reset Password\" i18nKey=\"accountsUI.forgotPassword\" />\n            </a>\n            <a\n              href=\"#\"\n              tabIndex=\"5\"\n              onClick={this.props.onSignUpClick}\n            >\n              <Translation defaultValue=\"Register\" i18nKey=\"accountsUI.signUp\" />\n            </a>\n          </div>\n\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default SignIn;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Button, TextField, Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass SignUp extends Component {\n  static propTypes = {\n    credentials: PropTypes.object,\n    hasPasswordService: PropTypes.func,\n    isLoading: PropTypes.bool,\n    loginFormMessages: PropTypes.func,\n    messages: PropTypes.object,\n    onError: PropTypes.func,\n    onFormSubmit: PropTypes.func,\n    onSignInClick: PropTypes.func,\n    uniqueId: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: props.credentials.email,\n      password: props.credentials.password\n    };\n\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    if (this.props.onFormSubmit) {\n      this.props.onFormSubmit(event, this.state.email, this.state.password);\n    }\n  }\n\n  renderEmailErrors() {\n    if (this.props.onError(this.props.messages.errors && this.props.messages.errors.email)) {\n      return (\n        <span className=\"help-block\">\n          <Translation\n            defaultValue={this.props.messages.errors.email.reason}\n            i18nKey={this.props.messages.errors.email.i18nKeyReason}\n          />\n        </span>\n      );\n    }\n  }\n\n  renderPasswordErrors() {\n    return (\n      <span className=\"help-block\">\n        {this.props.onError(this.props.messages.errors && this.props.messages.errors.password) &&\n          this.props.messages.errors.password.map((error, i) => (\n            <Translation\n              key={i}\n              defaultValue={error.reason}\n              i18nKey={error.i18nKeyReason}\n            />\n          ))\n        }\n      </span>\n    );\n  }\n\n  renderFormMessages() {\n    if (this.props.loginFormMessages) {\n      return (\n        <div>\n          {this.props.loginFormMessages()}\n        </div>\n      );\n    }\n  }\n\n  renderSpinnerOnWait() {\n    if (this.props.isLoading === true) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <i className=\"fa fa-spinner fa-spin\" />\n        </div>\n      );\n    }\n    return (\n      <Button\n        className=\"btn-block\"\n        primary={true}\n        bezelStyle=\"solid\"\n        i18nKeyLabel=\"accountsUI.signUpButton\"\n        label=\"Register\"\n        type=\"submit\"\n        tabIndex=\"3\"\n        eventAction=\"register\"\n      />\n    );\n  }\n\n  renderForm(emailClasses, passwordClasses) {\n    if (this.props.hasPasswordService()) {\n      return (\n        <form className=\"login-form\" onSubmit={this.handleSubmit} noValidate>\n\n          {this.renderFormMessages()}\n\n          <div className={emailClasses}>\n            <TextField\n              i18nKeyLabel=\"accountsUI.emailAddress\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              tabIndex=\"1\"\n              id={`email-${this.props.uniqueId}`}\n              value={this.state.email}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderEmailErrors()}\n          </div>\n\n          <div className={passwordClasses}>\n            <TextField\n              i18nKeyLabel=\"accountsUI.password\"\n              label=\"Password\"\n              name=\"password\"\n              type=\"password\"\n              tabIndex=\"2\"\n              id={`password-${this.props.uniqueId}`}\n              value={this.state.password}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderPasswordErrors()}\n          </div>\n\n          <div className=\"form-group\">\n            {this.renderSpinnerOnWait()}\n          </div>\n\n          <div className=\"form-group\">\n            <a\n              href=\"#\"\n              tabIndex=\"4\"\n              data-event-category=\"accounts\"\n              onClick={this.props.onSignInClick}\n            >\n              <Translation defaultValue=\"Sign In\" i18nKey=\"accountsUI.signIn\" />\n            </a>\n          </div>\n        </form>\n      );\n    }\n  }\n\n  render() {\n    const emailClasses = classnames({\n      \"form-group\": true,\n      \"form-group-email\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.email)\n    });\n\n    const passwordClasses = classnames({\n      \"form-group\": true,\n      \"form-group-password\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.password)\n    });\n    return (\n      <div>\n        <div className=\"loginForm-title\">\n          <h2>\n            <Translation defaultValue=\"Create an Account\" i18nKey=\"accountsUI.createAccount\" />\n          </h2>\n        </div>\n\n        {this.renderForm(emailClasses, passwordClasses)}\n\n      </div>\n    );\n  }\n}\n\nexport default SignUp;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Reaction } from \"/client/api\";\nimport { Button, DropDownMenu, MenuItem, Translation } from \"/imports/plugins/core/ui/client/components\";\nimport { LoginContainer } from \"../../containers/auth\";\n\nconst iconStyle = {\n  margin: \"10px 10px 10px 6px\",\n  width: \"20px\",\n  fontSize: \"inherit\",\n  textAlign: \"center\"\n};\n\nconst menuStyle = {\n  padding: \"0px 10px 10px 10px\",\n  minWidth: 220,\n  minHeight: 50\n};\n\nclass MainDropdown extends Component {\n  static propTypes = {\n    adminShortcuts: PropTypes.object,\n    currentUser: PropTypes.oneOfType(\n      [PropTypes.bool, PropTypes.object]\n    ),\n    handleChange: PropTypes.func,\n    userImage: PropTypes.oneOfType(\n      [PropTypes.bool, PropTypes.string]\n    ),\n    userName: PropTypes.string,\n    userShortcuts: PropTypes.object\n  }\n\n  buttonElement() {\n    return (\n      <Button containerStyle={{ color: \"#000\", fontWeight: \"normal\", letterSpacing: 0.8 }}>\n        <img className=\"accounts-img-tag\" src={this.props.userImage} />&nbsp;\n        <span>{this.props.userName}</span>&nbsp;\n        <i className=\"fa fa-caret-down\" />\n      </Button>\n    );\n  }\n\n  renderAdminIcons() {\n    return (\n      Reaction.Apps(this.props.adminShortcuts).map((shortcut) => (\n        <MenuItem\n          key={shortcut.packageId}\n          className=\"accounts-a-tag\"\n          label={shortcut.label}\n          i18nKeyLabel={shortcut.i18nKeyLabel}\n          icon={shortcut.icon}\n          iconStyle={iconStyle}\n          value={shortcut}\n        />\n      ))\n    );\n  }\n\n  renderUserIcons() {\n    return (\n      Reaction.Apps(this.props.userShortcuts).map((option) => (\n        <MenuItem\n          key={option.packageId}\n          className=\"accounts-a-tag\"\n          label={option.label}\n          i18nKeyLabel={option.i18nKeyLabel}\n          icon={option.icon && option.icon}\n          iconStyle={iconStyle}\n          value={option}\n        />\n      ))\n    );\n  }\n\n  renderSignOutButton() {\n    return (\n      <MenuItem\n        className=\"btn btn-primary btn-block accounts-btn-tag\"\n        label=\"Sign out\"\n        value=\"logout\"\n      />\n    );\n  }\n\n  renderSignInComponent() {\n    return (\n      <div className=\"accounts-dropdown\">\n        <div className=\"dropdown-toggle\" data-toggle=\"dropdown\" data-hover=\"dropdown\" data-delay=\"1000\">\n          <span><Translation defaultValue=\"Sign In\" i18nKey=\"accountsUI.signIn\" /></span><b className=\"caret\" />\n        </div>\n        <div\n          className=\"accounts-dialog accounts-layout dropdown-menu pull-right\"\n          style={{ padding: \"10px 20px\" }}\n        >\n          <LoginContainer />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.currentUser ?\n          <div style={{ paddingRight: 5 }}>\n            <DropDownMenu\n              buttonElement={this.buttonElement()}\n              attachment=\"bottom right\"\n              targetAttachment=\"top right\"\n              menuStyle={menuStyle}\n              className=\"accounts-li-tag\"\n              onChange={this.props.handleChange}\n            >\n\n              {this.renderUserIcons()}\n              {this.renderAdminIcons()}\n              {this.renderSignOutButton()}\n\n            </DropDownMenu>\n          </div>\n          :\n          <div className=\"accounts dropdown\" role=\"menu\">\n            {this.renderSignInComponent()}\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default MainDropdown;\n","export LoginFormMessages from \"./loginFormMessages\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass LoginFormMessages extends Component {\n  static propTypes = {\n    formMessages: PropTypes.object,\n    loginFormMessages: PropTypes.func\n  }\n\n  renderFormMessages() {\n    if (this.props.loginFormMessages) {\n      if (this.props.formMessages.info) {\n        return (\n          <div className=\"alert alert-info\">\n            <p>\n              {this.props.loginFormMessages()}\n            </p>\n          </div>\n        );\n      } else if (this.props.formMessages.alerts) {\n        return (\n          <div className=\"alert alert-danger\">\n            <p>\n              {this.props.loginFormMessages()}\n            </p>\n          </div>\n        );\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderFormMessages()}\n      </div>\n    );\n  }\n}\n\nexport default LoginFormMessages;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport {  Button, TextField, Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass Forgot extends Component {\n  static propTypes = {\n    credentials: PropTypes.object,\n    isDisabled: PropTypes.bool,\n    isLoading: PropTypes.bool,\n    loginFormMessages: PropTypes.func,\n    messages: PropTypes.object,\n    onError: PropTypes.func,\n    onFormSubmit: PropTypes.func,\n    onSignInClick: PropTypes.func,\n    uniqueId: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: props.credentials.email\n    };\n\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    if (this.props.onFormSubmit) {\n      this.props.onFormSubmit(event, this.state.email);\n    }\n  }\n\n  renderFormMessages() {\n    if (this.props.loginFormMessages) {\n      return (\n        <div>\n          {this.props.loginFormMessages()}\n        </div>\n      );\n    }\n  }\n\n  renderEmailErrors() {\n    if (this.props.onError(this.props.messages.errors && this.props.messages.errors.email)) {\n      return (\n        <span className=\"help-block\">\n          <Translation\n            defaultValue={this.props.messages.errors.email.reason}\n            i18nKey={this.props.messages.errors.email.i18nKeyReason}\n          />\n        </span>\n      );\n    }\n  }\n\n  renderSpinnerOnWait() {\n    if (this.props.isLoading === true) {\n      return (\n        <div style={{ textAlign: \"center\" }}>\n          <i className=\"fa fa-spinner fa-spin\" />\n        </div>\n      );\n    }\n    return (\n      <Button\n        className=\"btn-block\"\n        primary={true}\n        bezelStyle=\"solid\"\n        i18nKeyLabel=\"accountsUI.resetYourPassword\"\n        label=\"Reset Your Password\"\n        type=\"submit\"\n        tabIndex=\"2\"\n        eventAction=\"reset-password\"\n        disabled={this.props.isDisabled}\n      />\n    );\n  }\n\n  render() {\n    const emailClasses = classnames({\n      \"form-group\": true,\n      \"form-group-email\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.email)\n    });\n\n    return (\n      <div>\n        <div className=\"loginForm-title\">\n          <h2>\n            <Translation defaultValue=\"Reset your password\" i18nKey=\"accountsUI.resetYourPassword\" />\n          </h2>\n        </div>\n\n        <form name=\"loginForm\" onSubmit={this.handleSubmit} noValidate>\n\n          {this.renderFormMessages()}\n\n          <div className={emailClasses}>\n            <TextField\n              i18nKeyLabel=\"accountsUI.emailAddress\"\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              tabIndex=\"1\"\n              id={`email-${this.props.uniqueId}`}\n              value={this.state.email}\n              onChange={this.handleFieldChange}\n            />\n            {this.renderEmailErrors()}\n          </div>\n\n          <div className=\"form-group\">\n            {this.renderSpinnerOnWait()}\n          </div>\n\n          <div className=\"form-group\">\n            <a\n              href=\"#\"\n              tabIndex=\"3\"\n              data-event-category=\"accounts\"\n              onClick={this.props.onSignInClick}\n            >\n              <Translation defaultValue=\"Sign In\" i18nKey=\"accountsUI.signIn\" />\n            </a>\n          </div>\n\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Forgot;\n","export Forgot from \"./forgot\";\nexport UpdatePasswordOverlay from \"./updatePasswordOverlay\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\nimport { Button, TextField, Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass UpdatePasswordOverlay extends Component {\n  static propTypes = {\n    isDisabled: PropTypes.bool,\n    isOpen: PropTypes.bool,\n    loginFormMessages: PropTypes.func,\n    messages: PropTypes.object,\n    onCancel: PropTypes.func,\n    onError: PropTypes.func,\n    onFormSubmit: PropTypes.func,\n    uniqueId: PropTypes.string\n  }\n\n  constructor() {\n    super();\n\n    this.state = {\n      password: \"\",\n      showSpinner: true\n    };\n\n    this.handleFieldChange = this.handleFieldChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n\n  componentWillReceiveProps() {\n    this.setState({ showSpinner: false });\n  }\n\n  handleFieldChange = (event, value, field) => {\n    this.setState({\n      [field]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    if (this.props.onFormSubmit) {\n      this.props.onFormSubmit(event, this.state.password);\n    }\n  }\n\n  handleCancel = (event) => {\n    if (this.props.onCancel) {\n      this.props.onCancel(event);\n    }\n  }\n\n  renderFormMessages() {\n    if (this.props.loginFormMessages) {\n      return (\n        <div>\n          {this.props.loginFormMessages()}\n        </div>\n      );\n    }\n  }\n\n  renderPasswordErrors() {\n    return (\n      <span className=\"help-block\">\n        {this.props.onError(this.props.messages.errors && this.props.messages.errors.password) &&\n        this.props.messages.errors.password.map((error, i) => (\n          <Translation\n            key={i}\n            defaultValue={error.reason}\n            i18nKey={error.i18nKeyReason}\n          />\n        ))\n        }\n      </span>\n    );\n  }\n\n  renderSpinnerOnWait() {\n    if (this.props.isDisabled === true) {\n      return (\n        <div className=\"col-sm-6\" style={{ textAlign: \"center\" }}>\n          <i className=\"fa fa-spinner fa-spin\"/>\n        </div>\n      );\n    }\n    return (\n      <div className=\"col-sm-6\">\n        <Button\n          className=\"btn-block\"\n          primary={true}\n          bezelStyle=\"solid\"\n          i18nKeyLabel=\"accountsUI.updatePasswordAndContinue\"\n          label=\"Update and continue\"\n          type=\"submit\"\n        />\n      </div>\n    );\n  }\n\n  renderSpinnerOnLoad() {\n    return (\n      <div className=\"spinner-container\">\n        <div className=\"spinner\"/>\n      </div>\n    );\n  }\n\n  render() {\n    const passwordClasses = classnames({\n      \"form-group\": true,\n      \"has-error has-feedback\": this.props.onError(this.props.messages.errors && this.props.messages.errors.password)\n    });\n    const { showSpinner } = this.state;\n\n    return (\n      <div>\n        {this.props.isOpen === true &&\n        <div>\n          <div className=\"modal-backdrop fade in\" id={`modal-backdrop-${this.props.uniqueId}`}/>\n          <div className=\"modal fade in\" id={`modal-${this.props.uniqueId}`} style={{ display: \"block\" }}>\n            <div className=\"modal-dialog\">\n              {showSpinner ? this.renderSpinnerOnLoad() :\n                <form className=\"modal-content\" onSubmit={this.handleSubmit}>\n                  <div className=\"modal-header\">\n                    <h4 className=\"modal-title\">\n                      <Translation defaultValue=\"Update Your Password\" i18nKey=\"accountsUI.updateYourPassword\"/>\n                    </h4>\n                  </div>\n\n                  <div className=\"modal-body\">\n                    <div className=\"login-form\">\n\n                      {this.renderFormMessages()}\n\n                      <div className={passwordClasses}>\n                        <TextField\n                          i18nKeyLabel=\"accountsUI.password\"\n                          label=\"Password\"\n                          name=\"password\"\n                          type=\"password\"\n                          id={`password-${this.props.uniqueId}`}\n                          value={this.state.password}\n                          onChange={this.handleFieldChange}\n                        />\n                        {this.renderPasswordErrors()}\n                      </div>\n\n                    </div>\n                  </div>\n\n                  <div className=\"modal-footer\">\n                    {this.renderSpinnerOnWait()}\n\n                    <div className=\"col-sm-6\">\n                      <Button\n                        className=\"btn-block\"\n                        status=\"danger\"\n                        bezelStyle=\"solid\"\n                        i18nKeyLabel=\"app.cancel\"\n                        label=\"Cancel\"\n                        type=\"button\"\n                        onClick={this.handleCancel}\n                        disabled={this.props.isDisabled}\n                      />\n                    </div>\n                  </div>\n\n                </form>\n              }\n            </div>\n          </div>\n        </div>}\n      </div>\n    );\n  }\n}\n\nexport default UpdatePasswordOverlay;\n","export { SignIn, SignUp, LoginButtons } from \"./auth\";\nexport { Forgot, UpdatePasswordOverlay } from \"./passwordReset\";\nexport { LoginFormMessages } from \"./helpers\";\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Router } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { SignIn, SignUp, LoginButtons } from \"../../components\";\nimport { MessagesContainer } from \"../helpers\";\nimport { ServiceConfigHelper } from \"../../helpers\";\nimport { LoginFormSharedHelpers } from \"/client/modules/accounts/helpers\";\nimport { LoginFormValidation } from \"/lib/api\";\n\nclass AuthContainer extends Component {\n  static propTypes = {\n    currentRoute: PropTypes.object,\n    currentView: PropTypes.string,\n    formMessages: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formMessages: props.formMessages,\n      isLoading: false\n    };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.hasError = this.hasError.bind(this);\n    this.formMessages = this.formMessages.bind(this);\n    this.services = this.services.bind(this);\n    this.shouldShowSeperator = this.shouldShowSeperator.bind(this);\n    this.handleSocialLogin = this.handleSocialLogin.bind(this);\n    this.capitalizeName = this.capitalizeName.bind(this);\n    this.hasPasswordService = this.hasPasswordService.bind(this);\n  }\n\n  handleFormSubmit = (event, email, password) => {\n    event.preventDefault();\n\n    this.setState({\n      isLoading: true\n    });\n    const errors = {};\n    const username = email.trim();\n    const pword = password.trim();\n\n    const validatedEmail = LoginFormValidation.email(username);\n    const validatedPassword = LoginFormValidation.password(pword, { validationLevel: \"exists\" });\n\n    if (validatedEmail !== true) {\n      errors.email = validatedEmail;\n    }\n\n    if (validatedPassword !== true) {\n      errors.password = validatedPassword;\n    }\n\n    if (_.isEmpty(errors) === false) {\n      this.setState({\n        isLoading: false,\n        formMessages: {\n          errors: errors\n        }\n      });\n      return;\n    }\n\n    if (this.props.currentView === \"loginFormSignInView\") {\n      Meteor.loginWithPassword(username, pword, (error) => {\n        if (error) {\n          this.setState({\n            isLoading: false,\n            formMessages: {\n              alerts: [error]\n            }\n          });\n        } else {\n          Router.go(this.props.currentRoute.route.path);\n        }\n      });\n    } else if (this.props.currentView === \"loginFormSignUpView\") {\n      const newUserData = {\n        email: username,\n        password: pword\n      };\n\n      Accounts.createUser(newUserData, (error) => {\n        if (error) {\n          this.setState({\n            isLoading: false,\n            formMessages: {\n              alerts: [error]\n            }\n          });\n        } else {\n          Router.go(this.props.currentRoute.route.path);\n        }\n      });\n    }\n  }\n\n  hasError = (error) => {\n    // True here means the field is valid\n    // We're checking if theres some other message to display\n    if (error !== true && typeof error !== \"undefined\") {\n      return true;\n    }\n\n    return false;\n  }\n\n  formMessages = () => {\n    return (\n      <MessagesContainer\n        messages={this.state.formMessages}\n      />\n    );\n  }\n\n  services = () => {\n    const serviceHelper = new ServiceConfigHelper();\n    return serviceHelper.services();\n  }\n\n  shouldShowSeperator = () => {\n    const serviceHelper = new ServiceConfigHelper();\n    const services = serviceHelper.services();\n    const enabledServices = _.filter(services, {\n      enabled: true\n    });\n\n    return !!Package[\"accounts-password\"] && enabledServices.length > 0;\n  }\n\n  capitalizeName = (str) => {\n    return LoginFormSharedHelpers.capitalize(str);\n  }\n\n  handleSocialLogin = (value) => {\n    let serviceName = value;\n\n    // Get proper service name\n    if (serviceName === \"meteor-developer\") {\n      serviceName = \"MeteorDeveloperAccount\";\n    } else {\n      serviceName = this.capitalizeName(serviceName);\n    }\n\n    const loginWithService = Meteor[\"loginWith\" + serviceName];\n    const options = {}; // use default scope unless specified\n\n    loginWithService(options, (error) => {\n      if (error) {\n        this.setState({\n          formMessages: {\n            alerts: [error]\n          }\n        });\n      }\n    });\n  }\n\n  hasPasswordService = () => {\n    return !!Package[\"accounts-password\"];\n  }\n\n  renderAuthView() {\n    if (this.props.currentView === \"loginFormSignInView\") {\n      return (\n        <SignIn\n          {...this.props}\n          onFormSubmit={this.handleFormSubmit}\n          messages={this.state.formMessages}\n          onError={this.hasError}\n          loginFormMessages={this.formMessages}\n          isLoading={this.state.isLoading}\n        />\n      );\n    } else if (this.props.currentView === \"loginFormSignUpView\") {\n      return (\n        <SignUp\n          {...this.props}\n          onFormSubmit={this.handleFormSubmit}\n          messages={this.state.formMessages}\n          onError={this.hasError}\n          loginFormMessages={this.formMessages}\n          hasPasswordService={this.hasPasswordService}\n          isLoading={this.state.isLoading}\n        />\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <LoginButtons\n          loginServices={this.services}\n          currentView={this.props.currentView}\n          onSeparator={this.shouldShowSeperator}\n          onSocialClick={this.handleSocialLogin}\n          capitalizeName={this.capitalizeName}\n        />\n        {this.renderAuthView()}\n      </div>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const formMessages = {};\n\n  onData(null, {\n    formMessages,\n    currentRoute: Router.current()\n  });\n}\n\nexport default composeWithTracker(composer)(AuthContainer);\n","export AuthContainer from \"./authContainer\";\nexport LoginContainer from \"./loginContainer\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Random } from \"meteor/random\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport AuthContainer from \"./authContainer\";\nimport { ForgotContainer } from \"../passwordReset\";\n\nclass LoginContainer extends Component {\n  static propTypes = {\n    credentials: PropTypes.object,\n    loginFormCurrentView: PropTypes.string,\n    uniqueId: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentView: props.loginFormCurrentView\n    };\n\n    this.showForgotPasswordView = this.showForgotPasswordView.bind(this);\n    this.showSignUpView = this.showSignUpView.bind(this);\n    this.showSignInView = this.showSignInView.bind(this);\n  }\n\n  showForgotPasswordView(event) {\n    event.preventDefault();\n\n    this.setState({\n      currentView: \"loginFormResetPasswordView\"\n    });\n  }\n\n  showSignUpView(event) {\n    event.preventDefault();\n\n    this.setState({\n      currentView: \"loginFormSignUpView\"\n    });\n  }\n\n  showSignInView(event) {\n    event.preventDefault();\n\n    this.setState({\n      currentView: \"loginFormSignInView\"\n    });\n  }\n\n  render() {\n    if (this.state.currentView === \"loginFormSignInView\" || this.state.currentView === \"loginFormSignUpView\") {\n      return (\n        <AuthContainer\n          credentials={this.props.credentials}\n          uniqueId={this.props.uniqueId}\n          currentView={this.state.currentView}\n          onForgotPasswordClick={this.showForgotPasswordView}\n          onSignUpClick={this.showSignUpView}\n          onSignInClick={this.showSignInView}\n        />\n      );\n    } else if (this.state.currentView === \"loginFormResetPasswordView\") {\n      return (\n        <ForgotContainer\n          credentials={this.props.credentials}\n          uniqueId={this.props.uniqueId}\n          currentView={this.state.currentView}\n          onSignInClick={this.showSignInView}\n        />\n      );\n    }\n  }\n}\n\nfunction composer(props, onData) {\n  let startView = \"loginFormSignInView\";\n\n  if (props) {\n    if (props.startView) {\n      startView = props.startView;\n    }\n  }\n  const uniqueId = Random.id();\n  const credentials = {};\n\n  onData(null, {\n    loginFormCurrentView: startView,\n    uniqueId,\n    credentials\n  });\n}\n\nexport default composeWithTracker(composer)(LoginContainer);\n","import React, { Component } from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Session } from \"meteor/session\";\nimport { Gravatar } from \"meteor/jparker:gravatar\";\nimport { Reaction, Logger } from \"/client/api\";\nimport { i18nextDep, i18next } from  \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport * as Collections from \"/lib/collections\";\nimport { Tags } from \"/lib/collections\";\nimport MainDropdown from \"../../components/dropdown/mainDropdown\";\n\nclass MainDropdownContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange = (event, value) => {\n    event.preventDefault();\n\n    if (value === \"logout\") {\n      return Meteor.logout((error) => {\n        if (error) {\n          Logger.warn(\"Failed to logout.\", error);\n        }\n      });\n    }\n\n    if (value.name === \"createProduct\") {\n      Reaction.setUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n      Meteor.call(\"products/createProduct\", (error, productId) => {\n        let currentTag;\n        let currentTagId;\n\n        if (error) {\n          throw new Meteor.Error(\"createProduct error\", error);\n        } else if (productId) {\n          currentTagId = Session.get(\"currentTag\");\n          currentTag = Tags.findOne(currentTagId);\n          if (currentTag) {\n            Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n          }\n          // go to new product\n          Reaction.Router.go(\"product\", {\n            handle: productId\n          });\n        }\n      });\n    } else if (value.name !== \"account/profile\") {\n      return Reaction.showActionView(value);\n    } else if (value.route || value.name) {\n      const route = value.name || value.route;\n      return Reaction.Router.go(route);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"accounts\">\n        <MainDropdown\n          {...this.props}\n          handleChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nfunction getCurrentUser() {\n  const shopId = Reaction.getShopId();\n  const user = Accounts.user() || {};\n\n  if (!shopId || typeof user !== \"object\") {\n    return null;\n  }\n\n\n  // shoppers should always be guests\n  const isGuest = Roles.userIsInRole(user, \"guest\", shopId);\n  // but if a user has never logged in then they are anonymous\n  const isAnonymous = Roles.userIsInRole(user, \"anonymous\", shopId);\n\n  const account = Collections.Accounts.findOne(user._id);\n\n  return isGuest && !isAnonymous ? account : null;\n}\n\nfunction getUserGravatar(currentUser, size) {\n  const options = {\n    secure: true,\n    size: size,\n    default: \"identicon\"\n  };\n  const user = currentUser || Accounts.user();\n  if (!user) {\n    return false;\n  }\n  const account = Collections.Accounts.findOne(user._id);\n  // first we check picture exists. Picture has higher priority to display\n  if (account && account.profile && account.profile.picture) {\n    return account.profile.picture;\n  }\n  if (user.emails && user.emails.length === 1) {\n    const email = user.emails[0].address;\n    return Gravatar.imageUrl(email, options);\n  }\n}\n\nfunction displayName(displayUser) {\n  i18nextDep.depend();\n\n  const user = displayUser || Accounts.user();\n\n  if (user) {\n    if (user.name) {\n      return user.name;\n    } else if (user.username) {\n      return user.username;\n    } else if (user.profile && user.profile.name) {\n      return user.profile.name;\n    }\n\n    // todo: previous check was user.services !== \"anonymous\", \"resume\". Is this\n    // new check covers previous check?\n    if (Roles.userIsInRole(user._id || user.userId, \"account/profile\",\n      Reaction.getShopId())) {\n      return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n    }\n  }\n}\n\nfunction getAdminShortcutIcons() {\n  // get shortcuts with audience permissions based on user roles\n  const roles = Roles.getRolesForUser(Meteor.userId(), Reaction.getShopId());\n\n  return {\n    provides: \"shortcut\",\n    enabled: true,\n    audience: roles\n  };\n}\n\nconst composer = (props, onData) => {\n  const currentUser = getCurrentUser();\n  const userImage = getUserGravatar(currentUser, 40);\n  const userName = displayName(currentUser);\n  const adminShortcuts = getAdminShortcutIcons();\n  const userShortcuts = {\n    provides: \"userAccountDropdown\",\n    enabled: true\n  };\n\n  onData(null, {\n    adminShortcuts,\n    currentUser,\n    userImage,\n    userName,\n    userShortcuts\n  });\n};\n\nexport default composeWithTracker(composer)(MainDropdownContainer);\n","export MessagesContainer from \"./messagesContainer\";\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { LoginFormMessages } from \"../../components\";\n\nclass MessagesContainer extends Component {\n  static propTypes = {\n    messages: PropTypes.object\n  }\n\n  constructor() {\n    super();\n\n    this.loginFormMessages = this.loginFormMessages.bind(this);\n  }\n\n  loginFormMessages = () => {\n    let reasons = \"\";\n    if (this.props.messages.info) {\n      this.props.messages.info.forEach(function (info) {\n        reasons = info.reason;\n      });\n    } else if (this.props.messages.alerts) {\n      this.props.messages.alerts.forEach(function (alert) {\n        reasons = alert.reason;\n      });\n    }\n    return reasons;\n  }\n\n  render() {\n    return (\n      <LoginFormMessages\n        loginFormMessages={this.loginFormMessages}\n        formMessages={this.props.messages}\n      />\n    );\n  }\n}\n\nexport default MessagesContainer;\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Meteor } from \"meteor/meteor\";\nimport { i18next } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { MessagesContainer } from \"../helpers\";\nimport { Forgot } from \"../../components\";\nimport { LoginFormValidation } from \"/lib/api\";\n\n\nclass ForgotContainer extends Component {\n  static propTypes = {\n    formMessages: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formMessages: props.formMessages,\n      isLoading: false,\n      isDisabled: false\n    };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.formMessages = this.formMessages.bind(this);\n    this.hasError = this.hasError.bind(this);\n  }\n\n  handleFormSubmit = (event, email) => {\n    event.preventDefault();\n\n    this.setState({\n      isLoading: true\n    });\n\n    let newEmail;\n    email === undefined ? newEmail = \"\" : newEmail = email;\n\n    const emailAddress = newEmail.trim();\n    const validatedEmail = LoginFormValidation.email(emailAddress);\n    const errors = {};\n\n    if (validatedEmail !== true) {\n      errors.email = validatedEmail;\n    }\n\n    if (_.isEmpty(errors) === false) {\n      this.setState({\n        isLoading: false,\n        formMessages: {\n          errors: errors\n        }\n      });\n      return;\n    }\n\n    Meteor.call(\"accounts/sendResetPasswordEmail\", { email: emailAddress }, (error) => {\n      // Show some message confirming result\n      if (error) {\n        this.setState({\n          isLoading: false,\n          formMessages: {\n            alerts: [error]\n          }\n        });\n      } else {\n        this.setState({\n          isLoading: false,\n          isDisabled: true,\n          formMessages: {\n            info: [{\n              reason: i18next.t(\"accountsUI.info.passwordResetSend\") || \"Password reset mail sent.\"\n            }]\n          }\n        });\n      }\n    });\n  }\n\n  formMessages = () => {\n    return (\n      <MessagesContainer\n        messages={this.state.formMessages}\n      />\n    );\n  }\n\n  hasError = (error) => {\n    // True here means the field is valid\n    // We're checking if theres some other message to display\n    if (error !== true && typeof error !== \"undefined\") {\n      return true;\n    }\n\n    return false;\n  }\n\n  render() {\n    return (\n      <Forgot\n        {...this.props}\n        onFormSubmit={this.handleFormSubmit}\n        loginFormMessages={this.formMessages}\n        messages={this.state.formMessages}\n        onError={this.hasError}\n        isLoading={this.state.isLoading}\n        isDisabled={this.state.isDisabled}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const formMessages = {};\n\n  onData(null, {\n    formMessages\n  });\n}\n\nexport default composeWithTracker(composer)(ForgotContainer);\n","export ForgotContainer from \"./forgotContainer\";\nexport UpdatePasswordOverlayContainer from \"./passwordOverlayContainer\";\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Random } from \"meteor/random\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { UpdatePasswordOverlay } from \"/client/modules/accounts/components\";\nimport { MessagesContainer } from \"/client/modules/accounts/containers/helpers\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport { LoginFormValidation } from \"/lib/api\";\n\nclass UpdatePasswordOverlayContainer extends Component {\n  static propTypes = {\n    callback: PropTypes.func,\n    formMessages: PropTypes.object,\n    isOpen: PropTypes.bool,\n    token: PropTypes.string,\n    uniqueId: PropTypes.string\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formMessages: props.formMessages,\n      isOpen: props.isOpen,\n      isDisabled: false\n    };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.handleFormCancel = this.handleFormCancel.bind(this);\n    this.formMessages = this.formMessages.bind(this);\n    this.hasError = this.hasError.bind(this);\n  }\n\n  handleFormSubmit = (event, passwordValue) => {\n    event.preventDefault();\n\n    this.setState({\n      isDisabled: true\n    });\n\n    const password = passwordValue.trim();\n    const validatedPassword = LoginFormValidation.password(password);\n    const errors = {};\n\n    if (validatedPassword !== true) {\n      errors.password = validatedPassword;\n    }\n\n    if (_.isEmpty(errors) === false) {\n      this.setState({\n        isDisabled: false,\n        formMessages: {\n          errors: errors\n        }\n      });\n      return;\n    }\n\n    Accounts.resetPassword(this.props.token, password, (error) => {\n      if (error) {\n        this.setState({\n          isDisabled: false,\n          formMessages: {\n            alerts: [error]\n          }\n        });\n      } else {\n        this.props.callback();\n\n        this.setState({\n          isOpen: !this.state.isOpen\n        });\n      }\n    });\n  }\n\n  handleFormCancel = (event) => {\n    event.preventDefault();\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  }\n\n  formMessages = () => {\n    return (\n      <MessagesContainer\n        messages={this.state.formMessages}\n      />\n    );\n  }\n\n  hasError = (error) => {\n    // True here means the field is valid\n    // We're checking if theres some other message to display\n    if (error !== true && typeof error !== \"undefined\") {\n      return true;\n    }\n\n    return false;\n  }\n\n  render() {\n    return (\n      <TranslationProvider>\n        <UpdatePasswordOverlay\n          uniqueId={this.props.uniqueId}\n          loginFormMessages={this.formMessages}\n          onError={this.hasError}\n          messages={this.state.formMessages}\n          onFormSubmit={this.handleFormSubmit}\n          onCancel={this.handleFormCancel}\n          isOpen={this.state.isOpen}\n          isDisabled={this.state.isDisabled}\n        />\n      </TranslationProvider>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const uniqueId = Random.id();\n  const formMessages = {};\n\n  onData(null, {\n    uniqueId,\n    formMessages\n  });\n}\n\nexport default composeWithTracker(composer)(UpdatePasswordOverlayContainer);\n","export { LoginContainer, AuthContainer } from \"./auth\";\nexport { ForgotContainer, UpdatePasswordOverlayContainer } from \"./passwordReset\";\nexport { MessagesContainer } from \"./helpers\";\n","import { Template } from \"meteor/templating\";\n\nexport const LoginFormSharedHelpers = {\n  messages: function () {\n    return Template.instance().formMessages.get();\n  },\n\n  hasError(error) {\n    // True here means the field is valid\n    // We're checking if theres some other message to display\n    if (error !== true && typeof error !== \"undefined\") {\n      return \"has-error has-feedback\";\n    }\n  },\n  capitalize: function (str) {\n    const finalString = str === null ? \"\" : String(str);\n    return finalString.charAt(0).toUpperCase() + finalString.slice(1);\n  }\n};\n","export { LoginFormSharedHelpers } from \"./helpers\";\nexport { ServiceConfigHelper } from \"./util\";\n","import { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Gravatar } from \"meteor/jparker:gravatar\";\nimport { Reaction, i18next, i18nextDep } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\n\nTemplate.registerHelper(\"getGravatar\", function (currentUser, size) {\n  const options = {\n    secure: true,\n    size: size,\n    default: \"identicon\"\n  };\n  const user = currentUser || Accounts.user();\n  if (!user) return false;\n  const account = Collections.Accounts.findOne(user._id);\n  // first we check picture exists. Picture has higher priority to display\n  if (account && account.profile && account.profile.picture) {\n    return account.profile.picture;\n  }\n  if (user.emails && user.emails.length === 1) {\n    const email = user.emails[0].address;\n    return Gravatar.imageUrl(email, options);\n  }\n});\n\n/**\n * registerHelper displayName\n */\nTemplate.registerHelper(\"displayName\", function (displayUser) {\n  i18nextDep.depend();\n\n  const user = displayUser || Collections.Accounts.findOne(Meteor.userId());\n  if (user) {\n    if (user.name) {\n      return user.name;\n    } else if (user.username) {\n      return user.username;\n    }\n\n    // todo: previous check was user.services !== \"anonymous\", \"resume\". Is this\n    // new check covers previous check?\n    if (Roles.userIsInRole(user._id || user.userId, \"account/profile\",\n      Reaction.getShopId())) {\n      return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n    }\n  }\n});\n\n/**\n * registerHelper fName\n */\n\nTemplate.registerHelper(\"fName\", function (displayUser) {\n  const user = displayUser || Meteor.user();\n  if (user && user.profile && user.profile.name) {\n    return user.profile.name.split(\" \")[0];\n  } else if (user && user.username) {\n    return user.username.name.split(\" \")[0];\n  }\n  if (user && user.services) {\n    const username = (function () {\n      switch (false) {\n        case !user.services.twitter:\n          return user.services.twitter.first_name;\n        case !user.services.google:\n          return user.services.google.given_name;\n        case !user.services.facebook:\n          return user.services.facebook.first_name;\n        case !user.services.instagram:\n          return user.services.instagram.first_name;\n        case !user.services.pinterest:\n          return user.services.pinterest.first_name;\n        default:\n          return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n      }\n    })();\n    return username;\n  }\n  return i18next.t(\"accountsUI.signIn\", { defaultValue: \"Sign in\" });\n});\n","import _ from \"lodash\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { ServiceConfiguration } from \"meteor/service-configuration\";\n\nfunction capitalize(str) {\n  const finalString = str === null ? \"\" : String(str);\n  return finalString.charAt(0).toUpperCase() + str.slice(1);\n}\n\nconst providers = {\n  Facebook: {},\n  Google: {},\n  Twitter: {},\n  Instagram: {}\n};\n\nproviders.Facebook.fields = function () {\n  return [\n    { property: \"appId\", label: \"App ID\" },\n    { property: \"secret\", label: \"App Secret\" }\n  ];\n};\n\nproviders.Google.fields = function () {\n  return [\n    { property: \"clientId\", label: \"Client ID\" },\n    { property: \"secret\", label: \"Client secret\" }\n  ];\n};\n\nproviders.Twitter.fields = function () {\n  return [\n    { property: \"consumerKey\", label: \"API key\" },\n    { property: \"secret\", label: \"API secret\" }\n  ];\n};\n\nproviders.Instagram.fields = function () {\n  return [\n    { property: \"clientId\", label: \"Client ID\" },\n    { property: \"secret\", label: \"Client secret\" }\n  ];\n};\n\nexport class ServiceConfigHelper {\n  availableServices() {\n    const services = Package[\"accounts-oauth\"] ? Accounts.oauth.serviceNames() : [];\n    services.sort();\n\n    return services;\n  }\n\n  capitalizedServiceName(name) {\n    if (name === \"meteor-developer\") {\n      return \"MeteorDeveloperAccount\";\n    }\n\n    return capitalize(name);\n  }\n\n  configFieldsForService(name) {\n    const capitalizedName = this.capitalizedServiceName(name);\n    const template = providers[capitalizedName];\n\n    if (template) {\n      const fields = template.fields();\n\n      return _.map(fields, (field) => {\n        if (!field.type) {\n          field.type = field.property === \"secret\" ? \"password\" : \"text\";\n        }\n\n        return _.extend(field, {\n          type: field.type\n        });\n      });\n    }\n\n    return [];\n  }\n\n  services(extendEach) {\n    const availableServices = this.availableServices();\n    const configurations = ServiceConfiguration.configurations.find().fetch();\n\n    return _.map(availableServices, (name) => {\n      const matchingConfigurations = _.filter(configurations, { service: name });\n      let service = {\n        name,\n        label: this.capitalizedServiceName(name),\n        fields: this.configFieldsForService(name)\n      };\n\n      if (matchingConfigurations.length) {\n        service = _.extend(service, matchingConfigurations[0]);\n      }\n\n      if (_.isFunction(extendEach)) {\n        service = _.extend(service, extendEach(service) || {});\n      }\n\n      return service;\n    });\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Divider, DropDownMenu, MenuItem } from \"/imports/plugins/core/ui/client/components\";\n\nclass Currency extends Component {\n  static propTypes = {\n    currencies: PropTypes.array,\n    currentCurrency: PropTypes.string,\n    handleChange: PropTypes.func\n  }\n\n  state = {\n    value: \"\"\n  }\n\n  onChange = (event, value) => {\n    this.setState({\n      value: value\n    });\n\n    this.props.handleChange(value);\n  }\n\n  currencyDisplay(value, symbol) {\n    return (\n      `${value} ${symbol}`\n    );\n  }\n\n  buttonElement() {\n    return (\n      <Button\n        label={this.props.currentCurrency || this.state.value}\n        containerStyle={{ color: \"#000\", fontWeight: \"normal\", letterSpacing: 0.8 }}\n      >\n        &nbsp;<i className=\"fa fa-caret-down\" />\n      </Button>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.currencies.length > 1 &&\n          <DropDownMenu\n            buttonElement={this.buttonElement()}\n            onChange={this.onChange}\n            value={this.props.currentCurrency || this.state.value}\n            menuStyle={{ maxHeight: 500, overflow: \"auto\" }}\n          >\n            <MenuItem\n              label=\"Select Currency\"\n              i18nKeyLabel=\"currencies.select\"\n              disabled={true}\n            />\n\n            <Divider />\n\n            {this.props.currencies.map((currency) => (\n              <MenuItem\n                key={currency.currency}\n                label={this.currencyDisplay(currency.currency, currency.symbol)}\n                value={this.currencyDisplay(currency.currency, currency.symbol)}\n              />\n            ))}\n          </DropDownMenu>\n        }\n      </div>\n    );\n  }\n}\n\nexport default Currency;\n","import React, { Component } from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Match } from \"meteor/check\";\nimport { Reaction } from \"/client/api\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Cart, Shops } from \"/lib/collections\";\nimport Currency from \"../components/currency\";\n\nclass CurrencyContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange = (value) => {\n    const currency = value.split(\" \");\n    const currencyName = currency[0];\n    //\n    // this is a sanctioned use of Meteor.user.update\n    // and only possible because we allow it in the\n    // UserProfile and ShopMembers publications.\n    //\n    Meteor.users.update(Meteor.userId(), { $set: { \"profile.currency\": currencyName } });\n    localStorage.setItem(\"currency\", currencyName);\n\n    const cart = Cart.findOne({ userId: Meteor.userId() });\n\n    // Attach changed currency to this users cart\n    Meteor.call(\"cart/setUserCurrency\", cart._id, currencyName);\n  }\n\n  render() {\n    return (\n      <div>\n        <Currency\n          {...this.props}\n          handleChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  let currentCurrency = \"USD $\";\n  const currencies = [];\n\n  if (Reaction.Subscriptions.Shops.ready() && Meteor.user()) {\n    const shop = Shops.findOne(Reaction.getShopId(), {\n      fields: {\n        currencies: 1,\n        currency: 1\n      }\n    });\n    if (Match.test(shop, Object) && shop.currency) {\n      const localStorageCurrency = localStorage.getItem(\"currency\");\n      const locale = Reaction.Locale.get();\n\n      if (localStorageCurrency) {\n        currentCurrency = localStorageCurrency + \" \" + shop.currencies[localStorageCurrency].symbol;\n      } else if (locale && locale.currency && locale.currency.enabled) {\n        currentCurrency = locale.locale.currency + \" \" + locale.currency.symbol;\n      } else {\n        currentCurrency = shop.currency + \" \" + shop.currencies[shop.currency].symbol;\n      }\n    }\n\n    if (Match.test(shop, Object) && shop.currencies) {\n      for (const currencyName in shop.currencies) {\n        if (shop.currencies[currencyName].enabled === true) {\n          const currency = { currency: currencyName };\n          const localStorageCurrency = localStorage.getItem(\"currency\");\n          // only one currency will be \"active\". Either the one\n          // matching the localStorageCurrency if exists or else\n          //  the one matching shop currency\n          if (localStorageCurrency) {\n            if (localStorageCurrency === currency.currency) {\n              currency.class = \"active\";\n            }\n          } else if (shop.currency === currency.currency) {\n            currency.class = \"active\";\n          }\n          currency.symbol = shop.currencies[currencyName].symbol;\n          currencies.push(currency);\n        }\n      }\n    }\n  }\n\n  onData(null, {\n    currentCurrency: currentCurrency,\n    currencies: currencies\n  });\n};\n\nexport default composeWithTracker(composer)(CurrencyContainer);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Divider, DropDownMenu, MenuItem } from \"/imports/plugins/core/ui/client/components\";\n\nclass LanguageDropDown extends Component {\n  static propTypes = {\n    currentLanguage: PropTypes.string,\n    handleChange: PropTypes.func,\n    languages: PropTypes.array\n  }\n\n  state = {\n    value: \"\"\n  }\n\n  buttonElement() {\n    return (\n      <Button containerStyle={{ color: \"#000\" }}>\n        <i className=\"fa fa-language fa-lg\"/>&nbsp;\n        <i className=\"fa fa-caret-down\"/>\n      </Button>\n    );\n  }\n  onChange = (event, value) => {\n    this.setState({\n      value: value\n    });\n\n    this.props.handleChange(value);\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.languages.length > 1 &&\n          <div className=\"dropdown-toggle\">\n            <DropDownMenu\n              buttonElement={this.buttonElement()}\n              value={this.props.currentLanguage || this.state.value}\n              onChange={this.onChange}\n              menuStyle={{ maxHeight: 500, overflow: \"auto\" }}\n            >\n              <MenuItem\n                label=\"Select Currency\"\n                i18nKeyLabel=\"languages.select\"\n                disabled={true}\n              />\n              <Divider />\n              {this.props.languages.map((language) => (\n                <MenuItem\n                  key={language.i18n}\n                  label={language.label}\n                  i18nKeyLabel={language.translation}\n                  value={language.i18n}\n                />\n              ))}\n            </DropDownMenu>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default LanguageDropDown;\n","import React, { Component } from \"react\";\nimport { Reaction } from \"/client/api\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Shops } from \"/lib/collections\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport Language from \"../components/i18n\";\n\nclass LanguageDropdownContainer extends Component {\n  handleChange = (value) => {\n    Meteor.users.update(Meteor.userId(), { $set: { \"profile.lang\": value } });\n  }\n  render() {\n    return (\n      <div>\n        <Language\n          {...this.props}\n          handleChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nconst composer = (props, onData) => {\n  const languages = [];\n  let currentLanguage = \"\";\n  if (Reaction.Subscriptions.Shops.ready() && Meteor.user()) {\n    const shop = Shops.findOne();\n    if (typeof shop === \"object\" && shop.languages) {\n      for (const language of shop.languages) {\n        if (language.enabled === true) {\n          language.translation = \"languages.\" + language.label.toLowerCase();\n          // appending a helper to let us know this\n          // language is currently selected\n          const profile = Meteor.user().profile;\n          if (profile && profile.lang) {\n            if (profile.lang === language.i18n) {\n              currentLanguage = profile.lang;\n            }\n          } else if (shop.language === language.i18n) {\n            // we don't have a profile language\n            // use the shop default\n            currentLanguage = shop.language;\n          }\n          languages.push(language);\n        }\n      }\n    }\n  }\n  onData(null, {\n    languages: languages,\n    currentLanguage: currentLanguage\n  });\n};\n\nexport default composeWithTracker(composer)(LanguageDropdownContainer);\n","import accounting from \"accounting-js\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Reaction, Logger } from \"/client/api\";\nimport { Shops } from \"/lib/collections\";\nimport { currencyDep } from \"./main\";\n\n/**\n * findCurrency\n * private function for returning localStorage currency\n * @param   {Object}  defaultCurrency    The default currency\n * @param {Boolean} useDefaultShopCurrency - flag for displaying shop's currency in Admin view of PDP\n * @return  {Object}  localStorageCurrency The localStorage currency\n */\nfunction findCurrency(defaultCurrency, useDefaultShopCurrency) {\n  const shop = Shops.findOne(Reaction.getShopId(), {\n    fields: {\n      currencies: 1,\n      currency: 1\n    }\n  });\n  const localStorageCurrencyName = localStorage.getItem(\"currency\");\n  if (typeof shop === \"object\" && shop.currencies && localStorageCurrencyName) {\n    let localStorageCurrency = {};\n    if (shop.currencies[localStorageCurrencyName]) {\n      if (useDefaultShopCurrency) {\n        localStorageCurrency = shop.currencies[shop.currency];\n        localStorageCurrency.exchangeRate = 1;\n      } else {\n        localStorageCurrency = shop.currencies[localStorageCurrencyName];\n        localStorageCurrency.exchangeRate = shop.currencies[localStorageCurrencyName].rate;\n      }\n    }\n    return localStorageCurrency;\n  }\n  return defaultCurrency;\n}\n\n/**\n * formatPriceString\n * @summary return shop /locale specific formatted price\n * also accepts a range formatted with \" - \"\n * @param {String} formatPrice - currentPrice or \"xx.xx - xx.xx\" formatted String\n * @param {Boolean} useDefaultShopCurrency - flag for displaying shop's currency in Admin view of PDP\n * @return {String} returns locale formatted and exchange rate converted values\n */\nexport function formatPriceString(formatPrice, useDefaultShopCurrency) {\n  let defaultShopCurrency = useDefaultShopCurrency;\n\n  // in case useDefaultShopCurrency is a Spacebars.kw we have this check\n  if (typeof useDefaultShopCurrency === \"object\" || !useDefaultShopCurrency) {\n    defaultShopCurrency = false;\n  }\n\n  currencyDep.depend();\n  const locale = Reaction.Locale.get();\n\n  if (typeof locale !== \"object\" || typeof locale.currency !== \"object\") {\n    // locale not yet loaded, so we don\"t need to return anything.\n    return false;\n  }\n\n  if (typeof formatPrice !== \"string\" && typeof formatPrice !== \"number\") {\n    return false;\n  }\n\n  // uses the localStorage currency instead of locale\n  const userCurrency = findCurrency(locale.currency, defaultShopCurrency);\n\n  // for the cases then we have only one price. It is a number.\n  const currentPrice = formatPrice.toString();\n  let price = 0;\n  const prices = ~currentPrice.indexOf(\" - \") ?\n    currentPrice.split(\" - \") : [currentPrice];\n\n  // basic \"for\" is faster then \"for ...of\" for arrays. We need more speed here\n  const len = prices.length;\n  for (let i = 0; i < len; i++) {\n    const originalPrice = prices[i];\n    try {\n      // we know the locale, but we don\"t know exchange rate. In that case we\n      // should return to default shop currency\n      if (typeof userCurrency.rate !== \"number\") {\n        throw new Meteor.Error(\"exchangeRateUndefined\");\n      }\n      prices[i] *= userCurrency.rate;\n\n      price = _formatPrice(price, originalPrice, prices[i],\n        currentPrice, userCurrency, i, len);\n    } catch (error) {\n      Logger.debug(\"currency error, fallback to shop currency\");\n      price = _formatPrice(price, originalPrice, prices[i],\n        currentPrice, locale.shopCurrency, i, len);\n    }\n  }\n  return price;\n}\n\nexport function formatNumber(currentPrice) {\n  const locale = Reaction.Locale.get();\n  let price = currentPrice;\n  const format = Object.assign({}, locale.currency, {\n    format: \"%v\"\n  });\n  const shopFormat = Object.assign({}, locale.shopCurrency, {\n    format: \"%v\"\n  });\n\n  if (typeof locale.currency === \"object\" && locale.currency.rate) {\n    price = currentPrice * locale.currency.rate;\n    return accounting.formatMoney(price, format);\n  }\n\n  Logger.debug(\"currency error, fallback to shop currency\");\n  return accounting.formatMoney(currentPrice, shopFormat);\n}\n\n/**\n * _formatPrice\n * private function for formatting locale currency\n * @private\n * @param  {Number} price         price\n * @param  {Number} originalPrice originalPrice\n * @param  {Number} actualPrice   actualPrice\n * @param  {Number} currentPrice  currentPrice\n * @param  {Number} currency      currency\n * @param  {Number} pos           position\n * @param  {Number} len           length\n * @return {Number}               formatted price\n */\nfunction _formatPrice(price, originalPrice, actualPrice, currentPrice, currency,\n  pos, len) {\n  // this checking for locale.shopCurrency mostly\n  if (typeof currency !== \"object\") {\n    return false;\n  }\n\n  let adjustedPrice = actualPrice;\n  let formattedPrice;\n\n  // Precision is mis-used in accounting js. Scale is the propery term for number\n  // of decimal places. Let's adjust it here so accounting.js does not break.\n  if (currency.scale !== undefined) {\n    currency.precision = currency.scale;\n  }\n\n  // If there are no decimal places, in the case of the Japanese Yen, we adjust it here.\n  if (currency.scale === 0) {\n    adjustedPrice = actualPrice * 100;\n  }\n\n  // @param {string} currency.where: If it presents - in situation then two\n  // prices in string, currency sign will be placed just outside the right price.\n  // For now it should be manually added to fixtures shop data.\n  if (typeof currency.where === \"string\" && currency.where === \"right\" &&\n    len > 1 && pos === 0) {\n    const modifiedCurrency = Object.assign({}, currency, {\n      symbol: \"\"\n    });\n    formattedPrice = accounting.formatMoney(adjustedPrice, modifiedCurrency);\n  } else {\n    // accounting api: http://openexchangerates.github.io/accounting.js/\n    formattedPrice = accounting.formatMoney(adjustedPrice, currency);\n  }\n\n  return price === 0 ? currentPrice.replace(originalPrice, formattedPrice) : price.replace(originalPrice, formattedPrice);\n}\n","import { Template } from \"meteor/templating\";\nimport { check, Match } from \"meteor/check\";\nimport { Reaction, Logger, i18next } from \"/client/api\";\nimport { Shops } from \"/lib/collections\";\nimport { localeDep, i18nextDep } from  \"./main\";\nimport { formatPriceString } from \"./currency\";\n\n/**\n * i18n\n * see: http://i18next.com/\n * pass the translation key as the first argument\n * and the default message as the second argument\n * @param {String} i18nKey - i18nKey\n * @param {String} i18nMessage - message text\n * @example {{i18n \"accountsTemplate.error\" \"Invalid Email\"}}\n * @return {String} returns i18n translated message\n */\nTemplate.registerHelper(\"i18n\", function (i18nKey, i18nMessage) {\n  if (!i18nKey || typeof i18nMessage !== \"string\") {\n    Logger.warn(\"i18n key string required to translate\", i18nKey, i18nMessage);\n    return \"\";\n  }\n  check(i18nKey, String);\n  check(i18nMessage, String);\n\n  i18nextDep.depend();\n\n  // returning translated key\n  return i18next.t(i18nKey, { defaultValue: i18nMessage });\n});\n\n/**\n * currencySymbol\n * @summary return shop /locale specific currency format (ie: $)\n * @returns {String} return current locale currency symbol\n */\nTemplate.registerHelper(\"currencySymbol\", function () {\n  const locale = Reaction.Locale.get();\n  const localStorageCurrency = localStorage.getItem(\"currency\");\n  if (localStorageCurrency) {\n    const shop = Shops.findOne();\n    if (Match.test(shop, Object) && shop.currencies) {\n      return shop.currencies[localStorageCurrency].symbol;\n    }\n  }\n  return locale.currency.symbol;\n});\n\n/**\n * formatPrice\n * @summary return shop /locale specific formatted price\n * also accepts a range formatted with \" - \"\n * @param {String} currentPrice - currentPrice or \"xx.xx - xx.xx\" formatted String\n * @param {Boolean} useDefaultShopCurrency - flag for displaying shop's currency in Admin view of PDP\n * @return {String} returns locale formatted and exchange rate converted values\n */\nTemplate.registerHelper(\"formatPrice\", function (formatPrice, useDefaultShopCurrency) {\n  localeDep.depend();\n  return formatPriceString(formatPrice, useDefaultShopCurrency);\n});\n","import i18next, { getBrowserLanguage, i18nextDep, localeDep, currencyDep } from \"./main\";\nexport * from \"./currency\";\n\nexport {\n  i18next,\n  getBrowserLanguage,\n  i18nextDep,\n  localeDep,\n  currencyDep\n};\n","import _ from \"lodash\";\nimport i18nextBrowserLanguageDetector from \"i18next-browser-languagedetector\";\nimport i18nextLocalStorageCache from \"i18next-localstorage-cache\";\nimport i18nextSprintfPostProcessor from \"i18next-sprintf-postprocessor\";\nimport i18nextJquery from \"jquery-i18next\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { $ } from \"meteor/jquery\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Reaction } from \"/client/api\";\nimport { Shops, Translations } from \"/lib/collections\";\nimport * as Schemas from \"/lib/collections/schemas\";\nimport i18next, { packageNamespaces, getLabelsFor, getMessagesFor, i18nextDep, currencyDep } from \"./main\";\nimport { mergeDeep } from \"/lib/api\";\n\n//\n// setup options for i18nextBrowserLanguageDetector\n// note: this isn't fully operational yet\n// language is set by user currently\n// progress toward detecting language\n// should focus around i18nextBrowserLanguageDetector\n//\nconst options = {\n  // order and from where user language should be detected\n  order: [\"querystring\", \"cookie\", \"localStorage\", \"navigator\", \"htmlTag\"],\n\n  // keys or params to lookup language from\n  lookupQuerystring: \"lng\",\n  lookupCookie: \"i18next\",\n  lookupLocalStorage: \"i18nextLng\",\n\n  // cache user language on\n  caches: [\"localStorage\", \"cookie\"],\n  // optional htmlTag with lang attribute, the default is:\n  htmlTag: document.documentElement\n};\n\nMeteor.startup(() => {\n  // use tracker autorun to detect language changes\n  // this only runs on initial page loaded\n  // and when user.profile.lang updates\n  Tracker.autorun(function () {\n    if (Reaction.Subscriptions.Shops.ready() && Meteor.user()) {\n      const shop = Shops.findOne(Reaction.getShopId());\n      let language = shop.language;\n      if (Meteor.user() && Meteor.user().profile && Meteor.user().profile.lang) {\n        language = Meteor.user().profile.lang;\n      }\n      //\n      // subscribe to user + shop Translations\n      //\n      return Meteor.subscribe(\"Translations\", language, () => {\n        // fetch reaction translations\n        const translations = Translations.find({}).fetch();\n\n        //\n        // reduce and merge translations\n        // into i18next resource format\n        //\n        let resources = {};\n        translations.forEach(function (translation) {\n          const resource = {};\n          resource[translation.i18n] = translation.translation;\n          resources = mergeDeep(resources, resource);\n        });\n\n        //\n        // initialize i18next\n        //\n        i18next\n          .use(i18nextBrowserLanguageDetector)\n          .use(i18nextLocalStorageCache)\n          .use(i18nextSprintfPostProcessor)\n          .init({\n            detection: options,\n            debug: false,\n            ns: packageNamespaces, // translation namespace for every package\n            defaultNS: \"core\", // reaction \"core\" is the default namespace\n            fallbackNS: packageNamespaces,\n            lng: language, // user session language\n            fallbackLng: shop ? shop.language : null, // Shop language\n            resources: resources\n          }, () => {\n            // someday this should work\n            // see: https://github.com/aldeed/meteor-simple-schema/issues/494\n            for (const schema in _.omit(Schemas, \"__esModule\")) {\n              if ({}.hasOwnProperty.call(Schemas, schema)) {\n                const ss = Schemas[schema];\n                ss.labels(getLabelsFor(ss, schema));\n                ss.messages(getMessagesFor(ss, schema));\n              }\n            }\n\n            i18nextDep.changed();\n\n            // global first time init event finds and replaces\n            // data-i18n attributes in html/template source.\n            $(\"[data-i18n]\").localize();\n\n            // apply language direction to html\n            if (i18next.dir(language) === \"rtl\") {\n              return $(\"html\").addClass(\"rtl\");\n            }\n            return $(\"html\").removeClass(\"rtl\");\n          });\n      }); // return\n    }\n  });\n\n  // use tracker autorun to detect currency changes\n  // this only runs on initial page loaded\n  // and when user.profile.currency updates\n  // althought it is also triggered when profile updates ( meaning .lang )\n  Tracker.autorun(function () {\n    const user = Meteor.user();\n    if (Reaction.Subscriptions.Shops.ready() && user) {\n      if (user.profile && user.profile.currency) {\n        const localStorageCurrency = localStorage.getItem(\"currency\");\n        if (localStorageCurrency !== user.profile.currency) {\n          localStorage.setItem(\"currency\", user.profile.currency);\n        }\n        currencyDep.changed();\n      }\n    }\n  });\n  //\n  // init i18nextJquery\n  //\n  i18nextJquery.init(i18next, $, {\n    tName: \"t\", // --> appends $.t = i18next.t\n    i18nName: \"i18n\", // --> appends $.i18n = i18next\n    handleName: \"localize\", // --> appends $(selector).localize(opts);\n    selectorAttr: \"data-i18n\", // selector for translating elements\n    targetAttr: \"data-i18n-target\", // element attribute to grab target element to translate (if diffrent then itself)\n    parseDefaultValueFromContent: true // parses default values from content ele.val or ele.text\n  });\n\n  // global onRendered event finds and replaces\n  // data-i18n attributes in html/template source.\n  // uses methods from i18nextJquery\n  Template.onRendered(function () {\n    this.autorun((function () {\n      return function () {\n        i18nextDep.depend();\n        $(\"[data-i18n]\").localize();\n      };\n    })(this));\n  });\n});\n","import i18next from \"i18next\";\nimport moment from \"moment\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Reaction } from \"/client/api\";\nimport { Shops, Packages } from \"/lib/collections\";\n\n//\n// Reaction i18n Translations, RTL and Currency Exchange Support\n//\n\n/**\n * getBrowserLanguage\n * @summary detects device default language\n * @return {String} language code\n */\nexport function getBrowserLanguage() {\n  if (typeof navigator.languages !== \"undefined\") {\n    if (~navigator.languages[0].indexOf(\"-\")) {\n      return navigator.languages[0].split(\"-\")[0];\n    } else if (~navigator.languages[0].indexOf(\"_\")) {\n      return navigator.languages[0].split(\"_\")[0];\n    }\n    return navigator.languages[0];\n  }\n  return navigator.language || navigator.browserLanguage;\n}\n\n/**\n * getLabelsFor\n * get Labels for simple.schema keys\n * @param  {Object} schema - schema\n * @param  {String} name - name\n * @return {Object} return schema label object\n */\nexport function getLabelsFor(schema, name) {\n  const labels = {};\n  // loop through all the rendered form fields and generate i18n keys\n  for (const fieldName of schema._schemaKeys) {\n    const i18nKey = name.charAt(0).toLowerCase() + name.slice(1) + \".\" +\n      fieldName\n        .split(\".$\").join(\"\");\n    // translate autoform label\n    const t = i18next.t(i18nKey);\n    if (new RegExp(\"string\").test(t) !== true && t !== i18nKey) {\n      if (t) {\n        labels[fieldName] = t;\n      }\n    }\n  }\n  return labels;\n}\n\n/**\n * getMessagesFor\n * get i18n messages for autoform messages\n * currently using a globalMessage namespace only*\n * (1) Use schema-specific message for specific key\n * (2) Use schema-specific message for generic key\n * (3) Use schema-specific message for type\n * @todo implement messaging hierarchy from simple-schema\n * @return {Object} returns i18n translated message for schema labels\n */\nexport function getMessagesFor() {\n  const messages = {};\n  for (const message in SimpleSchema._globalMessages) {\n    if ({}.hasOwnProperty.call(SimpleSchema._globalMessages, message)) {\n      const i18nKey = `globalMessages.${message}`;\n      const t = i18next.t(i18nKey);\n      if (new RegExp(\"string\").test(t) !== true && t !== i18nKey) {\n        messages[message] = t;\n      }\n    }\n  }\n  return messages;\n}\n\n/**\n *  set language and autorun on change of language\n *  initialize i18n and load data resources for the current language and fallback \"EN\"\n *\n */\nexport const i18nextDep = new Tracker.Dependency();\nexport const localeDep = new Tracker.Dependency();\nexport const currencyDep = new Tracker.Dependency();\nexport const packageNamespaces = [];\n\nMeteor.startup(() => {\n  Tracker.autorun(function (c) {\n    // setting local and active packageNamespaces\n    // packageNamespaces are used to determine i18n namespace\n    if (Reaction.Subscriptions.Shops.ready()) {\n      // every package gets a namespace, fetch them and export\n      const packages = Packages.find({}, {\n        fields: {\n          name: 1\n        }\n      }).fetch();\n      for (const pkg of packages) {\n        packageNamespaces.push(pkg.name);\n      }\n\n      // use i18n detected language to getLocale info\n      Meteor.call(\"shop/getLocale\", (error, result) => {\n        if (result) {\n          const locale = result;\n          locale.language = getBrowserLanguage();\n          moment.locale(locale.language);\n          // flag in case the locale currency isn't enabled\n          locale.currencyEnabled = locale.currency.enabled;\n          const user = Meteor.user();\n          if (user && user.profile && user.profile.currency) {\n            localStorage.setItem(\"currency\", user.profile.currency);\n          } else {\n            const localStorageCurrency = localStorage.getItem(\"currency\");\n            if (!localStorageCurrency) {\n              if (locale.currencyEnabled) {\n                // in case of multiple locale currencies\n                const primaryCurrency = locale.locale.currency.split(\",\")[0];\n                localStorage.setItem(\"currency\", primaryCurrency);\n              } else {\n                const shop = Shops.findOne(Reaction.getShopId(), {\n                  fields: {\n                    currency: 1\n                  }\n                });\n                localStorage.setItem(\"currency\", shop.currency);\n              }\n            }\n          }\n          Reaction.Locale.set(locale);\n          localeDep.changed();\n\n          // Stop the tracker\n          c.stop();\n        }\n      });\n    }\n  });\n});\n\nexport default i18next;\n","import _ from \"lodash\";\nimport { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { Reaction } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\n\n\n/**\n *\n * reactionApps\n *   provides=\"<where matching registry provides is this >\"\n *   enabled=true <false for disabled packages>\n *   context= true filter templates to current route\n *   returns matching package registry objects\n *   @example {{#each reactionApps provides=\"settings\" name=packageName container=container}}\n *   @example {{#each reactionApps provides=\"userAccountDropdown\" enabled=true}}\n *   @example\n *     {{#each reactionApps provides=\"social\" name=\"reaction-social\"}}\n *         {{> Template.dynamic template=template data=customSocialSettings }}\n *     {{/each}}\n *\n *   @typedef optionHash\n *   @type {object}\n *   @property {string} name - name of a package.\n *   @property {string} provides -purpose of this package as identified to the registry\n *   @property {string} container - filter registry entries for matching container.\n *   @property {string} shopId - filter to only display results matching shopId, not returned\n *   @property {string} template - filter registry entries for matching template\n *   @type {optionHash}\n *\n *  @return {optionHash} returns an array of filtered, structure reactionApps\n *  [{\n *  \tenabled: true\n *   label: \"Stripe\"\n *   name: \"reaction-stripe\"\n *   packageId: \"QqkGsQCDRhg2LSn8J\"\n *   priority: 1\n *   provides: \"paymentMethod\"\n *   template: \"stripePaymentForm\"\n *   etc: \"additional properties as defined in Packages.registry\"\n *   ...\n *  }]\n */\n\nexport function Apps(optionHash) {\n  const filter = {};\n  const registryFilter = {};\n  let key;\n  const reactionApps = [];\n  let options = {};\n\n  // allow for object or option.hash\n  if (optionHash) {\n    if (optionHash.hash) {\n      options = optionHash.hash;\n    } else {\n      options = optionHash;\n    }\n  }\n\n  // you could provide a shopId in optionHash\n  if (!options.shopId) {\n    options.shopId = Reaction.getShopId();\n  }\n\n  // remove audience permissions for owner (still needed here for older/legacy calls)\n  if (Reaction.hasOwnerAccess() && options.audience) {\n    delete options.audience;\n  }\n\n  //\n  // build filter to only get matching registry elements\n  //\n  for (key in options) {\n    if ({}.hasOwnProperty.call(options, key)) {\n      const value = options[key];\n      if (value) {\n        if (!(key === \"enabled\" || key === \"name\" || key === \"shopId\")) {\n          filter[\"registry.\" + key] = Array.isArray(options[key]) ? { $in: value } : value;\n          registryFilter[key] = value;\n        } else {\n          // perhaps not the best way to check but lets admin see all packages\n          if (!Reaction.hasOwnerAccess()) {\n            if (key !== \"shopId\") {\n              registryFilter[key] = value;\n            }\n          }\n          filter[key] = value;\n        }\n      }\n    }\n  }\n\n  delete filter[\"registry.audience\"]; // Temporarily remove \"audience\" key (see comment below)\n\n  // TODO: Review fix for filter on Packages.find(filter)\n  // The current \"filter\" setup uses \"audience\" field which is not present in the registry array in most (if not all) docs\n  // in the Packages coll.\n  // For now, the audience checks (after the Package.find call) filters out the registry items based on permissions. But\n  // part of the filtering should have been handled by the Package.find call, if the \"audience\" filter works as it should.\n  Packages.find(filter).forEach((app) => {\n    const matchingRegistry = _.filter(app.registry, function (item) {\n      const itemFilter = _.cloneDeep(registryFilter);\n\n      // check audience permissions only if they exist as part of optionHash and are part of the registry item\n      // ideally all routes should use it, safe for backwards compatibility though\n      // owner bypasses permissions\n      if (!Reaction.hasOwnerAccess() && item.permissions && registryFilter.audience) {\n        let hasAccess;\n\n        for (const permission of registryFilter.audience) {\n          // This checks that the registry item contains a permissions matches with the user's permission for the shop\n          const hasPermissionToRegistryItem = item.permissions.indexOf(permission) > -1;\n          // This checks that the user's permission set have the right value that is on the registry item\n          const hasRoleAccessForShop = Roles.userIsInRole(Meteor.userId(), permission, Reaction.getShopId());\n\n          // both checks must pass for access to be granted\n          if (hasPermissionToRegistryItem && hasRoleAccessForShop) {\n            hasAccess = true;\n            break;\n          }\n        }\n\n        if (!hasAccess) {\n          return false;\n        }\n\n        // safe to clean up now, and isMatch can ignore audience\n        delete itemFilter.audience;\n      }\n\n      return _.isMatch(item, itemFilter);\n    });\n\n    for (const registry of matchingRegistry) {\n      reactionApps.push(registry);\n    }\n  });\n\n  // Sort apps by priority (registry.priority)\n  const sortedApps = reactionApps.sort((a, b) => a.priority - b.priority).slice();\n\n  return sortedApps;\n}\n\n// Register global template helper\nTemplate.registerHelper(\"reactionApps\", (optionHash) => {\n  return Reaction.Apps(optionHash);\n});\n","import _ from \"lodash\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Roles } from \"meteor/alanning:roles\";\n\n// Reaction Globals\n//\n// These should all be removed. PR's happily accepted.\n//\n/* eslint \"no-extend-native\": [2, {\"exceptions\": [\"String\"]}] */\n/* eslint \"no-alert\": 0 */\n\n/**\n * toggleSession\n * quick and easy snippet for toggling sessions\n * @param {String} sessionVariable - string name, see http://docs.meteor.com/#/basic/session\n * @param {String} positiveState - optional, if is is positiveState, set opposite\n * @return {Object} return session value\n */\nexport function toggleSession(sessionVariable, positiveState) {\n  const session = Session.get(sessionVariable);\n  const positive = positiveState || true;\n  if (_.isEqual(positive, session)) {\n    Session.set(sessionVariable, false);\n  } else {\n    Session.set(sessionVariable, positive);\n  }\n  return Session.get(sessionVariable);\n}\n\n\n/**\n * getCardTypes\n * @summary determine the card type and return label\n * @todo needs i18n conversion?\n * @param {String} cardNumber - a credit card number\n * @return {String} card label, ie: visa\n */\nexport function getCardType(cardNumber) {\n  let re = new RegExp(\"^4\");\n  if (cardNumber.match(re) !== null) {\n    return \"visa\";\n  }\n  re = new RegExp(\"^(34|37)\");\n  if (cardNumber.match(re) !== null) {\n    return \"amex\";\n  }\n  re = new RegExp(\"^5[1-5]\");\n  if (cardNumber.match(re) !== null) {\n    return \"mastercard\";\n  }\n  re = new RegExp(\"^6011\");\n  if (cardNumber.match(re) !== null) {\n    return \"discover\";\n  }\n  return \"\";\n}\n\n/**\n * getGuestLoginState\n * @summary determines if a guest checkout is enabled and the login state for users\n * @return {Boolean} true if authenticated user\n */\nexport function getGuestLoginState() {\n  if (Meteor.userId() === \"string\" && this.getShopId() && this.allowGuestCheckout()) {\n    const isGuestFlow = Session.equals(\"guestCheckoutFlow\", true);\n    const isGuest = Roles.userIsInRole(Meteor.userId(), \"guest\", this.getShopId());\n    const isAnonymous = Roles.userIsInRole(Meteor.userId(), \"anonymous\", this.getShopId());\n    if (!isGuestFlow && !isGuest && isAnonymous) {\n      return false;\n    } else if (!isGuestFlow && isGuest && !isAnonymous) {\n      return true;\n    }\n  } else if (Session.equals(\"guestCheckoutFlow\", true) && _.pluck(Meteor.user()\n    .emails, \"address\")) {\n    return true;\n  }\n  return false;\n}\n","import _ from \"lodash\";\nimport Logger from \"/client/modules/logger\";\nimport { Reaction } from \"../\";\nimport * as Collections from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * reactionTemplate helper\n * use the reactionTemplate helper when you are using templates defined\n * as workflow templates in the package registery.Layout\n * use \"collection\" on the layout to indicate a workflow source\n *\n * @summary reactionTemplate provides templates as defined in ReactionRegistry.Layout\n * @param {Object} options - workflow defaults to \"coreLayout/coreWorkflow\"\n * @returns {Array} returns an array with labels, templates that match workflow\n */\nTemplate.registerHelper(\"reactionTemplate\", function (options) {\n  const shopId = options.hash.shopId || Reaction.getShopId();\n  // get shop info, defaults to current\n  const Shop = Collections.Shops.findOne(shopId);\n  const reactionTemplates = [];\n  // fetch collection from shop.layout configuration\n  let layout = _.find(Shop.layout, {\n    workflow: options.hash.workflow || \"coreWorkflow\"\n  });\n\n  let layoutConfigCollection;\n  let currentId;\n\n  // determine if workflow has a target\n  // collection defined. This is where we'll\n  // fetch/save workflow changes.\n  if (layout) {\n    layoutConfigCollection = layout.collection || \"Cart\";\n  } else {\n    Logger.error(\"Shop Layout Undefined\");\n    layoutConfigCollection = \"Cart\";\n  }\n\n  // if we've got an id, we'll use it with the layout's collection\n  // and get the current status of the workflowTargetCollection\n  if (Template.currentData() && Template.currentData()._id) {\n    currentId = Template.currentData()._id;\n  } else {\n    const currentCart = Collections.Cart.findOne({\n      userId: Meteor.userId()\n    });\n    currentId = currentCart && currentCart._id;\n  }\n  // we'll get current cart status by default, as the most common case\n  // TODO: expand query options\n  currentId = options.hash.id || currentId;\n\n  // The currentCollection must have workflow schema attached.\n  // layoutConfigCollection is the collection defined in Shops.workflow\n  const workflowTargetCollection = Collections[layoutConfigCollection];\n  const currentCollection = workflowTargetCollection.findOne(currentId);\n  const currentStatus = currentCollection.workflow.status;\n  const currentCollectionWorkflow = currentCollection.workflow.workflow;\n  const packages = Collections.Packages.find({\n    layout: {\n      $elemMatch: options.hash\n    },\n    shopId: shopId\n  });\n\n  //  we can have multiple packages contributing to the layout / workflow\n  packages.forEach(function (reactionPackage) {\n    const layoutWorkflows = _.filter(reactionPackage.layout, options.hash);\n    // check the packages for layout workflow templates\n    for (layout of layoutWorkflows) {\n      // audience is layout permissions\n      if (layout.audience === undefined) {\n        layout.audience = Shop.defaultRoles || \"owner\";\n      }\n\n      // check permissions so you don't have to on template.\n      if (Reaction.hasPermission(layout.audience)) {\n        // todo: review this hack to remove layout\n        // from the workflow\n        if (!layout.layout) {\n          // default is boolean false status\n          // true = we've completed this workflow\n          // false = pending (future) step\n          // <template> = in process (current) step.\n          layout.status = _.includes(currentCollectionWorkflow, layout.template);\n          // if the current template is already the current status\n          if (layout.template === currentStatus) {\n            layout.status = currentStatus;\n          }\n          // push to reactionTemplates\n          reactionTemplates.push(layout);\n        }\n      }\n    }\n  });\n  return reactionTemplates;\n});\n","import { Reaction } from \"../\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\n\n/*\n * Methods for the reaction permissions\n * helpers for roles, uses alanning:meteor-roles\n * see: http://alanning.github.io/meteor-roles/classes/Roles.html\n * use: {{hasPermission admin userId}}\n */\n\n/**\n * hasPermission template helper\n * @summary check current user hasPermission\n * @param  {String|Array} \"permissions\"\n * @param  {String} checkUserId - optional Meteor.userId, default to current\n * @return {Boolean}\n */\nTemplate.registerHelper(\"hasPermission\", function (permissions, options) {\n  // default to checking this.userId\n  let userId = Meteor.userId();\n  const shopId = Reaction.getShopId();\n  // we don't necessarily need to check here\n  // as these same checks and defaults are\n  // also performed in Reaction.hasPermission\n  if (typeof options === \"object\") {\n    if (options.hash.userId) {\n      userId = options.hash.userId;\n      return Reaction.hasPermission(permissions, userId, shopId);\n    }\n  }\n  return Reaction.hasPermission(permissions, userId, shopId);\n});\n\n/**\n * hasOwnerAccess template helper\n * @summary check if user has owner access\n * @return {Boolean} return true if owner\n */\nTemplate.registerHelper(\"hasOwnerAccess\", function () {\n  return Reaction.hasOwnerAccess();\n});\n\n/**\n * hasAdminAccess template helper\n * @summary check if user has admin access\n * @return {Boolean} return true if admin\n */\nTemplate.registerHelper(\"hasAdminAccess\", function () {\n  return Reaction.hasAdminAccess();\n});\n\n/**\n * hasDashboardAccess template helper\n * @summary check if user has dashboard access\n * @return {Boolean} return true if user has dashboard permission\n */\nTemplate.registerHelper(\"hasDashboardAccess\", function () {\n  return Reaction.hasDashboardAccess();\n});\n\n/**\n * allowGuestCheckout template helper\n * @summary check if guest users are allowed to checkout\n * @return {Boolean} return true if shop has guest checkout enabled\n */\nTemplate.registerHelper(\"allowGuestCheckout\", function () {\n  return Reaction.allowGuestCheckout();\n});\n","import _ from \"lodash\";\nimport * as tz from \"moment-timezone\";\nimport moment from \"moment\";\nimport \"moment/min/locales.min.js\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Spacebars } from \"meteor/spacebars\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { i18next } from \"/client/api\";\nimport { Reaction } from \"../\";\nimport * as Collections from \"/lib/collections\";\nimport * as Schemas from \"/lib/collections/schemas\";\nimport { toCamelCase } from \"/lib/api\";\n\n\nTemplate.registerHelper(\"Collections\", function () {\n  return Collections;\n});\n\nTemplate.registerHelper(\"Schemas\", function () {\n  return Schemas;\n});\n\n/**\n * currentUser\n * @summary overrides Meteor Package.blaze currentUser method\n * @return {[Boolean]} returns true/null if user has registered\n */\n\nTemplate.registerHelper(\"currentUser\", function () {\n  if (typeof Reaction === \"object\") {\n    const shopId = Reaction.getShopId();\n    const user = Accounts.user();\n    if (!shopId || typeof user !== \"object\") return null;\n    // shoppers should always be guests\n    const isGuest = Roles.userIsInRole(user, \"guest\", shopId);\n    // but if a user has never logged in then they are anonymous\n    const isAnonymous = Roles.userIsInRole(user, \"anonymous\", shopId);\n\n    return isGuest && !isAnonymous ? user : null;\n  }\n  return null;\n});\n\n\n/**\n * registerHelper monthOptions\n * @summary formats moment.js months into an array for autoform selector\n * @return {Array} returns array of months [value:, label:]\n */\nTemplate.registerHelper(\"monthOptions\", function (showDefaultOption = true) {\n  const label = i18next.t(\"app.monthOptions\", \"Choose month\");\n  const localLocale = tz;\n\n  // adding cases where our lang w/o region\n  // isn't predefined in moment.\n  // because using defineLocale throws\n  // ugly deprecation warnings, we aren't doing:\n  //\n  // localLocale.defineLocale(\"zh\", {\n  //   parentLocale: \"zh-cn\"\n  // });\n  let lang = i18next.language;\n  if (lang === \"zh\") {\n    lang = \"zh-cn\";\n  }\n\n  localLocale.locale(lang);\n  const monthOptions = [];\n\n  if (showDefaultOption) {\n    monthOptions.push({\n      value: \"\",\n      label: label\n    });\n  }\n\n  const months = localLocale.months();\n  // parse into autoform array\n  for (const index in months) {\n    if ({}.hasOwnProperty.call(months, index)) {\n      const month = months[index];\n      const mnum = parseInt(index, 10) + 1;\n      monthOptions.push({\n        value: mnum,\n        label: `${mnum} | ${month}`\n      });\n    }\n  }\n\n  return monthOptions;\n});\n\n/**\n * yearOptions\n * @summary formats moment.js next 9 years into array for autoform selector\n * @return {Array} returns array of years [value:, label:]\n */\nTemplate.registerHelper(\"yearOptions\", function (showDefaultOption = true) {\n  const label = i18next.t(\"app.yearOptions\", \"Choose year\");\n  const yearOptions = [];\n\n  if (showDefaultOption) {\n    yearOptions.push({\n      value: \"\",\n      label: label\n    });\n  }\n\n  let year = new Date().getFullYear();\n  for (let i = 1; i < 9; i++) {\n    yearOptions.push({\n      value: year,\n      label: year\n    });\n    year++;\n  }\n  return yearOptions;\n});\n\n/**\n * timezoneOptions\n * @summary formats moment.js timezones into array for autoform selector\n * @return {Array} returns array of timezones [value:, label:]\n */\nTemplate.registerHelper(\"timezoneOptions\", function () {\n  const label = i18next.t(\"app.timezoneOptions\", \"Choose timezone\");\n  const timezoneOptions = [{\n    value: \"\",\n    label: label\n  }];\n  const timezones = moment.tz.names();\n  for (const timezone of timezones) {\n    timezoneOptions.push({\n      value: timezone,\n      label: timezone\n    });\n  }\n  return timezoneOptions;\n});\n\n\n/**\n * camelToSpace\n * @summary convert a camelcased string to spaces\n * @param {String} str - camelcased string\n * @return {String} returns space formatted string\n */\nTemplate.registerHelper(\"camelToSpace\", function (str) {\n  const downCamel = str.replace(/\\W+/g, \"-\").replace(/([a-z\\d])([A-Z])/g, \"$1 $2\");\n  return downCamel.toLowerCase();\n});\n\n/**\n * toLowerCase\n * @summary convert a string to lower case\n * @param {String} str - string\n * @return {String} returns lowercased string\n */\nTemplate.registerHelper(\"toLowerCase\", function (str) {\n  return str.toLowerCase();\n});\n\n/**\n * toUpperCase\n * @summary convert a string to upper case\n * @param {String} str - string\n * @return {String} returns uppercased string\n */\nTemplate.registerHelper(\"toUpperCase\", function (str) {\n  return str.toUpperCase();\n});\n\n/**\n * capitalize\n * @summary capitalize first character of string\n * @param {String} str - string\n * @return {String} returns string with first letter capitalized\n */\nTemplate.registerHelper(\"capitalize\", function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\n\n/**\n * toCamelCase\n * @summary camelCases a string\n * @param {String} str - string\n * @return {String|undefined} returns camelCased string\n */\nTemplate.registerHelper(\"toCamelCase\", function (str) {\n  return !!str && toCamelCase(str);\n});\n\n\n/**\n * siteName\n * @summary get the shop name\n * @return {String} returns site name\n */\nTemplate.registerHelper(\"siteName\", function () {\n  const shop = Collections.Shops.findOne();\n  return typeof shop === \"object\" && shop.name ? shop.name : \"\";\n});\n\n/*\n *  General helpers for template functionality\n */\n\n/**\n * condition\n * @summary conditional string comparison template helper\n * @example {{#if condition status \"eq\" ../value}}\n * @param {String} v1 - first variable to compare\n * @param {String} operator - eq,neq,ideq,or,lt,gt comparision operator\n * @param {String} v2 - second variable to compare\n * @return {Boolean} returns true/false\n */\nTemplate.registerHelper(\"condition\", function (v1, operator, v2) {\n  switch (operator) {\n    case \"==\":\n    case \"eq\":\n      return v1 === v2;\n    case \"!=\":\n    case \"neq\":\n      return v1 !== v2;\n    case \"===\":\n    case \"ideq\":\n      return v1 === v2;\n    case \"!==\":\n    case \"nideq\":\n      return v1 !== v2;\n    case \"&&\":\n    case \"and\":\n      return v1 && v2;\n    case \"||\":\n    case \"or\":\n      return v1 || v2;\n    case \"<\":\n    case \"lt\":\n      return v1 < v2;\n    case \"<=\":\n    case \"lte\":\n      return v1 <= v2;\n    case \">\":\n    case \"gt\":\n      return v1 > v2;\n    case \">=\":\n    case \"gte\":\n      return v1 >= v2;\n    default:\n      throw new Meteor.Error(`Undefined conditional operator ${operator}`);\n  }\n});\n\n/**\n * orElse\n * @summary if this is true, or else this\n * @param {String} v1 - variable one\n * @param {String} v2 - variable two\n * @return {String} returns v1 || v2\n */\nTemplate.registerHelper(\"orElse\", function (v1, v2) {\n  return v1 || v2;\n});\n\n/**\n * key_value\n * @summary template helper pushing object key/value into array\n * @param {Object} context - object to parse into key / value\n * @return {Array} returns array[key:,value:]\n */\nTemplate.registerHelper(\"key_value\", function (context) {\n  const result = [];\n  _.each(context, function (value, key) {\n    return result.push({\n      key: key,\n      value: value\n    });\n  });\n  return result;\n});\n\n/**\n * nl2br\n * @summary template helper nl2br - Converts new line (\\n\\r) to <br>\n * from http://phpjs.org/functions/nl2br:480\n * @param {String} text - text\n * @returns {String} returns formatted Spacebars.SafeString\n */\nTemplate.registerHelper(\"nl2br\", function (text) {\n  const nl2br = (text + \"\").replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1\" +\n    \"<br>\" + \"$2\");\n  return new Spacebars.SafeString(nl2br);\n});\n\n/**\n * dateFormat\n * @description\n * format an ISO date using Moment.js\n * http://momentjs.com/\n * moment syntax example: moment(Date(\"2011-07-18T15:50:52\")).format(\"MMMM YYYY\")\n * @example {{dateFormat creation_date format=\"MMMM YYYY\"}}\n * @param {String} context - moment context\n * @param {String} block - hash of moment options, ie: format=\"\"\n * @return {Date} return formatted date\n */\nTemplate.registerHelper(\"dateFormat\", function (context, block) {\n  const f = block.hash.format || \"MMM DD, YYYY hh:mm:ss A\";\n  return moment(context).format(f);\n});\n\n/**\n * timeAgo\n * @description\n * accept an ISO date using Moment.js and return elapsed time from today\n * http://momentjs.com/\n * moment syntax example: moment(Date(\"2011-07-18T15:50:52\")).from(new Date())\n * @example {{timeAgo creation_date}}\n * @param {String} context - moment context\n * @return {Date} return formatted date\n */\nTemplate.registerHelper(\"timeAgo\", function (context) {\n  return moment(context).from(new Date());\n});\n\n\n/**\n * pluralize\n * @summary general helper for plurization of strings\n * @example {{plurize \"1 thing\"}}\n * @param {String} nCount - number, ie \"1 \"\n * @param {String} pString - plural string ie \" thing\"\n * @todo adapt to, and use i18next\n */\nTemplate.registerHelper(\"pluralize\", function (nCount, pString) {\n  if (nCount === 1) {\n    return \"1 \" + pString;\n  }\n  return nCount + \" \" + pString + \"s\";\n});\n","import { slugify } from \"transliteration\";\n\n/**\n * getSlug - return a client slugified string using the \"slugify\"\n * global from the transliteration package\n * https://www.npmjs.com/package/transliteration\n * @param  {String} slugString - string to slugify\n * @return {String} slugified string\n */\nexport function getSlug(slugString) {\n  return slugString ? slugify(slugString) : \"\";\n}\n","import store from \"amplify-store\";\nimport { Accounts } from \"meteor/accounts-base\";\nimport { Session } from \"meteor/session\";\nimport { Random } from \"meteor/random\";\n\n/*\n * registerLoginHandler\n * method to create anonymous users\n */\n\nAccounts.loginWithAnonymous = function (anonymous, callback) {\n  // We need to be sure that every user will work inside a session. Sometimes\n  // session could be destroyed, for example, by clearing browser's cache. In\n  // that case we need to take care about creating new session before new\n  // user or anonymous will be created/logged in.\n  // The problem here - looks like where is no way to track localStorage:\n  // `amplify.store(\"Reaction.session\")` itself. That's why we need to use\n  // another way: `accounts` package uses `setTimeout` for monitoring connection\n  // Accounts.callLoginMethod will be called after clearing cache. We could\n  // latch on this computations by running extra check here.\n  if (typeof store(\"Reaction.session\") !== \"string\") {\n    const newSession = Random.id();\n    store(\"Reaction.session\", newSession);\n    Session.set(\"sessionId\", newSession);\n  }\n  Accounts.callLoginMethod({\n    methodArguments: [{\n      anonymous: true,\n      sessionId: Session.get(\"sessionId\")\n    }],\n    userCallback: callback\n  });\n};\n","import Core from \"./main\";\nimport * as Apps from \"./helpers/apps\";\nimport * as Globals from \"./helpers/globals\";\nimport * as Utils from \"./helpers/utils\";\nimport { Subscriptions } from \"./subscriptions\";\n\nimport Log from \"/client/modules/logger\";\nimport { Router } from \"/client/modules/router\";\n\nimport * as Collections from \"/lib/collections\";\nimport * as Schemas from \"/lib/collections/schemas\";\n\n\nexport const Reaction = Object.assign(\n  Core,\n  Apps,\n  Globals,\n  Utils,\n  { Subscriptions },\n  { Log },\n  { Router },\n  { Collections },\n  { Schemas }\n);\n","import store from \"amplify-store\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Tracker } from \"meteor/tracker\";\nimport { Accounts } from \"meteor/accounts-base\";\n\nimport { Reaction, Logger } from \"/client/api\";\n\n\nconst cookieName = \"_RcFallbackLoginToken\";\n\n/**\n *  Startup Reaction\n *  Init Reaction client\n */\nMeteor.startup(function () {\n  // init the core\n  Reaction.init();\n  // initialize anonymous guest users\n  return Tracker.autorun(function () {\n    const userId = Meteor.userId();\n\n    if (userId && !isLocalStorageAvailable() && !readCookie(cookieName)) {\n      Logger.debug(\"No local storage available. About to set up fallback login \" +\n        \"mechanism with cookie login token.\");\n      Meteor.call(\"accounts/createFallbackLoginToken\", (err, token) => {\n        if (!err && token) {\n          window.onbeforeunload = () => createSessionCookie(cookieName, token);\n          return;\n        }\n        // Can't set login cookie. Fail silently.\n        Logger.error(\"Setting up fallback login mechanism failed!\");\n      });\n    }\n\n    // TODO: maybe `visibilityState` will be better here\n    let loggingIn;\n    let sessionId;\n    Tracker.nonreactive(function () {\n      loggingIn = Accounts.loggingIn();\n      sessionId = store(\"Reaction.session\");\n    });\n\n    if (!userId) {\n      if (!loggingIn || typeof sessionId !== \"string\") {\n        if (!isLocalStorageAvailable() && readCookie(cookieName)) {\n          // If re-login through local storage fails, RC falls back\n          // to cookie-based login. E.g. Applies for Safari browser in\n          // incognito mode.\n          Accounts.loginWithToken(readCookie(cookieName));\n        } else {\n          Accounts.loginWithAnonymous();\n        }\n      }\n    }\n  });\n});\n\nfunction isLocalStorageAvailable() {\n  try {\n    localStorage.testKey = \"testValue\";\n  } catch (e) {\n    return false;\n  }\n  delete localStorage.testKey;\n  return true;\n}\n\nfunction readCookie(name) {\n  const nameEq = name + \"=\";\n  const ca = document.cookie.split(\";\");\n  for (let i = 0; i < ca.length; i++) {\n    let c = ca[i];\n    while (c.charAt(0) === \" \") c = c.substring(1, c.length);\n    if (c.indexOf(nameEq) === 0) {\n      return c.substring(nameEq.length, c.length);\n    }\n  }\n  return null;\n}\n\nfunction createSessionCookie(name, value) {\n  document.cookie = name + \"=\" + value + \"; path=/\";\n}\n","import store from \"amplify-store\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Random } from \"meteor/random\";\nimport { Session } from \"meteor/session\";\nimport { Tracker } from \"meteor/tracker\";\nimport { SubsManager } from \"meteor/meteorhacks:subs-manager\";\n\nexport const Subscriptions = {};\n\n// Subscription Manager\n// See: https://github.com/kadirahq/subs-manager\nSubscriptions.Manager = new SubsManager();\n\nSubscriptions.Account = Subscriptions.Manager.subscribe(\"Accounts\", Meteor.userId());\n\n/*\n * Reaction.session\n * Create persistent sessions for users\n * The server returns only one record, so findOne will return that record\n * Stores into client session all data contained in server session\n * supports reactivity when server changes `newSession`\n * Stores the server session id into local storage / cookies\n *\n * Also localStorage session could be set from the client-side. This could\n * happen when user flush browser's cache, for example.\n * @see https://github.com/reactioncommerce/reaction/issues/609#issuecomment-166389252\n */\n\n/**\n * General Subscriptions\n */\nSubscriptions.Shops = Subscriptions.Manager.subscribe(\"Shops\");\n\nSubscriptions.Packages = Subscriptions.Manager.subscribe(\"Packages\");\n\nSubscriptions.Tags = Subscriptions.Manager.subscribe(\"Tags\");\n\nSubscriptions.Media = Subscriptions.Manager.subscribe(\"Media\");\n\n/**\n * Subscriptions that need to reload on new sessions\n */\nTracker.autorun(function () {\n  // we are trying to track both amplify and Session.get here, but the problem\n  // is - we can't track amplify. It just not tracked. So, to track amplify we\n  // are using dirty hack inside Accounts.loginWithAnonymous method.\n  const sessionId = store(\"Reaction.session\");\n  let newSession;\n  Tracker.nonreactive(() => {\n    newSession = Random.id();\n  });\n  if (typeof sessionId !== \"string\") {\n    store(\"Reaction.session\", newSession);\n    Session.set(\"sessionId\", newSession);\n  }\n  if (typeof Session.get(\"sessionId\") !== \"string\") {\n    Session.set(\"sessionId\", store(\"Reaction.session\"));\n  }\n  Subscriptions.Sessions = Meteor.subscribe(\"Sessions\", Session.get(\"sessionId\"));\n});\n\n// @see http://guide.meteor.com/data-loading.html#changing-arguments\nTracker.autorun(() => {\n  let sessionId;\n  // we really don't need to track the sessionId here\n  Tracker.nonreactive(() => {\n    sessionId = Session.get(\"sessionId\");\n  });\n  Subscriptions.Cart = Meteor.subscribe(\"Cart\", sessionId, Meteor.userId());\n  Subscriptions.UserProfile = Meteor.subscribe(\"UserProfile\", Meteor.userId());\n});\n","import _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { check } from \"meteor/check\";\nimport { Tracker } from \"meteor/tracker\";\nimport { ReactiveVar } from \"meteor/reactive-var\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport Logger from \"/client/modules/logger\";\nimport { Countries } from \"/client/collections\";\nimport { localeDep } from  \"/client/modules/i18n\";\nimport { Packages, Shops } from \"/lib/collections\";\nimport { Router } from \"/client/modules/router\";\n\n// Global, private state object for client side\n// This is placed outside the main object to make it a private variable.\n// access using `Reaction.state`\nconst reactionState = new ReactiveDict();\n\n/**\n * Reaction namespace\n * Global reaction shop permissions methods and shop initialization\n */\nexport default {\n  shopId: null,\n\n  Locale: new ReactiveVar({}),\n\n  init() {\n    // keep an eye out for shop change\n    return Tracker.autorun(() => {\n      let domain;\n      let shop;\n\n      if (this.Subscriptions.Shops.ready()) {\n        domain = Meteor.absoluteUrl().split(\"/\")[2].split(\":\")[0];\n        shop = Shops.findOne({\n          domains: domain\n        });\n\n        if (shop) {\n          this.shopId = shop._id;\n          this.shopName = shop.name;\n          // initialize local client Countries collection\n          if (!Countries.findOne()) {\n            createCountryCollection(shop.locales.countries);\n          }\n\n          const locale = this.Locale.get() || {};\n\n          // fix for https://github.com/reactioncommerce/reaction/issues/248\n          // we need to keep an eye for rates changes\n          if (typeof locale.locale === \"object\" &&\n            typeof locale.currency === \"object\" &&\n            typeof locale.locale.currency === \"string\") {\n            const localeCurrency = locale.locale.currency.split(\",\")[0];\n            if (typeof shop.currencies[localeCurrency] === \"object\") {\n              if (typeof shop.currencies[localeCurrency].rate === \"number\") {\n                locale.currency.rate = shop.currencies[localeCurrency].rate;\n                localeDep.changed();\n              }\n            }\n          }\n          // we are looking for a shopCurrency changes here\n          if (typeof locale.shopCurrency === \"object\") {\n            locale.shopCurrency = shop.currencies[shop.currency];\n            localeDep.changed();\n          }\n          return this;\n        }\n      }\n    });\n  },\n\n  // Return global \"reactionState\" Reactive Dict\n  get state() {\n    return reactionState;\n  },\n\n  /**\n   * hasPermission - client\n   * client permissions checks\n   * hasPermission exists on both the server and the client.\n   *\n   * @param {String | Array} checkPermissions -String or Array of permissions if empty, defaults to \"admin, owner\"\n   * @param {String} checkUserId - userId, defaults to Meteor.userId()\n   * @param {String} checkGroup group - default to shopId\n   * @return {Boolean} Boolean - true if has permission\n   */\n  hasPermission(checkPermissions, checkUserId, checkGroup) {\n    let group = this.getShopId();\n    let permissions = [\"owner\"];\n    let id = \"\";\n    const userId = checkUserId || this.userId || Meteor.userId();\n    //\n    // local roleCheck function\n    // is the bulk of the logic\n    // called out a userId is validated.\n    //\n    function roleCheck() {\n      // permissions can be either a string or an array\n      // we'll force it into an array and use that\n      if (checkPermissions === undefined) {\n        permissions = [\"owner\"];\n      } else if (typeof checkPermissions === \"string\") {\n        permissions = [checkPermissions];\n      } else {\n        permissions = checkPermissions;\n      }\n      // if the user has admin, owner permissions we'll always check if those roles are enough\n      permissions.push(\"owner\");\n      permissions = _.uniq(permissions);\n\n      //\n      // return if user has permissions in the group\n      //\n      if (Roles.userIsInRole(userId, permissions, group)) {\n        return true;\n      }\n      // global roles check\n      const sellerShopPermissions = Roles.getGroupsForUser(userId, \"admin\");\n      // we're looking for seller permissions.\n      if (sellerShopPermissions) {\n        // loop through shops roles and check permissions\n        for (const key in sellerShopPermissions) {\n          if (key) {\n            const shop = sellerShopPermissions[key];\n            if (Roles.userIsInRole(userId, permissions, shop)) {\n              return true;\n            }\n          }\n        }\n      }\n      // no specific permissions found returning false\n      return false;\n    }\n\n    //\n    // check if a user id has been found\n    // in line 156 setTimeout\n    //\n    function validateUserId() {\n      if (Meteor.userId()) {\n        Meteor.clearTimeout(id);\n        Router.reload();\n        return roleCheck();\n      }\n      return false;\n    }\n\n    //\n    // actual logic block to check permissions\n    // we'll bypass unecessary checks during\n    // a user logging, as we'll check again\n    // when everything is ready\n    //\n    if (Meteor.loggingIn() === false) {\n      //\n      // this userId check happens because when logout\n      // occurs it takes a few cycles for a new anonymous user\n      // to get created and during this time the user has no\n      // permission, not even guest permissions so we\n      // need to wait and reload the routes. This\n      // mainly affects the logout from dashboard pages\n      //\n      if (!userId) {\n        id = Meteor.setTimeout(validateUserId, 5000);\n      } else {\n        return roleCheck();\n      }\n\n      // default group to the shop or global if shop\n      // isn't defined for some reason.\n      if (checkGroup !== undefined && typeof checkGroup === \"string\") {\n        group = checkGroup;\n      }\n      if (!group) {\n        group = Roles.GLOBAL_GROUP;\n      }\n    }\n    // return false to be safe\n    return false;\n  },\n\n  hasOwnerAccess() {\n    const ownerPermissions = [\"owner\"];\n    return this.hasPermission(ownerPermissions);\n  },\n\n  hasAdminAccess() {\n    const adminPermissions = [\"owner\", \"admin\"];\n    return this.hasPermission(adminPermissions);\n  },\n\n  hasDashboardAccess() {\n    const dashboardPermissions = [\"owner\", \"admin\", \"dashboard\"];\n    return this.hasPermission(dashboardPermissions);\n  },\n\n  getUserPreferences(packageName, preference, defaultValue) {\n    const user = Meteor.user();\n\n    if (user) {\n      const profile = Meteor.user().profile;\n      if (profile && profile.preferences && profile.preferences[packageName] && profile.preferences[packageName][preference]) {\n        return profile.preferences[packageName][preference];\n      }\n    }\n\n    return defaultValue || undefined;\n  },\n\n  setUserPreferences(packageName, preference, value) {\n    if (Meteor.user()) {\n      return Meteor.users.update(Meteor.userId(), {\n        $set: {\n          [`profile.preferences.${packageName}.${preference}`]: value\n        }\n      });\n    }\n    return false;\n  },\n\n  updateUserPreferences(packageName, preference, values) {\n    const currentPreference = this.getUserPreferences(packageName, preference, {});\n    return this.setUserPreferences(packageName, preference, {\n      ...currentPreference,\n      ...values\n    });\n  },\n\n  getShopId() {\n    return this.shopId;\n  },\n\n  getShopName() {\n    return this.shopName;\n  },\n\n  getShopPrefix() {\n    return \"/\" + this.getSlug(this.getShopName().toLowerCase());\n  },\n\n  getShopSettings() {\n    const settings = Packages.findOne({\n      name: \"core\",\n      shopId: this.shopId\n    }) || {};\n    return settings.settings || {};\n  },\n\n  getShopCurrency() {\n    const shop = Shops.findOne({\n      _id: this.shopId\n    });\n\n    return shop && shop.currency || \"USD\";\n  },\n\n  isPreview() {\n    const viewAs = this.getUserPreferences(\"reaction-dashboard\", \"viewAs\", \"administrator\");\n\n    if (viewAs === \"customer\") {\n      return true;\n    }\n\n    return false;\n  },\n\n  getPackageSettings(name) {\n    return Packages.findOne({ name, shopId: this.getShopId() });\n  },\n\n  allowGuestCheckout() {\n    let allowGuest = false;\n    const settings = this.getShopSettings();\n    // we can disable in admin, let's check.\n    if (settings.public && settings.public.allowGuestCheckout) {\n      allowGuest = settings.public.allowGuestCheckout;\n    }\n    return allowGuest;\n  },\n\n  getSellerShopId() {\n    return Roles.getGroupsForUser(this.userId, \"admin\");\n  },\n\n  /**\n   * @description showActionView\n   *\n   * @param {String} viewData {label, template, data}\n   * @returns {String} Session \"admin/showActionView\"\n   */\n  showActionView(viewData) {\n    Session.set(\"admin/showActionView\", true);\n    this.setActionView(viewData);\n  },\n\n  isActionViewOpen() {\n    return Session.equals(\"admin/showActionView\", true);\n  },\n\n  isActionViewDetailOpen() {\n    return Session.equals(\"admin/showActionViewDetail\", true);\n  },\n\n\n  setActionView(viewData) {\n    if (viewData) {\n      let viewStack;\n\n      if (Array.isArray(viewData)) {\n        viewStack = viewData;\n      } else {\n        viewStack = [viewData];\n      }\n\n      Session.set(\"admin/actionView\", viewStack);\n    } else {\n      const registryItem = this.getRegistryForCurrentRoute(\n        \"settings\");\n\n      if (registryItem) {\n        this.setActionView(registryItem);\n      } else {\n        this.setActionView({\n          template: \"blankControls\"\n        });\n      }\n    }\n  },\n\n  pushActionView(viewData) {\n    Session.set(\"admin/showActionView\", true);\n\n    const actionViewStack = Session.get(\"admin/actionView\");\n\n    if (viewData) {\n      actionViewStack.push(viewData);\n      Session.set(\"admin/actionView\", actionViewStack);\n    } else {\n      const registryItem = this.getRegistryForCurrentRoute(\n        \"settings\");\n\n      if (registryItem) {\n        this.pushActionView(registryItem);\n      } else {\n        this.pushActionView({ template: \"blankControls\" });\n      }\n    }\n  },\n\n  isActionViewAtRootView() {\n    const actionViewStack = Session.get(\"admin/actionView\");\n\n    if (Array.isArray(actionViewStack) && actionViewStack.length === 1) {\n      return true;\n    }\n\n    return false;\n  },\n\n  popActionView() {\n    const actionViewStack = Session.get(\"admin/actionView\");\n    actionViewStack.pop();\n\n    Session.set(\"admin/actionView\", actionViewStack);\n\n    this.setActionViewDetail({}, { open: false });\n  },\n\n  setActionViewDetail(viewData, options = {}) {\n    const { open } = options;\n\n    Session.set(\"admin/showActionView\", true);\n    Session.set(\"admin/showActionViewDetail\", typeof open === \"boolean\" ? open : true);\n\n    if (viewData) {\n      Session.set(\"admin/detailView\", [viewData]);\n    }\n  },\n\n  pushActionViewDetail(viewData) {\n    Session.set(\"admin/showActionView\", true);\n    Session.set(\"admin/showActionViewDetail\", true);\n\n    const detailViewStack = Session.get(\"admin/detailView\");\n\n    if (viewData) {\n      detailViewStack.push(viewData);\n      Session.set(\"admin/detailView\", detailViewStack);\n    }\n  },\n\n  popActionViewDetail() {\n    const detailViewStack = Session.get(\"admin/detailView\");\n    detailViewStack.pop();\n\n    Session.set(\"admin/detailView\", detailViewStack);\n  },\n\n  isActionViewDetailAtRootView() {\n    const actionViewDetailStack = Session.get(\"admin/detailView\");\n\n    if (Array.isArray(actionViewDetailStack) && actionViewDetailStack.length === 1) {\n      return true;\n    }\n\n    return false;\n  },\n\n  getActionView() {\n    const actionViewStack = Session.get(\"admin/actionView\");\n\n    if (Array.isArray(actionViewStack) && actionViewStack.length) {\n      return actionViewStack.pop();\n    }\n\n    return {};\n  },\n\n  getActionViewDetail() {\n    const detailViewStack = Session.get(\"admin/detailView\");\n\n    if (Array.isArray(detailViewStack) && detailViewStack.length) {\n      return detailViewStack.pop();\n    }\n\n    return {};\n  },\n\n  hideActionView() {\n    Session.set(\"admin/showActionView\", false);\n    this.clearActionView();\n  },\n\n  hideActionViewDetail() {\n    Session.set(\"admin/showActionViewDetail\", false);\n    this.clearActionViewDetail();\n  },\n\n  clearActionView() {\n    Session.set(\"admin/actionView\", [{\n      label: \"\",\n      i18nKeyLabel: \"\"\n    }]);\n    Session.set(\"admin/detailView\", [{\n      label: \"\",\n      i18nKeyLabel: \"\"\n    }]);\n  },\n\n  clearActionViewDetail() {\n    Session.set(\"admin/detailView\", [{\n      label: \"\",\n      i18nKeyLabel: \"\"\n    }]);\n  },\n\n  getCurrentTag() {\n    if (this.Router.getRouteName() === \"tag\") {\n      return this.Router.current().params.slug;\n    }\n  },\n\n  getRegistryForCurrentRoute(provides = \"dashboard\") {\n    this.Router.watchPathChange();\n    const currentRouteName = this.Router.getRouteName();\n    const currentRoute = this.Router.current();\n    const template = currentRoute.route.options.template;\n    // find registry entries for routeName\n    const reactionApp = Packages.findOne({\n      \"registry.name\": currentRouteName,\n      \"registry.provides\": provides,\n      \"enabled\": true\n    }, {\n      enabled: 1,\n      registry: 1,\n      route: 1,\n      name: 1,\n      label: 1,\n      settings: 1\n    });\n\n    // valid application\n    if (reactionApp) {\n      const settingsData = _.find(reactionApp.registry, function (item) {\n        return item.provides === provides && item.template === template;\n      });\n      return settingsData;\n    }\n    Logger.debug(\"getRegistryForCurrentRoute not found\", template, provides);\n    return {};\n  }\n\n};\n\n/**\n * createCountryCollection\n * Create a client-side only collection of Countries for a dropdown form\n * properly sorted*\n * @param {Object} countries -  The countries array on the Shop collection\n * @returns {Array} countryOptions - Sorted array of countries\n */\nfunction createCountryCollection(countries) {\n  check(countries, Object);\n  const countryOptions = [];\n  for (const locale in countries) {\n    if ({}.hasOwnProperty.call(countries, locale)) {\n      const country = countries[locale];\n      countryOptions.push({\n        label: country.name,\n        value: locale\n      });\n    }\n  }\n  countryOptions.sort(function (a, b) {\n    if (a.label < b.label) {\n      return -1;\n    }\n    if (a.label > b.label) {\n      return 1;\n    }\n    return 0;\n  });\n\n  for (const country of countryOptions) {\n    Countries.insert(country);\n  }\n  return countryOptions;\n}\n","import { includes } from \"lodash\";\nimport bunyan from \"bunyan\";\nimport { Meteor } from \"meteor/meteor\";\n\n/*\n * configure bunyan logging module for reaction client\n * See: https://github.com/trentm/node-bunyan#levels\n * client we'll cofigure WARN as default\n */\nconst levels = [\"FATAL\", \"ERROR\", \"WARN\", \"INFO\", \"DEBUG\", \"TRACE\"];\n\n// set stdout log level\nlet level = Meteor.settings.public.REACTION_LOG_LEVEL || \"WARN\";\n\nlevel = level.toUpperCase();\n\nif (!includes(levels, level)) {\n  level = \"WARN\";\n}\n\nconst Logger = bunyan.createLogger({\n  name: \"reaction-client\",\n  level\n});\n\nexport default Logger;\n","import { Template } from \"meteor/templating\";\nimport { Meteor } from \"meteor/meteor\";\nimport Router from \"./main\";\n\n//\n// pathFor\n// template helper to return path\n//\nTemplate.registerHelper(\"pathFor\", Router.pathFor);\n\n//\n// urlFor\n// template helper to return absolute + path\n//\nTemplate.registerHelper(\"urlFor\", (path, params) => {\n  return Meteor.absoluteUrl(Router.pathFor(path, params).substr(1));\n});\n\nTemplate.registerHelper(\"active\", Router.isActiveClassName);\n","export default from \"/imports/plugins/core/router/lib/hooks\";\n","export { default as Router } from \"/imports/plugins/core/router/lib/router\";\n","import { Router } from \"@reactioncommerce/reaction-router\";\n\nexport default Router;\n","/*\n * This is an example of a customized template.\n * This layout replaces the \"coreLayout\" template defined in the reactioncommerce:core package.\n * https://github.com/reactioncommerce/reaction-core/blob/master/client/templates/layout/layout.html\n * To use custom template in layout.html uncomment\n *\n *     Template.layout.replaces \"coreLayout\"\n */\n\n\n// Template.layout.replaces(\"coreLayout\");\n","// this is an expensive polyfill for clientside Buffer usage\n// TODO refactor to remove this buffer dependency\nglobal.Buffer = global.Buffer || require(\"buffer\").Buffer; // eslint-disable-line\n\n// how to refactor\n// you can easily drop a breakpoint on the error in your browser's inspector, then refresh the page to hit the breakpoint and see via the call stack which package is trying to use Buffer\n// https://github.com/meteor/meteor/issues/8645\n","import { Reaction } from \"/client/modules/core\";\nimport { Router } from \"/client/modules/router\";\n\nwindow.ReactionCore = Reaction;\nwindow.ReactionRouter = Router;\n\nexport {\n  Reaction,\n  Router\n};\n\nexport * from \"/client/modules/i18n\";\nexport { default as Logger } from \"/client/modules/logger\";\n","import { Mongo } from \"meteor/mongo\";\n\n/**\n * Client side collections\n */\n\nexport const Countries = new Mongo.Collection(null);\n","export * from \"./countries\";\nexport * from \"./taxEntitycodes\";\n","import { Mongo } from \"meteor/mongo\";\n\n/**\n * Client side collections\n */\nexport const TaxEntityCodes = new Mongo.Collection(null);\n","import { Session } from \"meteor/session\";\nimport { AutoForm } from \"meteor/aldeed:autoform\";\n\n/**\n * Misc. App. Configuration\n *\n * A place to put misc. package configurations\n */\n\n// override/set layout\nexport const DEFAULT_LAYOUT = \"coreLayout\";\n\n// override/set workflow\nexport const DEFAULT_WORKFLOW = \"coreWorkflow\";\n\n// Use this to override just the home Package\n// ie: {template: \"products\"}\nexport const INDEX_OPTIONS = {\n  workflow: \"coreProductGridWorkflow\"\n};\n\n// default load qty for product grid\nexport const ITEMS_INCREMENT = 24;\n\nSession.setDefault(\"DEFAULT_LAYOUT\", DEFAULT_LAYOUT);\nSession.setDefault(\"DEFAULT_WORKFLOW\", DEFAULT_WORKFLOW);\nSession.setDefault(\"INDEX_OPTIONS\", INDEX_OPTIONS);\nSession.setDefault(\"productScrollLimit\", ITEMS_INCREMENT);\n\n// autoform default template\nAutoForm.setDefaultTemplate(\"bootstrap3\");\n","\n/**\n * ***** DO NOT EDIT THIS FILE MANUALLY *****\n * This file is generated automatically by the Reaction\n * plugin loader and will be reset at each startup.\n */\n\nimport '/imports/plugins/core/accounts/client';\nimport '/imports/plugins/core/catalog/client';\nimport '/imports/plugins/core/checkout/client';\nimport '/imports/plugins/core/dashboard/client';\nimport '/imports/plugins/core/email/client';\nimport '/imports/plugins/core/i18n/client';\nimport '/imports/plugins/core/layout/client';\nimport '/imports/plugins/core/orders/client';\nimport '/imports/plugins/core/payments/client';\nimport '/imports/plugins/core/revisions/client';\nimport '/imports/plugins/core/router/client';\nimport '/imports/plugins/core/shipping/client';\nimport '/imports/plugins/core/taxes/client';\nimport '/imports/plugins/core/templates/client';\nimport '/imports/plugins/core/ui/client';\nimport '/imports/plugins/core/ui-navbar/client';\nimport '/imports/plugins/core/ui-tagnav/client';\nimport '/imports/plugins/included/analytics/client';\nimport '/imports/plugins/included/default-theme/client';\nimport '/imports/plugins/included/discount-codes/client';\nimport '/imports/plugins/included/discount-rates/client';\nimport '/imports/plugins/included/inventory/client';\nimport '/imports/plugins/included/notifications/client';\nimport '/imports/plugins/included/payments-authnet/client';\nimport '/imports/plugins/included/payments-braintree/client';\nimport '/imports/plugins/included/payments-example/client';\nimport '/imports/plugins/included/payments-paypal/client';\nimport '/imports/plugins/included/payments-stripe/client';\nimport '/imports/plugins/included/product-admin/client';\nimport '/imports/plugins/included/product-detail-simple/client';\nimport '/imports/plugins/included/product-variant/client';\nimport '/imports/plugins/included/search-mongo/client';\nimport '/imports/plugins/included/shipping-rates/client';\nimport '/imports/plugins/included/shippo/client';\nimport '/imports/plugins/included/sms/client';\nimport '/imports/plugins/included/social/client';\nimport '/imports/plugins/included/taxes-avalara/client';\nimport '/imports/plugins/included/taxes-taxcloud/client';\nimport '/imports/plugins/included/taxes-taxjar/client';\nimport '/imports/plugins/included/ui-search/client';\n","import { DocHead } from \"meteor/kadira:dochead\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Shops } from \"/lib/collections\";\nimport { getShopId } from \"/lib/api\";\n\n/**\n * MetaData\n * populates title and meta tags for routes\n * init accepts Router.current() context\n */\nexport const MetaData = {\n  init(context) {\n    const params = context.params;\n    const product = ReactionProduct.selectedProduct();\n    const shop = Shops.findOne(getShopId());\n    const meta = [];\n    let title = \"\";\n    const keywords = [];\n\n    // case helper\n    const titleCase = (param) => {\n      return param.charAt(0).toUpperCase() + param.substring(1);\n    };\n\n    // populate meta from shop\n    if (shop) {\n      //\n      // shop defaults\n      //\n      if (shop && shop.description) {\n        DocHead.addMeta({\n          name: \"description\",\n          content: shop.description.substring(0, 160)\n        });\n      }\n      if (shop && shop.keywords) {\n        DocHead.addMeta({\n          name: \"keywords\",\n          content: shop.keywords.toString()\n        });\n      }\n\n      //\n      // set title defaults\n      //\n      MetaData.name = shop.name;\n      // product title default\n      if (params && params.handle) {\n        if (product && product.title) {\n          title = titleCase(product.title);\n        } else {\n          title = titleCase(params.handle);\n        }\n        // tag slugs\n      } else if (params && params.slug) {\n        title = titleCase(params.slug);\n        // fallback to route name\n      } else if (context.route && context.route.name) {\n        const route = context.route;\n        const routeName = route.name;\n        // default index to Shop Name\n        if (routeName === \"index\") {\n          title = titleCase(shop.name);\n          // check for meta in package route\n        } else if (route.options.meta && route.options.meta.title) {\n          title = titleCase(route.options.meta.title);\n        } else {\n          // default routes to route's name\n          title = titleCase(routeName);\n        }\n      }\n\n      //\n      //  product details\n      //\n      if (params && params.handle && product) {\n        // discard defaults\n        DocHead.removeDocHeadAddedTags();\n\n        if (product.description) {\n          DocHead.addMeta({\n            name: \"description\",\n            content: product.description.substring(0, 160)\n          });\n        }\n\n        if (product && product.metafields) {\n          for (const key of product.metafields) {\n            keywords.push(key.value);\n          }\n        }\n\n        if (keywords) {\n          DocHead.addMeta({\n            name: \"keywords\",\n            content: keywords.toString()\n          });\n        }\n      }\n\n      // set site defaults\n      DocHead.setTitle(title);\n      MetaData.title = title;\n      MetaData.meta = meta;\n      return meta;\n    } // end shop\n  } // end update\n};\n","import { Meteor } from \"meteor/meteor\";\nimport { check, Match } from \"meteor/check\";\n\nconst validationMethods = {\n  /**\n   * Username validation\n   * @summary Determins if a username meets the minimum requirement of 3 characters\n   * @param  {String} username Username to validate\n   * @return {Boolean|Object} true if valid, error object if invalid\n   */\n  username(username) {\n    check(username, Match.OptionalOrNull(String));\n\n    // Valid\n    if (username.length >= 3) {\n      return true;\n    }\n\n    // Invalid\n    return {\n      error: \"INVALID_USERNAME\",\n      reason: \"Username must be at least 3 characters long\",\n      i18nKeyReason: \"accountsUI.error.usernameMinLength\"\n    };\n  },\n\n  /**\n   * Email validation\n   * @summary Validates both required and optional email addresses.\n   * @param  {String} email Email address to validate\n   * @param  {Boolean} optional If set to true, validation will pass if email is blank\n   * @return {Boolean|Object} Returns true if valid; Returns an error object if invalid\n   */\n  email(email, optional) {\n    check(email, Match.OptionalOrNull(String));\n    check(optional, Match.OptionalOrNull(Boolean));\n\n    const processedEmail = email.trim();\n\n    // Valid\n    if (optional === true && processedEmail.length === 0) {\n      return true;\n    } else if (processedEmail.indexOf(\"@\") !== -1) {\n      return true;\n    }\n\n    // Invalid\n    return {\n      error: \"INVALID_EMAIL\",\n      reason: \"Email address is invalid\",\n      i18nKeyReason: \"accountsUI.error.invalidEmail\"\n    };\n  },\n\n  /**\n   * Password validation\n   * Passwords may be validated 2 ways.\n   * \"exists\" (options.validationLevel = \"exists\") - Password must not be blank. Thats is the only rule. Used to validate a sign in.\n   * undefined (options.validationLevel = undefined) - Password must meet the lenght and other criteria to validate. Used for validating a new sign up.\n   * @param  {String} password Password to validate\n   * @param  {Object} options Options to apply to the password validator\n   * @param  {String} options.validationLevel \"exists\" | undefined (default)\n   * @return {Boolean|[{error: String, reason: String}]} true if valid | Error object otherwise\n   */\n  password(password, options) {\n    check(password, Match.OptionalOrNull(String));\n    check(options, Match.OptionalOrNull(Object));\n\n    const passwordOptions = options || {};\n    const errors = [];\n\n    // Only check if a password has been entered at all.\n    // This is usefull for the login forms\n    if (passwordOptions.validationLevel === \"exists\") {\n      if (password.length > 0) {\n        return true;\n      }\n\n      errors.push({\n        error: \"INVALID_PASSWORD\",\n        reason: \"Password is required\",\n        i18nKeyReason: \"accountsUI.error.passwordRequired\"\n      });\n    } else {\n      // Validate the password on some rules\n      // This is useful for cases where a password needs to be created or updated.\n      if (password.length < 6) {\n        errors.push({\n          error: \"INVALID_PASSWORD\",\n          reason: \"Password must be at least 6 characters long.\",\n          i18nKeyReason: \"accountsUI.error.passwordMustBeAtLeast6CharactersLong\"\n        });\n      }\n    }\n\n    if (errors.length) {\n      return errors;\n    }\n\n    // Otherwise the password is valid\n    return true;\n  }\n};\n\n// Export object globally\nexport const LoginFormValidation = validationMethods;\n\n// Register validation methods as meteor methods\nMeteor.methods({\n  \"accounts/validation/username\": validationMethods.username,\n  \"accounts/validation/email\": validationMethods.email,\n  \"accounts/validation/password\": validationMethods.password\n});\n","import _ from \"lodash\";\nimport { Products } from \"/lib/collections\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { applyProductRevision } from \"/lib/api/products\";\n\nexport default {\n  /**\n   * setProduct\n   * @summary method to set default/parameterized product variant\n   * @param {String} currentProductId - set current productId\n   * @param {String} currentVariantId - set current variantId\n   * @return {undefined} return nothing, sets in session\n   */\n  setProduct(currentProductId, currentVariantId) {\n    let productId = currentProductId;\n    const variantId = currentVariantId;\n    if (!productId.match(/^[A-Za-z0-9]{17}$/)) {\n      const product = Products.findOne({\n        handle: productId.toLowerCase()\n      });\n      if (product) {\n        productId = product._id;\n      }\n    }\n    ReactionProduct.setCurrentVariant(variantId);\n  },\n\n  /**\n   * getProductPriceRange\n   * @summary get price range of a product\n   * if no only one price available, return it\n   * otherwise return a string range\n   * @todo remove string return and replace with object\n   * @todo move all this methods this to export function after 1.3\n   * @param {String} [productId] - current product _id\n   * @return {Object} range, min, max\n   */\n  getProductPriceRange(productId) {\n    const product = applyProductRevision(Products.findOne(productId));\n    if (!product) {\n      return \"\";\n    }\n    const variants = this.getTopVariants(product._id);\n    // if we have variants we have a price range.\n    // this processing will default on the server\n    const visibileVariant = variants.filter(variant => variant.isVisible === true);\n\n    if (visibileVariant.length > 0) {\n      const variantPrices = [];\n      variants.forEach(variant => {\n        if (variant.isVisible === true) {\n          const range = this.getVariantPriceRange(variant._id);\n          if (typeof range === \"string\") {\n            const firstPrice = parseFloat(range.substr(0, range.indexOf(\" \")));\n            const lastPrice = parseFloat(range.substr(range.lastIndexOf(\" \") + 1));\n            variantPrices.push(firstPrice, lastPrice);\n          } else {\n            variantPrices.push(range);\n          }\n        } else {\n          variantPrices.push(0, 0);\n        }\n      });\n      const priceMin = _.min(variantPrices);\n      const priceMax = _.max(variantPrices);\n      let priceRange = `${priceMin} - ${priceMax}`;\n      // if we don't have a range\n      if (priceMin === priceMax) {\n        priceRange = priceMin.toString();\n      }\n      const priceObject = {\n        range: priceRange,\n        min: priceMin,\n        max: priceMax\n      };\n      return priceObject;\n    }\n    // if we have no variants subscribed to (client)\n    // we'll get the price object previously from the product\n    return product.price;\n  },\n\n  /**\n   * getVariantPriceRange\n   * @summary get price range of a variant if it has child options.\n   * if no child options, return main price value\n   * @todo remove string return and replace with object\n   * @param {String} [variantId] - current variant _Id\n   * @return {String} formatted price or price range\n   */\n  getVariantPriceRange(variantId) {\n    const children = this.getVariants(variantId);\n    const visibleChildren = children.filter(child => child.isVisible);\n\n    switch (visibleChildren.length) {\n      case 0:\n        const topVariant = applyProductRevision(Products.findOne(variantId));\n        // topVariant could be undefined when we removing last top variant\n        return topVariant && topVariant.price;\n      case 1:\n        return visibleChildren[0].price;\n      default:\n        let priceMin = Number.POSITIVE_INFINITY;\n        let priceMax = Number.NEGATIVE_INFINITY;\n\n        children.map(child => {\n          if (child.isVisible === true) {\n            if (child.price < priceMin) {\n              priceMin = child.price;\n            }\n            if (child.price > priceMax) {\n              priceMax = child.price;\n            }\n          }\n        });\n\n        if (priceMin === priceMax) {\n          // TODO check impact on i18n/formatPrice from moving return to string\n          return priceMin.toString();\n        }\n        return `${priceMin} - ${priceMax}`;\n    }\n  },\n\n  /**\n   * getVariantQuantity\n   * @description calculate a sum of descendants `inventoryQuantity`\n   * @param {Object} variant - top-level variant\n   * @return {Number} summary of options quantity\n   */\n  getVariantQuantity(variant) {\n    const options = this.getVariants(variant._id);\n    if (options && options.length) {\n      return options.reduce((sum, option) =>\n        sum + option.inventoryQuantity || 0, 0);\n    }\n    return variant.inventoryQuantity || 0;\n  },\n\n  /**\n   * @method getPublishedOrRevision\n   * @description return top product revision if available\n   * @param {Object} product product or variant document\n   * @return {Object} product document\n   */\n  getPublishedOrRevision(product) {\n    return applyProductRevision(product);\n  },\n\n  /**\n   * @method getVariants\n   * @description Get all parent variants\n   * @summary could be useful for products and for top level variants\n   * @param {String} [id] - product _id\n   * @param {String} [type] - type of variant\n   * @return {Array} Parent variants or empty array\n   */\n  getVariants(id, type) {\n    return Products.find({\n      ancestors: { $in: [id] },\n      type: type || \"variant\"\n    }).map(this.getPublishedOrRevision);\n  },\n\n  /**\n   * @method getTopVariants\n   * @description Get only product top level variants\n   * @param {String} [id] - product _id\n   * @return {Array} Product top level variants or empty array\n   */\n  getTopVariants(id) {\n    return Products.find({\n      ancestors: [id],\n      type: \"variant\"\n    }).map(this.getPublishedOrRevision);\n  }\n};\n","/**\n * Wrapper around react-komposer v2 to provide some backwars compatability\n * for features from v1.\n */\nimport { compose } from \"react-komposer\";\nimport React from \"react\";\nexport * from \"react-komposer\";\nimport { Tracker } from \"meteor/tracker\";\n\n/**\n * getTrackerLoader creates a Meteor Tracker to watch dep updates from\n * passed in reactiveMapper funtion\n * @param  {Function} reactiveMapper data fetching function to bind to a tracker\n * @return {Function} composed function\n */\nfunction getTrackerLoader(reactiveMapper) {\n  return (props, onData, env) => {\n    let trackerCleanup = null;\n    const handler = Tracker.nonreactive(() => {\n      return Tracker.autorun(() => {\n        // assign the custom clean-up function.\n        trackerCleanup = reactiveMapper(props, onData, env);\n      });\n    });\n\n    return () => {\n      if (typeof trackerCleanup === \"function\") trackerCleanup();\n      return handler.stop();\n    };\n  };\n}\n\n/**\n * Re-implementation of composeWithTracker from v1.x\n * @param {Function} reactiveMapper data fetching function to bind to a tracker\n * @param {React.Component} LoadingComponent react component for a custom loading screen\n * @return {Function} composed function\n */\nexport function composeWithTracker(reactiveMapper, LoadingComponent) {\n  const options = {};\n\n  if (typeof LoadingComponent !== \"undefined\") {\n    options.loadingHandler = () => { // eslint-disable-line react/display-name\n      return (\n        <LoadingComponent />\n      );\n    };\n  }\n\n  return compose(getTrackerLoader(reactiveMapper), options);\n}\n","import { Meteor } from \"meteor/meteor\";\n/*\n * Copy store data, copied from Meteor CollectionsFS\n * https://github.com/CollectionFS/Meteor-CollectionFS/blob/master/packages/file/fsFile-server.js#L225\n */\nfunction _copyStoreData(fileObj, storeName, sourceKey, callback) {\n  if (!fileObj.isMounted()) {\n    throw new Error(\"Cannot copy store data for a file that is not associated with a collection\");\n  }\n\n  const storage = fileObj.collection.storesLookup[storeName];\n  if (!storage) {\n    throw new Error(storeName + \" is not a valid store name\");\n  }\n\n  // We want to prevent beforeWrite and transformWrite from running, so\n  // we interact directly with the store.\n  const destinationKey = storage.adapter.fileKey(fileObj);\n  const readStream = storage.adapter.createReadStreamForFileKey(sourceKey);\n  const writeStream = storage.adapter.createWriteStreamForFileKey(destinationKey);\n\n  writeStream.once(\"stored\", function (result) {\n    callback(null, result.fileKey);\n  });\n\n  writeStream.once(\"error\", function (error) {\n    callback(error);\n  });\n\n  readStream.pipe(writeStream);\n}\nconst copyStoreData = Meteor.wrapAsync(_copyStoreData);\n\n/*\n * Modified from Meteor CollectionsFS\n * https://github.com/CollectionFS/Meteor-CollectionFS/blob/master/packages/file/fsFile-server.js#L126\n */\nexport function copyFile(fileObj, newMetaData) {\n  const self = fileObj;\n\n  if (!self.isMounted()) {\n    throw new Error(\"Cannot copy a file that is not associated with a collection\");\n  }\n\n  // Get the file record\n  const fileRecord = self.collection.files.findOne({ _id: self._id }, { transform: null }) || {};\n\n  if (newMetaData) {\n    const oldMetaData = fileRecord.metadata || {};\n\n    fileRecord.metadata = {\n      ...oldMetaData,\n      ...newMetaData\n    };\n  }\n\n  // Remove _id and copy keys from the file record\n  delete fileRecord._id;\n\n  // Insert directly; we don't have access to \"original\" in this case\n  const newId = self.collection.files.direct.insert(fileRecord);\n\n  const newFile = self.collection.findOne(newId);\n\n  // Copy underlying files in the stores\n  let mod;\n  let oldKey;\n  for (const name in newFile.copies) {\n    if (newFile.copies.hasOwnProperty(name)) {\n      oldKey = newFile.copies[name].key;\n      if (oldKey) {\n        // We need to ask the adapter for the true oldKey because\n        // right now gridfs does some extra stuff.\n        // TODO GridFS should probably set the full key object\n        // (with _id and filename) into `copies.key`\n        // so that copies.key can be passed directly to\n        // createReadStreamForFileKey\n        const sourceFileStorage = self.collection.storesLookup[name];\n        if (!sourceFileStorage) {\n          throw new Error(name + \" is not a valid store name\");\n        }\n        oldKey = sourceFileStorage.adapter.fileKey(self);\n        // delete so that new fileKey will be generated in copyStoreData\n        delete newFile.copies[name].key;\n        mod = mod || {};\n        mod[\"copies.\" + name + \".key\"] = copyStoreData(newFile, name, oldKey);\n      }\n    }\n  }\n  // Update keys in the filerecord\n  if (mod) {\n    self.collection.files.direct.update({\n      _id: newId\n    }, {\n      $set: mod\n    });\n  }\n\n  return newFile;\n}\n","import url from \"url\";\nimport { slugify } from \"transliteration\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Router } from \"/imports/plugins/core/router/lib\";\nimport { Shops } from \"/lib/collections\";\n\n/**\n * getShopId\n * @return {String} returns current shopId\n */\nexport function getShopId() {\n  const domain = url.parse(Meteor.absoluteUrl()).hostname;\n\n  const shop = Shops.find({ domains: { $in: [domain] } }, {\n    limit: 1\n  }).fetch()[0];\n\n  return !!shop ? shop._id : null;\n}\n\n\n/**\n * getShopName\n * @return {String} returns current shop name\n */\nexport function getShopName() {\n  const domain = url.parse(Meteor.absoluteUrl()).hostname;\n\n  const shop = Shops.find({ domains: { $in: [domain] } }, {\n    limit: 1\n  }).fetch()[0];\n\n  return !!shop ? shop.name : null;\n}\n\n/**\n * getShopPrefix\n * @param {String} leading - Default \"/\", prefix, the prefix with a leading shash\n * @return {String} returns shop url prefix\n */\nexport function getShopPrefix(leading = \"/\") {\n  if (Shops.find({}).count() === 1) {\n    return \"\";\n  }\n  return leading + getSlug(getShopName().toLowerCase());\n}\n\n/**\n * getAbsoluteUrl\n * @param {String} path - path to append to absolute Url, path should be prefixed with / if necessary\n * @return {String} returns absolute url (shop prefix + path)\n */\nexport function getAbsoluteUrl(path) {\n  const prefix = getShopPrefix(\"\");\n  if (prefix) {\n    const absUrl = Meteor.absoluteUrl(`${prefix}/${path}`);\n    return absUrl;\n  }\n  const absUrl = Meteor.absoluteUrl(`${path}`);\n  return absUrl;\n}\n\n/**\n * getCurrentTag\n * @return {String} returns current tag\n */\nexport function getCurrentTag() {\n  if (Router.getRouteName() === \"tag\") {\n    return Router.current().params.slug;\n  }\n  return null;\n}\n\n\n/**\n * getSlug - return a slugified string using \"slugify\" from transliteration\n * https://www.npmjs.com/package/transliteration\n * @param  {String} slugString - string to slugify\n * @return {String} slugified string\n */\nexport function getSlug(slugString) {\n  return slugString ? slugify(slugString) : \"\";\n}\n\n/**\n * toCamelCase helper for i18n\n * @summary special toCamelCase for converting a string to camelCase for use with i18n keys\n * @param {String} needscamels String to be camel cased.\n * @return {String} camelCased string\n */\nexport function toCamelCase(needscamels) {\n  let s;\n  s = needscamels.replace(/([^a-zA-Z0-9_\\- ])|^[_0-9]+/g, \"\").trim().toLowerCase();\n  s = s.replace(/([ -]+)([a-zA-Z0-9])/g, function (a, b, c) {\n    return c.toUpperCase();\n  });\n  s = s.replace(/([0-9]+)([a-zA-Z])/g, function (a, b, c) {\n    return b + c.toUpperCase();\n  });\n  return s;\n}\n\n/**\n * translateRegistry\n * @summary adds i18n strings to registry object\n * @param {Object} registry registry object\n * @param {Object} [app] complete package object\n * @return {Object} with updated registry\n */\nexport function translateRegistry(registry, app) {\n  let registryLabel = \"\";\n  let i18nKey = \"\";\n  // first we check the default place for a label\n  if (registry.label) {\n    registryLabel = toCamelCase(registry.label);\n    i18nKey = `admin.${registry.provides}.${registryLabel}`;\n    // and if we don\"t find it, we are trying to look at first\n    // registry entry\n  } else if (app && app.registry && app.registry.length &&\n    app.registry[0].label) {\n    registryLabel = toCamelCase(app.registry[0].label);\n    i18nKey = `admin.${app.registry[0].provides}.${registryLabel}`;\n  }\n  registry.i18nKeyLabel = `${i18nKey}Label`;\n  registry.i18nKeyDescription = `${i18nKey}Description`;\n  registry.i18nKeyPlaceholder = `${i18nKey}Placeholder`;\n  registry.i18nKeyTooltip = `${i18nKey}Tooltip`;\n  registry.i18nKeyTitle = `${i18nKey}Title`;\n  // return registry object with added i18n keys\n  return registry;\n}\n\n/**\n * Simple is object check.\n * @param {Object} item item to check if is an object\n * @returns {boolean} return true if object\n */\nexport function isObject(item) {\n  return (item && typeof item === \"object\" && !Array.isArray(item) && item !== null);\n}\n\n/**\n * Helper for Deep merge two objects.\n * @param {Object} target deep merge into this object\n * @param {Object} source merge this object\n * @returns {Object} return deep merged object\n */\nexport function mergeDeep(target, source) {\n  if (isObject(target) && isObject(source)) {\n    Object.keys(source).forEach(key => {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        mergeDeep(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    });\n  }\n  return target;\n}\n","export * from \"./account-validation\";\nexport { default as Catalog } from \"./catalog\";\nexport { default as ReactionProduct } from \"./products\";\nexport { PropTypes } from \"./prop-types\";\nexport * from \"./helpers\";\nexport * from \"./files\";\n","import { Match } from \"meteor/check\";\n\n/**\n * Match.OptionalOrNull\n * See Meteor Match methods\n * @param {String} pattern - match pattern\n * @return {Boolean} matches - void, null, or pattern\n */\nMatch.OptionalOrNull = function (pattern) {\n  return Match.OneOf(void 0, null, pattern);\n};\n\n/**\n * Match.OrderHookOption\n * See Meteor Match methods\n * @return {Boolean} matches - void, null, or pattern\n */\nMatch.OrderHookOptions = function () {\n  return Match.OneOf(Object);\n};\n","import i18next from \"i18next\";\nimport orderBy from \"lodash/orderBy\";\nimport _ from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { ReactiveDict } from \"meteor/reactive-dict\";\nimport { Router } from \"/imports/plugins/core/router/lib\";\nimport { getCurrentTag, getShopName } from \"/lib/api\";\nimport { Products, Revisions } from \"/lib/collections\";\nimport Catalog from \"./catalog\";\nimport { MetaData } from \"/lib/api/router/metadata\";\n\n// ReactionProduct is only intended to be used on the client, but it's placed\n// in common code because of it is imported by the Products schema\n\n/**\n *  currentProduct\n *  @summary Reactive current product dependency, ensuring reactive products, without session\n *  @todo this is a messy class implementation, normalize it.\n *  @description\n *  products:\n\n */\nconst ReactionProduct = new ReactiveDict(\"currentProduct\");\n\nexport function applyProductRevision(product) {\n  if (product) {\n    if (product.__revisions && product.__revisions.length) {\n      const cleanProduct = Object.assign({}, product);\n      delete cleanProduct.__revisions;\n      let revisedProduct;\n      // check for product revisions and set that as the current product\n      for (const revision of product.__revisions) {\n        if (!revision.parentDocument) {\n          revisedProduct = product.__revisions[0].documentData;\n        }\n      }\n\n      // if there are no revision to product (image and/or tag only) just set the original product as the product\n      if (!revisedProduct) {\n        revisedProduct = cleanProduct;\n      }\n      return Object.assign({},\n        revisedProduct,\n        {\n          __published: cleanProduct,\n          __draft: product.__revisions[0]\n        }\n      );\n    }\n    return product;\n  }\n\n  return null;\n}\n\nexport function variantIsSelected(variantId) {\n  const current = ReactionProduct.selectedVariant();\n  if (current && typeof current === \"object\" && (variantId === current._id || ~current.ancestors.indexOf(variantId))) {\n    return true;\n  }\n\n  return false;\n}\n\nReactionProduct.sortProducts = (products, tag) => {\n  let sorted = [];\n\n  sorted = orderBy(products,\n    // Sort by postion for tag\n    (product) => {\n      return product.positions && product.positions[tag] && product.positions[tag].position;\n    },\n    // Then by creation date for tag\n    (product) => {\n      return product.positions && product.positions[tag] && product.positions[tag].createdAt;\n    },\n    // Finally sort by creation date\n    \"createdAt\"\n  );\n\n  return sorted;\n};\n\n/**\n * setCurrentVariant\n * @param {String} variantId - set current variantId\n * @return {undefined}\n */\nReactionProduct.setCurrentVariant = (variantId) => {\n  if (variantId === null) {\n    ReactionProduct.set(\"variantId\", null);\n    ReactionProduct.set(\"variantId\", ReactionProduct.selectedVariantId());\n  }\n  if (!variantId) {\n    return;\n  }\n  const currentId = ReactionProduct.selectedVariantId();\n  if (currentId === variantId) {\n    return;\n  }\n  ReactionProduct.set(\"variantId\", variantId);\n};\n\n/**\n * ReactionProduct.setProduct\n * this will be deprecated in favor of template.instance data.\n *\n * @summary method to set default/parameterized product variant\n * @param {String} currentProductId - set current productId\n * @param {String} currentVariantId - set current variantId\n * @return {Object} product object\n */\nReactionProduct.setProduct = (currentProductId, currentVariantId) => {\n  let productId = currentProductId || Router.getParam(\"handle\");\n  let variantId = currentVariantId || Router.getParam(\"variantId\");\n\n  // Find the current product\n  const product = Products.findOne({\n    $or: [\n      { handle: productId.toLowerCase() }, // Try the handle (slug) lowercased\n      { handle: productId }, // Otherwise try the handle (slug) untouched\n      { _id: productId } // Last attempt, try the product id\n    ]\n  });\n\n  productId = product && product._id;\n\n  if (product) {\n    // set the default variant\n    // as the default.\n    if (!variantId) {\n      const variants = ReactionProduct.getTopVariants(productId);\n      variantId = Array.isArray(variants) && variants.length &&\n        variants[0]._id || null;\n    }\n    // set in our reactive dictionary\n    ReactionProduct.set(\"productId\", productId);\n    ReactionProduct.set(\"variantId\", variantId);\n  }\n\n  // Update the meta data when a product is selected\n  MetaData.init(Router.current());\n\n  return applyProductRevision(product);\n};\n\n/**\n * selectedProductId\n * @summary get the currently active/requested product\n * @return {String} currently selected product id\n */\nReactionProduct.selectedProductId = () => ReactionProduct.get(\"productId\");\n\n/**\n * selectedVariantId\n * @summary get the currently active/requested variant\n * @return {String} currently selected variant id\n */\nReactionProduct.selectedVariantId = () => {\n  let id = ReactionProduct.get(\"variantId\");\n  if (id !== null) {\n    return id;\n  }\n  const variants = ReactionProduct.getVariants();\n\n  if (!(variants.length > 0)) {\n    return [];\n  }\n\n  id = variants[0]._id;\n  // ReactionProduct.set(\"variantId\", id);\n  return id;\n};\n\n/**\n * selectedVariant\n * @summary get the currently active/requested variant object\n * @return {Object} currently selected variant object\n */\nReactionProduct.selectedVariant = function () {\n  const id = ReactionProduct.selectedVariantId();\n  if (typeof id === \"string\") {\n    return applyProductRevision(Products.findOne(id));\n  }\n  return [];\n};\n\n/**\n * selectedTopVariant\n * @summary get the currently active TOP variant object\n * @return {Object} currently selected TOP variant object\n */\nReactionProduct.selectedTopVariant = function () {\n  const topVariants = ReactionProduct.getTopVariants();\n  const topVariant = topVariants.find((variant) => variantIsSelected(variant._id));\n\n  return topVariant;\n};\n\n/**\n * selectedProduct\n * @summary get the currently active/requested product object\n * @return {Object|undefined} currently selected product cursor\n */\nReactionProduct.selectedProduct = function () {\n  const id = ReactionProduct.selectedProductId();\n  if (typeof id === \"string\") {\n    return applyProductRevision(Products.findOne(id));\n  }\n  return undefined;\n};\n\n/**\n * checkChildVariants\n * @summary return number of child variants for a parent\n * @param {String} parentVariantId - parentVariantId\n * @return {Number} count of childVariants for this parentVariantId\n */\nReactionProduct.checkChildVariants = function (parentVariantId) {\n  const childVariants = ReactionProduct.getVariants(parentVariantId);\n  return childVariants.length ? childVariants.length : 0;\n};\n\n/**\n * checkInventoryVariants\n * @summary return number of inventory variants for a parent\n * @param {String} parentVariantId - parentVariantId\n * @todo could be combined with checkChildVariants in one method\n * @todo inventoryVariants are deprecated. remove this.\n * @return {Number} count of inventory variants for this parentVariantId\n */\nReactionProduct.checkInventoryVariants = function (parentVariantId) {\n  const inventoryVariants = ReactionProduct.getVariants(parentVariantId, \"inventory\");\n  return inventoryVariants.length ? inventoryVariants.length : 0;\n};\n\n/**\n * getVariantPriceRange\n * @summary get price range of a variant if it has child options.\n * if no child options, return main price value\n * @todo remove string return and replace with object\n * @param {String} [id] - current variant _Id\n * @return {String} formatted price or price range\n */\nReactionProduct.getVariantPriceRange = id => Catalog.\n  getVariantPriceRange(id || ReactionProduct.selectedVariant()._id);\n\n/**\n * getProductPriceRange\n * @summary get price range of a product\n * if no only one price available, return it\n * otherwise return a string range\n * @todo remove string return and replace with object\n * @param {String} [id] - current product _id\n * @return {String} formatted price or price range\n */\nReactionProduct.getProductPriceRange = id => Catalog.\n  getProductPriceRange(id || ReactionProduct.selectedProductId());\n\n/**\n * getVariantQuantity\n * @description middleware method which calls the same named common method.\n * @todo maybe we could remove this after 1.3. But for now I like how it looks.\n * @param {Object} doc - variant object\n * @return {Number} summary of options quantity or top-level variant\n * inventoryQuantity\n */\nReactionProduct.getVariantQuantity = doc => Catalog.getVariantQuantity(doc);\n\n/**\n * @method getVariants\n * @description Get all parent variants\n * @summary could be useful for products and for top level variants\n * @param {String} [id] - product _id\n * @param {String} [type] - type of variant\n * @return {Array} Parent variants or empty array\n */\nReactionProduct.getVariants = (id, type) => {\n  return Catalog.getVariants(id || ReactionProduct.selectedProductId(), type);\n};\n\n/**\n * @method getTopVariants\n * @description Get only product top level variants\n * @param {String} [id] - product _id\n * @return {Array} Product top level variants or empty array\n */\nReactionProduct.getTopVariants = id => {\n  return Catalog.getTopVariants(id || ReactionProduct.selectedProductId());\n};\n\n/**\n * getTag\n * @summary This needed for naming `positions` object. Method could return `tag`\n * route name or shop name as default name.\n * @return {String} tag name or shop name\n */\nReactionProduct.getTag = () => {\n  return getCurrentTag() || getShopName().toLowerCase();\n};\n\n/**\n * getProductsByTag\n * @summary method to return tag specific product\n * @param {String} tag - tag string\n * @return {Object} - return products collection cursor filtered by tag\n */\nReactionProduct.getProductsByTag = function (tag) {\n  let hashtags;\n  let newRelatedTags;\n  let relatedTag;\n  let relatedTags;\n  const selector = {};\n\n  if (tag) {\n    hashtags = [];\n    relatedTags = [tag];\n    while (relatedTags.length) {\n      newRelatedTags = [];\n      for (relatedTag of relatedTags) {\n        if (hashtags.indexOf(relatedTag._id) === -1) {\n          hashtags.push(relatedTag._id);\n        }\n      }\n      relatedTags = newRelatedTags;\n    }\n    selector.hashtags = {\n      $in: hashtags\n    };\n  }\n  const cursor = Products.find(selector);\n  return cursor;\n};\n\n/**\n * publishProduct\n * @summary product publishing and alert\n * @param {Object} productOrArray - product Object\n * @returns {undefined} - returns nothing, and alerts, happen here\n */\nReactionProduct.publishProduct = function (productOrArray) {\n  const products = !_.isArray(productOrArray) ? [productOrArray] : productOrArray;\n  /* eslint no-loop-func: 1 */\n  //\n  // TODO review process for publishing arrays of product\n  //\n  for (const product of products) {\n    Meteor.call(\"products/publishProduct\", product._id, (error, result) => {  // eslint-disable-line no-loop-func\n      if (error) {\n        Alerts.add(error, \"danger\", {\n          placement: \"productGridItem\",\n          id: product._id\n        });\n        throw new Meteor.Error(\"error publishing product\", error);\n      }\n      const alertSettings = {\n        placement: \"productGridItem\",\n        id: product._id,\n        autoHide: true,\n        dismissable: false\n      };\n      if (result) {\n        Alerts.add(i18next.t(\"productDetail.publishProductVisible\", { product: product.title }), \"success\", alertSettings);\n      } else {\n        Alerts.add(i18next.t(\"productDetail.publishProductHidden\", { product: product.title }), \"warning\", alertSettings);\n      }\n    });\n  }\n};\n\n/**\n * publishProduct\n * @summary product publishing and alert\n * @param {Object} productOrArray - product Object\n * @returns {undefined} - returns nothing, and alerts, happen here\n */\nReactionProduct.toggleVisibility = function (productOrArray) {\n  const products = !_.isArray(productOrArray) ? [productOrArray] : productOrArray;\n  for (const product of products) {\n    Meteor.call(\"products/toggleVisibility\", product._id, (error, result) => { // eslint-disable-line no-loop-func\n      if (error) {\n        Alerts.add(error, \"danger\", {\n          placement: \"productGridItem\",\n          id: product._id\n        });\n        throw new Meteor.Error(\"error publishing product\", error);\n      }\n      const alertSettings = {\n        placement: \"productGridItem\",\n        id: product._id,\n        autoHide: true,\n        dismissable: false\n      };\n      if (result) {\n        Alerts.add(i18next.t(\"productDetail.publishProductVisible\", { product: product.title }), \"success\", alertSettings);\n      } else {\n        Alerts.add(i18next.t(\"productDetail.publishProductHidden\", { product: product.title }), \"warning\", alertSettings);\n      }\n    });\n  }\n};\n\n\n/**\n * cloneProduct\n * @summary product cloning and alert\n * @param {Object|Array} productOrArray - if this method calls from productGrid\n * it receives and array with product _id or _ids, but if it calls from PDP, when\n * it receive a `Object` with _id. It needed to determine the source of call.\n * @returns {undefined} - returns nothing, and alerts, happen here\n */\nReactionProduct.cloneProduct = function (productOrArray) {\n  const products = !Array.isArray(productOrArray) ? [productOrArray] : productOrArray;\n\n  return Meteor.call(\"products/cloneProduct\", products, function (error, result) {\n    if (error) {\n      Alerts.add(error, \"danger\", { placement: \"productGridItem\" });\n      throw new Meteor.Error(\"error cloning product\", error);\n    }\n    if (result) {\n      if (products.length === 1) {\n        Alerts.add(i18next.t(\"productDetail.clonedAlert\", { product: products[0].title }), \"success\", {\n          placement: \"productGridItem\",\n          id: products[0]._id,\n          autoHide: true,\n          dismissable: false\n        });\n      } else {\n        Alerts.add(i18next.t(\"productDetail.clonedAlert_plural\", { product: i18next.t(\"productDetail.theSelectedProducts\"), count: 0 }),\n          \"success\", {\n            placement: \"productGridItem\",\n            id: products[0]._id,\n            autoHide: true,\n            dismissable: false\n          }\n        );\n      }\n    }\n    // this statement allow us to redirect to a new clone PDP if clone action\n    // was fired within PDP, not within productGrid.\n    if (!Array.isArray(productOrArray)) {\n      Router.go(\"product\", {\n        handle: result[0]\n      });\n    }\n  });\n};\n\n/**\n * archiveProduct\n * @summary confirm to archive product\n * @param {Object} productOrArray - product Object\n * @returns {undefined} - returns nothing, and alerts, happen here\n */\nReactionProduct.archiveProduct = function (productOrArray) {\n  const products = !_.isArray(productOrArray) ? [productOrArray] : productOrArray;\n  const productIds = _.map(products, product => typeof product === \"string\" ? product : product._id);\n  let confirmTitle;\n  // we have to use so difficult logic with `length` check because of some\n  // languages, which have different phrase forms for each of cases.\n  // we are using i18next `plural` functionality here.\n  // @see: http://i18next.com/translate/pluralSimple\n  if (products.length === 1) {\n    confirmTitle = i18next.t(\"productDetailEdit.archiveThisProduct\");\n  } else {\n    confirmTitle = i18next.t(\"productDetailEdit.archiveSelectedProducts\");\n  }\n\n  Alerts.alert({\n    title: confirmTitle,\n    type: \"warning\",\n    showCancelButton: true,\n    confirmButtonText: \"Archive\"\n  }, (isConfirm) => {\n    if (isConfirm) {\n      Meteor.call(\"products/archiveProduct\", productIds, function (error, result) {\n        let title;\n        if (error) {\n          title = products.length === 1 ?\n            products[0].title || i18next.t(\"productDetail.archiveErrorTheProduct\") :\n            i18next.t(\"productDetail.theSelectedProducts\");\n          Alerts.toast(i18next.t(\"productDetail.productArchiveError\", { product: title }), \"error\");\n          throw new Meteor.Error(\"Error archiving \" + title, error);\n        }\n        if (result) {\n          Router.go(\"/\");\n          if (products.length === 1) {\n            title = products[0].title || i18next.t(\"productDetail.theProduct\");\n            Alerts.toast(i18next.t(\"productDetail.archivedAlert\", { product: title }), \"info\");\n          } else {\n            title = i18next.t(\"productDetail.theSelectedProducts\");\n            Alerts.toast(i18next.t(\"productDetail.archivedAlert_plural\", { product: title, count: 0 }), \"info\");\n          }\n        }\n      });\n    }\n  });\n};\n\nReactionProduct.isAncestorDeleted = function (product, includeSelf) {\n  const productIds = [\n    ...product.ancestors // Avoid mutations\n  ];\n\n  if (includeSelf) {\n    productIds.push(product._id);\n  }\n\n  // Verify there are no deleted ancestors,\n  // Variants cannot be restored if their parent product / variant is deleted\n  const archivedCount = Revisions.find({\n    \"documentId\": { $in: productIds },\n    \"documentData.isDeleted\": true,\n    \"workflow.status\": {\n      $nin: [\n        \"revision/published\"\n      ]\n    }\n  }).count();\n\n  if (archivedCount > 0) {\n    return true;\n  }\n\n  return false;\n};\n\nexport default ReactionProduct;\n","import _ from \"lodash\";\nimport { check } from \"meteor/check\";\nimport * as Schemas from \"/lib/collections/schemas\";\n\nconst TagSchema = Schemas.Tag.newContext();\n\nexport const PropTypes = {};\n\n/**\n * React Component propType validator for a single Tag\n * @param  {Object} props An object containing all props passed into the component\n * @param  {String} propName Name of prop to validate\n * @return {Error|undefined} returns an error if validation us unseccessful\n */\nPropTypes.Tag = (props, propName) => {\n  check(props, Object);\n  check(propName, String);\n\n  if (_.isEmpty(props[propName]) === false) {\n    if (TagSchema.validate(props[propName]) === false) {\n      return new Error(\"Tag must be of type: Schemas.Tag\");\n    }\n  }\n};\n\n/**\n * React Component propType validator for an array of Tags\n * @param  {Object} props An object containing all props passed into the component\n * @param  {String} propName Name of prop to validate\n * @return {Error|undefined} returns an error if validation us unseccessful\n */\nPropTypes.arrayOfTags = (props, propName) => {\n  check(props, Object);\n  check(propName, String);\n\n  if (_.isEmpty(props[propName]) === false && _.isArray(props[propName])) {\n    const valid = _.every(props[propName], (tag) => {\n      return TagSchema.validate(tag);\n    });\n\n    if (valid === false) {\n      return new Error(\"Objects in array must be of type: Schemas.Tag\");\n    }\n  }\n};\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { shopIdAutoValue } from \"./helpers\";\nimport { Address } from \"./address\";\nimport { Metafield } from \"./metafield\";\n\n/**\n * Accounts Schemas\n */\n\nconst TaxSettings = new SimpleSchema({\n  exemptionNo: {\n    type: String,\n    optional: true\n  },\n  customerUsageType: {\n    type: String,\n    optional: true\n  }\n});\n\nexport const Profile = new SimpleSchema({\n  addressBook: {\n    type: [Address],\n    optional: true\n  },\n  invited: {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  name: {\n    type: String,\n    optional: true\n  },\n  picture: {\n    type: String,\n    optional: true\n  }\n});\n\nexport const Email = new SimpleSchema({\n  provides: {\n    type: String,\n    defaultValue: \"default\",\n    optional: true\n  },\n  address: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  verified: {\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  }\n});\n\n/**\n * Reaction Schemas Accounts\n */\n\nexport const Accounts = new SimpleSchema({\n  userId: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    index: 1,\n    label: \"Accounts ShopId\"\n  },\n  sessions: {\n    type: [String],\n    optional: true,\n    index: 1\n  },\n  shopId: {\n    type: String,\n    autoValue: shopIdAutoValue,\n    regEx: SimpleSchema.RegEx.Id,\n    index: 1\n  },\n  name: {\n    type: String,\n    optional: true\n  },\n  emails: {\n    type: [Email],\n    optional: true\n  },\n  acceptsMarketing: {\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  },\n  state: {\n    type: String,\n    defaultValue: \"new\",\n    optional: true\n  },\n  taxSettings: {\n    type: TaxSettings,\n    optional: true\n  },\n  note: {\n    type: String,\n    optional: true\n  },\n  profile: {\n    type: Profile,\n    optional: true\n  },\n  metafields: {\n    type: [Metafield],\n    optional: true\n  },\n  createdAt: {\n    type: Date,\n    autoValue() {\n      if (this.isInsert) {\n        return new Date;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date\n        };\n      }\n    }\n  },\n  updatedAt: {\n    type: Date,\n    autoValue() {\n      if (this.isUpdate) {\n        return {\n          $set: new Date\n        };\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date\n        };\n      }\n    },\n    optional: true\n  }\n});\n","import { Random } from \"meteor/random\";\nimport { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Metafield } from \"./metafield\";\n\n/**\n* Reaction Schemas Address\n*/\n\nexport const Address = new SimpleSchema({\n  _id: {\n    type: String,\n    defaultValue: Random.id(),\n    optional: true\n  },\n  fullName: {\n    type: String,\n    label: \"Full name\"\n  },\n  address1: {\n    label: \"Address 1\",\n    type: String\n  },\n  address2: {\n    label: \"Address 2\",\n    type: String,\n    optional: true\n  },\n  city: {\n    type: String,\n    label: \"City\"\n  },\n  company: {\n    type: String,\n    label: \"Company\",\n    optional: true\n  },\n  phone: {\n    type: String,\n    label: \"Phone\"\n  },\n  region: {\n    label: \"State/Province/Region\",\n    type: String\n  },\n  postal: {\n    label: \"ZIP/Postal Code\",\n    type: String\n  },\n  country: {\n    type: String,\n    label: \"Country\"\n  },\n  isCommercial: {\n    label: \"This is a commercial address.\",\n    type: Boolean\n  },\n  isBillingDefault: {\n    label: \"Make this your default billing address?\",\n    type: Boolean\n  },\n  isShippingDefault: {\n    label: \"Make this your default shipping address?\",\n    type: Boolean\n  },\n  failedValidation: {\n    label: \"Failed validation\",\n    type: Boolean,\n    defaultValue: false,\n    optional: true\n  },\n  metafields: {\n    type: [Metafield],\n    optional: true\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Roles } from \"meteor/alanning:roles\";\nimport { getShopId } from \"/lib/api\";\nimport { PackageConfig } from \"./registry\";\nimport { shopIdAutoValue } from \"./helpers\";\n\nexport const AnalyticsEvents = new SimpleSchema({\n  \"eventType\": {\n    type: String\n  },\n  \"category\": {\n    type: String,\n    optional: true\n  },\n  \"action\": {\n    type: String,\n    optional: true\n  },\n  \"label\": {\n    type: String,\n    optional: true\n  },\n  \"value\": {\n    type: String,\n    optional: true\n  },\n  \"user\": {\n    type: Object,\n    optional: true\n  },\n  \"user.id\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    optional: true,\n    autoValue: function () {\n      return Meteor.userId();\n    }\n  },\n  \"user.isAnonymous\": {\n    type: Boolean,\n    optional: true,\n    autoValue: function () {\n      return Roles.userIsInRole(Meteor.user(), \"anonymous\", getShopId());\n    }\n  },\n  \"shopId\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    autoValue: shopIdAutoValue,\n    label: \"AnalyticsEvents shopId\"\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: function () {\n      return new Date;\n    }\n  },\n  // Any additional data\n  \"data\": {\n    type: Object,\n    blackbox: true,\n    optional: true\n  }\n});\n\n/*\n *   Analytics\n *   api_key: \"UA-XXXXX-X\" (this is your tracking ID)\n */\n\nexport const ReactionAnalyticsPackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.public.segmentio.enabled\": {\n      type: Boolean,\n      label: \"Enabled\"\n    },\n    \"settings.public.segmentio.api_key\": {\n      type: String,\n      label: \"Segment Write Key\",\n      optional: true\n    },\n    \"settings.public.googleAnalytics.enabled\": {\n      type: Boolean,\n      label: \"Enabled\"\n    },\n    \"settings.public.googleAnalytics.api_key\": {\n      type: String,\n      label: \"Google Analytics Tracking ID\",\n      optional: true\n    },\n    \"settings.public.mixpanel.enabled\": {\n      type: Boolean,\n      label: \"Enabled\"\n    },\n    \"settings.public.mixpanel.api_key\": {\n      type: String,\n      label: \"Mixpanel Token\",\n      optional: true\n    }\n  }\n]);\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\nexport const Assets = new SimpleSchema({\n  type: {\n    type: String\n  },\n  name: {\n    type: String,\n    optional: true\n  },\n  /**\n   * namespace for i18n. This allows to load translation for custom plugins\n   */\n  ns: {\n    type: String,\n    optional: true\n  },\n  path: {\n    type: String,\n    optional: true\n  },\n  content: {\n    type: String,\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { shopIdAutoValue } from \"./helpers\";\nimport { Payment } from \"./payments\";\nimport { ProductVariant } from \"./products\";\nimport { Shipment, ShippingParcel } from \"./shipping\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * CartItem Schema\n */\n\nexport const CartItem = new SimpleSchema({\n  _id: {\n    type: String\n  },\n  productId: {\n    type: String,\n    index: 1\n  },\n  shopId: {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Cart Item shopId\",\n    optional: true\n  },\n  quantity: {\n    label: \"Quantity\",\n    type: Number,\n    min: 0\n  },\n  variants: {\n    type: ProductVariant\n  },\n  title: {\n    type: String,\n    label: \"CartItem Title\"\n  },\n  type: {\n    label: \"Product Type\",\n    type: String,\n    optional: true\n  },\n  parcel: { // Currently the parcel is in the simple product schema, so we need to include it here as well. Maybe it should go in productvariant\n    type: ShippingParcel,\n    optional: true\n  },\n  cartItemId: { // Seems strange here but has to be here since we share schemas between cart and order\n    type: String,\n    optional: true\n  }\n});\n\n/**\n * CartItem Schema\n * used in check by inventory/addReserve method\n */\n\nexport const CartItems = new SimpleSchema({\n  items: {\n    type: [CartItem],\n    optional: true\n  }\n});\n\n/**\n * Cart Schema\n */\n\nexport const Cart = new SimpleSchema({\n  _id: { // required for check of users' carts\n    type: String,\n    optional: true\n  },\n  shopId: {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Cart ShopId\"\n  },\n  userId: {\n    type: String,\n    unique: true,\n    autoValue: function () {\n      if (this.isInsert || this.isUpdate) {\n        if (!this.isFromTrustedCode) {\n          return this.userId;\n        }\n      } else {\n        this.unset();\n      }\n    }\n  },\n  sessionId: {\n    type: String,\n    index: 1\n  },\n  email: {\n    type: String,\n    optional: true,\n    index: 1,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  items: {\n    type: [CartItem],\n    optional: true\n  },\n  shipping: {\n    type: [Shipment],\n    optional: true,\n    blackbox: true\n  },\n  billing: {\n    type: [Payment],\n    optional: true,\n    blackbox: true\n  },\n  tax: {\n    type: Number,\n    decimal: true,\n    optional: true\n  },\n  taxes: {\n    type: [Object],\n    optional: true,\n    blackbox: true\n  },\n  discount: {\n    type: Number,\n    decimal: true,\n    optional: true\n  },\n  workflow: {\n    type: Workflow,\n    optional: true\n  },\n  createdAt: {\n    type: Date,\n    autoValue: function () {\n      if (this.isInsert) {\n        return new Date;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date\n        };\n      }\n    },\n    denyUpdate: true\n  },\n  updatedAt: {\n    type: Date,\n    autoValue: function () {\n      if (this.isUpdate) {\n        return {\n          $set: new Date\n        };\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date\n        };\n      }\n    },\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\nexport const Emails = new SimpleSchema({\n  to: {\n    type: String\n  },\n\n  from: {\n    type: String\n  },\n\n  subject: {\n    type: String\n  },\n\n  text: {\n    type: String,\n    optional: true\n  },\n\n  html: {\n    type: String,\n    optional: true\n  },\n\n  userId: {\n    type: String,\n    optional: true\n  },\n\n  jobId: {\n    type: String,\n    index: true\n  },\n\n  type: {\n    type: String,\n    optional: true\n  },\n\n  status: {\n    type: String\n  },\n\n  createdAt: {\n    type: Date,\n    autoValue() {\n      if (this.isInsert) {\n        return new Date();\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date()\n        };\n      }\n      return this.unset();\n    }\n  },\n\n  updatedAt: {\n    type: Date,\n    autoValue() {\n      if (this.isUpdate) {\n        return new Date();\n      }\n      return this.unset();\n    },\n    denyInsert: true,\n    optional: true\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Random } from \"meteor/random\";\nimport { getShopId } from \"/lib/api\";\n\n/**\n * shopIdAutoValue\n * @summary used for schema injection autoValue\n * @example autoValue: shopIdAutoValue\n * @return {String} returns current shopId\n */\nexport function shopIdAutoValue() {\n  // we should always have a shopId\n  if (this.isSet && Meteor.isServer) {\n    return this.value;\n  } else if (Meteor.isServer && !this.isUpdate || Meteor.isClient && this.isInsert) {\n    return getShopId();\n  }\n  return this.unset();\n}\n\n/**\n * schemaIdAutoValue\n * @summary used for schema injection autoValue\n * @example autoValue: schemaIdAutoValue\n * @return {String} returns randomId\n */\nexport function schemaIdAutoValue() {\n  if (this.isSet && Meteor.isServer) {\n    return this.value;\n  } else if (Meteor.isServer && this.operator !== \"$pull\" ||\n    Meteor.isClient && this.isInsert) {\n    return Random.id();\n  }\n  return this.unset();\n}\n","export * from \"./accounts\";\nexport * from \"./address\";\nexport * from \"./analytics\";\nexport * from \"./assets\";\nexport * from \"./cart\";\nexport * from \"./emails\";\nexport * from \"./inventory\";\nexport * from \"./layouts\";\nexport * from \"./logs\";\nexport * from \"./metafield\";\nexport * from \"./notifications\";\nexport * from \"./orders\";\nexport * from \"./payments\";\nexport * from \"./products\";\nexport * from \"./registry\";\nexport * from \"./revisions\";\nexport * from \"./shipping\";\nexport * from \"./shops\";\nexport * from \"./sms\";\nexport * from \"./social\";\nexport * from \"./tags\";\nexport * from \"./templates\";\nexport * from \"./themes\";\nexport * from \"./translations\";\nexport * from \"./workflow\";\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { shopIdAutoValue } from \"./helpers\";\nimport { Document, Notes } from \"./orders\";\nimport { Metafield } from \"./metafield\";\nimport { Workflow } from \"./workflow\";\n\nexport const Inventory = new SimpleSchema({\n  _id: {\n    type: String,\n    optional: true // inserted by mongo, we need it for schema validation\n  },\n  shopId: {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Inventory ShopId\"\n  },\n  productId: {\n    type: String,\n    index: true\n  },\n  variantId: {\n    type: String,\n    index: true\n  },\n  orderItemId: {\n    type: String,\n    index: true,\n    optional: true\n  },\n  workflow: {\n    type: Workflow,\n    optional: true\n  },\n  sku: {\n    label: \"sku\",\n    type: String,\n    optional: true\n  },\n  metafields: {\n    type: [Metafield],\n    optional: true\n  },\n  documents: {\n    type: [Document],\n    optional: true\n  },\n  notes: {\n    type: [Notes],\n    optional: true\n  },\n  createdAt: {\n    type: Date,\n    optional: true, // schema validation failing in method with this required. should be considered temporary.\n    autoValue: function () {\n      if (this.isInsert || this.isUpdate && !this.isSet) {\n        return new Date;\n      }\n      this.unset();\n    }\n  },\n  updatedAt: {\n    type: Date,\n    autoValue: function () {\n      return new Date;\n    },\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\n/**\n * @summary Layout Schema\n * Layout are used by the Shops and Packages schemas.\n * They are used to defin both the template layout on the site,\n * as well as the workflow components that will be used in each\n * layout block.\n *\n *  \"layout\": \"coreLayout\",\n *  \"workflow\": \"coreWorkflow\",\n *  \"theme\": \"default\",\n *  \"enabled\": true,\n *  \"structure\": {\n *   \"template\": \"products\",\n *   \"layoutHeader\": \"layoutHeader\",\n *   \"layoutFooter\": \"layoutFooter\",\n *   \"notFound\": \"notFound\",\n *   \"dashboardControls\": \"dashboardControls\",\n *   \"adminControlsFooter\": \"adminControlsFooter\"\n */\n\nexport const LayoutStructure = new SimpleSchema({\n  template: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  layoutHeader: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  layoutFooter: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  notFound: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  dashboardHeader: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  dashboardControls: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  dashboardHeaderControls: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  adminControlsFooter: {\n    type: String,\n    optional: true,\n    index: true\n  }\n});\n\nexport const Layout = new SimpleSchema({\n  layout: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  workflow: {\n    type: String,\n    optional: true\n  },\n  template: {\n    type: String,\n    optional: true\n  },\n  collection: {\n    type: String,\n    optional: true\n  },\n  theme: {\n    type: String,\n    optional: true\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: true\n  },\n  status: {\n    type: String,\n    optional: true\n  },\n  label: {\n    type: String,\n    optional: true\n  },\n  container: {\n    type: String,\n    optional: true\n  },\n  audience: {\n    type: [String],\n    optional: true\n  },\n  structure: {\n    type: LayoutStructure,\n    optional: true\n  },\n  priority: {\n    type: Number,\n    optional: true,\n    defaultValue: 999\n  },\n  position: {\n    type: Number,\n    optional: true,\n    defaultValue: 1\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\nexport const Logs = new SimpleSchema({\n\n  logType: {\n    type: String\n  },\n  shopId: {\n    type: String\n  },\n  level: {\n    type: String,\n    defaultValue: \"info\",\n    allowedValues: [\"trace\", \"debug\", \"info\", \"warn\", \"error\", \"fatal\"]\n  },\n  source: {\n    type: String,\n    defaultValue: \"server\",\n    allowedValues: [\"client\", \"server\"]\n  },\n  handled: {\n    type: Boolean,\n    defaultValue: false\n  },\n  data: {\n    type: Object,\n    blackbox: true\n  },\n  date: {\n    type: Date,\n    autoValue() { return new Date(); }\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\n/**\n * Metafield Schema\n */\n\nexport const Metafield = new SimpleSchema({\n  key: {\n    type: String,\n    max: 30,\n    optional: true\n  },\n  namespace: {\n    type: String,\n    max: 20,\n    optional: true\n  },\n  scope: {\n    type: String,\n    optional: true\n  },\n  value: {\n    type: String,\n    optional: true\n  },\n  valueType: {\n    type: String,\n    optional: true\n  },\n  description: {\n    type: String,\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\n\nexport const Notification = new SimpleSchema({\n  message: {\n    type: String,\n    optional: false\n  },\n  /**\n   * Type              Message(This would be the corresponding message)\n   * ----------------| -----------------------------------------------\n   * orderCancelled  | \"Your order was canceled.\"\n   * forAdmin:       | \"You have a new order.\"\n   * newOrder:       | \"You just made an order.\"\n   * orderDelivered: | \"Your order has been delivered.\"\n   * orderProcessing:  | \"Your order is being processed.\"\n   * orderShipped:   | \"Your order has been shipped.\"\n   */\n  type: {\n    type: String,\n    optional: false\n  },\n  url: {\n    type: String,\n    optional: false\n  },\n  to: {\n    type: String,\n    optional: false\n  },\n  hasDetails: {\n    type: Boolean,\n    optional: false\n  },\n  details: {\n    type: String,\n    optional: true\n  },\n  status: {\n    type: String,\n    optional: false,\n    defaultValue: \"unread\"\n  },\n  timeSent: {\n    type: Date,\n    optional: false,\n    autoValue: function () {\n      if (this.isInsert) {\n        return new Date();\n      } else if (this.isUpsert) {\n        return { $setOnInsert: new Date() };\n      }\n      this.unset();\n    }\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * Order Document Schema\n */\n\nexport const Document = new SimpleSchema({\n  docId: {\n    type: String\n  },\n  docType: {\n    type: String,\n    optional: true\n  }\n});\n\n/**\n * Order History Schema\n */\n\nexport const History = new SimpleSchema({\n  event: {\n    type: String\n  },\n  value: {\n    type: String\n  },\n  userId: {\n    type: String\n  },\n  updatedAt: {\n    type: Date\n  }\n});\n\n/**\n * Order Notes Schema\n */\n\nexport const Notes = new SimpleSchema({\n  content: {\n    type: String\n  },\n  userId: {\n    type: String\n  },\n  updatedAt: {\n    type: Date\n  }\n});\n\n/**\n * OrderItems Schema\n * merges with Cart and Order to create Orders collection\n */\nexport const OrderItem = new SimpleSchema({\n  additionalField: {\n    type: String,\n    optional: true\n  },\n  workflow: {\n    type: Workflow,\n    optional: true\n  },\n  history: {\n    type: [History],\n    optional: true\n  },\n  documents: {\n    type: [Document],\n    optional: true\n  }\n});\n\n\n/**\n * OrderTransaction Schema\n * order transactions tie shipping, billing, and inventory transactions\n */\nexport const OrderTransaction = new SimpleSchema({\n  itemId: {\n    type: String,\n    optional: true\n  },\n  paymentId: {\n    type: String,\n    optional: true\n  },\n  shipmentId: {\n    type: String,\n    optional: true\n  },\n  inventoryId: {\n    type: String,\n    optional: true\n  },\n  createdAt: {\n    type: Date,\n    autoValue: function () {\n      if (this.isUpdate && !this.isSet) {\n        return new Date;\n      }\n      this.unset();\n    },\n    denyUpdate: true\n  }\n});\n\n/**\n * Order Schema\n */\nexport const Order = new SimpleSchema({\n  userId: {\n    type: String,\n    unique: false\n  },\n  cartId: {\n    type: String,\n    optional: true\n  },\n  history: {\n    type: [History],\n    optional: true\n  },\n  documents: {\n    type: [Document],\n    optional: true\n  },\n  notes: {\n    type: [Notes],\n    optional: true\n  },\n  items: {\n    type: [OrderItem],\n    optional: true\n  },\n  transactions: {\n    type: [OrderTransaction],\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { schemaIdAutoValue } from \"./helpers\";\nimport { Address } from \"./address\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * PaymentMethod Schema\n */\n\nexport const PaymentMethod = new SimpleSchema({\n  processor: {\n    type: String\n  },\n  paymentPackageId: {\n    type: String\n  },\n  paymentSettingsKey: {\n    type: String\n  },\n  storedCard: {\n    type: String,\n    optional: true\n  },\n  method: {\n    type: String,\n    allowedValues: [\"credit\", \"debit\", \"shipping-credit\"],\n    optional: true\n  },\n  transactionId: {\n    type: String\n  },\n  metadata: {\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  workflow: {\n    type: Workflow,\n    optional: true\n  },\n  status: {\n    type: String\n  },\n  mode: {\n    type: String,\n    allowedValues: [\"authorize\", \"capture\", \"refund\", \"cancel\", \"void\"]\n  },\n  createdAt: {\n    type: Date,\n    autoValue: function () {\n      if (this.isInsert) {\n        return new Date;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date\n        };\n      }\n    },\n    denyUpdate: true\n  },\n  updatedAt: {\n    type: Date,\n    optional: true\n  },\n  authorization: {\n    type: String,\n    optional: true\n  },\n  amount: {\n    type: Number,\n    decimal: true,\n    optional: true\n  },\n  currency: {\n    type: String,\n    optional: true\n  },\n  transactions: {\n    type: [Object],\n    optional: true,\n    blackbox: true\n  }\n});\n\n/**\n * Invoice Schema\n */\n\nexport const Invoice = new SimpleSchema({\n  transaction: {\n    type: String,\n    optional: true\n  },\n  shipping: {\n    type: Number,\n    decimal: true,\n    optional: true\n  },\n  taxes: {\n    type: Number,\n    decimal: true,\n    optional: true\n  },\n  subtotal: {\n    type: Number,\n    decimal: true\n  },\n  discounts: {\n    type: Number,\n    decimal: true,\n    optional: true\n  },\n  total: {\n    type: Number,\n    decimal: true\n  }\n});\n\n/**\n * Currency Schema\n */\n\nexport const Currency = new SimpleSchema({\n  userCurrency: {\n    type: String,\n    optional: true,\n    defaultValue: \"USD\"\n  },\n  exchangeRate: {\n    type: Number,\n    decimal: true,\n    optional: true\n  }\n});\n\n/**\n * Payment Schema\n */\n\nexport const Payment = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Payment Id\",\n    autoValue: schemaIdAutoValue\n  },\n  address: {\n    type: Address,\n    optional: true\n  },\n  paymentMethod: {\n    type: PaymentMethod,\n    optional: true\n  },\n  invoice: {\n    type: Invoice,\n    optional: true\n  },\n  currency: {\n    type: Currency,\n    optional: true\n  }\n});\n\nexport const Refund = new SimpleSchema({\n  type: {\n    type: String\n  },\n  amount: {\n    type: Number,\n    decimal: true\n  },\n  created: {\n    type: Number\n  },\n  currency: {\n    type: String\n  },\n  raw: {\n    type: Object,\n    optional: true,\n    blackbox: true\n  }\n});\n","import { Meteor } from \"meteor/meteor\";\nimport { Random } from \"meteor/random\";\nimport { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { ReactionProduct, getSlug } from \"/lib/api\";\nimport { shopIdAutoValue } from \"./helpers\";\nimport { Metafield } from \"./metafield\";\nimport { ShippingParcel } from \"./shipping\";\nimport { Workflow } from \"./workflow\";\n\n\n/**\n * VariantMedia Schema\n */\nexport const VariantMedia = new SimpleSchema({\n  mediaId: {\n    type: String,\n    optional: true\n  },\n  priority: {\n    type: Number,\n    optional: true\n  },\n  metafields: {\n    type: [Metafield],\n    optional: true\n  },\n  updatedAt: {\n    type: Date,\n    optional: true\n  },\n  createdAt: {\n    type: Date,\n    autoValue: function () {\n      if (this.isInsert) {\n        return new Date;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date\n        };\n      }\n    },\n    denyUpdate: true\n  }\n});\n\n/**\n * ProductPosition Schema\n */\nexport const ProductPosition = new SimpleSchema({\n  tag: {\n    type: String,\n    optional: true\n  },\n  position: {\n    type: Number,\n    optional: true\n  },\n  pinned: {\n    type: Boolean,\n    optional: true\n  },\n  weight: {\n    type: Number,\n    optional: true,\n    defaultValue: 0,\n    min: 0,\n    max: 3\n  },\n  updatedAt: {\n    type: Date\n  }\n});\n\n/**\n * ProductVariant Schema\n */\nexport const ProductVariant = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Variant ID\"\n  },\n  ancestors: {\n    type: [String],\n    defaultValue: []\n  },\n  // since implementing of flattened model this property is used for keeping\n  // array index. This is needed for moving variants through list (drag'n'drop)\n  index: {\n    label: \"Variant position number in list\",\n    type: Number,\n    optional: true\n  },\n  isVisible: {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  isDeleted: {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  barcode: {\n    label: \"Barcode\",\n    type: String,\n    optional: true,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (this.siblingField(\"type\").value === \"inventory\" && !this.value) {\n          return \"required\";\n        }\n      }\n    }\n  },\n  compareAtPrice: {\n    label: \"MSRP\",\n    type: Number,\n    optional: true,\n    decimal: true,\n    min: 0,\n    defaultValue: 0.00\n  },\n  fulfillmentService: {\n    label: \"Fulfillment service\",\n    type: String,\n    optional: true\n  },\n  weight: {\n    label: \"Weight\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value ||\n          this.value === 0)) {\n          return \"required\";\n        }\n      }\n    }\n  },\n  length: {\n    label: \"Length\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  width: {\n    label: \"Width\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  height: {\n    label: \"Height\",\n    type: Number,\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  inventoryManagement: {\n    type: Boolean,\n    label: \"Inventory Tracking\",\n    optional: true,\n    defaultValue: true,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value ||\n          this.value === false)) {\n          return \"required\";\n        }\n      }\n    }\n  },\n  // this represents an ability to sell item without keeping it on stock. In\n  // other words if it is disabled, then you can sell item even if it is not in\n  // stock.\n  inventoryPolicy: {\n    type: Boolean,\n    label: \"Deny when out of stock\",\n    optional: true,\n    defaultValue: false,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (!(this.siblingField(\"type\").value === \"inventory\" || this.value ||\n          this.value === false)) {\n          return \"required\";\n        }\n      }\n    }\n  },\n  lowInventoryWarningThreshold: {\n    type: Number,\n    label: \"Warn at\",\n    min: 0,\n    optional: true,\n    defaultValue: 0\n  },\n  inventoryQuantity: {\n    type: Number,\n    label: \"Quantity\",\n    optional: true,\n    defaultValue: 0,\n    min: 0,\n    custom: function () {\n      if (Meteor.isClient) {\n        if (this.siblingField(\"type\").value !== \"inventory\") {\n          if (ReactionProduct.checkChildVariants(this.docId) === 0 && !this.value) {\n            return \"required\";\n          }\n        }\n      }\n    }\n  },\n  minOrderQuantity: {\n    label: \"Minimum order quantity\",\n    type: Number,\n    optional: true\n  },\n  // Denormalized field: Indicates when at least one of variants\n  // `inventoryQuantity` are lower then their `lowInventoryWarningThreshold`.\n  // This is some kind of marketing course.\n  isLowQuantity: {\n    label: \"Indicates that the product quantity is too low\",\n    type: Boolean,\n    optional: true\n  },\n  // Denormalized field: Indicates when all variants `inventoryQuantity` is zero\n  isSoldOut: {\n    label: \"Indicates when the product quantity is zero\",\n    type: Boolean,\n    optional: true\n  },\n  price: {\n    label: \"Price\",\n    type: Number,\n    decimal: true,\n    defaultValue: 0.00,\n    min: 0\n  },\n  shopId: {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Variant ShopId\"\n  },\n  sku: {\n    label: \"SKU\",\n    type: String,\n    optional: true\n  },\n  type: {\n    label: \"Type\",\n    type: String,\n    defaultValue: \"variant\"\n  },\n  taxable: {\n    label: \"Taxable\",\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  taxCode: {\n    label: \"Tax Code\",\n    type: String,\n    defaultValue: \"0000\",\n    optional: true\n  },\n  taxDescription: {\n    type: String,\n    optional: true,\n    label: \"Tax Description\"\n  },\n  // Label for customers\n  title: {\n    label: \"Label\",\n    type: String,\n    defaultValue: \"\"\n  },\n  // Option internal name\n  optionTitle: {\n    label: \"Option\",\n    type: String,\n    optional: true,\n    defaultValue: \"Untitled Option\"\n  },\n  metafields: {\n    type: [Metafield],\n    optional: true\n  },\n  createdAt: {\n    label: \"Created at\",\n    type: Date,\n    optional: true\n  },\n  updatedAt: {\n    label: \"Updated at\",\n    type: Date,\n    optional: true\n  },\n  workflow: {\n    type: Workflow,\n    optional: true\n  },\n  originCountry: {\n    type: String,\n    optional: true\n  }\n});\n\nexport const PriceRange = new SimpleSchema({\n  range: {\n    type: String,\n    defaultValue: \"0.00\"\n  },\n  min: {\n    type: Number,\n    decimal: true,\n    defaultValue: 0,\n    optional: true\n  },\n  max: {\n    type: Number,\n    decimal: true,\n    defaultValue: 0,\n    optional: true\n  }\n});\n\n/**\n * Product Schema\n */\nexport const Product = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Product Id\"\n  },\n  ancestors: {\n    type: [String],\n    defaultValue: []\n  },\n  shopId: {\n    type: String,\n    autoValue: shopIdAutoValue,\n    index: 1,\n    label: \"Product ShopId\"\n  },\n  title: {\n    type: String,\n    defaultValue: \"\",\n    label: \"Product Title\"\n  },\n  pageTitle: {\n    type: String,\n    optional: true\n  },\n  description: {\n    type: String,\n    optional: true\n  },\n  originCountry: {\n    type: String,\n    optional: true\n  },\n  type: {\n    label: \"Type\",\n    type: String,\n    defaultValue: \"simple\"\n  },\n  vendor: {\n    type: String,\n    optional: true\n  },\n  metafields: {\n    type: [Metafield],\n    optional: true\n  },\n  positions: {\n    type: Object, // ProductPosition\n    blackbox: true,\n    optional: true\n  },\n  // Denormalized field: object with range string, min and max\n  price: {\n    label: \"Price\",\n    type: PriceRange\n  },\n  // Denormalized field: Indicates when at least one of variants\n  // `inventoryQuantity` are lower then their `lowInventoryWarningThreshold`.\n  // This is some kind of marketing course.\n  isLowQuantity: {\n    label: \"Indicates that the product quantity is too low\",\n    type: Boolean,\n    optional: true\n  },\n  // Denormalized field: Indicates when all variants `inventoryQuantity` is zero\n  isSoldOut: {\n    label: \"Indicates when the product quantity is zero\",\n    type: Boolean,\n    optional: true\n  },\n  // Denormalized field. It is `true` if product not in stock, but customers\n  // anyway could order it.\n  isBackorder: {\n    label: \"Indicates when the seller has allowed the sale of product which\" +\n    \" is not in stock\",\n    type: Boolean,\n    optional: true\n  },\n  requiresShipping: {\n    label: \"Require a shipping address\",\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  parcel: {\n    type: ShippingParcel,\n    optional: true\n  },\n  hashtags: {\n    type: [String],\n    optional: true,\n    index: 1\n  },\n  twitterMsg: {\n    type: String,\n    optional: true,\n    max: 140\n  },\n  facebookMsg: {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  googleplusMsg: {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  pinterestMsg: {\n    type: String,\n    optional: true,\n    max: 255\n  },\n  metaDescription: {\n    type: String,\n    optional: true\n  },\n  handle: {\n    type: String,\n    optional: true,\n    index: 1,\n    autoValue: function () {\n      let slug = getSlug(this.value);\n\n      if (!slug && this.siblingField(\"title\").value) {\n        slug = getSlug(this.siblingField(\"title\").value);\n      } else if (!slug) {\n        slug = this.siblingField(\"_id\").value || Random.id();\n      }\n      if (this.isInsert) {\n        return slug;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: slug\n        };\n      }\n    }\n  },\n  isDeleted: {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  isVisible: {\n    type: Boolean,\n    index: 1,\n    defaultValue: false\n  },\n  template: {\n    label: \"Template\",\n    type: String,\n    defaultValue: \"productDetailSimple\"\n  },\n  createdAt: {\n    type: Date,\n    autoValue: function () {\n      if (this.isInsert) {\n        return new Date;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date\n        };\n      }\n    }\n  },\n  updatedAt: {\n    type: Date,\n    autoValue: function () {\n      return new Date;\n    },\n    optional: true\n  },\n  publishedAt: {\n    type: Date,\n    optional: true\n  },\n  publishedScope: {\n    type: String,\n    optional: true\n  },\n  workflow: {\n    type: Workflow,\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Layout } from \"./layouts\";\n\n/**\n * Permissions Schema\n */\n\nexport const Permissions = new SimpleSchema({\n  permission: {\n    type: String\n  },\n  label: {\n    type: String\n  }\n});\n\n/**\n * Permissions Registry\n * the registry entries in the Package registry\n */\n\nexport const Registry = new SimpleSchema({\n  provides: {\n    type: String,\n    index: true\n  },\n  route: {\n    type: String,\n    optional: true,\n    index: true\n  },\n  name: {\n    type: String,\n    label: \"Registry Name\",\n    index: true\n  },\n  template: {\n    type: String,\n    optional: true\n  },\n  workflow: {\n    type: String,\n    optional: true\n  },\n  layout: {\n    type: String,\n    optional: true\n  },\n  triggersEnter: {\n    label: \"Trigger on Entry\",\n    type: [String],\n    optional: true\n  },\n  triggersExit: {\n    label: \"Trigger on Exit\",\n    type: [String],\n    optional: true\n  },\n  options: {\n    label: \"Routing Options\",\n    type: Object,\n    optional: true\n  },\n  description: {\n    type: String,\n    optional: true\n  },\n  icon: {\n    type: String,\n    optional: true\n  },\n  label: {\n    type: String,\n    optional: true\n  },\n  container: {\n    type: String,\n    optional: true\n  },\n  priority: {\n    type: Number,\n    optional: true\n  },\n  enabled: {\n    type: Boolean,\n    optional: true\n  },\n  permissions: {\n    type: [Permissions],\n    optional: true\n  },\n  audience: {\n    type: [String],\n    optional: true,\n    label: \"Audience\"\n  },\n  meta: {\n    label: \"Meta\",\n    type: Object,\n    optional: true,\n    blackbox: true\n  }\n});\n\n\n/**\n * PackageConfig Schema\n */\nexport const PackageConfig = new SimpleSchema({\n  shopId: {\n    type: String,\n    index: 1,\n    // see: https://github.com/reactioncommerce/reaction/issues/646#issuecomment-169351842\n    // autoValue: shopIdAutoValue,\n    label: \"PackageConfig ShopId\",\n    optional: true\n  },\n  name: {\n    type: String,\n    index: 1\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: true\n  },\n  icon: {\n    type: String,\n    optional: true\n  },\n  settings: {\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  registry: {\n    type: [Registry],\n    optional: true\n  },\n  layout: {\n    type: [Layout],\n    optional: true\n  }\n});\n\n/**\n * CorePackageConfig Schema\n * Core Reaction Settings\n */\n\nexport const CorePackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.mail\": {\n      type: Object,\n      optional: true,\n      label: \"Mail Settings\"\n    },\n    \"settings.mail.user\": {\n      type: String,\n      label: \"Username\"\n    },\n    \"settings.mail.password\": {\n      type: String,\n      label: \"Password\"\n    },\n    \"settings.mail.host\": {\n      type: String,\n      label: \"Host\"\n    },\n    \"settings.mail.port\": {\n      type: String,\n      label: \"Port\"\n    },\n    \"settings.openexchangerates.appId\": {\n      type: String,\n      label: \"Open Exchange Rates App Id\"\n    },\n    \"settings.openexchangerates.refreshPeriod\": {\n      type: String,\n      label: \"Open Exchange Rates refresh period\",\n      defaultValue: \"every 1 hour\"\n    },\n    \"settings.google.clientId\": {\n      type: String,\n      label: \"Google Client Id\",\n      defaultValue: null\n    },\n    \"settings.google.apiKey\": {\n      type: String,\n      label: \"Google Api Key\",\n      defaultValue: null\n    },\n    \"settings.public\": {\n      type: Object,\n      optional: true\n    },\n    \"settings.public.allowGuestCheckout\": {\n      type: Boolean,\n      label: \"Allow Guest Checkout\"\n    },\n    \"settings.cart.cleanupDurationDays\": {\n      type: String,\n      label: \"Cleanup Schedule\",\n      defaultValue: \"older than 3 days\"\n    }\n  }\n]);\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Workflow } from \"./workflow\";\n\n\nexport const Revisions = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Revision Id\"\n  },\n\n  // status: {\n  //   type: String,\n  //   label: \"Revision Status\"\n  // },\n\n  workflow: {\n    type: Workflow,\n    optional: false\n  },\n\n  documentId: {\n    type: String,\n    label: \"Reference Document Id\"\n  },\n\n  documentType: {\n    type: String,\n    label: \"Document Type\",\n    defaultValue: \"product\",\n    allowedValues: [\"product\", \"image\", \"tag\"]\n  },\n\n  parentDocument: {\n    type: String,\n    optional: true\n  },\n\n  documentData: {\n    type: \"object\",\n    blackbox: true\n  },\n\n  changeType: {\n    type: String,\n    optional: true,\n    allowedValues: [\"insert\", \"update\", \"remove\"]\n  },\n\n  diff: {\n    type: [Object],\n    blackbox: true,\n    optional: true\n  },\n\n  createdAt: {\n    type: Date,\n    autoValue: function () {\n      if (this.isInsert) {\n        return new Date;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date\n        };\n      }\n    }\n  },\n\n  updatedAt: {\n    type: Date,\n    autoValue: function () {\n      return new Date;\n    },\n    optional: true\n  },\n\n  publishAt: {\n    type: Date,\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { shopIdAutoValue, schemaIdAutoValue } from \"./helpers\";\nimport { Address } from \"./address\";\nimport { Invoice } from \"./payments\";\nimport { PackageConfig } from \"./registry\";\nimport { Workflow } from \"./workflow\";\n\n/**\n * ShippoShippingMethod Schema\n * TODO move shippo related schema to shippo module\n * This will only exist in ShippingMethods Inside Cart/Order and not DB shipping Collection\n * as Shippo Methods are Dynamic.\n */\n\nexport const ShippoShippingMethod = new SimpleSchema({\n  serviceLevelToken: {\n    type: String,\n    optional: true\n  },\n  rateId: {\n    type: String,\n    optional: true\n  }\n});\n\n/**\n * ShippingMethod Schema\n */\n\nexport const ShippingMethod = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    label: \"Shipment Method Id\",\n    autoValue: schemaIdAutoValue\n  },\n  \"name\": {\n    type: String,\n    label: \"Method Name\"\n  },\n  \"label\": {\n    type: String,\n    label: \"Public Label\"\n  },\n  \"group\": {\n    type: String,\n    label: \"Group\",\n    allowedValues: [\"Ground\", \"Priority\", \"One Day\", \"Free\"]\n  },\n  \"cost\": {\n    type: Number,\n    label: \"Cost\",\n    decimal: true,\n    optional: true\n  },\n  \"handling\": {\n    type: Number,\n    label: \"Handling\",\n    optional: true,\n    decimal: true,\n    defaultValue: 0,\n    min: 0\n  },\n  \"rate\": {\n    type: Number,\n    label: \"Rate\",\n    decimal: true,\n    min: 0\n  },\n  \"enabled\": {\n    type: Boolean,\n    label: \"Enabled\",\n    defaultValue: false\n  },\n  \"validRanges\": {\n    type: Array,\n    optional: true,\n    label: \"Matching Cart Ranges\"\n  },\n  \"validRanges.$\": {\n    type: Object,\n    optional: true\n  },\n  \"validRanges.$.begin\": {\n    type: Number,\n    decimal: true,\n    label: \"Begin\",\n    optional: true\n  },\n  \"validRanges.$.end\": {\n    type: Number,\n    decimal: true,\n    label: \"End\",\n    optional: true\n  },\n  \"validLocales\": {\n    type: Array,\n    optional: true,\n    label: \"Matching Locales\"\n  },\n  \"validLocales.$\": {\n    type: Object,\n    optional: true\n  },\n  \"validLocales.$.origination\": {\n    type: String,\n    label: \"From\",\n    optional: true\n  },\n  \"validLocales.$.destination\": {\n    type: String,\n    label: \"To\",\n    optional: true\n  },\n  \"validLocales.$.deliveryBegin\": {\n    type: Number,\n    label: \"Shipping Est.\",\n    optional: true\n  },\n  \"validLocales.$.deliveryEnd\": {\n    type: Number,\n    label: \"Delivery Est.\",\n    optional: true\n  },\n  \"carrier\": {     // kind of denormalizing, useful for having it in shipmentMethod( cart & order)\n    type: String,  // Alternatively we can make an extra Schema:ShipmentMethod, that inherits\n    optional: true // ShippingMethod and add the optional carrier field\n  },\n  \"settings\": {\n    type: ShippoShippingMethod,\n    optional: true\n  }\n});\n\n/**\n * ShipmentQuote Schema\n */\n\nexport const ShipmentQuote = new SimpleSchema({\n  carrier: {\n    type: String\n  },\n  method: {\n    type: ShippingMethod\n  },\n  rate: {\n    type: Number,\n    decimal: true,\n    defaultValue: \"0.00\"\n  }\n});\n\n// populate with order.items that are added to a shipment\nexport const ShipmentItem = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Shipment Line Item\",\n    optional: true,\n    autoValue: schemaIdAutoValue\n  },\n  productId: {\n    type: String,\n    index: 1\n  },\n  shopId: {\n    type: String,\n    index: 1,\n    label: \"Shipment Item ShopId\",\n    optional: true\n  },\n  quantity: {\n    label: \"Quantity\",\n    type: Number,\n    min: 0\n  },\n  variantId: {\n    type: String\n  }\n});\n\n/**\n * ShippingParcel Schema\n */\n\nexport const ShippingParcel = new SimpleSchema({\n  containers: {\n    type: String,\n    optional: true\n  },\n  length: {\n    type: Number,\n    optional: true\n  },\n  width: {\n    type: Number,\n    optional: true\n  },\n  height: {\n    type: Number,\n    optional: true\n  },\n  weight: {\n    type: Number,\n    optional: true\n  }\n});\n\n/**\n * ShippoShipment Schema\n * Specific properties of Shipment for use with Shippo. We don't use\n */\n\nexport const ShippoShipment = new SimpleSchema({\n  transactionId: {\n    type: String,\n    optional: true\n  },\n  trackingStatusStatus: { // cause tracking_status.status\n    type: String,\n    optional: true\n  },\n  trackingStatusDate: {\n    type: String,\n    optional: true\n  }\n});\n\n\n/**\n * Shipment Schema\n * used for cart/order shipment tracking\n */\n\nexport const Shipment = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Shipment Id\",\n    autoValue: schemaIdAutoValue\n  },\n  paymentId: {\n    type: String,\n    label: \"Payment Id\",\n    optional: true\n  },\n  address: {\n    type: Address,\n    optional: true\n  },\n  shipmentMethod: {\n    type: ShippingMethod,\n    optional: true\n  },\n  shipmentQuotes: {\n    type: [ShipmentQuote],\n    optional: true\n  },\n  tracking: {\n    type: String,\n    optional: true\n  },\n  parcel: {\n    type: ShippingParcel,\n    optional: true\n  },\n  items: {\n    type: [ShipmentItem],\n    optional: true\n  },\n  workflow: {\n    type: Workflow,\n    optional: true\n  },\n  packed: {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  shipped: {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  delivered: {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  invoice: {\n    type: Invoice,\n    optional: true\n  },\n  transactions: {\n    type: [Object],\n    optional: true,\n    blackbox: true\n  }, // For printable Shipping label\n  shippingLabelUrl: {\n    type: String,\n    optional: true\n  }, // For Customs printable label\n  customsLabelUrl: {\n    type: String,\n    optional: true\n  }, // shippo specific properties\n  shippo: {\n    type: ShippoShipment,\n    optional: true\n  }\n});\n\n/**\n * ShippoShippingProvider Schema\n * Specific  properties for use with Shippo. We don't use\n * ShippingProvider service* fields because Shippo is on level\n * higher service than simple carrier's ,e.g Fedex api.\n */\n\nexport const ShippoShippingProvider = new SimpleSchema({\n  carrierAccountId: {\n    type: String,\n    optional: true\n  }\n});\n\n/**\n * ShippingProvider Schema\n */\n\nexport const ShippingProvider = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Provider Id\",\n    optional: true,\n    autoValue: schemaIdAutoValue\n  },\n  name: {\n    type: String,\n    label: \"Service Code\",\n    optional: true\n  },\n  label: {\n    type: String,\n    label: \"Public Label\"\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: true\n  },\n  serviceAuth: {\n    type: String,\n    label: \"Auth\",\n    optional: true\n  },\n  serviceSecret: {\n    type: String,\n    label: \"Secret\",\n    optional: true\n  },\n  serviceUrl: {\n    type: String,\n    label: \"Service URL\",\n    optional: true\n  },\n  shippoProvider: {\n    type: ShippoShippingProvider,\n    optional: true\n  }\n});\n\n/**\n * Shipping Schema\n */\n\nexport const Shipping = new SimpleSchema({\n  _id: {\n    type: String,\n    label: \"Service Id\",\n    optional: true\n  },\n  shopId: {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Shipping ShopId\"\n  },\n  name: {\n    type: String,\n    label: \"Service Name\",\n    optional: true,\n    index: 1\n  },\n  provider: {\n    type: ShippingProvider,\n    label: \"Shipping Provider\"\n  },\n  methods: {\n    type: [ShippingMethod],\n    optional: true,\n    label: \"Shipping Methods\"\n  },\n  shipmentQuotes: {\n    type: [ShipmentQuote],\n    optional: true,\n    label: \"Quoted Methods\"\n  }\n});\n\n/**\n * Shipping Package Schema\n */\nexport const ShippingPackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.name\": {\n      type: String,\n      defaultValue: \"Flat Rate Service\"\n    }\n  }\n]);\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { Email } from \"./accounts\";\nimport { Address } from \"./address\";\nimport { Layout } from \"./layouts\";\nimport { Metafield } from \"./metafield\";\n\n/**\n * CustomEmailSettings Schema\n */\nexport const CustomEmailSettings = new SimpleSchema({\n  service: {\n    type: String,\n    optional: true\n  },\n  username: {\n    type: String,\n    optional: true\n  },\n  password: {\n    type: String,\n    optional: true\n  },\n  host: {\n    type: String,\n    optional: true\n  },\n  port: {\n    type: Number,\n    optional: true\n  }\n});\n\n/**\n * Currency Schema\n */\nexport const Currency = new SimpleSchema({\n  symbol: {\n    type: String,\n    defaultValue: \"$\"\n  },\n  format: {\n    type: String,\n    defaultValue: \"%s%v\"\n  },\n  scale: {\n    type: Number,\n    defaultValue: 2,\n    optional: true\n  },\n  decimal: {\n    type: String,\n    defaultValue: \".\",\n    optional: true\n  },\n  thousand: {\n    type: String,\n    defaultValue: \",\",\n    optional: true\n  },\n  rate: {\n    type: Number,\n    optional: true\n  }\n});\n\n/**\n * Locale Schema\n */\nexport const Locale = new SimpleSchema({\n  continents: {\n    type: Object,\n    blackbox: true\n  },\n  countries: {\n    type: Object,\n    blackbox: true\n  }\n});\n\n/**\n * Languages Schema\n */\n\nexport const Languages = new SimpleSchema({\n  label: {\n    type: String\n  },\n  i18n: {\n    type: String\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: true\n  }\n});\n\n/**\n * ShopTheme Schema\n */\nexport const ShopTheme = new SimpleSchema({\n  themeId: {\n    type: String\n  },\n  styles: {\n    type: String,\n    optional: true\n  }\n});\n\n/**\n * Shop Theme Schema\n */\nexport const BrandAsset = new SimpleSchema({\n  mediaId: {\n    type: String,\n    optional: true\n  },\n  type: {\n    type: String,\n    optional: true\n  }\n});\n\n/**\n * Shop Schema\n */\nexport const Shop = new SimpleSchema({\n  \"_id\": {\n    type: String,\n    optional: true\n  },\n  \"status\": {\n    type: String,\n    defaultValue: \"active\"\n  },\n  \"name\": {\n    type: String,\n    index: 1\n  },\n  \"description\": {\n    type: String,\n    optional: true\n  },\n  \"keywords\": {\n    type: String,\n    optional: true\n  },\n  \"addressBook\": {\n    type: [Address],\n    optional: true\n  },\n  \"domains\": {\n    type: [String],\n    defaultValue: [\"localhost\"],\n    index: 1\n  },\n  \"emails\": {\n    type: [Email],\n    optional: true\n  },\n  \"defaultPaymentMethod\": {\n    label: \"Default Payment Method\",\n    type: String,\n    defaultValue: \"none\"\n  },\n  \"currency\": {\n    label: \"Base Currency\",\n    type: String,\n    defaultValue: \"USD\"\n  },\n  \"currencies\": {\n    type: Object, // Schemas.Currency\n    blackbox: true,\n    optional: true\n  },\n  \"locales\": {\n    type: Locale\n  },\n  \"language\": {\n    label: \"Base Language\",\n    type: String,\n    defaultValue: \"en\"\n  },\n  \"languages\": {\n    type: [Languages],\n    optional: true\n  },\n  \"public\": {\n    type: String,\n    optional: true\n  },\n  \"timezone\": {\n    label: \"Timezone\",\n    type: String,\n    defaultValue: \"US/Pacific\"\n  },\n  \"baseUOM\": {\n    type: String,\n    optional: true,\n    defaultValue: \"OZ\",\n    label: \"Base Unit of Measure\"\n  },\n  \"unitsOfMeasure\": {\n    type: [Object]\n  },\n  \"unitsOfMeasure.$.uom\": {\n    type: String,\n    defaultValue: \"OZ\"\n  },\n  \"unitsOfMeasure.$.label\": {\n    type: String,\n    defaultValue: \"Ounces\"\n  },\n  \"unitsOfMeasure.$.default\": {\n    type: Boolean,\n    defaultValue: false\n  },\n  \"metafields\": {\n    type: [Metafield],\n    optional: true\n  },\n  \"defaultVisitorRole\": {\n    type: [String],\n    defaultValue: [\"anonymous\", \"guest\", \"product\", \"tag\", \"index\", \"cart/checkout\", \"cart/completed\"]\n  },\n  \"defaultRoles\": {\n    type: [String],\n    defaultValue: [\"guest\", \"account/profile\", \"product\", \"tag\", \"index\", \"cart/checkout\", \"cart/completed\"]\n  },\n  \"layout\": {\n    type: [Layout],\n    optional: true\n  },\n  \"theme\": {\n    type: ShopTheme,\n    optional: true\n  },\n  \"brandAssets\": {\n    type: [BrandAsset],\n    optional: true\n  },\n  \"appVersion\": {\n    type: String,\n    optional: true\n  },\n  \"createdAt\": {\n    type: Date,\n    autoValue: function () {\n      if (this.isInsert) {\n        return new Date();\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date()\n        };\n      }\n      this.unset();\n    },\n    denyUpdate: true,\n    optional: true\n  },\n  \"updatedAt\": {\n    type: Date,\n    autoValue: function () {\n      if (this.isUpdate) {\n        return new Date;\n      }\n    },\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\nexport const Sms  = new SimpleSchema({\n  apiKey: {\n    type: String,\n    optional: true\n  },\n  apiToken: {\n    type: String,\n    optional: true\n  },\n  shopId: {\n    type: String,\n    optional: true\n  },\n  smsPhone: {\n    type: String,\n    optional: true\n  },\n  smsProvider: {\n    type: String,\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { PackageConfig } from \"./registry\";\n\n/*\n * Settings for Social Package\n */\nexport const SocialProvider = new SimpleSchema({\n  profilePage: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Url,\n    label: \"Profile Page\",\n    optional: true\n  },\n  enabled: {\n    type: Boolean,\n    label: \"Enabled\",\n    defaultValue: false,\n    optional: true\n  }\n});\n\nexport const SocialPackageConfig = new SimpleSchema([\n  PackageConfig, {\n    \"settings.public\": {\n      type: Object,\n      optional: true\n    },\n    \"settings.public.apps\": {\n      type: Object,\n      label: \"Social Settings\",\n      optional: true\n    },\n    \"settings.public.apps.facebook\": {\n      type: SocialProvider,\n      optional: true\n    },\n    \"settings.public.apps.facebook.appId\": {\n      type: String,\n      regEx: /\\d+/,\n      label: \"App Id\",\n      optional: true\n    },\n    \"settings.public.apps.facebook.appSecret\": {\n      type: String,\n      regEx: /[\\da-z]+/,\n      label: \"App Secret\",\n      optional: true\n    },\n    \"settings.public.apps.twitter\": {\n      type: SocialProvider,\n      optional: true\n    },\n    \"settings.public.apps.twitter.username\": {\n      type: String,\n      label: \"Username\",\n      optional: true\n    },\n    \"settings.public.apps.pinterest\": {\n      type: SocialProvider,\n      optional: true\n    },\n    \"settings.public.apps.googleplus\": {\n      type: SocialProvider,\n      label: \"Google+\",\n      optional: true\n    }\n  }\n]);\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { shopIdAutoValue } from \"./helpers\";\n\n/**\n * Tag Schema\n */\n\nexport const Tag = new SimpleSchema({\n  _id: {\n    type: String,\n    optional: true\n  },\n  name: {\n    type: String,\n    index: 1\n  },\n  slug: {\n    type: String\n  },\n  position: {\n    type: Number,\n    optional: true\n  },\n  relatedTagIds: {\n    type: [String],\n    optional: true,\n    index: 1\n  },\n  isDeleted: {\n    type: Boolean,\n    defaultValue: false\n  },\n  isTopLevel: {\n    type: Boolean\n  },\n  shopId: {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Tag shopId\"\n  },\n  createdAt: {\n    type: Date,\n    autoValue: function () {\n      if (this.isInsert) {\n        return new Date;\n      } else if (this.isUpsert) {\n        return {\n          $setOnInsert: new Date\n        };\n      }\n    }\n  },\n  updatedAt: {\n    type: Date\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { shopIdAutoValue } from \"./helpers\";\n\nconst sharedFields = {\n  shopId: {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Template ShopId\"\n  },\n  name: {\n    type: String\n  },\n  priority: {\n    type: Number,\n    optional: true,\n    defaultValue: 1\n  },\n  enabled: {\n    type: Boolean,\n    defaultValue: true\n  },\n  route: {\n    type: String,\n    optional: true\n  },\n  // permissions: {\n  //   type: [String],\n  //   optional: true\n  // },\n  // audience: {\n  //   type: [String],\n  //   optional: true\n  // },\n  type: {\n    type: String,\n    defaultValue: \"template\"\n  },\n\n  provides: {\n    type: String,\n    defaultValue: \"template\"\n  },\n  block: {\n    type: String,\n    optional: true\n  },\n  defaultData: {\n    type: Object,\n    blackbox: true,\n    optional: true\n  },\n  parser: {\n    type: String\n  },\n  language: {\n    type: String,\n    optional: true,\n    defaultValue: \"en\"\n  },\n  source: {\n    type: String,\n    optional: true\n  }\n};\n\nexport const ReactLayout = new SimpleSchema({\n  ...sharedFields,\n  templateFor: {\n    type: [String],\n    optional: true\n  },\n  template: {\n    type: [Object],\n    optional: true,\n    blackbox: true\n  }\n});\n\nexport const Template = new SimpleSchema({\n  ...sharedFields,\n  template: {\n    type: String,\n    optional: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\n/**\n * @summary Themes Schema\n * Schema for themes used in reaction-layout\n */\n\nexport const Themes = new SimpleSchema({\n  name: {\n    type: String,\n    index: true\n  },\n\n  author: {\n    type: String,\n    optional: true\n  },\n\n  layout: {\n    type: String,\n    optional: true,\n    defaultValue: \"coreLayout\"\n  },\n\n  url: {\n    type: String,\n    optional: true\n  },\n\n  components: {\n    type: [Object],\n    optional: true,\n    blackbox: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\nimport { shopIdAutoValue } from \"./helpers\";\n\n/*\n* translations schema\n* mostly just a blackbox for now\n* someday maybe we'll validate the entire schema\n* since ui editing for these values are likely\n*/\n\nexport const Translation = new SimpleSchema({\n  shopId: {\n    type: String,\n    index: 1,\n    autoValue: shopIdAutoValue,\n    label: \"Translation ShopId\"\n  },\n  language: {\n    type: String\n  },\n  i18n: {\n    type: String,\n    index: 1\n  },\n  ns: {\n    type: String,\n    label: \"Namespace\"\n  },\n  translation: {\n    type: Object,\n    blackbox: true\n  }\n});\n","import { SimpleSchema } from \"meteor/aldeed:simple-schema\";\n\n/**\n * workflow schema for attaching to collection where\n * PackageWorkflow is controlling view flow\n * Shop defaultWorkflow is defined in Shop\n */\n\nexport const Workflow = new SimpleSchema({\n  status: {\n    type: String,\n    defaultValue: \"new\",\n    index: 1\n  },\n  workflow: {\n    type: [String],\n    optional: true\n  }\n});\n","import accounting from \"accounting-js\";\n\n/**\n * getSummary\n * @summary iterates over cart items with computations\n * @param {Array} items - cart.items array\n * @param {Array} prop - path to item property represented by array\n * @param {Array} [prop2] - path to another item property represented by array\n * @return {Number} - computations result\n */\nfunction getSummary(items, prop, prop2) {\n  try {\n    if (Array.isArray(items)) {\n      return items.reduce((sum, item) => {\n        if (prop2) {\n          // S + a * b, where b could be b1 or b2\n          return sum + item[prop[0]] * (prop2.length === 1 ? item[prop2[0]] :\n            item[prop2[0]][prop2[1]]);\n        }\n        // S + b, where b could be b1 or b2\n        return sum + (prop.length === 1 ? item[prop[0]] :\n          item[prop[0]][prop[1]]);\n      }, 0);\n    }\n  } catch (e) {\n    // If data not prepared we should send a number to avoid exception with\n    // `toFixed`. This could happens if user stuck on `completed` checkout stage\n    // by some reason.\n    return 0;\n  }\n  return 0;\n}\n\n/**\n * Reaction transform collections\n *\n * transform methods used to return cart calculated values\n * cartCount, cartSubTotal, cartShipping, cartTaxes, cartTotal\n * are calculated by a transformation on the collection\n * and are available to use in template as cart.xxx\n * in template: {{cart.cartCount}}\n * in code: Cart.findOne().cartTotal()\n */\nexport const cartTransform = {\n  cartCount() {\n    return getSummary(this.items, [\"quantity\"]);\n  },\n  cartShipping() {\n    // loop through the cart.shipping, sum shipments.\n    const rate = getSummary(this.shipping, [\"shipmentMethod\", \"rate\"]);\n    const handling = getSummary(this.shipping, [\"shipmentMethod\", \"handling\"]);\n    const shipping = handling + rate || 0;\n    return accounting.toFixed(shipping, 2);\n  },\n  cartSubTotal() {\n    const subTotal = getSummary(this.items, [\"quantity\"], [\"variants\", \"price\"]);\n    return accounting.toFixed(subTotal, 2);\n  },\n  cartTaxes() {\n    // taxes are calculated in a Cart.after.update hooks\n    // the tax value stored with the cart is the effective tax rate\n    // calculated by line items\n    // in the imports/core/taxes plugin\n    const tax = this.tax || 0;\n    const subTotal = parseFloat(this.cartSubTotal());\n    const taxTotal = subTotal * tax;\n    return accounting.toFixed(taxTotal, 2);\n  },\n  cartDiscounts() {\n    const discount = this.discount || 0;\n    return accounting.toFixed(discount, 2);\n  },\n  cartTotal() {\n    const subTotal = parseFloat(this.cartSubTotal());\n    const shipping = parseFloat(this.cartShipping());\n    const taxes = parseFloat(this.cartTaxes());\n    const discount = parseFloat(this.cartDiscounts());\n    const discountTotal = Math.max(0, subTotal - discount);\n    const total = discountTotal + shipping + taxes;\n    return accounting.toFixed(total, 2);\n  }\n};\n","import accounting from \"accounting-js\";\n\n\n// TODO: This is a duplicate of the cart transform with just the names changed.\n// This should be factored to be just one file for both\n\n/**\n * getSummary\n * @summary iterates over order items with computations\n * @param {Array} items - order.items array\n * @param {Array} prop - path to item property represented by array\n * @param {Array} [prop2] - path to another item property represented by array\n * @return {Number} - computations result\n */\nfunction getSummary(items, prop, prop2) {\n  try {\n    if (Array.isArray(items)) {\n      return items.reduce((sum, item) => {\n        if (prop2) {\n          // S + a * b, where b could be b1 or b2\n          return sum + item[prop[0]] * (prop2.length === 1 ? item[prop2[0]] :\n            item[prop2[0]][prop2[1]]);\n        }\n        // S + b, where b could be b1 or b2\n        return sum + (prop.length === 1 ? item[prop[0]] :\n          item[prop[0]][prop[1]]);\n      }, 0);\n    }\n  } catch (e) {\n    // If data not prepared we should send a number to avoid exception with\n    // `toFixed`. This could happens if user stuck on `completed` checkout stage\n    // by some reason.\n    return 0;\n  }\n  return 0;\n}\n\n/**\n * Reaction transform collections\n *\n * transform methods used to return order calculated values\n * orderCount, orderSubTotal, orderShipping, orderTaxes, orderTotal\n * are calculated by a transformation on the collection\n * and are available to use in template as order.xxx\n * in template: {{order.orderCount}}\n * in code: order.findOne().orderTotal()\n */\nexport const orderTransform = {\n  orderCount() {\n    return getSummary(this.items, [\"quantity\"]);\n  },\n  orderShipping() {\n    // loop through the order.shipping, sum shipments.\n    const rate = getSummary(this.shipping, [\"shipmentMethod\", \"rate\"]);\n    const handling = getSummary(this.shipping, [\"shipmentMethod\", \"handling\"]);\n    const shipping = handling + rate || 0;\n    return accounting.toFixed(shipping, 2);\n  },\n  orderSubTotal() {\n    const subTotal = getSummary(this.items, [\"quantity\"], [\"variants\", \"price\"]);\n    return accounting.toFixed(subTotal, 2);\n  },\n  orderTaxes() {\n    // taxes are calculated in a order.after.update hooks\n    // the tax value stored with the order is the effective tax rate\n    // calculated by line items\n    // in the imports/core/taxes plugin\n    const tax = this.tax || 0;\n    const subTotal = parseFloat(this.orderSubTotal());\n    const taxTotal = subTotal * tax;\n    return accounting.toFixed(taxTotal, 2);\n  },\n  orderDiscounts() {\n    const discount = this.discount || 0;\n    return accounting.toFixed(discount, 2);\n  },\n  orderTotal() {\n    const subTotal = parseFloat(this.orderSubTotal());\n    const shipping = parseFloat(this.orderShipping());\n    const taxes = parseFloat(this.orderTaxes());\n    const discount = parseFloat(this.orderDiscounts());\n    const discountTotal = Math.max(0, subTotal - discount);\n    const total = discountTotal + shipping + taxes;\n    return accounting.toFixed(total, 2);\n  },\n  itemCount() {\n    let count = 0;\n    if (Array.isArray(this.items)) {\n      for (const item of this.items) {\n        count += item.quantity;\n      }\n    }\n    return count;\n  }\n};\n\n","\n/**\n * core collectionsFS configurations\n */\nFS.HTTP.setBaseUrl(\"/assets\");\nFS.HTTP.setHeadersForGet([\n  [\"Cache-Control\", \"public, max-age=31536000\"]\n]);\n\n/**\n * Define CollectionFS collection\n * See: https://github.com/CollectionFS/Meteor-CollectionFS\n * chunkSize: 1024*1024*2; <- CFS default // 256k is default GridFS chunk size, but performs terribly\n */\n\nexport const Media = new FS.Collection(\"Media\", {\n  stores: [\n    new FS.Store.GridFS(\"image\", {\n      chunkSize: 1 * 1024 * 1024\n    }), new FS.Store.GridFS(\"large\", {\n      chunkSize: 1 * 1024 * 1024,\n      transformWrite: function (fileObj, readStream, writeStream) {\n        if (this.gm.isAvailable) {\n          this.gm(readStream, fileObj.name).resize(\"1000\", \"1000\").stream()\n            .pipe(writeStream);\n        } else {\n          readStream.pipe(writeStream);\n        }\n      }\n    }), new FS.Store.GridFS(\"medium\", {\n      chunkSize: 1 * 1024 * 1024,\n      transformWrite: function (fileObj, readStream, writeStream) {\n        if (this.gm.isAvailable) {\n          this.gm(readStream, fileObj.name).resize(\"600\", \"600\").stream().pipe(\n            writeStream);\n        } else {\n          readStream.pipe(writeStream);\n        }\n      }\n    }), new FS.Store.GridFS(\"small\", {\n      chunkSize: 1 * 1024 * 1024,\n      transformWrite: function (fileObj, readStream, writeStream) {\n        if (this.gm.isAvailable) {\n          this.gm(readStream).resize(\"235\", \"235\" + \"^\").gravity(\"Center\")\n            .extent(\"235\", \"235\").stream(\"PNG\").pipe(writeStream);\n        } else {\n          readStream.pipe(writeStream);\n        }\n      }\n    }), new FS.Store.GridFS(\"thumbnail\", {\n      chunkSize: 1 * 1024 * 1024,\n      transformWrite: function (fileObj, readStream, writeStream) {\n        if (this.gm.isAvailable) {\n          this.gm(readStream).resize(\"100\", \"100\" + \"^\").gravity(\"Center\")\n            .extent(\"100\", \"100\").stream(\"PNG\").pipe(writeStream);\n        } else {\n          readStream.pipe(writeStream);\n        }\n      }\n    })\n  ],\n  filter: {\n    allow: {\n      contentTypes: [\"image/*\"]\n    }\n  }\n});\n","import _ from \"lodash\";\nimport { Mongo } from \"meteor/mongo\";\nimport * as Schemas from \"./schemas\";\nimport { cartTransform } from \"./transform/cart\";\nimport { orderTransform } from \"./transform/order\";\n\n/**\n*\n* Reaction Core Collections\n*\n*/\n\n/**\n * Accounts Collection\n */\nexport const Accounts = new Mongo.Collection(\"Accounts\");\n\nAccounts.attachSchema(Schemas.Accounts);\n\n\n/*\n *  AnalyticsEvents Collection\n *  Store the Analytics Events in a Collection\n */\nexport const AnalyticsEvents = new Mongo.Collection(\"AnalyticsEvents\");\n\nAnalyticsEvents.attachSchema(Schemas.AnalyticsEvents);\n\n\n/**\n *  Assets Collection\n *  Store file asset paths or contents in a Collection\n */\nexport const Assets = new Mongo.Collection(\"Assets\");\n\nAssets.attachSchema(Schemas.Assets);\n\n\n/**\n* Cart Collection\n*/\nexport const Cart = new Mongo.Collection(\"Cart\", {\n  transform(cart) {\n    const newInstance = Object.create(cartTransform);\n    return _.extend(newInstance, cart);\n  }\n});\n\nCart.attachSchema(Schemas.Cart);\n\n\n/**\n* Emails Collection\n*/\nexport const Emails = new Mongo.Collection(\"Emails\");\n\nEmails.attachSchema(Schemas.Emails);\n\n\n/**\n* Inventory Collection\n*/\nexport const Inventory = new Mongo.Collection(\"Inventory\");\n\nInventory.attachSchema(Schemas.Inventory);\n\n\n/**\n* Orders Collection\n*/\nexport const Orders = new Mongo.Collection(\"Orders\", {\n  transform(order) {\n    const newInstance = Object.create(orderTransform);\n    return _.extend(newInstance, order);\n  }\n});\n\nOrders.attachSchema([\n  Schemas.Cart,\n  Schemas.Order,\n  Schemas.OrderItem\n]);\n\n\n/**\n* Packages Collection\n*/\nexport const Packages = new Mongo.Collection(\"Packages\");\n\nPackages.attachSchema(Schemas.PackageConfig);\n\n\n/**\n* Products Collection\n*/\nexport const Products = new Mongo.Collection(\"Products\");\n\nProducts.attachSchema(Schemas.Product, { selector: { type: \"simple\" } });\nProducts.attachSchema(Schemas.ProductVariant, { selector: { type: \"variant\" } });\n\n/**\n* Revisions Collection\n*/\nexport const Revisions = new Mongo.Collection(\"Revisions\");\n\nRevisions.attachSchema(Schemas.Revisions);\n\n/**\n* Shipping Collection\n*/\nexport const Shipping = new Mongo.Collection(\"Shipping\");\n\nShipping.attachSchema(Schemas.Shipping);\n\n\n/**\n* Shops Collection\n*/\nexport const Shops = new Mongo.Collection(\"Shops\");\n\nShops.attachSchema(Schemas.Shop);\n\n\n/**\n* Tags Collection\n*/\nexport const Tags = new Mongo.Collection(\"Tags\");\n\nTags.attachSchema(Schemas.Tag);\n\n\n/**\n* Templates Collection\n*/\nexport const Templates = new Mongo.Collection(\"Templates\");\n\nTemplates.attachSchema(Schemas.Templates, { selector: { type: \"template\" } });\nTemplates.attachSchema(Schemas.ReactLayout, { selector: { type: \"react\" } });\n\n/**\n* Themes Collection\n*/\nexport const Themes = new Mongo.Collection(\"Themes\");\n\nThemes.attachSchema(Schemas.Themes);\n\n\n/**\n* Translations Collection\n*/\nexport const Translations = new Mongo.Collection(\"Translations\");\n\nTranslations.attachSchema(Schemas.Translation);\n\n/**\n * Notifications Collection\n */\nexport const Notifications = new Mongo.Collection(\"Notifications\");\n\nNotifications.attachSchema(Schemas.Notification);\n\n\n/**\n * Sms Collection\n */\nexport const Sms = new Mongo.Collection(\"Sms\");\n\nSms.attachSchema(Schemas.Sms);\n\n\n/**\n * Logs Collection\n */\nexport const Logs = new Mongo.Collection(\"Logs\");\n\nLogs.attachSchema(Schemas.Logs);\n","export * from \"./collections\";\nexport * from \"./search\";\nexport { Media } from \"./collectionFS\";\nexport { Jobs } from \"./jobs\";\n","import { JobCollection } from \"meteor/vsivsi:job-collection\";\n\n/**\n * Jobs Collection\n */\nexport const Jobs = new JobCollection(\"Jobs\", {\n  noCollectionSuffix: true\n});\n","import { Mongo } from \"meteor/mongo\";\n\nexport const ProductSearch = new Mongo.Collection(\"ProductSearch\");\nexport const OrderSearch = new Mongo.Collection(\"OrderSearch\");\nexport const AccountSearch = new Mongo.Collection(\"AccountSearch\");\n","\n// Template literal for html strings.\nexport function html(strings) {\n  return strings.raw[0];\n}\n","export const getTagIds = (state) => {\n  if (Array.isArray(state.tags)) {\n    return state.tags.map(tag => tag._id);\n  }\n\n  return [];\n};\n","export const getVariantIds = (variants) => Array.isArray(variants) && variants.map(variant => variant._id);\n"]}